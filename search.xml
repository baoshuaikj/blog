<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>01_Error-Nginx 反代后端接口报错</title>
      <link href="/blog/posts/5552.html"/>
      <url>/blog/posts/5552.html</url>
      
        <content type="html"><![CDATA[<p>摘要：<code>Error</code> + <code>Nginx</code> + <code>readv() failed (104: Connection reset by peer)</code><span id="more"></span></p><h1 id="01-Error-Nginx反代后端接口报错">01_Error-Nginx反代后端接口报错</h1><h2 id="一-前言">一. 前言</h2><blockquote><p>NGINX 反向代理 后端接口时报错：<code>[error] ...: *1918 readv() failed (104: Connection reset by peer) while reading upstream ...</code></p><p>控制台报错信息</p><p><img src="https://image.cpen.top/image/image-20220917210427284.png" alt="image-20220917210427284"></p><p>NGINX错误日志</p><p><img src="https://image.cpen.top/image/image-20220917210540055.png" alt="image-20220917210540055"></p></blockquote><h2 id="二-解决办法">二. 解决办法</h2><blockquote><p><strong>参考文章</strong> <a href="http://blog.51yip.com/apachenginx/2203.html">http://blog.51yip.com/apachenginx/2203.html</a></p><p>查看nginx error错误，发现上传接口报以下错：</p><p><code>2019/10/10 19:58:25 [error] 299784#0: \*5967188 readv() failed (104: Connection reset by peer) while reading upstream, client: 59.34.155.7, server: xxxxxxxx, request: &quot;POST /stream/tracking/file HTTP/1.1&quot;, upstream: &quot;http://xxxxxxxx/stream/tracking/file&quot;, host: &quot;xxxxxxxx&quot;</code></p><p>这种错误日志不多，第一感觉就是上传文件过大，传输时间过长，然后连接被中断。</p><p><code>当使用nginx作为反向代理时，为了支持长连接，需要做到两点：</code></p><p><code>从client到nginx的连接是长连接，对于客户端来说，nginx长连接是默认开启的。 从nginx到server的连接是长连接，需要自己开启</code></p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">upstream</span> bigdata &#123;  </span><br><span class="line">    <span class="attribute">server</span> <span class="number">10</span>.<span class="number">0</span>.<span class="number">20</span>.xx:<span class="number">18018</span>;  </span><br><span class="line">    <span class="attribute">server</span> <span class="number">10</span>.<span class="number">0</span>.<span class="number">20</span>.xx:<span class="number">18018</span>;  </span><br><span class="line">    <span class="attribute">server</span> <span class="number">10</span>.<span class="number">0</span>.<span class="number">20</span>.xx:<span class="number">18018</span>;  </span><br><span class="line">    <span class="attribute">server</span> <span class="number">10</span>.<span class="number">0</span>.<span class="number">20</span>.xx:<span class="number">18018</span>;  </span><br><span class="line">    <span class="attribute">keepalive</span> <span class="number">100</span>;   //根据qps来调整  </span><br><span class="line">&#125;    </span><br><span class="line">  </span><br><span class="line"><span class="section">location</span> <span class="regexp">~ /</span> &#123;  </span><br><span class="line">。。。。。。。。。省略。。。。。。。。。。。。。  </span><br><span class="line">    <span class="attribute">proxy_connect_timeout</span>      <span class="number">120</span>;   //加大120  </span><br><span class="line">    <span class="attribute">proxy_send_timeout</span>         <span class="number">120</span>;   //加大120  </span><br><span class="line">    <span class="attribute">proxy_read_timeout</span>         <span class="number">120</span>;   //加大120  </span><br><span class="line">    <span class="attribute">proxy_http_version</span> <span class="number">1</span>.<span class="number">1</span>;    //开启后端，长连接  </span><br><span class="line">    <span class="attribute">proxy_set_header</span> Connection <span class="string">&quot;&quot;</span>;  //开启后端，长连接  </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure><p>注意：<code>keepalive指定的数值是Nginx每个worker连接后端的最大长连接数，而不是整个Nginx的.</code></p><p>作者:海底苍鹰</p><p>地址:<a href="http://blog.51yip.com/apachenginx/2203.html">http://blog.51yip.com/apachenginx/2203.html</a></p></blockquote><h2 id="三-个人配置记录">三. 个人配置记录</h2><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="attribute">cat</span> cpen.top.conf</span><br><span class="line">server &#123;</span><br><span class="line">    <span class="attribute">listen</span> xxx ssl;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">server_name</span> xxx.xxx;</span><br><span class="line"></span><br><span class="line">    <span class="section">location</span> / &#123;</span><br><span class="line">        <span class="attribute">proxy_pass</span> http://127.0.0.1:xxx;</span><br><span class="line">        <span class="attribute">proxy_connect_timeout</span>      <span class="number">120</span>;   <span class="comment"># 加大120</span></span><br><span class="line">        <span class="attribute">proxy_send_timeout</span>         <span class="number">120</span>;   <span class="comment"># 加大120</span></span><br><span class="line">        <span class="attribute">proxy_read_timeout</span>         <span class="number">120</span>;   <span class="comment"># 加大120</span></span><br><span class="line">        <span class="attribute">proxy_http_version</span> <span class="number">1</span>.<span class="number">1</span>;           <span class="comment"># 开启后端，长连接</span></span><br><span class="line">        <span class="attribute">proxy_set_header</span> Connection <span class="string">&quot;&quot;</span>;   <span class="comment"># 开启后端，长连接</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">ssl_certificate</span>     /usr/local/nginx/ssl/xxx.pem;</span><br><span class="line">    <span class="attribute">ssl_certificate_key</span> /usr/local/nginx/ssl/xxx.key;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">access_log</span> /data/service_logs/nginx/xxx.log misc;</span><br><span class="line">    <span class="attribute">error_log</span>  /data/service_logs/nginx/xxx.log;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Error </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
            <tag> Troubleshooting </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>01_PHP-CentOS8.2 编译安装 PHP8.1.10</title>
      <link href="/blog/posts/63259.html"/>
      <url>/blog/posts/63259.html</url>
      
        <content type="html"><![CDATA[<p>摘要：<code>PHP</code> + <code>编译安装</code> + <code>图床迁移</code><span id="more"></span></p><h1 id="01-PHP-CentOS8-2-编译安装-PHP8-1-10">01_PHP-CentOS8.2 编译安装 PHP8.1.10</h1><h2 id="一-前言">一. 前言</h2><p>因 <a href="https://www.jsdelivr.com/">https://www.jsdelivr.com/</a> 失效，博主打算将 GitHub 托管的图床备份到其他平台。</p><p>网上看到 <a href="https://github.com/lsky-org/lsky-pro">兰空图床</a> 萌生了自建图床的念头，搭建环境要求 PHP &gt;= 8.0.2，于是打算编译安装 PHP。</p><p>最终因服务器配置太低（1核2G）编译失败而放弃。转而投身之前已经搭建好环境的又拍云平台。</p><p>博文内容：<code>PHP-CentOS8.2 编译安装 PHP8.1.10</code> + <code>编写GitHub图床迁移至又拍云的脚本（ftp）</code> + <code>编写批量修改文章内容的脚本</code></p><h2 id="二-正文">二. 正文</h2><h3 id="2-1❤-CentOS8-2-编译安装-PHP8-1-10">2.1❤ CentOS8.2 编译安装 PHP8.1.10</h3><p><strong>2.1.1</strong> PHP8 和 oniguruma 源码下载并上传至服务器 /mnt 目录</p><p><a href="https://www.php.net/distributions/php-8.1.10.tar.gz">https://www.php.net/distributions/php-8.1.10.tar.gz</a></p><p><a href="https://codeload.github.com/kkos/oniguruma/tar.gz/refs/tags/v6.9.4">https://codeload.github.com/kkos/oniguruma/tar.gz/refs/tags/v6.9.4</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 解压</span></span><br><span class="line">tar xzf oniguruma-6.9.4.tar.gz</span><br><span class="line">tar xzf php-8.1.10.tar.gz</span><br></pre></td></tr></table></figure><p><strong>2.1.2</strong> 安装 PHP8 依赖包</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 2 安装 PHP8 依赖包</span></span><br><span class="line">yum -y install autoconf freetype gd libpng libpng-devel libjpeg libxml2 libxml2-devel zlib curl curl-devel net-snmp-devel libjpeg-devel php-ldap openldap-devel openldap-clients freetype-devel gmp-devel libzip libzip-devel sqlite-devel automake libtool</span><br></pre></td></tr></table></figure><p><strong>2.1.3</strong> 编译 PHP8 依赖包 oniguruma</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 3.1 生成 configure</span></span><br><span class="line"><span class="built_in">cd</span> /mnt/oniguruma-6.9.4</span><br><span class="line">./autogen.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.2 生成编译配置文件</span></span><br><span class="line">./configure --prefix=/usr</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.3 编译并安装</span></span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><p><strong>2.1.4</strong> 编译 PHP8 主包</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 4.1 生成编译配置文件</span></span><br><span class="line"><span class="built_in">cd</span> /mnt/php-8.1.10</span><br><span class="line">./configure --prefix=/usr/local/php --with-config-file-path=/usr/local/php/etc --enable-fpm --with-fpm-user=nginx --with-fpm-group=nginx --enable-mysqlnd --with-mysqli --with-pdo-mysql --enable-opcache --with-pcre-jit --enable-gd --with-jpeg --with-freetype --with-gettext --with-curl --with-openssl --enable-sockets --enable-mbstring --enable-xml --with-zip --with-zlib --with-snmp --with-mhash --enable-ftp --enable-bcmath --enable-soap --enable-shmop --enable-sysvsem --enable-pcntl --with-gmp</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.2 编译并安装</span></span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><p>因为配置过低，编译失败。</p><p><strong>2.1.5</strong> 编译安装后目录</p><p>/usr/local/php</p><p><strong>参考</strong></p><p><a href="https://www.bilibili.com/read/cv9248283/">https://www.bilibili.com/read/cv9248283/</a></p><p><a href="https://www.bilibili.com/video/BV13U4y1T7VS">https://www.bilibili.com/video/BV13U4y1T7VS</a></p><h3 id="2-2-基于-FTP-将GitHub图床迁移至又拍云">2.2 基于 FTP 将GitHub图床迁移至又拍云</h3><p><strong>参考</strong></p><p><a href="https://techs.upyun.com/videos/cdnpage/creating_storage.html">官方视频教程 - 创建存储服务和使用 FTP 上传</a>可以得到用户名和密码</p><p>默认已经完成了又拍云云存储服务的申请 + 绑定自定义域名 <a href="https://help.upyun.com/knowledge-base/quick_start/">https://help.upyun.com/knowledge-base/quick_start/</a></p><p><strong>2.2.1</strong> 编写 Python 脚本 实现批量</p><p>源码来自<a href="http://blog.csdn.net/ouyang_peng/article/details/79271113">http://blog.csdn.net/ouyang_peng/article/details/79271113</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> cmath <span class="keyword">import</span> log</span><br><span class="line"><span class="keyword">from</span> ftplib <span class="keyword">import</span> FTP</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyFTP</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        ftp自动下载、自动上传脚本，可以递归目录操作</span></span><br><span class="line"><span class="string">        作者：欧阳鹏</span></span><br><span class="line"><span class="string">        博客地址：http://blog.csdn.net/ouyang_peng/article/details/79271113</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, host, port=<span class="number">21</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot; 初始化 FTP 客户端</span></span><br><span class="line"><span class="string">        参数:</span></span><br><span class="line"><span class="string">                 host:ip地址</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">                 port:端口号</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="comment"># print(&quot;__init__()---&gt; host = %s ,port = %s&quot; % (host, port))</span></span><br><span class="line"></span><br><span class="line">        self.host = host</span><br><span class="line">        self.port = port</span><br><span class="line">        self.ftp = FTP()</span><br><span class="line">        <span class="comment"># 重新设置下编码方式</span></span><br><span class="line">        <span class="comment">#self.ftp.encoding = &#x27;gbk&#x27;</span></span><br><span class="line">        self.ftp.encoding = <span class="string">&#x27;utf8&#x27;</span></span><br><span class="line">        <span class="comment"># 获取脚本路径</span></span><br><span class="line">        path = os.path.dirname(os.path.realpath(__file__))</span><br><span class="line">        self.log_file = <span class="built_in">open</span>(path + <span class="string">&quot;/log.txt&quot;</span>, <span class="string">&quot;a&quot;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">        self.file_list = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">login</span>(<span class="params">self, username, password</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot; 初始化 FTP 客户端</span></span><br><span class="line"><span class="string">            参数:</span></span><br><span class="line"><span class="string">                  username: 用户名</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">                 password: 密码</span></span><br><span class="line"><span class="string">            &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            timeout = <span class="number">60</span></span><br><span class="line">            socket.setdefaulttimeout(timeout)</span><br><span class="line">            <span class="comment"># 0主动模式 1 #被动模式</span></span><br><span class="line">            self.ftp.set_pasv(<span class="literal">True</span>)</span><br><span class="line">            <span class="comment"># 打开调试级别2，显示详细信息</span></span><br><span class="line">            <span class="comment"># self.ftp.set_debuglevel(2)</span></span><br><span class="line"></span><br><span class="line">            self.debug_print(<span class="string">&#x27;开始尝试连接到 %s&#x27;</span> % self.host)</span><br><span class="line">            self.ftp.connect(self.host, self.port)</span><br><span class="line">            self.debug_print(<span class="string">&#x27;成功连接到 %s&#x27;</span> % self.host)</span><br><span class="line"></span><br><span class="line">            self.debug_print(<span class="string">&#x27;开始尝试登录到 %s&#x27;</span> % self.host)</span><br><span class="line">            self.ftp.login(username, password)</span><br><span class="line">            self.debug_print(<span class="string">&#x27;成功登录到 %s&#x27;</span> % self.host)</span><br><span class="line"></span><br><span class="line">            self.debug_print(self.ftp.welcome)</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> err:</span><br><span class="line">            self.deal_error(<span class="string">&quot;FTP 连接或登录失败 ，错误描述为：%s&quot;</span> % err)</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">is_same_size</span>(<span class="params">self, local_file, remote_file</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;判断远程文件和本地文件大小是否一致</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">           参数:</span></span><br><span class="line"><span class="string">             local_file: 本地文件</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">             remote_file: 远程文件</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            remote_file_size = self.ftp.size(remote_file)</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> err:</span><br><span class="line">            <span class="comment"># self.debug_print(&quot;is_same_size() 错误描述为：%s&quot; % err)</span></span><br><span class="line">            remote_file_size = -<span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            local_file_size = os.path.getsize(local_file)</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> err:</span><br><span class="line">            <span class="comment"># self.debug_print(&quot;is_same_size() 错误描述为：%s&quot; % err)</span></span><br><span class="line">            local_file_size = -<span class="number">1</span></span><br><span class="line"></span><br><span class="line">        self.debug_print(<span class="string">&#x27;local_file_size:%d  , remote_file_size:%d&#x27;</span> % (local_file_size, remote_file_size))</span><br><span class="line">        <span class="keyword">if</span> remote_file_size == local_file_size:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">download_file</span>(<span class="params">self, local_file, remote_file</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;从ftp下载文件</span></span><br><span class="line"><span class="string">            参数:</span></span><br><span class="line"><span class="string">                local_file: 本地文件</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">                remote_file: 远程文件</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        self.debug_print(<span class="string">&quot;download_file()---&gt; local_path = %s ,remote_path = %s&quot;</span> % (local_file, remote_file))</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> self.is_same_size(local_file, remote_file):</span><br><span class="line">            self.debug_print(<span class="string">&#x27;%s 文件大小相同，无需下载&#x27;</span> % local_file)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                self.debug_print(<span class="string">&#x27;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;下载文件 %s ... ...&#x27;</span> % local_file)</span><br><span class="line">                buf_size = <span class="number">1024</span></span><br><span class="line">                file_handler = <span class="built_in">open</span>(local_file, <span class="string">&#x27;wb&#x27;</span>)</span><br><span class="line">                self.ftp.retrbinary(<span class="string">&#x27;RETR %s&#x27;</span> % remote_file, file_handler.write, buf_size)</span><br><span class="line">                file_handler.close()</span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> err:</span><br><span class="line">                self.debug_print(<span class="string">&#x27;下载文件出错，出现异常：%s &#x27;</span> % err)</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">download_file_tree</span>(<span class="params">self, local_path, remote_path</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;从远程目录下载多个文件到本地目录</span></span><br><span class="line"><span class="string">                       参数:</span></span><br><span class="line"><span class="string">                         local_path: 本地路径</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">                         remote_path: 远程路径</span></span><br><span class="line"><span class="string">                &quot;&quot;&quot;</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;download_file_tree()---&gt;  local_path = %s ,remote_path = %s&quot;</span> % (local_path, remote_path))</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            self.ftp.cwd(remote_path)</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> err:</span><br><span class="line">            self.debug_print(<span class="string">&#x27;远程目录%s不存在，继续...&#x27;</span> % remote_path + <span class="string">&quot; ,具体错误描述为：%s&quot;</span> % err)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> os.path.isdir(local_path):</span><br><span class="line">            self.debug_print(<span class="string">&#x27;本地目录%s不存在，先创建本地目录&#x27;</span> % local_path)</span><br><span class="line">            os.makedirs(local_path)</span><br><span class="line"></span><br><span class="line">        self.debug_print(<span class="string">&#x27;切换至目录: %s&#x27;</span> % self.ftp.pwd())</span><br><span class="line"></span><br><span class="line">        self.file_list = []</span><br><span class="line">        <span class="comment"># 方法回调</span></span><br><span class="line">        self.ftp.<span class="built_in">dir</span>(self.get_file_list)</span><br><span class="line"></span><br><span class="line">        remote_names = self.file_list</span><br><span class="line">        self.debug_print(<span class="string">&#x27;远程目录 列表: %s&#x27;</span> % remote_names)</span><br><span class="line">        <span class="keyword">for</span> item <span class="keyword">in</span> remote_names:</span><br><span class="line">            file_type = item[<span class="number">0</span>]</span><br><span class="line">            file_name = item[<span class="number">1</span>]</span><br><span class="line">            local = os.path.join(local_path, file_name)</span><br><span class="line">            <span class="keyword">if</span> file_type == <span class="string">&#x27;d&#x27;</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;download_file_tree()---&gt; 下载目录： %s&quot;</span> % file_name)</span><br><span class="line">                self.download_file_tree(local, file_name)</span><br><span class="line">            <span class="keyword">elif</span> file_type == <span class="string">&#x27;-&#x27;</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;download_file()---&gt; 下载文件： %s&quot;</span> % file_name)</span><br><span class="line">                self.download_file(local, file_name)</span><br><span class="line">        self.ftp.cwd(<span class="string">&quot;..&quot;</span>)</span><br><span class="line">        self.debug_print(<span class="string">&#x27;返回上层目录 %s&#x27;</span> % self.ftp.pwd())</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">upload_file</span>(<span class="params">self, local_file, remote_file</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;从本地上传文件到ftp</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">           参数:</span></span><br><span class="line"><span class="string">             local_path: 本地文件</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">             remote_path: 远程文件</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> os.path.isfile(local_file):</span><br><span class="line">            self.debug_print(<span class="string">&#x27;%s 不存在&#x27;</span> % local_file)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> self.is_same_size(local_file, remote_file):</span><br><span class="line">            self.debug_print(<span class="string">&#x27;跳过相等的文件: %s&#x27;</span> % local_file)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        buf_size = <span class="number">1024</span></span><br><span class="line">        file_handler = <span class="built_in">open</span>(local_file, <span class="string">&#x27;rb&#x27;</span>)</span><br><span class="line">        self.ftp.storbinary(<span class="string">&#x27;STOR %s&#x27;</span> % remote_file, file_handler, buf_size)</span><br><span class="line">        file_handler.close()</span><br><span class="line">        self.debug_print(<span class="string">&#x27;上传: %s&#x27;</span> % local_file + <span class="string">&quot;成功!&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">upload_file_tree</span>(<span class="params">self, local_path, remote_path</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;从本地上传目录下多个文件到ftp</span></span><br><span class="line"><span class="string">           参数:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">             local_path: 本地路径</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">             remote_path: 远程路径</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> os.path.isdir(local_path):</span><br><span class="line">            self.debug_print(<span class="string">&#x27;本地目录 %s 不存在&#x27;</span> % local_path)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        self.ftp.cwd(remote_path)</span><br><span class="line">        self.debug_print(<span class="string">&#x27;切换至远程目录: %s&#x27;</span> % self.ftp.pwd())</span><br><span class="line"></span><br><span class="line">        local_name_list = os.listdir(local_path)</span><br><span class="line">        <span class="keyword">for</span> local_name <span class="keyword">in</span> local_name_list:</span><br><span class="line">            src = os.path.join(local_path, local_name)</span><br><span class="line">            <span class="keyword">if</span> os.path.isdir(src):</span><br><span class="line">                <span class="keyword">try</span>:</span><br><span class="line">                    self.ftp.mkd(local_name)</span><br><span class="line">                <span class="keyword">except</span> Exception <span class="keyword">as</span> err:</span><br><span class="line">                    self.debug_print(<span class="string">&quot;目录已存在 %s ,具体错误描述为：%s&quot;</span> % (local_name, err))</span><br><span class="line">                self.debug_print(<span class="string">&quot;upload_file_tree()---&gt; 上传目录： %s&quot;</span> % local_name)</span><br><span class="line">                self.upload_file_tree(src, local_name)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                self.debug_print(<span class="string">&quot;upload_file_tree()---&gt; 上传文件： %s&quot;</span> % local_name)</span><br><span class="line">                self.upload_file(src, local_name)</span><br><span class="line">        self.ftp.cwd(<span class="string">&quot;..&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">close</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot; 退出ftp</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        self.debug_print(<span class="string">&quot;close()---&gt; FTP退出&quot;</span>)</span><br><span class="line">        self.ftp.quit()</span><br><span class="line">        self.log_file.close()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">debug_print</span>(<span class="params">self, s</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot; 打印日志</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        self.write_log(s)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">deal_error</span>(<span class="params">self, e</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot; 处理错误异常</span></span><br><span class="line"><span class="string">            参数：</span></span><br><span class="line"><span class="string">                e：异常</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        log_str = <span class="string">&#x27;发生错误: %s&#x27;</span> % e</span><br><span class="line">        self.write_log(log_str)</span><br><span class="line">        sys.exit()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">write_log</span>(<span class="params">self, log_str</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot; 记录日志</span></span><br><span class="line"><span class="string">            参数：</span></span><br><span class="line"><span class="string">                log_str：日志</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        time_now = time.localtime()</span><br><span class="line">        date_now = time.strftime(<span class="string">&#x27;%Y-%m-%d&#x27;</span>, time_now)</span><br><span class="line">        format_log_str = <span class="string">&quot;%s ---&gt; %s \n &quot;</span> % (date_now, log_str)</span><br><span class="line">        <span class="built_in">print</span>(format_log_str)</span><br><span class="line">        self.log_file.write(format_log_str)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_file_list</span>(<span class="params">self, line</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot; 获取文件列表</span></span><br><span class="line"><span class="string">            参数：</span></span><br><span class="line"><span class="string">                line：</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        file_arr = self.get_file_name(line)</span><br><span class="line">        <span class="comment"># 去除  . 和  ..</span></span><br><span class="line">        <span class="keyword">if</span> file_arr[<span class="number">1</span>] <span class="keyword">not</span> <span class="keyword">in</span> [<span class="string">&#x27;.&#x27;</span>, <span class="string">&#x27;..&#x27;</span>]:</span><br><span class="line">            self.file_list.append(file_arr)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_file_name</span>(<span class="params">self, line</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot; 获取文件名</span></span><br><span class="line"><span class="string">            参数：</span></span><br><span class="line"><span class="string">                line：</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        pos = line.rfind(<span class="string">&#x27;:&#x27;</span>)</span><br><span class="line">        <span class="keyword">while</span> (line[pos] != <span class="string">&#x27; &#x27;</span>):</span><br><span class="line">            pos += <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> (line[pos] == <span class="string">&#x27; &#x27;</span>):</span><br><span class="line">            pos += <span class="number">1</span></span><br><span class="line">        file_arr = [line[<span class="number">0</span>], line[pos:]]</span><br><span class="line">        <span class="keyword">return</span> file_arr</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="comment"># 清除日志</span></span><br><span class="line">    path = os.path.dirname(os.path.realpath(__file__))      <span class="comment"># 脚本路径</span></span><br><span class="line">    <span class="keyword">if</span> os.path.exists(path + <span class="string">&#x27;/log.txt&#x27;</span>):</span><br><span class="line">        log_file = path + <span class="string">&#x27;/log.txt &#x27;</span><span class="keyword">if</span> os.sep == <span class="string">&quot;/&quot;</span> <span class="keyword">else</span> path + <span class="string">&#x27;\\&#x27;</span> + <span class="string">&#x27;log.txt&#x27;</span></span><br><span class="line">        subprocess.Popen(<span class="string">f&#x27;rm -rf <span class="subst">&#123;log_file&#125;</span>&#x27;</span>, shell=<span class="literal">True</span>)</span><br><span class="line">        time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    my_ftp = MyFTP(<span class="string">&quot;xxx.ftp.upyun.com&quot;</span>)</span><br><span class="line">    my_ftp.login(<span class="string">&quot;xxx/xxx&quot;</span>, <span class="string">&quot;xxx&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 下载单个文件</span></span><br><span class="line">    <span class="comment"># my_ftp.download_file(&quot;E:/code_zone/image_bed/image/wallpaper/1.jpg&quot;, &quot;/image/wallpaper/1.jpg&quot;)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 上传单个文件</span></span><br><span class="line">    <span class="comment"># my_ftp.upload_file(&quot;G:/ftp_test/Release/XTCLauncher.apk&quot;, &quot;/App/AutoUpload/ouyangpeng/I12/Release/XTCLauncher.apk&quot;)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 下载目录</span></span><br><span class="line">    <span class="comment"># image.cpen.top/image/ → 本地 E:/code_zone/image_bed/image/    (本地图床目录, 又拍云路径)</span></span><br><span class="line">    <span class="keyword">if</span> os.sep == <span class="string">&quot;\\&quot;</span>:</span><br><span class="line">        my_ftp.download_file_tree(<span class="string">&quot;E:/code_zone/image_bed/image/&quot;</span>, <span class="string">&quot;/image/&quot;</span>)</span><br><span class="line">    <span class="keyword">elif</span> os.sep == <span class="string">&quot;/&quot;</span>:     <span class="comment"># aliyun</span></span><br><span class="line">        my_ftp.download_file_tree(<span class="string">&quot;/root/code_zone/image_bed/image/&quot;</span>, <span class="string">&quot;/image/&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 上传目录</span></span><br><span class="line">    <span class="comment"># 本地 E:/code_zone/image_bed/image/ → image.cpen.top/image/    (本地图床目录, 又拍云路径)</span></span><br><span class="line">    <span class="keyword">if</span> os.sep == <span class="string">&quot;\\&quot;</span>:      <span class="comment"># Windows</span></span><br><span class="line">        my_ftp.upload_file_tree(<span class="string">&quot;E:/code_zone/image_bed/image/&quot;</span>, <span class="string">&quot;/image/&quot;</span>)    </span><br><span class="line">        my_ftp.close()</span><br><span class="line">    <span class="keyword">elif</span> os.sep == <span class="string">&quot;/&quot;</span>:     <span class="comment"># aliyun</span></span><br><span class="line">        my_ftp.upload_file_tree(<span class="string">&quot;/root/code_zone/image_bed/image/&quot;</span>, <span class="string">&quot;/image/&quot;</span>)  </span><br><span class="line">        my_ftp.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 命令</span></span><br><span class="line"><span class="comment"># python E:/code_zone/tools/python-ftp/ftp.py</span></span><br><span class="line"><span class="comment"># python3 /root/code_zone/tools/python-ftp/ftp.py</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>2.2.2</strong> 说明</p><p><code>my_ftp.login(&quot;用户名xxx/xxx&quot;, &quot;密码xxx&quot;)</code> 参考 <a href="https://techs.upyun.com/videos/cdnpage/creating_storage.html">https://techs.upyun.com/videos/cdnpage/creating_storage.html</a></p><p>后期又将脚本传到云服务器上，通过计划任务，每15分钟同步，保持 GitHub 与又拍云图床一致</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># root @ CentOS in ~ [18:05:59]</span></span><br><span class="line">$ crontab -l</span><br><span class="line">*/15 * * * *  <span class="built_in">cd</span> /root/code_zone/image_bed/; git pull; python3 /root/code_zone/tools/python-ftp/ftp.py; bash git.sh</span><br></pre></td></tr></table></figure><p>迁移好图床后，博客中调用图片资源时 浏览器自动 http 跳 https，因为没有证书导致图片失效，于是又申请了 ssl 证书，上传至又拍云。</p><blockquote><p><img src="https://image.cpen.top/image/image-20220910180219146.png" alt="image-20220910180219146"></p></blockquote><h3 id="2-3-编写批量修改文章内容的脚本">2.3 编写批量修改文章内容的脚本</h3><p>源码参考<a href="https://blog.csdn.net/qq_38150250/article/details/118026219">https://blog.csdn.net/qq_38150250/article/details/118026219</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 源码参考  https://blog.csdn.net/qq_38150250/article/details/118026219</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="comment"># 文件查找 find . -name file_name -type f</span></span><br><span class="line"><span class="comment"># 查找函数：search_path 查找根路径 </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取文章路径</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">search</span>(<span class="params">search_path, search_result</span>):</span><br><span class="line">    <span class="comment"># 获取当前路径下地所有文件</span></span><br><span class="line">    all_file = os.listdir(search_path)</span><br><span class="line">    <span class="comment"># 对于每一个文件</span></span><br><span class="line">    <span class="keyword">for</span> each_file <span class="keyword">in</span> all_file:</span><br><span class="line">        <span class="comment"># 若文件为一个文件夹</span></span><br><span class="line">        <span class="keyword">if</span> os.path.isdir(search_path + each_file):</span><br><span class="line">            <span class="comment"># 递归查找</span></span><br><span class="line">            search(search_path + each_file + <span class="string">&#x27;/&#x27;</span>, search_result)</span><br><span class="line">        <span class="comment"># 如果是需要被查找的文件</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">if</span> re.findall(<span class="string">&#x27;.*\.md$&#x27;</span>, each_file) == [each_file]:</span><br><span class="line">            <span class="comment"># 输出路径</span></span><br><span class="line">                search_result.append(search_path + each_file)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 替换 sed -i &#x27;s/old_str/new_str/&#x27;</span></span><br><span class="line"><span class="comment"># 文本替换 replace_file_name 需要替换的文件路径，replace_old_str 要替换的字符，replace_new_str 替换的字符</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">replace</span>(<span class="params">replace_file_name, replace_old_str, replace_new_str</span>):</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(replace_file_name, <span class="string">&quot;r&quot;</span>, encoding = <span class="string">&quot;UTF-8&quot;</span>) <span class="keyword">as</span> f1: </span><br><span class="line">        content = f1.read()</span><br><span class="line">        f1.close()</span><br><span class="line">        t = content.replace(replace_old_str, replace_new_str)</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(replace_file_name, <span class="string">&quot;w&quot;</span>, encoding = <span class="string">&quot;UTF-8&quot;</span>) <span class="keyword">as</span> f2:</span><br><span class="line">        f2.write(t)</span><br><span class="line">    f2.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 需要改的地方</span></span><br><span class="line"><span class="comment">#path = &#x27;E:/code_zone/.history/20220831_blog/source/_posts/&#x27;</span></span><br><span class="line">path_list = [</span><br><span class="line">    <span class="string">&#x27;E:/code_zone/hexo-source/source/_posts/&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;E:/code_zone/hexo-source-butterfly/source/_posts/&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;E:/code_zone/hexo-source-diary/source/_posts/&#x27;</span>,</span><br><span class="line">]</span><br><span class="line">old_str = <span class="string">&#x27;https://image.cpen.top/image/&#x27;</span></span><br><span class="line">new_str = <span class="string">&#x27;https://image.cpen.top/image/&#x27;</span></span><br><span class="line">search_result = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    result = []                 <span class="comment"># 存放文件路径</span></span><br><span class="line">    <span class="comment"># 默认当前目录</span></span><br><span class="line">    <span class="comment"># path = os.getcwd()</span></span><br><span class="line">    <span class="keyword">for</span> path <span class="keyword">in</span> path_list:</span><br><span class="line">        search(path, result)    <span class="comment"># 获取文章路径</span></span><br><span class="line">    count = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> file_name <span class="keyword">in</span> result:</span><br><span class="line">        replace(file_name, old_str, new_str)</span><br><span class="line">        count += <span class="number">1</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;&#123;&#125; done  &#123;&#125;&quot;</span>.<span class="built_in">format</span>(file_name, count))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 命令</span></span><br><span class="line"><span class="comment"># python E:/code_zone/tools/python-replace/replace.py</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>2.3.1</strong> 说明</p><p><code>search</code>函数指定文件类型为 .md，可获得文章的完整路径；</p><p><code>path_list</code>列表存放需要修改的文章父目录路径，可以递归查询子目录；</p><p><code>old_str</code>需要替换的内容</p><p><code>new_str</code>新内容</p>]]></content>
      
      
      <categories>
          
          <category> PHP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PHP </tag>
            
            <tag> 脚本 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>10_Python-CSDN_内存管理</title>
      <link href="/blog/posts/62975.html"/>
      <url>/blog/posts/62975.html</url>
      
        <content type="html"><![CDATA[<p>摘要：以前在 <a href="https://blog.csdn.net/cpen_web/category_11089219.html"><code>CSDN 新星计划</code></a> 上写的文章，迁移至此。<span id="more"></span></p><h1 id="10-Python-内存管理">10_Python-内存管理</h1><p><a href="https://blog.csdn.net/cpen_web">博客🔗：https://blog.csdn.net/cpen_web</a></p><hr><blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Python内存管理三大块</span><br><span class="line">○ 引用计数</span><br><span class="line">○ 垃圾回收</span><br><span class="line">○ 内存池</span><br><span class="line">Python的内存管理以引用计数为主，垃圾回收为辅，还有个内存池</span><br></pre></td></tr></table></figure></blockquote><hr><h2 id="一-引用机制">一. 引用机制</h2><blockquote><p>● 引用机制</p><p>Python动态类型</p><p>○ ==对象==是储存在内存中的实体。</p><p>○ 我们在程序中写的==对象名==，只是指向这一对象的引用(reference)</p><p>○ ==引用和对象分离==，是动态类型的核心</p><p>○ 引用可以随时指向一个新的对象（内存地址会不一样）</p></blockquote><hr><h2 id="二-引用计数">二. 引用计数</h2><blockquote><p>● 引用计数</p><p><strong>在Python中，每个对象都有存有指向该对象的引用总数，即引用计数(reference count)</strong></p><p>引用计数器原理</p><p>○ 每个对象维护一个 ob_ref 字段，用来记录该对象当前被引用的次数 每当<strong>新的引用指向该对象</strong>时，它的<strong>引用计数ob_ref加1</strong></p><p>○ 每当该对象的<strong>引用失效时计数ob_ref减1</strong></p><p>○ <strong>一旦对象的引用计数为0</strong>，该<strong>对象可以被回收，对象占用的内存空间将被释放</strong>。 它的缺点是需要额外的空间维护引用计数，这个问题是其次的</p><p>○ 最主要的问题是它不能解决对象的“循环引用”</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="comment"># a = 1 , b = 1 ，1的引用计数为2（保存它被引用的次数）</span></span><br><span class="line"><span class="comment"># a = 2 , b = 3 , 1的引用计数为0（内存里面不需要它了，回收销毁，这块对象被回收了，对象占用的内存空间将被释放）</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">获取引用计数: getrefcount()</span><br><span class="line">○ 当使用某个引用作为参数，传递给getrefcount()时，参数实际上创建了一个临时的引用。因此，</span><br><span class="line">getrefcount()所得到的结果，会比期望的多<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="keyword">from</span> sys <span class="keyword">import</span> getrefcount<span class="comment"># 导入模块</span></span><br><span class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="built_in">print</span>(getrefcount(a))   <span class="comment"># 获取对象a的引用计数 ， 结果为2</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">增加引用计数</span><br><span class="line">○ 当一个对象A被另一个对象B引用时，A的引用计数将增加<span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">减少引用计数</span><br><span class="line">○ <span class="keyword">del</span>删除或重新引用时，引用计数会变化（<span class="keyword">del</span>只是删除引用）</span><br><span class="line"></span><br><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="keyword">from</span> sys <span class="keyword">import</span> getrefcount</span><br><span class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]<span class="comment"># 真实引用计数：1</span></span><br><span class="line">b = a<span class="comment"># 真实引用计数：2</span></span><br><span class="line">c = [a,a]<span class="comment"># 真实引用计数：4</span></span><br><span class="line"><span class="keyword">del</span> c[<span class="number">0</span>]            <span class="comment"># del删除引用引用计数 - 1 ； 真实引用计数: 3</span></span><br><span class="line"><span class="built_in">print</span>(c)            <span class="comment"># c 是列表对象输出为 [[1, 2, 3]]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(getrefcount(a))   <span class="comment"># 引用计数为4，真实引用计数为3</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">循环引用的情况</span><br><span class="line">x = []</span><br><span class="line">y = []</span><br><span class="line">x.append(y)  y.append(x)</span><br><span class="line">○ 对于上面相互引用的情况,如果不存在其他对象对他们的引用,这两个对象所占用的内存也还是无法回收,从而导致内存泄漏</span><br><span class="line"></span><br><span class="line"><span class="comment"># 示例1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = [<span class="number">1</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y = [<span class="number">2</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x.append(y)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x</span><br><span class="line">[<span class="number">1</span>, [<span class="number">2</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y.append(x)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y</span><br><span class="line">[<span class="number">2</span>, [<span class="number">1</span>, [...]]]<span class="comment"># 注：发生死循环</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 示例2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> sys <span class="keyword">import</span> getrefcount</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = [<span class="string">&quot;x&quot;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y = [<span class="string">&quot;y&quot;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>getrefcount(x)</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>getrefcount(y)</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x.append(y)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>getrefcount(x)</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>getrefcount(y)</span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y.append(x)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>getrefcount(x)</span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x</span><br><span class="line">[<span class="string">&#x27;x&#x27;</span>, [<span class="string">&#x27;y&#x27;</span>, [...]]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y</span><br><span class="line">[<span class="string">&#x27;y&#x27;</span>, [<span class="string">&#x27;x&#x27;</span>, [...]]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">del</span> x</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y</span><br><span class="line">[<span class="string">&#x27;y&#x27;</span>, [<span class="string">&#x27;x&#x27;</span>, [...]]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">del</span> y<span class="comment"># del x;del y引用删除，这块内存区域获取不到了</span></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">引用计数机制的优点：</span><br><span class="line">○ 简单</span><br><span class="line">○ 实时性</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">引用计数机制的缺点：</span><br><span class="line">○ 维护引用计数消耗资源</span><br><span class="line">○ 循环引用时，无法回收</span><br></pre></td></tr></table></figure></blockquote><hr><h2 id="三-垃圾回收">三. 垃圾回收</h2><blockquote><p><strong>● 垃圾回收</strong></p><p><strong>回收原则</strong></p><p>○ 当Python的某个对象的引用计数降为0时，==可以==被垃圾回收</p><p><strong>gc机制</strong></p><p>○ GC作为现代编程语言的自动内存管理机制，专注于两件事</p><p>○ 找到内存中无用的垃圾资源</p><p>○ 清除这些垃圾并把内存让出来给其他对象使用</p><p>GC彻底把程序员从资源管理的重担中解放出来，让他们有更多的时间放在业务逻辑上。但这并不意味着码农就可以不去了解GC，毕竟多了解GC知识还是有利于我们写出更健壮的代码</p><p><strong>效率问题</strong></p><p>○ 垃圾回收时，Python不能进行其它的任务。频繁的垃圾回收将大大降低Python的工作效率</p><p>○ 当Python运行时，会记录其中分配对象(object allocation)和取消分配对象(object deallocation)的次数。当两者的差值高于某个阈值时，垃圾回收才会启动</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> gc</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(gc.get_threshold())</span><br><span class="line">(<span class="number">700</span>, <span class="number">10</span>, <span class="number">10</span>)<span class="comment"># 注：默认值</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">del</span> x</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">del</span> y</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>gc.collect()</span><br><span class="line"><span class="number">2</span><span class="comment"># 删除了2个循环引用</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">&quot;x1 xx&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="string">&quot;x1 xx&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>gc.collect()</span><br><span class="line"><span class="number">0</span></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">三种情况触发垃圾回收</span><br><span class="line">○ 调用gc.collect()</span><br><span class="line">○ GC达到阀值时</span><br><span class="line">○ 程序退出时</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">分代(generation)回收</span><br><span class="line">这一策略的基本假设是：存活时间越久的对象，越不可能在后面的程序中变成垃圾</span><br><span class="line">○ Python将所有的对象分为0，1，2三代</span><br><span class="line">○ 所有的新建对象都是0代对象</span><br><span class="line">○ 当某一代对象经历过垃圾回收，依然存活，那么它就被归入下一代对象</span><br><span class="line">○ 垃圾回收启动时，一定会扫描所有的0代对象</span><br><span class="line">○ 如果0代经过一定次数垃圾回收，那么就启动对0代和1代的扫描清理</span><br><span class="line">○ 当1代也经历了一定次数的垃圾回收后，那么会启动对0，1，2，即对所有对象进行扫描</span><br></pre></td></tr></table></figure><p>标记清除</p><p>​标记-清除机制，顾名思义，首先标记对象（垃圾检测），然后清除垃圾（垃圾回收）。</p><p>​主要用于解决==循环引用==。</p><p>○ 1.标记：活动（有被引用）, 非活动（可被删除）</p><p>○ 2.清除：清除所有非活动的对象</p></blockquote><hr><h2 id="四-缓冲池">四. 缓冲池</h2><blockquote><p>● 缓冲池</p><p><strong>整数对象缓冲池</strong></p><p>○ 对于==[-5,256]== 这样的<strong>小整数</strong>，系统已经初始化好，可以直接拿来用。而对于其他的大整数，系统则提前申请了一块内存空间，等需要的时候在这上面创建大整数对象</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例：小整数而言 id都是一样的</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">777</span><span class="comment"># a和b不是一样的</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="number">777</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(a)<span class="comment"># 内存地址不同</span></span><br><span class="line"><span class="number">140133545530064</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(b)<span class="comment"># 内存地址不同</span></span><br><span class="line"><span class="number">140133545530384</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = b = <span class="number">777</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(a)</span><br><span class="line"><span class="number">140133545530480</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(b)</span><br><span class="line"><span class="number">140133545530480</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">1</span><span class="comment"># a和b是一样的</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="number">1</span><span class="comment"># python的整数对象缓冲池</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(a)</span><br><span class="line"><span class="number">140133544871840</span><span class="comment"># 内存地址一样</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(b)</span><br><span class="line"><span class="number">140133544871840</span><span class="comment"># 内存地址一样</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> sys <span class="keyword">import</span> getrefcount</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>getrefcount(a)</span><br><span class="line"><span class="number">801</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">字符串缓存</span><br><span class="line">○ 为了检验两个引用指向同一个对象，我们可以用<span class="keyword">is</span>关键字。<span class="keyword">is</span>用于判断两个引用所指的对象是否相同。</span><br><span class="line">当触发缓存机制时，只是创造了新的引用，而不是对象本身</span><br><span class="line"></span><br><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">&quot;xxx&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="string">&quot;xxx&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(a)</span><br><span class="line"><span class="number">140133545760616</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(b)</span><br><span class="line"><span class="number">140133545760616</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">&quot;xxx &quot;</span><span class="comment"># 注：特殊字符不能放到缓冲区</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="string">&quot;xxx &quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(a)</span><br><span class="line"><span class="number">140133545760672</span><span class="comment"># 内存地址不一样</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(b)</span><br><span class="line"><span class="number">140133545760728</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">&quot;xxx_&quot;</span><span class="comment"># 注：数字、字母、下划线的组合 放在字符串缓冲区</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="string">&quot;xxx_&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(a)</span><br><span class="line"><span class="number">140133545760616</span><span class="comment"># 内存地址一样</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(b)</span><br><span class="line"><span class="number">140133545760616</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">&quot;hello world&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="string">&quot;hello world&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(a)<span class="comment"># 内存地址不一样</span></span><br><span class="line"><span class="number">140133545242928</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(b)</span><br><span class="line"><span class="number">140133545242992</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">&quot;helloworld&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="string">&quot;helloworld&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(a)<span class="comment"># 内存地址一样</span></span><br><span class="line"><span class="number">140133545243120</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(b)</span><br><span class="line"><span class="number">140133545243120</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">&quot;你好&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="string">&quot;你好&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(a)</span><br><span class="line"><span class="number">140612691332856</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(b)</span><br><span class="line"><span class="number">140612688894592</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 示例：对于乘法创建的字符  只会缓冲20个</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">&quot;x&quot;</span>*<span class="number">21</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="string">&quot;x&quot;</span>*<span class="number">21</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(a)<span class="comment"># 内存地址不一样</span></span><br><span class="line"><span class="number">140133545742176</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(b)</span><br><span class="line"><span class="number">140133545742248</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">&quot;x&quot;</span>*<span class="number">20</span><span class="comment"># 内存地址一样</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="string">&quot;x&quot;</span>*<span class="number">20</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(a)</span><br><span class="line"><span class="number">140133545246768</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(b)</span><br><span class="line"><span class="number">140133545246768</span></span><br></pre></td></tr></table></figure><p><strong>注意</strong></p><p>○ 这对于经常使用的数字和字符串来说也是一种优化的方案</p><p><strong>字符串的intern机制</strong></p><p>○ python对于短小的，只含有==字母数字==的字符串自动触发缓存机制。其他情况不会缓存</p></blockquote><hr><h2 id="五-深拷贝与浅拷贝">五. 深拷贝与浅拷贝</h2><blockquote><p><strong>● 深拷贝与浅拷贝</strong></p><p><strong>浅拷贝</strong></p><p>○ 拷贝第一层数据（地址）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = &#123;<span class="string">&quot;first&quot;</span>:[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = a.copy()<span class="comment"># 拷贝第一层数据（地址）</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">&#123;<span class="string">&#x27;first&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">&#123;<span class="string">&#x27;first&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(a)<span class="comment"># a、b引用变了</span></span><br><span class="line"><span class="number">140133410603584</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(b)</span><br><span class="line"><span class="number">140133545741768</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="string">&quot;second&quot;</span>] = <span class="string">&quot;No.2&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">&#123;<span class="string">&#x27;first&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="string">&#x27;second&#x27;</span>: <span class="string">&#x27;No.2&#x27;</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">&#123;<span class="string">&#x27;first&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="string">&quot;first&quot;</span>].append(<span class="number">4</span>)<span class="comment"># a、b里面的”first”引用 没有改变</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a<span class="comment"># 拷贝第一层数据（地址）</span></span><br><span class="line">&#123;<span class="string">&#x27;first&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], <span class="string">&#x27;second&#x27;</span>: <span class="string">&#x27;No.2&#x27;</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">&#123;<span class="string">&#x27;first&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(a[<span class="string">&quot;first&quot;</span>])<span class="comment"># 第一层数据（地址） 内存地址相同</span></span><br><span class="line"><span class="number">140133413100296</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(b[<span class="string">&quot;first&quot;</span>])</span><br><span class="line"><span class="number">140133413100296</span></span><br></pre></td></tr></table></figure><p><strong>深拷贝</strong></p><p>○ 递归拷贝所有层的数据</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = &#123;<span class="string">&quot;first&quot;</span>:[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> copy<span class="comment"># 导入模块</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = copy.deepcopy(a)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(a)<span class="comment"># 内存地址不同</span></span><br><span class="line"><span class="number">140133545248160</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(b)</span><br><span class="line"><span class="number">140133410604736</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="string">&quot;second&quot;</span>] = <span class="string">&quot;No.2&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="string">&quot;first&quot;</span>].append(<span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">&#123;<span class="string">&#x27;first&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], <span class="string">&#x27;second&#x27;</span>: <span class="string">&#x27;No.2&#x27;</span>&#125;<span class="comment"># 递归拷贝所有层的数据</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">&#123;<span class="string">&#x27;first&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]&#125;<span class="comment"># 递归拷贝所有层的数据</span></span><br></pre></td></tr></table></figure><p>小结</p><p>○ 数字和字符串、元组，不能改变对象本身，只能改变引用的指向，称为==不可变数据对象==(immutable  object)</p><p>○ 列表、字典、集合可以通过引用其元素，改变对象自身(in-place change)。这种对象类型，称为==可变数据对象==(mutable object)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=[<span class="number">1</span>,<span class="number">2</span>,[<span class="number">4</span>,<span class="number">5</span>]]<span class="comment"># 可变数据对象，有影响</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = b[:]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, [<span class="number">4</span>, <span class="number">5</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b[<span class="number">2</span>].append(<span class="number">7</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, [<span class="number">4</span>, <span class="number">5</span>, <span class="number">7</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, [<span class="number">4</span>, <span class="number">5</span>, <span class="number">7</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]<span class="comment"># 不可变数据对象，没有影响</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = b[:]</span><br></pre></td></tr></table></figure></blockquote><hr>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 内存管理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>09_Python-CSDN_上下文管理器</title>
      <link href="/blog/posts/9186.html"/>
      <url>/blog/posts/9186.html</url>
      
        <content type="html"><![CDATA[<p>摘要：以前在 <a href="https://blog.csdn.net/cpen_web/category_11089219.html"><code>CSDN 新星计划</code></a> 上写的文章，迁移至此。<span id="more"></span></p><h1 id="09-Python-上下文管理器">09_Python-上下文管理器</h1><p><a href="https://blog.csdn.net/cpen_web">博客🔗：https://blog.csdn.net/cpen_web</a></p><hr><h2 id="一-介绍">一. 介绍</h2><blockquote><p>● 介绍</p><p>上下文管理器是装饰器的近亲，与装饰器类似的，它们都是包装其他代码的工具</p><p>○ 装饰器：包装用于定义的代码块</p><p>○ 上下文管理器：可以包装任意格式的代码块</p><p><strong>上下文管理器是一个包装任意代码块的对象，上下文管理器保证:</strong></p><p>○ 进入上下文管理器时，每次代码执行的一致性</p><p>○ 当退出上下文管理器时，相关的资源会被正确地回收（即使内部代码出错，退出步骤也执行）</p><p><strong>上下文管理器的应用</strong></p><p>○ 上下文管理器被用到最多的就是——作为确保资源正确清理的一种方式</p></blockquote><hr><h2 id="二-语法">二. 语法</h2><blockquote><p><strong>with语句</strong></p><p>○ python2.5中加入的关键字with</p><p>○ with语句仅仅能对支持上下文管理协议的对象使用。</p><p>○ with语句的表达式的作用是返回一个遵循特定协议的对象，具体来说，该对象必须定义一个==__enter__==方法和==__exit__==方法</p><p><strong>with语句执行的解析</strong></p><p>○ 语法：with context_expr as cm:  do_sth()</p><p>○ 当with语句执行时，便执行上下文表达式（context_expr）来获得一个上下文管理器对象，上下文管理器的职责是提供一个上下文对象，用于在with语句块中处理细节：</p><p>​○ 一旦获得了上下文对象，就会调用它的__enter__()方法</p><p>​○ 将完成with语句块执行前的所有准备工作</p><p>​○ 如果with语句后面跟了as语句，==方法返回的结果==会被赋值给as关键字后面的变量</p><p>​○ 除了self参数，__enter__方法不接受任何其他参数。</p><p>​○ __enter__方法一般负责执行一些配置</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例：上下文管理器 基本语法</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1、普通方法打开文件对象</span></span><br><span class="line">fp = <span class="built_in">open</span>(<span class="string">&quot;test.txt&quot;</span>,<span class="string">&quot;a+&quot;</span>)  <span class="comment"># a+ 追加写</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">dir</span>(fp))</span><br><span class="line"><span class="comment">#结果为 [ …&#x27;__enter__&#x27;, …, &#x27;__exit__&#x27;…]</span></span><br><span class="line"><span class="comment">#注：有__enter__、__exit__方法，是上下文管理器</span></span><br><span class="line">fp.write(<span class="string">&quot;this is test&quot;</span>)</span><br><span class="line">fp.close()  <span class="comment">#注：处理结束后，把它关掉，不然占资源</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2、用with语句执行</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;test.txt&quot;</span>,<span class="string">&quot;a+&quot;</span>) <span class="keyword">as</span> f:    <span class="comment">#注：赋给f对象</span></span><br><span class="line">    f.write(<span class="string">&quot;write test&quot;</span>)</span><br><span class="line">    <span class="comment">#退出语句执行之后 with自动回收对象</span></span><br><span class="line">    <span class="comment">#因为打开的文件对象是上下文管理器</span></span><br><span class="line">    <span class="comment">#注：open(&quot;test.txt&quot;,&quot;a+&quot;):上下文表达式</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span>语句执行的解析</span><br><span class="line">○ 当<span class="keyword">with</span>语句块结束时，无论是正常结束，还是由于异常，都会调用上下文对象的__exit__()方法</span><br><span class="line">○ __exit__()方法有<span class="number">3</span>个参数</span><br><span class="line">○ 如果<span class="keyword">with</span>语句正常结束，三个参数全部都是 <span class="literal">None</span></span><br><span class="line">○ 如果发生异常，三个参数的值分别等于调用sys.exc_info()函数返回的三个值：类型（异常类）、值（异常实例）和跟踪记录（traceback），相应的跟踪记录对象。</span><br><span class="line">○ 因为上下文管理器主要作用于共享资源，__enter__()和__exit__()方法基本是完成的是分配和释放资源的低层次工作，比如：数据库连接、锁分配、信号量加/减、状态管理、文件打开/关闭、异常处理等</span><br></pre></td></tr></table></figure></blockquote><hr><h2 id="三-异常处理">三. 异常处理</h2><blockquote><p>● 异常处理</p><p><strong>上下文管理器必须定义__exit__方法，该方法可以选择性地处理包装代码块中出现的异常，或者处理其他需要关闭上下文状态的事情</strong></p><p><strong>__exit__方法接收了异常信息，就有处理这个异常的义务，通常可以做以下几件：</strong></p><p>○ 传播异常</p><p>○ 中止异常</p><p>○ 抛出不同异常</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例：__exit__</span></span><br><span class="line"><span class="comment">#__exit__ 接受三个参数  异常类，异常值，回溯信息</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#上下文管理器  传播异常  终止异常</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyException</span>():</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__enter__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__exit__</span>(<span class="params">self, exc_type, exc_val, exc_tb</span>):</span><br><span class="line">        <span class="keyword">if</span> exc_val: <span class="comment">#注：如果有异常发生</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;My exception: <span class="subst">&#123;exc_val&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="comment"># return False   #注：传播异常，给解释器识别</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span>     <span class="comment">#注：中止异常</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> MyException():<span class="comment">#使用上下文管理器</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="number">1</span>+<span class="number">1</span>)  <span class="comment">#注：没有异常，输出为2</span></span><br><span class="line"><span class="keyword">with</span> MyException():</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">1</span>/<span class="number">0</span>)  <span class="comment">#注：False时 有异常</span></span><br><span class="line"><span class="comment">#False时 结果为 My exception: division by zero</span></span><br><span class="line"><span class="comment">#True时 结果为</span></span><br><span class="line"><span class="comment"># My exception: division by zero#注：True时  不报错，程序不中断</span></span><br><span class="line"><span class="comment">#注：True时 把异常传递出去，给解释器知道</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;end......&quot;</span>)</span><br><span class="line"><span class="comment">#注：return False 不会执行 end......</span></span><br><span class="line"><span class="comment">#注：return True  执行了   end......</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 示例：如果是ValueError异常，终止异常；如果不是，传播异常</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyException</span>():</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__enter__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__exit__</span>(<span class="params">self, exc_type, exc_val, exc_tb</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">issubclass</span>(exc_type, ValueError): <span class="comment">#注：如果是ValueError异常及子类异常</span></span><br><span class="line">        <span class="comment"># if exc_type == ValueError:  #注：exc_type是类，所以判断条件ValueError类</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span> <span class="comment">#终止异常</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span>    <span class="comment">#传播异常</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> MyException():</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">1</span>+<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">raise</span> ValueError(<span class="string">&quot;test value error&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#注：issubclass(exc_type, ValueError) 如果是ValueError异常及子类异常</span></span><br></pre></td></tr></table></figure></blockquote><hr><h2 id="四-contextlib模块">四. contextlib模块</h2><blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">● contextlib模块</span><br><span class="line"></span><br><span class="line">contextlib模块介绍</span><br><span class="line">○ contextlib模块实现上下文自动管理</span><br><span class="line">○ 这个生成器可以用更简单的方法创建上下文管理器</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例：contextlib实现上下文管理器</span></span><br><span class="line"><span class="keyword">import</span> contextlib</span><br><span class="line"></span><br><span class="line"><span class="meta">@contextlib.contextmanager</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">mycontext</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;enter context&quot;</span>)</span><br><span class="line">    <span class="keyword">yield</span>   <span class="comment">#注：生成器函数</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;exit context&quot;</span>)</span><br><span class="line"></span><br><span class="line">c1 = mycontext()</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">dir</span>(c1))</span><br><span class="line"><span class="comment">#结果为 […&#x27;__enter__&#x27;,  &#x27;__exit__&#x27;…]</span></span><br><span class="line"><span class="comment">#注：使用装饰器后 就是上下文管理器了。不使用装饰器，只是生成器对象</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> c1:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;xxxxxxxxxx&quot;</span>)</span><br><span class="line"><span class="comment">#结果为</span></span><br><span class="line"><span class="comment"># enter context</span></span><br><span class="line"><span class="comment"># xxxxxxxxxx</span></span><br><span class="line"><span class="comment"># exit context</span></span><br></pre></td></tr></table></figure></blockquote><hr>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 上下文管理器 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>08_Python-CSDN_面向对象练习</title>
      <link href="/blog/posts/13683.html"/>
      <url>/blog/posts/13683.html</url>
      
        <content type="html"><![CDATA[<p>摘要：以前在 <a href="https://blog.csdn.net/cpen_web/category_11089219.html"><code>CSDN 新星计划</code></a> 上写的文章，迁移至此。<span id="more"></span></p><h1 id="08-Python-面向对象练习">08_Python-面向对象练习</h1><p><a href="https://blog.csdn.net/cpen_web">博客🔗：https://blog.csdn.net/cpen_web</a></p><hr><p><a href="https://www.runoob.com/python3/python3-class.html">菜鸟教程：面向对象<br>https://www.runoob.com/python3/python3-class.html</a></p><hr><h2 id="一-回合制对战游戏">一. 回合制对战游戏</h2><blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">● ①、回合制对战游戏</span><br><span class="line"></span><br><span class="line"> ○回合制对战游戏</span><br><span class="line"> ●创建角色：名字、性别、血量、装备  ●战斗</span><br><span class="line"> ●创建房间：                          ●装备-防弹衣</span><br><span class="line"> ●角色可加入房间                      ●血量默认100</span><br><span class="line"> ●房间内的人可互打                    ●正常被攻击-10滴血</span><br><span class="line"> ●房间上限2人                        ●有防弹衣-5滴血</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Role</span>():</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,name,sex,blood=<span class="number">100</span>,body_armor=<span class="literal">None</span></span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.sex = sex</span><br><span class="line">        self.blood = blood</span><br><span class="line">        self.body_armor = body_armor</span><br><span class="line">        self.room = <span class="literal">None</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">attack</span>(<span class="params">self,other</span>):</span><br><span class="line">        <span class="keyword">if</span> self.room == other.room:<span class="comment"># 注：同一房间</span></span><br><span class="line">            <span class="keyword">if</span> self != other:<span class="comment"># 注：不同的人</span></span><br><span class="line">                <span class="keyword">if</span> self.blood &gt; <span class="number">0</span> <span class="keyword">and</span> other.blood &gt; <span class="number">0</span>:</span><br><span class="line">                    reduce_blood = <span class="number">5</span> <span class="keyword">if</span> other.body_armor <span class="keyword">else</span> <span class="number">10</span></span><br><span class="line"><span class="comment"># 注：body_armor为假 返回10(没有设置防弹衣)</span></span><br><span class="line">                    other.blood -= reduce_blood</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;self.name&#125;</span>攻击<span class="subst">&#123;other.name&#125;</span> <span class="subst">&#123;reduce_blood&#125;</span>点血量\t<span class="subst">&#123;self.name&#125;</span>当前血量：<span class="subst">&#123;self.blood&#125;</span>\t<span class="subst">&#123;other.name&#125;</span>当前血量：<span class="subst">&#123;other.blood&#125;</span>&quot;</span>)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">&quot;其中一方已死亡，不能攻击&quot;</span>)</span><br><span class="line">                    exit()</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;你不能攻击自己&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;攻击对象，不在同一个房间&quot;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Room</span>():</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,name</span>):</span><br><span class="line">        self.member = []</span><br><span class="line">        self.name = name</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">join</span>(<span class="params">self,role</span>):</span><br><span class="line">        <span class="keyword">if</span> role.room == <span class="literal">None</span>:</span><br><span class="line"><span class="comment"># 注：在角色的类里定义的属性room</span></span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(self.member) &lt; <span class="number">2</span>:</span><br><span class="line">                self.member.append(role)</span><br><span class="line"><span class="comment"># 注：member房间的属性，房间只能加2个人 所以&lt;2</span></span><br><span class="line">                role.room = self.name</span><br><span class="line"><span class="comment"># 注：达到条件，定义角色加入到 某个房间</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;此房间已满&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;此角色已经加入房间了&quot;</span>)</span><br><span class="line"></span><br><span class="line">role_dict = &#123;&#125;  <span class="comment"># 存放初始化实例# 注：存放名字和对象的关系</span></span><br><span class="line">room_dict = &#123;&#125;  <span class="comment"># 存放初始化实例</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;请选择：1.创建角色\t2.创建房间\t3.加入房间\t4.开始战斗\t5.退出&quot;</span>)</span><br><span class="line">    enter_number = <span class="built_in">input</span>(<span class="string">&quot;请输入你的选择\t&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> enter_number.isdigit():</span><br><span class="line">        enter_number = <span class="built_in">int</span>(enter_number)</span><br><span class="line">        <span class="keyword">if</span> <span class="number">1</span> &lt;= enter_number &lt;=<span class="number">5</span>:</span><br><span class="line">            <span class="keyword">if</span> enter_number == <span class="number">1</span>:</span><br><span class="line">                name, sex = <span class="built_in">input</span>(<span class="string">&quot;请输入角色的姓名与性别，空格隔开\n&quot;</span>).split()</span><br><span class="line"><span class="comment">#注：split()是为了 分割 将字符 赋给2个变量</span></span><br><span class="line">                role_dict[name] = Role(name, sex)</span><br><span class="line">                def_blood = <span class="built_in">input</span>(<span class="string">&quot;输入自定义血量\n&quot;</span>)</span><br><span class="line">                <span class="keyword">if</span> def_blood.isdigit():</span><br><span class="line">                    role_dict[name].blood = <span class="built_in">int</span>(def_blood)</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">f&quot;自定义成功，用户<span class="subst">&#123;name&#125;</span>当前血量<span class="subst">&#123;role_dict[name].blood&#125;</span>&quot;</span>)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">f&quot;自定义失败，用户<span class="subst">&#123;name&#125;</span>当前血量<span class="subst">&#123;role_dict[name].blood&#125;</span>&quot;</span>)</span><br><span class="line">                wear_body_armor = <span class="built_in">input</span>(<span class="string">&quot;输入y装备防弹衣\n&quot;</span>)</span><br><span class="line">                <span class="keyword">if</span> wear_body_armor == <span class="string">&quot;y&quot;</span>:</span><br><span class="line">                    role_dict[name].body_armor = <span class="number">1</span></span><br><span class="line">            <span class="keyword">elif</span> enter_number == <span class="number">2</span>:</span><br><span class="line">                name = <span class="built_in">input</span>(<span class="string">&quot;请输入房间的名字\n&quot;</span>)</span><br><span class="line">                room_dict[name] = Room(name)</span><br><span class="line"><span class="comment"># 注：创建好的对象(实例化对象) 保存在字典里</span></span><br><span class="line">            <span class="keyword">elif</span> enter_number == <span class="number">3</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;当前角色有<span class="subst">&#123;role_dict.keys()&#125;</span>，当前房间有<span class="subst">&#123;room_dict.keys()&#125;</span>&quot;</span>)</span><br><span class="line">                role_name, room_name = <span class="built_in">input</span>(<span class="string">&quot;请输入要加入的角色和房间名，空格隔开\n&quot;</span>).split()</span><br><span class="line"><span class="comment"># 注：这里可以做1个判断 (考虑到各种情况)</span></span><br><span class="line">                room_dict[room_name].join(role_dict[role_name])</span><br><span class="line"><span class="comment"># 注：从字典 取出房间对象，调用房间对象的join()方法</span></span><br><span class="line">            <span class="keyword">elif</span> enter_number == <span class="number">4</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;当前房间有<span class="subst">&#123;room_dict.keys()&#125;</span>&quot;</span>)</span><br><span class="line">                room_name = <span class="built_in">input</span>(<span class="string">&quot;请输入房间的名字\n&quot;</span>)<span class="comment"># 注：选择房间</span></span><br><span class="line">                <span class="keyword">if</span> <span class="built_in">len</span>(room_dict[room_name].member) == <span class="number">2</span>:</span><br><span class="line"><span class="comment"># 注：len()==2 这是保证房间里有2个人  才能对打</span></span><br><span class="line">                    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">                        room_dict[room_name].member[<span class="number">0</span>].attack(room_dict[room_name].member[<span class="number">1</span>])</span><br><span class="line">                        room_dict[room_name].member[<span class="number">1</span>].attack(room_dict[room_name].member[<span class="number">0</span>])</span><br><span class="line"><span class="comment"># 注：通过字典获取房间实例对象，member是房间的属性</span></span><br><span class="line"><span class="comment"># 注：为什么房间实例能获取到创建角色类的对象？因为选项3 是角色类属性 加入 房间member属性，保证了这一步能调用成功实例化对象</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">f&quot;房间<span class="subst">&#123;room_name&#125;</span>人数不足2人，对战失败！&quot;</span>)</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line">            <span class="keyword">elif</span> enter_number == <span class="number">5</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;退出对战&quot;</span>)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;输入错误，请输入1-5选择操作！&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;输入错误，请输入1-5选择操作！&quot;</span>)</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/image-20220505044926926.png" alt="image-20220505044926926"></p></blockquote><hr><h2 id="二-模拟ATM">二. 模拟ATM</h2><blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">● ②、模拟ATM</span><br><span class="line"></span><br><span class="line">○模拟ATM</span><br><span class="line">●1、创建ATM</span><br><span class="line">    ○ATM里的总金额</span><br><span class="line">    ○ATM可向里面加钱</span><br><span class="line">    ○ATM里的钱取出来</span><br><span class="line"></span><br><span class="line">●2、创建账户去取钱</span><br><span class="line">    ○账户属性   名称、余额、密码</span><br><span class="line">    ○账户要选择1台ATM进行操作</span><br><span class="line">    ○可以取钱、存钱、查询余额</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Atm</span>():</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,name,atm_total</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.atm_total = atm_total</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">self,money</span>):</span><br><span class="line">        self.atm_total += money</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;机器<span class="subst">&#123;self.name&#125;</span>增加金额<span class="subst">&#123;money&#125;</span>元，<span class="subst">&#123;self.name&#125;</span>当前总金额为<span class="subst">&#123;self.atm_total&#125;</span>元&quot;</span>)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">decrease</span>(<span class="params">self,money</span>):</span><br><span class="line">        <span class="keyword">if</span> self.atm_total &lt; money:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;self.name&#125;</span>余额不足，取钱失败&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.atm_total -= money</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;机器<span class="subst">&#123;self.name&#125;</span>取出金额<span class="subst">&#123;money&#125;</span>元，<span class="subst">&#123;self.name&#125;</span>当前总金额为<span class="subst">&#123;self.atm_total&#125;</span>元&quot;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Account</span>():</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,name,balance,passwd</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.balance = balance</span><br><span class="line">        self.passwd = passwd</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">draw</span>(<span class="params">self,atm,money</span>):</span><br><span class="line">        <span class="keyword">if</span> money &lt;= self.balance:</span><br><span class="line">            <span class="keyword">if</span> money &lt;= atm.atm_total:</span><br><span class="line">                self.balance -= money</span><br><span class="line">                atm.atm_total -= money</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;成功取款<span class="subst">&#123;money&#125;</span>元，<span class="subst">&#123;self.name&#125;</span>当前余额为<span class="subst">&#123;self.balance&#125;</span>元&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;ATM机 <span class="subst">&#123;atm.name&#125;</span>余额不足，取款失败！&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;您输入的金额大于您的账户余额，取款失败！&quot;</span>)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">save</span>(<span class="params">self,atm,money</span>):</span><br><span class="line">        self.balance += money</span><br><span class="line">        atm.atm_total += money</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;成功存款<span class="subst">&#123;money&#125;</span>元，<span class="subst">&#123;self.name&#125;</span>当前余额为<span class="subst">&#123;self.balance&#125;</span>元&quot;</span>)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">look</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;self.name&#125;</span>当前余额为<span class="subst">&#123;self.balance&#125;</span>元&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 管理员操作</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">atm_os</span>():</span><br><span class="line">    <span class="comment"># 管理员登录验证</span></span><br><span class="line">    name, paaswd = <span class="built_in">input</span>(<span class="string">&quot;请输入管理员账号和密码，空格隔开\n&quot;</span>).split()</span><br><span class="line">    <span class="keyword">if</span> (name, paaswd) <span class="keyword">in</span> admin_dict.items():</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;管理员账号出错&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;请选择：1.创建ATM\t2.ATM加钱\t3.ATM取钱\t4.返回上一级&quot;</span>)</span><br><span class="line">        enter_number = <span class="built_in">input</span>(<span class="string">&quot;请输入你的选择\t&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> enter_number.isdigit():</span><br><span class="line">            enter_number = <span class="built_in">int</span>(enter_number)</span><br><span class="line">            <span class="keyword">if</span> <span class="number">1</span> &lt;= enter_number &lt;= <span class="number">4</span>:</span><br><span class="line">                <span class="comment"># 1、创建ATM</span></span><br><span class="line">                <span class="keyword">if</span> enter_number == <span class="number">1</span>:</span><br><span class="line">                    name, atm_total = <span class="built_in">input</span>(<span class="string">&quot;请输入ATM名称，总金额，空格隔开\n&quot;</span>).split()</span><br><span class="line">                    atm_total = <span class="built_in">int</span>(atm_total)</span><br><span class="line">                    atm_dict[name] = Atm(name,atm_total)</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">f&quot;创建ATM机 <span class="subst">&#123;name&#125;</span>成功，<span class="subst">&#123;name&#125;</span>当前总金额<span class="subst">&#123;atm_total&#125;</span>元&quot;</span>)</span><br><span class="line">                <span class="comment"># 2、ATM加钱</span></span><br><span class="line">                <span class="keyword">elif</span> enter_number == <span class="number">2</span>:</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">f&quot;当前存在的ATM机器：<span class="subst">&#123;atm_dict.keys()&#125;</span>&quot;</span>)</span><br><span class="line">                    atm_name = <span class="built_in">input</span>(<span class="string">&quot;请输入ATM名称\n&quot;</span>)</span><br><span class="line">                    <span class="keyword">if</span> atm_name <span class="keyword">in</span> atm_dict.keys():</span><br><span class="line">                        money = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;请输入金额\n&quot;</span>))</span><br><span class="line">                        atm_dict[atm_name].add(money)</span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;atm_name&#125;</span>不存在&quot;</span>)</span><br><span class="line">                <span class="comment"># 3、ATM取钱</span></span><br><span class="line">                <span class="keyword">elif</span> enter_number == <span class="number">3</span>:</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">f&quot;当前存在的ATM机器：<span class="subst">&#123;atm_dict.keys()&#125;</span>&quot;</span>)</span><br><span class="line">                    atm_name = <span class="built_in">input</span>(<span class="string">&quot;请输入ATM名称\n&quot;</span>)</span><br><span class="line">                    <span class="keyword">if</span> atm_name <span class="keyword">in</span> atm_dict.keys():</span><br><span class="line">                        money = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;请输入金额\n&quot;</span>))</span><br><span class="line">                        <span class="keyword">if</span> money &gt; <span class="number">0</span>:</span><br><span class="line">                            atm_dict[atm_name].decrease(money)</span><br><span class="line">                        <span class="keyword">else</span>:</span><br><span class="line">                            <span class="built_in">print</span>(<span class="string">&quot;取出的金额不能为负&quot;</span>)</span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;atm_name&#125;</span>不存在&quot;</span>)</span><br><span class="line">                <span class="keyword">elif</span> enter_number == <span class="number">4</span>:</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">&quot;退出ATM操作&quot;</span>)</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;输入错误，请输入1-4选择操作&quot;</span>)</span><br><span class="line"><span class="comment"># 账户操作</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">account_os</span>():</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;请选择：1.创建账户\t2.取钱\t3.存钱\t4.查询余额\t5.返回上一级&quot;</span>)</span><br><span class="line">        enter_number = <span class="built_in">input</span>(<span class="string">&quot;请输入你的选择\t&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> enter_number.isdigit():</span><br><span class="line">            enter_number = <span class="built_in">int</span>(enter_number)</span><br><span class="line">            <span class="keyword">if</span> <span class="number">1</span> &lt;= enter_number &lt;= <span class="number">5</span>:</span><br><span class="line">                <span class="comment"># 1、创建账户</span></span><br><span class="line">                <span class="keyword">if</span> enter_number == <span class="number">1</span>:</span><br><span class="line">                    name, balance, passwd = <span class="built_in">input</span>(<span class="string">&quot;请输入账户名称、余额和密码进行创建，空格分割\n&quot;</span>).split()</span><br><span class="line">                    balance = <span class="built_in">int</span>(balance)</span><br><span class="line">                    account_dict[name] = Account(name,balance,passwd)</span><br><span class="line">                    account_passwd[name] = passwd</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">f&quot;创建用户 <span class="subst">&#123;name&#125;</span>成功，余额为<span class="subst">&#123;balance&#125;</span>&quot;</span>)</span><br><span class="line">                <span class="keyword">elif</span> enter_number == <span class="number">2</span> <span class="keyword">or</span> enter_number == <span class="number">3</span> <span class="keyword">or</span> enter_number == <span class="number">4</span>:</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">f&quot;当前的ATM机有<span class="subst">&#123;atm_dict.keys()&#125;</span>&quot;</span>)</span><br><span class="line">                    atm, name, passwd = <span class="built_in">input</span>(<span class="string">&quot;请输入您选择的ATM机、您的账户名称和密码进行登陆，空格分割\n&quot;</span>).split()</span><br><span class="line">                    <span class="comment"># 验证ATM是否存在</span></span><br><span class="line">                    <span class="keyword">if</span> atm <span class="keyword">in</span> atm_dict.keys():</span><br><span class="line">                        <span class="comment"># 验证账户</span></span><br><span class="line">                        <span class="keyword">if</span> (name, passwd) <span class="keyword">in</span> account_passwd.items():</span><br><span class="line">                            atm = atm_dict[atm]</span><br><span class="line">                            <span class="comment"># 2、取钱</span></span><br><span class="line">                            <span class="keyword">if</span> enter_number == <span class="number">2</span>:</span><br><span class="line">                                money = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;请输入取款金额\n&quot;</span>))</span><br><span class="line">                                account_dict[name].draw(atm, money)</span><br><span class="line">                            <span class="comment"># 3、存钱</span></span><br><span class="line">                            <span class="keyword">elif</span> enter_number == <span class="number">3</span>:</span><br><span class="line">                                money = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;请输入存款金额\n&quot;</span>))</span><br><span class="line">                                account_dict[name].save(atm, money)</span><br><span class="line">                            <span class="comment"># 4、查询余额</span></span><br><span class="line">                            <span class="keyword">elif</span> enter_number == <span class="number">4</span>:</span><br><span class="line">                                account_dict[name].look()</span><br><span class="line">                        <span class="keyword">else</span>:</span><br><span class="line">                            <span class="built_in">print</span>(<span class="string">&quot;账户错误&quot;</span>)</span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;atm&#125;</span>不存在&quot;</span>)</span><br><span class="line">                <span class="keyword">elif</span> enter_number == <span class="number">5</span>:</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">&quot;退出账户操作&quot;</span>)</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;输入错误，请输入1-5选择操作&quot;</span>)</span><br><span class="line"></span><br><span class="line">admin_dict = &#123;<span class="string">&quot;admin&quot;</span>:<span class="string">&quot;123456&quot;</span>&#125; <span class="comment"># 管理员信息</span></span><br><span class="line">account_passwd = &#123;&#125; <span class="comment"># 账户信息</span></span><br><span class="line">atm_dict = &#123;&#125;       <span class="comment"># 存放初始化实例</span></span><br><span class="line">account_dict = &#123;&#125;   <span class="comment"># 存放初始化实例</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;请选择：1.ATM操作\t2.账户操作\t3.退出&quot;</span>)</span><br><span class="line">    enter_number = <span class="built_in">input</span>(<span class="string">&quot;请输入你的选择\t&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> enter_number.isdigit():</span><br><span class="line">        enter_number = <span class="built_in">int</span>(enter_number)</span><br><span class="line">        <span class="keyword">if</span> <span class="number">1</span> &lt;= enter_number &lt;= <span class="number">3</span>:</span><br><span class="line">            <span class="comment"># 1、ATM操作</span></span><br><span class="line">            <span class="keyword">if</span> enter_number == <span class="number">1</span>:</span><br><span class="line">                atm_os()</span><br><span class="line">            <span class="comment"># 2、账户操作</span></span><br><span class="line">            <span class="keyword">elif</span> enter_number == <span class="number">2</span>:</span><br><span class="line">                account_os()</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;退出操作！&quot;</span>)</span><br><span class="line">                exit()</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;输入错误，请输入1-3选择操作&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;输入错误，请输入1-3选择操作&quot;</span>)</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/image-20220505045128067.png" alt="image-20220505045128067"></p></blockquote><hr><h2 id="三-Linux用户管理类">三. Linux用户管理类</h2><blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">● ③、Linux用户管理类</span><br><span class="line"></span><br><span class="line"> Linux用户管理类</span><br><span class="line"> ●基类：实现往linux系统里添加用户</span><br><span class="line"> ●子类A：</span><br><span class="line">   ○能够查看、修改uid和gid、shell等信息   ●子类C(A,B)：</span><br><span class="line"> ●子类B：                                  ○1.可以单独新建组</span><br><span class="line">   ○1.能删除用户                           ○2.可以将某个用户的gid修改为新建的组的gid</span><br><span class="line">   ○2.能删除组                             ○3.加入异常机制，异常的名字需要自己定义</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span>():</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">self,name,passwd</span>):</span><br><span class="line">        subprocess.Popen(<span class="string">f&#x27;useradd <span class="subst">&#123;name&#125;</span> -p <span class="subst">&#123;passwd&#125;</span>&amp;&gt;/dev/null &amp;&amp; echo &quot;<span class="subst">&#123;name&#125;</span>创建成功&quot; ||echo &quot;创建失败&quot;&#x27;</span>, shell=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>(<span class="title class_ inherited__">Base</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">look</span>(<span class="params">self,name</span>):</span><br><span class="line">        p = subprocess.Popen(<span class="string">f&#x27;cut -d &quot;:&quot; -f 1,3,4,7 /etc/passwd|grep -E ^<span class="subst">&#123;name&#125;</span>:&#x27;</span>, shell=<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">modify</span>(<span class="params">self,name,uid,gid,shell</span>):</span><br><span class="line">        p = subprocess.Popen(<span class="string">f&#x27;usermod -u <span class="subst">&#123;uid&#125;</span> -g <span class="subst">&#123;gid&#125;</span> -s <span class="subst">&#123;shell&#125;</span> <span class="subst">&#123;name&#125;</span>&amp;&gt;/dev/null &amp;&amp; echo &quot;修改成功&quot; ||echo &quot;修改失败&quot;&#x27;</span>, shell=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span>(<span class="title class_ inherited__">Base</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">del_user</span>(<span class="params">self,name</span>):</span><br><span class="line">        p = subprocess.Popen(<span class="string">f&#x27;userdel -r <span class="subst">&#123;name&#125;</span>&amp;&gt;/dev/null &amp;&amp; echo &quot;删除成功&quot; ||echo &quot;创建失败&quot;&#x27;</span>, shell=<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">del_group</span>(<span class="params">self,name</span>):</span><br><span class="line">        p = subprocess.Popen(<span class="string">f&#x27;groupdel <span class="subst">&#123;name&#125;</span>&amp;&gt;/dev/null &amp;&amp; echo &quot;删除成功&quot; ||echo &quot;删除失败&quot;&#x27;</span>, shell=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C</span>(A,B):</span><br><span class="line">    group_member = []</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">group_add</span>(<span class="params">self,gid,name</span>):</span><br><span class="line">        p = subprocess.Popen(<span class="string">f&#x27;groupadd -g <span class="subst">&#123;gid&#125;</span> <span class="subst">&#123;name&#125;</span>&amp;&gt;/dev/null &amp;&amp; echo &quot;创建成功&quot; ||echo &quot;创建失败&quot;&#x27;</span>, shell=<span class="literal">True</span>)</span><br><span class="line">        C.group_member.append(gid)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">gid_modify</span>(<span class="params">self,gid,name</span>):</span><br><span class="line">        <span class="keyword">if</span> gid <span class="keyword">in</span> C.group_member:</span><br><span class="line">            p = subprocess.Popen(<span class="string">f&#x27;usermod -g <span class="subst">&#123;gid&#125;</span> <span class="subst">&#123;name&#125;</span>&amp;&gt;/dev/null &amp;&amp; echo &quot;修改成功&quot; ||echo &quot;修改失败&quot;&#x27;</span>, shell=<span class="literal">True</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;修改失败，<span class="subst">&#123;gid&#125;</span>不是新建的组id&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DefinedError</span>(<span class="title class_ inherited__">Exception</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;这是自定义异常&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;&#x27;&#x27;请选择：</span></span><br><span class="line"><span class="string">1.添加用户\t2.查看uid、gid和shell信息\t3.修改uid、gid和shell信息</span></span><br><span class="line"><span class="string">4.删除用户\t5.删除组\t6.新建组\t7.修改用户gid\t8.触发异常\t9.退出&#x27;&#x27;&#x27;</span>)</span><br><span class="line">    enter_number = <span class="built_in">input</span>(<span class="string">&quot;请输入你的选择\t&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> enter_number.isdigit():</span><br><span class="line">        enter_number = <span class="built_in">int</span>(enter_number)</span><br><span class="line">        <span class="keyword">if</span> <span class="number">1</span> &lt;= enter_number &lt;= <span class="number">9</span>:</span><br><span class="line">            <span class="keyword">if</span> enter_number == <span class="number">1</span>:</span><br><span class="line">                sample = Base()</span><br><span class="line">                name, passwd = <span class="built_in">input</span>(<span class="string">&quot;请输入用户名和密码，空格分割\n(2个参数)\t&quot;</span>).split()</span><br><span class="line">                sample.add(name, passwd)</span><br><span class="line">            <span class="keyword">elif</span> enter_number == <span class="number">2</span>:</span><br><span class="line">                sample = A()</span><br><span class="line">                name = <span class="built_in">input</span>(<span class="string">&quot;请输入用户名\n&quot;</span>)</span><br><span class="line">                sample.look(name)</span><br><span class="line">            <span class="keyword">elif</span> enter_number == <span class="number">3</span>:</span><br><span class="line">                sample = A()</span><br><span class="line">                name,uid,gid,shell = <span class="built_in">input</span>(<span class="string">&quot;请输入用户名，修改后的uid、gid和shell，空格分割\n(4个参数)\t&quot;</span>).split()</span><br><span class="line">                sample.modify(name,uid,gid,shell)</span><br><span class="line">            <span class="keyword">elif</span> enter_number == <span class="number">4</span>:</span><br><span class="line">                sample = B()</span><br><span class="line">                name = <span class="built_in">input</span>(<span class="string">&quot;请输入用户名\n&quot;</span>)</span><br><span class="line">                sample.del_user(name)</span><br><span class="line">            <span class="keyword">elif</span> enter_number == <span class="number">5</span>:</span><br><span class="line">                sample = B()</span><br><span class="line">                name = <span class="built_in">input</span>(<span class="string">&quot;请输入组名\n&quot;</span>)</span><br><span class="line">                sample.del_group(name)</span><br><span class="line">            <span class="keyword">elif</span> enter_number == <span class="number">6</span>:</span><br><span class="line">                sample = C()</span><br><span class="line">                name, gid = <span class="built_in">input</span>(<span class="string">&quot;请输入组名、指定的gid，空格分割\n(2个参数)\t&quot;</span>).split()</span><br><span class="line">                sample.group_add(gid,name)</span><br><span class="line">            <span class="keyword">elif</span> enter_number == <span class="number">7</span>:</span><br><span class="line">                sample = C()</span><br><span class="line">                name, gid = <span class="built_in">input</span>(<span class="string">&quot;请输入用户名、gid\n(2个参数)\t&quot;</span>).split()</span><br><span class="line">                sample.gid_modify(gid,name)</span><br><span class="line">            <span class="keyword">elif</span> enter_number == <span class="number">8</span>:</span><br><span class="line">                <span class="keyword">raise</span> DefinedError</span><br><span class="line">            <span class="keyword">elif</span> enter_number == <span class="number">9</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;退出系统&quot;</span>)</span><br><span class="line">                exit()</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;输入错误，请输入1-5选择操作！&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;输入错误，请输入1-5选择操作！&quot;</span>)</span><br></pre></td></tr></table></figure></blockquote><hr>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> OOP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>07_Python-CSDN_高阶函数</title>
      <link href="/blog/posts/46.html"/>
      <url>/blog/posts/46.html</url>
      
        <content type="html"><![CDATA[<p>摘要：以前在 <a href="https://blog.csdn.net/cpen_web/category_11089219.html"><code>CSDN 新星计划</code></a> 上写的文章，迁移至此。<span id="more"></span></p><h1 id="07-Python-高阶函数">07_Python-高阶函数</h1><p><a href="https://blog.csdn.net/cpen_web">博客🔗：https://blog.csdn.net/cpen_web</a></p><hr><blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">高阶函数：把函数作为参数传入，这样的函数称为高阶函数。</span><br><span class="line"></span><br><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func01</span>(<span class="params">a, b</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;a&#125;</span> <span class="subst">&#123;b&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func02</span>(<span class="params">func,a,b</span>):   <span class="comment"># 注：把函数作为参数传递;func02称为高阶函数</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;start func......&quot;</span>)</span><br><span class="line">    func(a,b)</span><br><span class="line"></span><br><span class="line">func02(func01,<span class="string">&quot;x&quot;</span>,<span class="string">&quot;y&quot;</span>)</span><br></pre></td></tr></table></figure></blockquote><hr><h2 id="常用高阶函数">常用高阶函数</h2><h3 id="map">map</h3><blockquote><p>● map</p><p><strong>用Python-map代码实现：f(x)=x*x</strong></p><p>●内置函数map，map()函数接收两个参数，一个是==函数==，一个是==Iterable（可多个）。==</p><p>●map将传入的函数依次作用到序列的每个元素，并把结果作为新的Iterator返回。</p><p>●map()传入的第一个参数是f，即函数对象本身。</p><p>●由于结果r是一个Iterator，Iterator是惰性序列。</p><p>●可通过list()函数让它把整个序列都计算出来并返回一个list。</p><p>●map()作为高阶函数，事实上它把运算规则抽象了，因此，我们不但可以计算简单的f(x)=x**2，还可以计算任意复杂的函数。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例1：map 映射</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">item</span>):         <span class="comment"># 接收1个参数item</span></span><br><span class="line">    <span class="keyword">return</span> item*item    <span class="comment"># 返回数的平方</span></span><br><span class="line"></span><br><span class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]       <span class="comment"># 注：a是可迭代对象</span></span><br><span class="line">result = <span class="built_in">map</span>(func, a)</span><br><span class="line"><span class="built_in">print</span>(result)   <span class="comment"># 注：返回 map对象</span></span><br><span class="line"><span class="comment">#结果为 &lt;map object at 0x0000020EDE156970&gt;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(result))</span><br><span class="line"><span class="comment">#结果为 [1, 4, 9, 16, 25, 36]</span></span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment"># 示例2：保留2位小数</span></span><br><span class="line">b = [<span class="number">1.239865</span>,<span class="number">4.56</span>,<span class="number">3.2</span>,<span class="number">9.82356</span>]</span><br><span class="line"></span><br><span class="line">result = <span class="built_in">map</span>(<span class="keyword">lambda</span> x:<span class="built_in">round</span>(x,<span class="number">2</span>), b)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(result))</span><br><span class="line"><span class="comment">#结果为 [1.24, 4.56, 3.2, 9.82]</span></span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment"># 示例3：转化为百分数，并且保留2位小数</span></span><br><span class="line">c = [<span class="number">0.000564</span>, <span class="number">0.456723</span>, <span class="number">0.5</span>, <span class="number">0.71345</span>]</span><br><span class="line">result = <span class="built_in">map</span>(<span class="keyword">lambda</span> x:<span class="built_in">format</span>(x,<span class="string">&#x27;.2%&#x27;</span>), c)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(result))</span><br><span class="line"><span class="comment">#结果为 [&#x27;0.06%&#x27;, &#x27;45.67%&#x27;, &#x27;50.00%&#x27;, &#x27;71.34%&#x27;]</span></span><br></pre></td></tr></table></figure></blockquote><hr><h3 id="filter">filter</h3><blockquote><p>○ filter</p><p><strong>用Python-filter代码实现：在一个list中，删掉偶数，只保留奇数</strong></p><p>○Python内建的filter()函数用于过滤序列。和map()类似，filter()也接收一个函数和一个序列。</p><p>○filter()把传入的函数依次作用于每个元素，然后==根据返回值是True还是False决定保留还是丢弃==该元素。</p><p>○注意到filter()函数返回的是一个Iterator，也就是一个惰性序列。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例1：保留奇数</span></span><br><span class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>]</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func01</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">return</span> x % <span class="number">2</span> == <span class="number">1</span>   <span class="comment"># 注：保留奇数；返回结果true\false</span></span><br><span class="line"></span><br><span class="line">result = <span class="built_in">filter</span>(func01, a)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(result))</span><br><span class="line"><span class="comment">#结果为 [1, 3, 5, 7]</span></span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment"># 示例2：返回100以内的回数</span></span><br><span class="line">b = <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">101</span>) <span class="comment"># 注：字符串反向切片</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func02</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">str</span>(x) == <span class="built_in">str</span>(x)[::-<span class="number">1</span>]</span><br><span class="line">result = <span class="built_in">filter</span>(func02, b)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(result))</span><br><span class="line"><span class="comment">#结果为 [1, 2, 3, 4, 5, 6, 7, 8, 9, 11, 22, 33, 44, 55, 66, 77, 88, 99]</span></span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment"># 示例3：过滤出 1-100 以内 开平方根 是整数的数</span></span><br><span class="line"><span class="comment"># 方法：开平方后还在原列表里</span></span><br><span class="line"><span class="comment"># 过滤出 1-100 以内 开平方根 是整数的数</span></span><br><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> sqrt</span><br><span class="line">c = <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">101</span>)</span><br><span class="line">result = <span class="built_in">filter</span>(<span class="keyword">lambda</span> x:sqrt(x) <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">101</span>) , <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">101</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(result)) <span class="comment"># 注：开平方后的数还在 c 里面</span></span><br><span class="line"><span class="comment">#结果为 [1, 4, 9, 16, 25, 36, 49, 64, 81, 100]</span></span><br></pre></td></tr></table></figure></blockquote><h3 id="sorted">sorted</h3><blockquote><p>● sorted</p><p><strong>用Python-sorted代码实现：按绝对值大小排序</strong></p><p>sorted()函数也是一个高阶函数，它还可以接收一个key函数来实现自定义的排序。</p><p>key指定的函数将作用于list的每一个元素上，并根据key函数返回的结果进行排序。</p><p>对比原始的list和经过key=abs处理过的list：</p><p>●执行语句：==sorted([36, 5, -12, 9, -21], key=abs)==</p><ol><li><p>原始字符：list = [36, 5, -12, 9, -21]</p></li><li><p>经过key-abs对应得到：[36, 5, 12, 9, 21]</p></li><li><p>按照keys-abs排序结果：[5, 9, 12, 21, 36]</p></li><li><p>原始字符串最终结果：[5, 9, -12, -21, 36]</p></li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例1：sorted(a)和a.sort()</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">0</span>]<span class="comment"># 注：不会改变a的值</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">sorted</span>(a)<span class="comment"># 注：从小到大排序</span></span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.sort()<span class="comment"># 注：会改变a的值</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment"># 示例2：全为布尔型，可以排序</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="number">1</span>,<span class="literal">True</span>,<span class="number">0</span>,<span class="literal">False</span>,<span class="string">&quot;c&quot;</span>==<span class="string">&quot;c&quot;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">sorted</span>(a)</span><br><span class="line">[<span class="number">0</span>, <span class="literal">False</span>, <span class="number">1</span>, <span class="literal">True</span>, <span class="literal">True</span>]</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment"># 示例3：按照字符串长度排序</span></span><br><span class="line"><span class="comment"># 注：按照首字母的ASCII码排序</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="string">&quot;abc&quot;</span>,<span class="string">&quot;defg&quot;</span>,<span class="string">&quot;123456&quot;</span>,<span class="string">&quot;1&quot;</span>,<span class="string">&quot;sbbbfg&quot;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">sorted</span>(a)</span><br><span class="line">[<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;123456&#x27;</span>, <span class="string">&#x27;abc&#x27;</span>, <span class="string">&#x27;defg&#x27;</span>, <span class="string">&#x27;sbbbfg&#x27;</span>]</span><br><span class="line"><span class="comment"># 注：按照字符串长度排序</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">sorted</span>(a,key=<span class="built_in">len</span>)</span><br><span class="line">[<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;abc&#x27;</span>, <span class="string">&#x27;defg&#x27;</span>, <span class="string">&#x27;123456&#x27;</span>, <span class="string">&#x27;sbbbfg&#x27;</span>]</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment"># 示例4：元组排序</span></span><br><span class="line"><span class="comment"># 元组的排序，先比较第一个值，再比较第二个，依次类推</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=[(<span class="number">1</span>,<span class="number">2</span>),(<span class="number">2</span>,<span class="number">2</span>),(<span class="number">1</span>,<span class="number">0</span>),(<span class="number">2</span>,<span class="number">4</span>),(<span class="literal">True</span>,<span class="literal">False</span>)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">sorted</span>(a)</span><br><span class="line">[(<span class="number">1</span>, <span class="number">0</span>), (<span class="literal">True</span>, <span class="literal">False</span>), (<span class="number">1</span>, <span class="number">2</span>), (<span class="number">2</span>, <span class="number">2</span>), (<span class="number">2</span>, <span class="number">4</span>)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">sorted</span>(a,reverse=<span class="literal">True</span>)<span class="comment"># 注：反序 reverse=True</span></span><br><span class="line">[(<span class="number">2</span>, <span class="number">4</span>), (<span class="number">2</span>, <span class="number">2</span>), (<span class="number">1</span>, <span class="number">2</span>), (<span class="number">1</span>, <span class="number">0</span>), (<span class="literal">True</span>, <span class="literal">False</span>)]</span><br></pre></td></tr></table></figure></blockquote><h3 id="reduce">reduce</h3><blockquote><p>○ reduce</p><p><strong>用Python-reduce代码实现：将列表[1,3,5,7,9]，变成整数13579</strong></p><p>○reduce把一个函数作用在一个序列[x1, x2, x3, …]上</p><p>○这个函数必须接收两个参数</p><p>○reduce把结果继续和序列的下一个元素做累积计算</p><p>○==reduce(f, [x1, x2, x3, x4]) =&gt; f(f(f(x1, x2), x3), x4)==</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例1：[1,2,3,4] --&gt; 转化成1234</span></span><br><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce<span class="comment"># 注：导入模块</span></span><br><span class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func1</span>(<span class="params">x,y</span>):<span class="comment"># 注：这个函数接收2个参数</span></span><br><span class="line">    <span class="keyword">return</span> x*<span class="number">10</span>+y</span><br><span class="line"><span class="built_in">print</span>(reduce(func1,a))</span><br><span class="line"><span class="comment">#结果为 1234</span></span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment"># 示例2：reduce 实现python的int功能</span></span><br><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</span><br><span class="line">a = <span class="built_in">input</span>(<span class="string">&quot;输入想要转化的数字：&quot;</span>)</span><br><span class="line">b = &#123;<span class="string">&#x27;1&#x27;</span>:<span class="number">1</span>,<span class="string">&#x27;2&#x27;</span>:<span class="number">2</span>,<span class="string">&#x27;3&#x27;</span>:<span class="number">3</span>,<span class="string">&#x27;4&#x27;</span>:<span class="number">4</span>,<span class="string">&#x27;5&#x27;</span>:<span class="number">5</span>,<span class="string">&#x27;6&#x27;</span>:<span class="number">6</span>,<span class="string">&#x27;7&#x27;</span>:<span class="number">7</span>,<span class="string">&#x27;8&#x27;</span>:<span class="number">8</span>,<span class="string">&#x27;9&#x27;</span>:<span class="number">9</span>,<span class="string">&#x27;0&#x27;</span>:<span class="number">0</span>&#125;</span><br><span class="line">c = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="keyword">lambda</span> i:b.get(i),a))</span><br><span class="line"><span class="built_in">print</span>(c)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">x,y</span>):</span><br><span class="line">    <span class="keyword">return</span> x*<span class="number">10</span>+y</span><br><span class="line">result = reduce(func,c)</span><br><span class="line"><span class="built_in">print</span>(result,<span class="built_in">type</span>(result))</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment"># 示例3：实现阶乘</span></span><br><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</span><br><span class="line">n = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;输入&quot;</span>))</span><br><span class="line">redu =reduce(<span class="keyword">lambda</span> x,y:x*y,<span class="built_in">range</span>(<span class="number">1</span>,n+<span class="number">1</span>))</span><br><span class="line"><span class="built_in">print</span>(redu)</span><br><span class="line"><span class="comment">#结果为 输入:4</span></span><br><span class="line"><span class="comment">#24</span></span><br></pre></td></tr></table></figure></blockquote><hr>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 函数 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>06_Python-CSDN_psutil模块</title>
      <link href="/blog/posts/314.html"/>
      <url>/blog/posts/314.html</url>
      
        <content type="html"><![CDATA[<p>摘要：以前在 <a href="https://blog.csdn.net/cpen_web/category_11089219.html"><code>CSDN 新星计划</code></a> 上写的文章，迁移至此。<span id="more"></span></p><h1 id="06-Python-psutil模块">06_Python-psutil模块</h1><p><a href="https://blog.csdn.net/cpen_web">博客🔗：https://blog.csdn.net/cpen_web</a></p><hr><h2 id="一-介绍">一. 介绍</h2><blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">介绍</span><br><span class="line">● process and system utilities</span><br><span class="line">● 能够轻松的实现获取系统运行的进程和系统利用率（CPU、内存、磁盘、网络等）信息，主要应用于系统监控</span><br><span class="line">● 实现了同等命令命令行实现的功能：ps、top、lsof、netstat、ifconfig、who、df、kill、free、nice、ionice、iostat、iotop、uptime、pidof、tty、taskset、pmap等</span><br><span class="line">● 跨平台：linux、windows、OS X、FreeBSD和Sun Solaris等</span><br><span class="line">● 主要功能包含：CPU、磁盘、内存、网络、进程</span><br></pre></td></tr></table></figure></blockquote><hr><h2 id="二-安装">二. 安装</h2><blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">安装</span><br><span class="line">● 源码安装：git <span class="built_in">clone</span> https://github.com/giampaolo/psutil.git</span><br><span class="line"><span class="built_in">cd</span> psutil</span><br><span class="line">python3 setup.py install</span><br><span class="line">● 先安装相关库：yum install python3-devel,(用yum list |grep python|grep dev  找到包名)， pip3 install psutil</span><br><span class="line">● 导入使用模块： import psutil</span><br><span class="line"></span><br><span class="line">[root@cPen_B ~]<span class="comment"># yum list |grep python |grep dev</span></span><br><span class="line">python36-devel.x86_64                                3.6.8-2.module_el8.1.0+245+c39af44f              @AppStream</span><br><span class="line">[root@cPen_B ~]<span class="comment"># yum install python36-devel.x86_64</span></span><br><span class="line">[root@cPen_B ~]<span class="comment"># pip3 install psutil</span></span><br></pre></td></tr></table></figure></blockquote><hr><h2 id="三-获取系统基本信息">三. 获取系统基本信息</h2><h3 id="CPU">CPU</h3><blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、cpu</span><br><span class="line">● psutil.cpu_count(,[logical]):默认返回逻辑CPU的个数,当设置logical的参数为<span class="literal">False</span>时，返回物理CPU的个数</span><br><span class="line">● psutil.cpu_percent(,[percpu],[interval])：返回CPU的利用率,percpu为<span class="literal">True</span>时显示所有物理核心的利用率,interval不为<span class="number">0</span>时,则阻塞时显示interval执行的时间内的平均利用率</span><br><span class="line">● psutil.cpu_times(,[percpu])：以命名元组(namedtuple)的形式返回cpu的时间花费,percpu=<span class="literal">True</span>表示获取每个CPU的时间花费</span><br><span class="line">user：执行用户进程的时间</span><br><span class="line">system：执行内核进程时间</span><br><span class="line">idle：闲置的时间</span><br><span class="line">iowait：等待io操作的时间</span><br><span class="line">irp：硬中断时间</span><br><span class="line">softirq：软中断时间</span><br><span class="line">● psutil.cpu_times_percent(,[percpu])：功能和cpu_times大致相同，返回耗时比例</span><br><span class="line">● psutil.cpu_stats(): 以命名元组的形式返回CPU的统计信息，包括上下文切换，中断，软中断和系统调用次数</span><br><span class="line">ctx_switches:上下文切换次数</span><br><span class="line">interrupts：中断次数</span><br><span class="line">soft_interrupts：软中断次数</span><br><span class="line">syscalls：系统调用次数，linux上始终为<span class="number">0</span></span><br><span class="line">● psutil.cpu_freq(): 返回cpu频率</span><br><span class="line"></span><br><span class="line"><span class="comment"># 示例1：返回CPU个数</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> psutil</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>psutil.cpu_count()<span class="comment"># 注：返回逻辑CPU个数</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>psutil.cpu_count(logical=<span class="literal">False</span>)<span class="comment"># 注：返回物理CPU个数</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="comment"># 示例2：CPU使用率 百分比利用率</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>psutil.cpu_percent()                                                                                                        </span><br><span class="line"><span class="number">0.1</span></span><br><span class="line"><span class="comment"># 示例3：cpu_times</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>psutil.cpu_times()<span class="comment"># 注：花费的时间占用总时间的百分比</span></span><br><span class="line">scputimes(user=<span class="number">105.27</span>, nice=<span class="number">0.1</span>, system=<span class="number">81.87</span>, idle=<span class="number">69229.05</span>, iowait=<span class="number">11.17</span>, irq=<span class="number">0.0</span>, softirq=<span class="number">5.25</span>, steal=<span class="number">0.0</span>, guest=<span class="number">0.0</span>, guest_nice=<span class="number">0.0</span>)</span><br><span class="line"><span class="comment"># 示例4：返回每个核的利用率</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>psutil.cpu_percent(percpu = <span class="literal">True</span>)</span><br><span class="line">[<span class="number">0.1</span>, <span class="number">0.1</span>]</span><br></pre></td></tr></table></figure></blockquote><h3 id="memory">memory</h3><blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2</span>、memory</span><br><span class="line">● virtual_memory():以命名元组的形式返回内存使用情况,单位为字节</span><br><span class="line">total:总物理内存</span><br><span class="line">available:可用内存，available ～free + buffers + cached</span><br><span class="line">percent:使用率： percent = (total - available) / total * <span class="number">100</span></span><br><span class="line">used：使用的内存： used  =  total - free - buffers - cache</span><br><span class="line">free：完全没用使用内存</span><br><span class="line">active：最近被访问的内存</span><br><span class="line">inactive：长时间未被访问的内存</span><br><span class="line">buffers：缓存</span><br><span class="line">cached：缓存</span><br><span class="line">slab：内核数据结构缓存的内存</span><br><span class="line">● swap_memory：以命名元组的形式返回swap/memory使用情况，包含swap中页的换入和换出</span><br><span class="line"></span><br><span class="line"><span class="comment"># 示例1：virtual_memory</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>psutil.virtual_memory()</span><br><span class="line">svmem(total=<span class="number">3953979392</span>, available=<span class="number">3447025664</span>, percent=<span class="number">12.8</span>, used=<span class="number">249577472</span>, free=<span class="number">3045027840</span>, active=<span class="number">350208000</span>, inactive=<span class="number">329723904</span>, buffers=<span class="number">2162688</span>, cached=<span class="number">657211392</span>, shared=<span class="number">12365824</span>, slab=<span class="number">117297152</span>)</span><br></pre></td></tr></table></figure></blockquote><h3 id="disk">disk</h3><blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3</span>、disk（linux命令：iostat，df）</span><br><span class="line">● psutil.disk_io_counters([perdisk])：以命名元组的形式返回磁盘io统计信息(汇总的)，包括读、写的次数，读、写的字节数等</span><br><span class="line">● psutil.disk_partitions(）:磁盘挂载分区信息</span><br><span class="line">device：分区</span><br><span class="line">mountpoint：挂载点</span><br><span class="line">fstype：文件系统格式（fat、ext4、 xfs）</span><br><span class="line">opts：挂载参数</span><br><span class="line">● disk_usage：磁盘使用情况，需要传入一个路径参数</span><br><span class="line">&gt;&gt;&gt; psutil.disk_usage(<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">sdiskusage(total=<span class="number">250685575168</span>, used=<span class="number">103938019328</span>, free=<span class="number">134242258944</span>, percent=<span class="number">43.6</span>)</span><br><span class="line">● iostat   ：  %util 数值越大越忙碌，到达了io瓶颈（安装包：yum install sysstat）</span><br><span class="line"></span><br><span class="line"><span class="comment"># 示例1：磁盘挂载分区信息 disk_partitions</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>psutil.disk_partitions()                                                                                                                </span><br><span class="line">[sdiskpart(device=<span class="string">&#x27;/dev/mapper/centos-root&#x27;</span>, mountpoint=<span class="string">&#x27;/&#x27;</span>, fstype=<span class="string">&#x27;xfs&#x27;</span>, opts=<span class="string">&#x27;rw,relatime,attr2,inode64,noquota&#x27;</span>), sdiskpart(device=<span class="string">&#x27;/dev/sda1&#x27;</span>, mountpoint=<span class="string">&#x27;/boot&#x27;</span>, fstype=<span class="string">&#x27;xfs&#x27;</span>, opts=<span class="string">&#x27;rw,relatime,attr2,inode64,noquota&#x27;</span>)]</span><br><span class="line"><span class="comment"># 示例2：磁盘使用情况 disk_usage</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>psutil.disk_usage(<span class="string">&quot;/&quot;</span>)<span class="comment"># 注：需要接挂载点</span></span><br><span class="line">sdiskusage(total=<span class="number">18238930944</span>, used=<span class="number">2300264448</span>, free=<span class="number">15938666496</span>, percent=<span class="number">12.6</span>)</span><br></pre></td></tr></table></figure></blockquote><h3 id="Network">Network</h3><blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">4</span>、Network（linux命令：ifconfig、who、uptime，netstat）</span><br><span class="line">● psutil.net_io_counters([pernic])：以命名元组的形式返回当前系统中每块网卡的网络io统计信息，包括收发字节数，收发包的数量、出错的情况和删包情况。当pernic为<span class="literal">True</span>时，则列出所有网卡的统计信息</span><br><span class="line">● psutil.net_connections([kind])：以列表的形式返回每个网络连接的详细信息(namedtuple)</span><br><span class="line">fd：文件描述符</span><br><span class="line">family：地址簇，ipv4（AF_INET），ipv6</span><br><span class="line"><span class="built_in">type</span>：SOCK_STREAM（tcp）、udp</span><br><span class="line">laddr:本地ip地址</span><br><span class="line">raddr</span><br><span class="line">status</span><br><span class="line">pid</span><br><span class="line">● psutil.net_if_addrs()：以字典的形式返回网卡的配置信息，包括IP地址和mac地址、子网掩码和广播地址</span><br><span class="line">● psutil.net_if_stats()：返回网卡的详细信息，包括是否启动、通信类型、传输速度与mtu</span><br><span class="line">mtu：最大传输单元</span><br><span class="line">● psutil.users()：以命名元组的方式返回当前登陆用户的信息，包括用户名，登陆时间，终端</span><br><span class="line">● psutil.boot_time()：以时间戳的形式返回系统的启动时间</span><br><span class="line"></span><br><span class="line"><span class="comment"># 示例1：psutil.users 以命名元组的方式返回当前登陆用户的信息，包括用户名，登陆时间，终端</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>psutil.users()<span class="comment"># 注：w、who命令</span></span><br><span class="line">[suser(name=<span class="string">&#x27;root&#x27;</span>, terminal=<span class="string">&#x27;tty1&#x27;</span>, host=<span class="string">&#x27;&#x27;</span>, started=<span class="number">1606217600.0</span>, pid=<span class="number">708</span>), suser(name=<span class="string">&#x27;root&#x27;</span>, terminal=<span class="string">&#x27;pts/0&#x27;</span>, host=<span class="string">&#x27;192.168.0.42&#x27;</span>, started=<span class="number">1606361216.0</span>, pid=<span class="number">5921</span>), suser(name=<span class="string">&#x27;root&#x27;</span>, terminal=<span class="string">&#x27;pts/2&#x27;</span>, host=<span class="string">&#x27;192.168.0.42&#x27;</span>, started=<span class="number">1606361216.0</span>, pid=<span class="number">5942</span>), suser(name=<span class="string">&#x27;root&#x27;</span>, terminal=<span class="string">&#x27;pts/6&#x27;</span>, host=<span class="string">&#x27;192.168.0.42&#x27;</span>, started=<span class="number">1606354816.0</span>, pid=<span class="number">5239</span>), suser(name=<span class="string">&#x27;root&#x27;</span>, terminal=<span class="string">&#x27;pts/7&#x27;</span>, host=<span class="string">&#x27;192.168.0.42&#x27;</span>, started=<span class="number">1606357120.0</span>, pid=<span class="number">5312</span>)]</span><br><span class="line"><span class="comment"># 示例2：net_if_addrs</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>psutil.net_if_addrs()<span class="comment"># 注：lo本地回环地址 127.0.0.1</span></span><br><span class="line">&#123;<span class="string">&#x27;lo&#x27;</span>: [snicaddr(family=&lt;AddressFamily.AF_INET: <span class="number">2</span>&gt;, address=<span class="string">&#x27;127.0.0.1&#x27;</span>, netmask=<span class="string">&#x27;255.0.0.0&#x27;</span>, broadcast=<span class="literal">None</span>, ptp=<span class="literal">None</span>), snicaddr(family=&lt;AddressFamily.AF_INET6: <span class="number">10</span>&gt;, address=<span class="string">&#x27;::1&#x27;</span>, netmask=<span class="string">&#x27;ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff&#x27;</span>, broadcast=<span class="literal">None</span>, ptp=<span class="literal">None</span>), snicaddr(family=&lt;AddressFamily.AF_PACKET: <span class="number">17</span>&gt;, address=<span class="string">&#x27;00:00:00:00:00:00&#x27;</span>, netmask=<span class="literal">None</span>, broadcast=<span class="literal">None</span>, ptp=<span class="literal">None</span>)], <span class="string">&#x27;ens33&#x27;</span>: [snicaddr(family=&lt;AddressFamily.AF_INET: <span class="number">2</span>&gt;, address=<span class="string">&#x27;192.168.0.21&#x27;</span>, netmask=<span class="string">&#x27;255.255.255.0&#x27;</span>, broadcast=<span class="string">&#x27;192.168.0.255&#x27;</span>, ptp=<span class="literal">None</span>), snicaddr(family=&lt;AddressFamily.AF_INET6: <span class="number">10</span>&gt;, address=<span class="string">&#x27;fe80::22d8:5740:d6d7:d1ff%ens33&#x27;</span>, netmask=<span class="string">&#x27;ffff:ffff:ffff:ffff::&#x27;</span>, broadcast=<span class="literal">None</span>, ptp=<span class="literal">None</span>), snicaddr(family=&lt;AddressFamily.AF_PACKET: <span class="number">17</span>&gt;, address=<span class="string">&#x27;00:0c:29:d1:80:fa&#x27;</span>, netmask=<span class="literal">None</span>, broadcast=<span class="string">&#x27;ff:ff:ff:ff:ff:ff&#x27;</span>, ptp=<span class="literal">None</span>)]&#125;</span><br></pre></td></tr></table></figure></blockquote><h3 id="进程管理">进程管理</h3><blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">5</span>、进程管理（linux命令：ps、kill）</span><br><span class="line">● psutil.pids()：以列表的形式返回当前正在运行的进程</span><br><span class="line">● psutil.pid_exists(<span class="number">1</span>)：判断给点定的pid是否存在</span><br><span class="line">● psutil.Process(<span class="number">1</span>)：对进程进行封装，可以使用该类的方法获取进行的详细信息，或者给进程发送信号</span><br><span class="line">● psutil.process_iter()：迭代当前正在运行的进程，返回的是每个进程的Process对象</span><br><span class="line">name：获取进程的名称</span><br><span class="line">cmdline：获取启动进程的命令行参数</span><br><span class="line">create_time：获取进程的创建时间</span><br><span class="line">uids：进程uid信息</span><br><span class="line">num_threads：开启的线程数</span><br><span class="line">exe：进程工作的绝对路径</span><br><span class="line">kill：发送SIGKILL信号结束进程</span><br><span class="line"></span><br><span class="line">示例：process_iter 迭代当前正在运行的进程</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>psutil.process_iter()                                                                                                                   </span><br><span class="line">&lt;generator <span class="built_in">object</span> process_iter at <span class="number">0x7f56eb912888</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p = psutil.process_iter()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">next</span>(p)</span><br><span class="line">psutil.Process(pid=<span class="number">1</span>, name=<span class="string">&#x27;systemd&#x27;</span>, status=<span class="string">&#x27;sleeping&#x27;</span>, started=<span class="string">&#x27;01:52:52&#x27;</span>)</span><br></pre></td></tr></table></figure></blockquote><hr>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 模块 </tag>
            
            <tag> psutil </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>05_Python-CSDN_排序算法</title>
      <link href="/blog/posts/49827.html"/>
      <url>/blog/posts/49827.html</url>
      
        <content type="html"><![CDATA[<p>摘要：以前在 <a href="https://blog.csdn.net/cpen_web/category_11089219.html"><code>CSDN 新星计划</code></a> 上写的文章，迁移至此。<span id="more"></span></p><h1 id="05-Python-排序算法">05_Python-排序算法</h1><p><a href="https://blog.csdn.net/cpen_web">博客🔗：https://blog.csdn.net/cpen_web</a></p><hr><h2 id="一-顺序查找">一. 顺序查找</h2><blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">● 顺序查找</span><br><span class="line">顺序查找：也叫线性查找，从列表第一个元素开始，顺序进行搜索，直到找到元素或搜索到列表最后一个元素为止。</span><br><span class="line">时间复杂度：O(n)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Linear_search</span>(<span class="params">li, val</span>):     <span class="comment"># 注：li列表 ；val待查找的元素</span></span><br><span class="line">    <span class="keyword">for</span> ind, v <span class="keyword">in</span> <span class="built_in">enumerate</span>(li):       <span class="comment"># 注：因为要返回个下标 所以用 enumerate index和值都需要</span></span><br><span class="line">        <span class="keyword">if</span> v == val:    <span class="comment"># 注：如果v == 我们要找的那个值 那就返回 它的index</span></span><br><span class="line">            <span class="keyword">return</span> ind</span><br><span class="line">    <span class="keyword">else</span>:   <span class="comment"># 如果for循环结束后还没有找到 返回None</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br></pre></td></tr></table></figure><p><a href="https://www.bilibili.com/video/BV1mp4y1D7UP?p=7">b站视频 路飞IT学城<br>https://www.bilibili.com/video/BV1mp4y1D7UP?p=7</a><br><a href="https://www.runoob.com/python3/python-linear-search.html">菜鸟教程 Python线性查找<br>https://www.runoob.com/python3/python-linear-search.html</a></p></blockquote><hr><h2 id="二-二分查找">二. 二分查找</h2><blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">● 二分查找</span><br><span class="line">二分查找：又叫折半查找，从有序列表的初始候选区li[<span class="number">0</span>:n]开始，通过对待查找的值与候选区中间值的比较，可以使候选区减少一半。</span><br><span class="line"></span><br><span class="line">时间复杂度：O(logn)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">binary_search</span>(<span class="params">li, val</span>): <span class="comment"># li 列表  val待查找的值</span></span><br><span class="line">    left = <span class="number">0</span></span><br><span class="line">    right = <span class="built_in">len</span>(li) - <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> left &lt;= right:    <span class="comment"># 注：循环条件 说明候选区有值</span></span><br><span class="line">        mid = (left + right) // <span class="number">2</span>   <span class="comment"># 注：中间值(下标) 是整除2</span></span><br><span class="line">        <span class="keyword">if</span> li[mid] == val:  <span class="comment"># 注：== 找到的情况   每次对比都是对比的li[mid]</span></span><br><span class="line">            <span class="keyword">return</span> mid      <span class="comment"># 注：返回下标 mid</span></span><br><span class="line">        <span class="keyword">elif</span> li[mid] &gt; val:  <span class="comment"># 注：代表 待查找的值val在 mid左边</span></span><br><span class="line">            right = mid - <span class="number">1</span>  <span class="comment"># 注：更新候选区了 这种情况就可以继续循环</span></span><br><span class="line">        <span class="keyword">else</span>:               <span class="comment"># 注：第3种情况 li[mid] &lt; val  待查找的值在mid右侧</span></span><br><span class="line">            left = mid + <span class="number">1</span>   <span class="comment"># 注：更新候选区  继续循环</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span>         <span class="comment"># 注：如果找不到的情况 即不满足 left &lt;= right 时</span></span><br><span class="line"></span><br><span class="line">li = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>]</span><br><span class="line"><span class="built_in">print</span>(binary_search(li,<span class="number">3</span>))       <span class="comment"># 注：调用二分查找 查3</span></span><br></pre></td></tr></table></figure><p><a href="https://www.bilibili.com/video/BV1mp4y1D7UP?p=8">b站视频 路飞IT学城<br>https://www.bilibili.com/video/BV1mp4y1D7UP?p=8</a><br><a href="https://www.runoob.com/python3/python-binary-search.html">菜鸟教程 Python二分查找<br>https://www.runoob.com/python3/python-binary-search.html</a></p></blockquote><hr><h2 id="三-冒泡排序">三. 冒泡排序</h2><blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">冒泡排序：列表每两个相邻的数，如果前面比后面大，则交换这两个数。</span><br><span class="line">时间复杂度：O(n**<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">bubble_sort2</span>(<span class="params">li</span>):</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(li)-<span class="number">1</span>):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(li)-i-<span class="number">1</span>):</span><br><span class="line">            <span class="keyword">if</span> li[j] &gt; li[j+<span class="number">1</span>]:</span><br><span class="line">                li[j], li[j+<span class="number">1</span>] = li[j+<span class="number">1</span>], li[j]</span><br><span class="line"></span><br><span class="line">改进：如果冒泡排序中的一趟排序没有发生交换，则说明列表已经有序，可以直接结束算法。</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">bubble_sort_1</span>(<span class="params">li</span>):</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(li)-<span class="number">1</span>):</span><br><span class="line">        exchange = <span class="literal">False</span>        <span class="comment"># 在第i趟那加标志位</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(li)-i-<span class="number">1</span>):</span><br><span class="line">            <span class="keyword">if</span> li[j] &gt; li[j+<span class="number">1</span>]:</span><br><span class="line">                li[j], li[j+<span class="number">1</span>] = li[j+<span class="number">1</span>], li[j]</span><br><span class="line">                exchange = <span class="literal">True</span> <span class="comment"># 注：如果有交换 把它识成True  交换这里也是1个标志位</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> exchange:    <span class="comment"># 注：如果每1趟结束后 exchange没有发生交换 (这个在for里面)</span></span><br><span class="line">            <span class="keyword">return</span>          <span class="comment"># 注：就直接结束掉这个函数</span></span><br></pre></td></tr></table></figure><p><a href="https://www.bilibili.com/video/BV1mp4y1D7UP?p=12">b站视频 路飞IT学城<br>https://www.bilibili.com/video/BV1mp4y1D7UP?p=12</a><br><a href="https://www.runoob.com/python3/python-bubble-sort.html">菜鸟教程 Python冒泡排序<br>https://www.runoob.com/python3/python-bubble-sort.html</a></p></blockquote><hr><h2 id="四-选择排序">四. 选择排序</h2><blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">选择排序：首先在未排序序列中找到最小（大）元素，存放到排序序列的起始位置，然后，再从剩余未排序元素中继续寻找最小（大）元素，然后放到已排序序列的末尾。以此类推，直到所有元素均排序完毕。</span><br><span class="line">时间复杂度：O(n**<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">select_sort</span>(<span class="params">li</span>):</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(li) - <span class="number">1</span>):</span><br><span class="line">        min_loc = i</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(i+<span class="number">1</span>, <span class="built_in">len</span>(li)):</span><br><span class="line">            <span class="keyword">if</span> li[j] &lt; li[min_loc]:</span><br><span class="line">                min_loc = j</span><br><span class="line">        <span class="keyword">if</span> min_loc != i:</span><br><span class="line">            li[i], li[min_loc] = li[min_loc], li[i]</span><br></pre></td></tr></table></figure><p><a href="https://www.bilibili.com/video/BV1mp4y1D7UP?p=14">b站视频 路飞IT学城<br>https://www.bilibili.com/video/BV1mp4y1D7UP?p=14</a><br><a href="https://www.runoob.com/python3/python-selection-sort.html">菜鸟教程 Python选择排序<br>https://www.runoob.com/python3/python-selection-sort.html</a></p></blockquote><hr><h2 id="五-插入排序">五. 插入排序</h2><blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">插入排序：它的工作原理是通过构建有序序列，对于未排序数据，在已排序序列中从后向前扫描，找到相应位置并插入。</span><br><span class="line">时间复杂度：O(n**<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">insert_sort</span>(<span class="params">li</span>):</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="built_in">len</span>(li)):</span><br><span class="line">        tmp = li[i]</span><br><span class="line">        j = i - <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> j &gt;= <span class="number">0</span> <span class="keyword">and</span> tmp &lt; li[j]:</span><br><span class="line">            li[j + <span class="number">1</span>] = li[j]</span><br><span class="line">            j = j - <span class="number">1</span></span><br><span class="line">        li[j + <span class="number">1</span>] = tmp</span><br></pre></td></tr></table></figure><p><a href="https://www.bilibili.com/video/BV1mp4y1D7UP?p=15">b站视频 路飞IT学城<br>https://www.bilibili.com/video/BV1mp4y1D7UP?p=15</a><br><a href="https://www.runoob.com/python3/python-insertion-sort.html">菜鸟教程 Python插入排序<br>https://www.runoob.com/python3/python-insertion-sort.html</a></p></blockquote><hr><h2 id="六-快速排序">六. 快速排序</h2><blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">快速排序：快速排序使用分治法（Divide <span class="keyword">and</span> conquer）策略来把一个序列（<span class="built_in">list</span>）分为较小和较大的<span class="number">2</span>个子序列，然后递归地排序两个子序列。</span><br><span class="line">时间复杂度：O(nlogn)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 快速排序-partition函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">partition</span>(<span class="params">li, left, right</span>):</span><br><span class="line">    tmp = li[left]</span><br><span class="line">    <span class="keyword">while</span> left &lt; right:</span><br><span class="line">        <span class="keyword">while</span> left &lt; right <span class="keyword">and</span> li[right] &gt;= tmp: <span class="comment"># 从右边找比tmp小的数</span></span><br><span class="line">            right -= <span class="number">1</span>          <span class="comment"># 往右走一步</span></span><br><span class="line">        li[left] = li[right]    <span class="comment"># 把右边的值写到左边空位上</span></span><br><span class="line">        <span class="keyword">while</span> left &lt; right <span class="keyword">and</span> li[left] &lt;= tmp:</span><br><span class="line">            left += <span class="number">1</span></span><br><span class="line">        li[right] = li[left]    <span class="comment"># 把左边的值写到右边空位上</span></span><br><span class="line">    li[left] = tmp              <span class="comment"># 把tmp归位</span></span><br><span class="line">    <span class="keyword">return</span> left     <span class="comment"># mid 是 这个函数返回left值的目的</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 快速排序-框架</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">quick_sort</span>(<span class="params">li, left, right</span>):</span><br><span class="line">    <span class="keyword">if</span> left &lt; right:    <span class="comment"># 至少2个元素</span></span><br><span class="line">        mid = partition(li, left, right)    <span class="comment"># 这个函数返回left值的目的</span></span><br><span class="line">        quick_sort(li, left, mid - <span class="number">1</span>)   <span class="comment"># 左边部分</span></span><br><span class="line">        quick_sort(li, mid + <span class="number">1</span>, right)  <span class="comment"># 右边部分</span></span><br><span class="line"></span><br><span class="line">li = [<span class="number">5</span>,<span class="number">7</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">9</span>,<span class="number">8</span>]</span><br><span class="line">quick_sort(li, <span class="number">0</span>, <span class="built_in">len</span>(li)-<span class="number">1</span>)</span><br></pre></td></tr></table></figure><p><a href="https://www.bilibili.com/video/BV1mp4y1D7UP?p=16">b站视频 路飞IT学城<br>https://www.bilibili.com/video/BV1mp4y1D7UP?p=16</a><br><a href="https://www.runoob.com/python3/python-quicksort.html">菜鸟教程 Python快速排序<br>https://www.runoob.com/python3/python-quicksort.html</a></p></blockquote><hr><h2 id="七-堆排序">七. 堆排序</h2><blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">堆排序：堆排序（Heapsort）是指利用堆这种数据结构所设计的一种排序算法。</span><br><span class="line">时间复杂度：O(nlogn)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sift</span>(<span class="params">li, low, high</span>):   <span class="comment"># 向下调整函数</span></span><br><span class="line">    <span class="comment"># li：列表</span></span><br><span class="line">    <span class="comment"># low: 堆的根节点位置</span></span><br><span class="line">    <span class="comment"># high: 堆的最后一个元素的位置</span></span><br><span class="line">    i = low <span class="comment"># i最开始指向根节点</span></span><br><span class="line">    j = <span class="number">2</span> * i + <span class="number">1</span>   <span class="comment"># j开始是左孩子</span></span><br><span class="line">    tmp = li[low]   <span class="comment"># 把堆顶存起来</span></span><br><span class="line">    <span class="keyword">while</span> j &lt;= high:    <span class="comment"># 只要j位置有数</span></span><br><span class="line">        <span class="keyword">if</span> j + <span class="number">1</span> &lt;= high <span class="keyword">and</span> li[j+<span class="number">1</span>] &gt; li[j]: <span class="comment"># 如果有孩子有并且比较大</span></span><br><span class="line">            j = j + <span class="number">1</span>   <span class="comment"># j指向右孩子</span></span><br><span class="line">        <span class="keyword">if</span> li[j] &gt; tmp:</span><br><span class="line">            li[i] = li[j]</span><br><span class="line">            i = j       <span class="comment"># 往下看一层</span></span><br><span class="line">            j = <span class="number">2</span> * i + <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:   <span class="comment"># tmp更大，把tmp放到i的位置上</span></span><br><span class="line">            li[i] = tmp <span class="comment"># 该语句可省 # 把tmp放到某一级领导位置上</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        li[i] = tmp <span class="comment"># 把tmp放到叶子节点上</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">heap_sort</span>(<span class="params">li</span>):    <span class="comment"># 建堆函数</span></span><br><span class="line">    n = <span class="built_in">len</span>(li)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>((n-<span class="number">2</span>)//<span class="number">2</span>, -<span class="number">1</span>, -<span class="number">1</span>):</span><br><span class="line">        <span class="comment"># i表示建堆的时候调整的部分的根的下标</span></span><br><span class="line">        sift(li, i, n-<span class="number">1</span>)    <span class="comment"># 这里不是递归</span></span><br><span class="line">    <span class="comment">#建堆完成了</span></span><br><span class="line"><span class="comment">#---------------------这一步 挨个出数的步骤</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n-<span class="number">1</span>, -<span class="number">1</span>, -<span class="number">1</span>):</span><br><span class="line">        <span class="comment"># i指向当前堆的最后一个元素</span></span><br><span class="line">        li[<span class="number">0</span>], li[i] = li[i], li[<span class="number">0</span>]</span><br><span class="line">        sift(li, <span class="number">0</span>, i - <span class="number">1</span>)  <span class="comment"># i-1是新的high</span></span><br></pre></td></tr></table></figure><p><a href="https://www.bilibili.com/video/BV1mp4y1D7UP?p=22">b站视频 路飞IT学城<br>https://www.bilibili.com/video/BV1mp4y1D7UP?p=22</a><br><a href="https://www.runoob.com/python3/python-heap-sort.html">菜鸟教程 Python堆排序<br>https://www.runoob.com/python3/python-heap-sort.html</a></p></blockquote><hr><h2 id="八-归并排序">八. 归并排序</h2><blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">归并排序：创建在归并操作上的一种有效的排序算法。</span><br><span class="line">时间复杂度：O(nlogn)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">merge</span>(<span class="params">li, low, mid, high</span>):</span><br><span class="line">    i = low</span><br><span class="line">    j = mid + <span class="number">1</span></span><br><span class="line">    ltmp = []</span><br><span class="line">    <span class="keyword">while</span> i&lt;=mid <span class="keyword">and</span> j&lt;=high:   <span class="comment"># 只要左右两边都有数</span></span><br><span class="line">        <span class="keyword">if</span> li[i] &lt; li[j]:</span><br><span class="line">            ltmp.append(li[i])</span><br><span class="line">            i +=<span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            ltmp.append(li[j])</span><br><span class="line">            j += <span class="number">1</span></span><br><span class="line">    <span class="comment"># while执行完，肯定有一部分没数了</span></span><br><span class="line">    <span class="keyword">while</span> i &lt;= mid:</span><br><span class="line">        ltmp.append(li[i])</span><br><span class="line">        i += <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> j &lt;= high:</span><br><span class="line">        ltmp.append(li[j])</span><br><span class="line">        j += <span class="number">1</span></span><br><span class="line">    li[low:high+<span class="number">1</span>] = ltmp</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">merge_sort</span>(<span class="params">li, low, high</span>):</span><br><span class="line">    <span class="keyword">if</span> low &lt; high:  <span class="comment"># 至少有2个元素，递归</span></span><br><span class="line">        mid = (low + high) // <span class="number">2</span></span><br><span class="line">        merge_sort(li, low, mid)</span><br><span class="line">        merge_sort(li, mid+<span class="number">1</span>, high)</span><br><span class="line">        merge(li, low, mid, high)</span><br></pre></td></tr></table></figure><p><a href="https://www.bilibili.com/video/BV1mp4y1D7UP?p=30">b站视频 路飞IT学城<br>https://www.bilibili.com/video/BV1mp4y1D7UP?p=30</a><br><a href="https://www.runoob.com/python3/python-merge-sort.html">菜鸟教程 Python归并排序<br>https://www.runoob.com/python3/python-merge-sort.html</a></p></blockquote><hr><h2 id="九-希尔排序">九. 希尔排序</h2><blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">希尔排序：希尔排序(Shell Sort)是一种分组插入排序算法。</span><br><span class="line">时间复杂度讨论比较复杂，并且和选取的gap序列有关。</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">insert_sort_gap</span>(<span class="params">li, gap</span>):</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(gap, <span class="built_in">len</span>(li)):   <span class="comment"># i 表示摸到的牌的下标</span></span><br><span class="line">        tmp = li[i]</span><br><span class="line">        j = i - gap <span class="comment"># j指的是手里牌的下标</span></span><br><span class="line">        <span class="keyword">while</span> j &gt;= <span class="number">0</span> <span class="keyword">and</span> li[j] &gt; tmp:</span><br><span class="line">            li[j+gap] = li[j]</span><br><span class="line">            j = j - gap</span><br><span class="line">        li[j+gap] = tmp</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">shell_sort</span>(<span class="params">li</span>):</span><br><span class="line">    d = <span class="built_in">len</span>(li) // <span class="number">2</span></span><br><span class="line">    <span class="keyword">while</span> d &gt;= <span class="number">1</span>:</span><br><span class="line">        insert_sort_gap(li, d)</span><br><span class="line">        d //= <span class="number">2</span></span><br></pre></td></tr></table></figure><p><a href="https://www.bilibili.com/video/BV1mp4y1D7UP?p=34">b站视频 路飞IT学城<br>https://www.bilibili.com/video/BV1mp4y1D7UP?p=34</a><br><a href="https://www.runoob.com/python3/python-shellsort.html">菜鸟教程 Python希尔排序<br>https://www.runoob.com/python3/python-shellsort.html</a></p></blockquote><hr><h2 id="十-计数排序">十. 计数排序</h2><blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">计数排序：计数排序的核心在于将输入的数据值转化为键存储在额外开辟的数组空间中。</span><br><span class="line">时间复杂度：O(n)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">count_sort</span>(<span class="params">li, max_count=<span class="number">100</span></span>):</span><br><span class="line">    count = [<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(max_count+<span class="number">1</span>)]</span><br><span class="line">    <span class="keyword">for</span> val <span class="keyword">in</span> li:</span><br><span class="line">        count[val] += <span class="number">1</span></span><br><span class="line">    li.clear()</span><br><span class="line">    <span class="keyword">for</span> ind, val <span class="keyword">in</span> <span class="built_in">enumerate</span>(count):</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(val):</span><br><span class="line">            li.append(ind)</span><br></pre></td></tr></table></figure><p><a href="https://www.bilibili.com/video/BV1mp4y1D7UP?p=36">b站视频 路飞IT学城<br>https://www.bilibili.com/video/BV1mp4y1D7UP?p=36</a><br><a href="https://www.runoob.com/python3/python-counting-sort.html">菜鸟教程 Python计数排序<br>https://www.runoob.com/python3/python-counting-sort.html</a></p></blockquote><hr><h2 id="十一-桶排序">十一. 桶排序</h2><blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">桶排序：首先将元素分在不同的桶中，在对每个桶中的元素排序。</span><br><span class="line">时间复杂度 取决于数据的分布</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">bucket_sort</span>(<span class="params">li, n=<span class="number">100</span>, max_num=<span class="number">10000</span></span>):</span><br><span class="line">    buckets = [[] <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(n)]    <span class="comment"># 创建桶</span></span><br><span class="line">    <span class="keyword">for</span> var <span class="keyword">in</span> li:</span><br><span class="line">        i = <span class="built_in">min</span>(var // (max_num // n), n-<span class="number">1</span>) <span class="comment"># i表示var放到几号桶里</span></span><br><span class="line">        buckets[i].append(var)  <span class="comment"># 把var加到桶里面</span></span><br><span class="line">        <span class="comment"># 保持桶内的顺序</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(buckets[i])-<span class="number">1</span>, <span class="number">0</span>, -<span class="number">1</span>):</span><br><span class="line">            <span class="keyword">if</span> buckets[i][j] &lt; buckets[i][j-<span class="number">1</span>]:</span><br><span class="line">                buckets[i][j], buckets[i][j-<span class="number">1</span>] = buckets[i][j-<span class="number">1</span>], buckets[i][j]</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">    sorted_li = []</span><br><span class="line">    <span class="keyword">for</span> buc <span class="keyword">in</span> buckets:</span><br><span class="line">        sorted_li.extend(buc)</span><br><span class="line">    <span class="keyword">return</span> sorted_li</span><br></pre></td></tr></table></figure><p><a href="https://www.bilibili.com/video/BV1mp4y1D7UP?p=37">b站视频 路飞IT学城<br>https://www.bilibili.com/video/BV1mp4y1D7UP?p=37</a><br><a href="https://www.runoob.com/w3cnote/bucket-sort.html">菜鸟教程 桶排序<br>https://www.runoob.com/w3cnote/bucket-sort.html</a></p></blockquote><hr><h2 id="十二-基数排序">十二. 基数排序</h2><blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">基数排序：基数排序是一种非比较型整数排序算法，其原理是将整数按位数切割成不同的数字，然后按每个位数分别比较。</span><br><span class="line">时间复杂度：O(kn)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">list_to_buckets</span>(<span class="params">li, base, iteration</span>):</span><br><span class="line">    buckets = [[] <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(base)]</span><br><span class="line">    <span class="keyword">for</span> number <span class="keyword">in</span> li:</span><br><span class="line">        digit = (number // (base ** iteration)) % base</span><br><span class="line">        buckets[digit].append(number)</span><br><span class="line">    <span class="keyword">return</span> buckets</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">buckets_to_list</span>(<span class="params">buckets</span>):</span><br><span class="line">    <span class="keyword">return</span> [x <span class="keyword">for</span> bucket <span class="keyword">in</span> buckets <span class="keyword">for</span> x <span class="keyword">in</span> bucket]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">radix_sort</span>(<span class="params">li, base=<span class="number">10</span></span>):</span><br><span class="line">    maxval = <span class="built_in">max</span>(li)</span><br><span class="line">    it = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> base ** it &lt;= maxval:</span><br><span class="line">        li = buckets_to_list(list_to_buckets(list_to_buckets(li, base, it)))</span><br><span class="line">        it += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> li</span><br></pre></td></tr></table></figure><p><a href="https://www.bilibili.com/video/BV1mp4y1D7UP?p=39">b站视频 路飞IT学城<br>https://www.bilibili.com/video/BV1mp4y1D7UP?p=39</a><br><a href="https://www.runoob.com/w3cnote/radix-sort.html">菜鸟教程 基数排序<br>https://www.runoob.com/w3cnote/radix-sort.html</a></p></blockquote><hr>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 算法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>04_Python-CSDN_mail模块</title>
      <link href="/blog/posts/33188.html"/>
      <url>/blog/posts/33188.html</url>
      
        <content type="html"><![CDATA[<p>摘要：以前在 <a href="https://blog.csdn.net/cpen_web/category_11089219.html"><code>CSDN 新星计划</code></a> 上写的文章，迁移至此。<span id="more"></span></p><h1 id="04-Python-mail模块">04_Python-mail模块</h1><p><a href="https://blog.csdn.net/cpen_web">博客🔗：https://blog.csdn.net/cpen_web</a></p><hr><h2 id="一-理论">一. 理论</h2><blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mail模块作用</span><br><span class="line">1、邮件报警</span><br><span class="line">2、发送报表</span><br><span class="line"></span><br><span class="line">邮件协议</span><br><span class="line">1、smtp (simple mail transfer protocol) 简单邮件传输协议，主要用来发送文件  默认端口 25号</span><br><span class="line">2、pop3  主要用来接收邮件   默认端口 110    客户端的操作不会反馈到服务器端</span><br><span class="line">3、imap  主要用来接收邮件   默认端口 143    客户端的操作会反馈到服务器端</span><br><span class="line"></span><br><span class="line">[参考：菜鸟教程 https://www.runoob.com/python3/python3-smtp.html</span><br><span class="line">](https://www.runoob.com/python3/python3-smtp.html)</span><br></pre></td></tr></table></figure></blockquote><hr><h2 id="二-步骤">二. 步骤</h2><h3 id="QQ邮箱获取授权码">QQ邮箱获取授权码</h3><blockquote><p>○ QQ邮箱获取授权码</p><p>[参考：获取授权码]</p><p>(<a href="https://service.mail.qq.com/cgi-bin/help?subtype=1&amp;&amp;id=28&amp;&amp;no=1001256">https://service.mail.qq.com/cgi-bin/help?subtype=1&amp;&amp;id=28&amp;&amp;no=1001256</a>)</p><p>先进入设置 －&gt; 帐户页面找到入口</p><p>（1）点击“开启”</p><p>（2）验证密保</p><p>（3）获取授权码</p><p><img src="https://image.cpen.top/image/image-20220505035438263.png" alt="image-20220505035438263"></p><p><img src="https://image.cpen.top/image/image-20220505035449933.png" alt="image-20220505035449933"></p><p><img src="https://image.cpen.top/image/image-20220505035503147.png" alt="image-20220505035503147"></p><p>或者开启IMAP/SMTP服务，同理</p><p><img src="https://image.cpen.top/image/image-20220505035521956.png" alt="image-20220505035521956"></p></blockquote><h3 id="代码部分">代码部分</h3><blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">○ 代码部分</span><br><span class="line">□ 示例<span class="number">1</span></span><br><span class="line"><span class="keyword">from</span> smtplib <span class="keyword">import</span> SMTP    <span class="comment"># 导入smtplib模块的SMTP类</span></span><br><span class="line">s = SMTP(<span class="string">&quot;smtp.qq.com&quot;</span>)    <span class="comment"># 使用qq邮箱去发送</span></span><br><span class="line">s.login(<span class="string">&quot;848723505@qq.com&quot;</span>,<span class="string">&quot;hopo**secret**bbdj&quot;</span>)    <span class="comment"># 发件人邮箱账号、授权码</span></span><br><span class="line">tolist = [<span class="string">&quot;1533431376@qq.com&quot;</span>]      <span class="comment"># 收件人邮箱账号</span></span><br><span class="line">msg = <span class="string">&quot;&quot;&quot;\</span></span><br><span class="line"><span class="string">From: 848723505@qq.com@qq.com</span></span><br><span class="line"><span class="string">TO: 1533431376@qq.com</span></span><br><span class="line"><span class="string">Subject: mail module study</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">this is cPen test</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">s.sendmail(<span class="string">&quot;848723505@qq.com&quot;</span>,tolist, msg)</span><br></pre></td></tr></table></figure><p>效果图</p><p><img src="https://image.cpen.top/image/image-20220505035651514.png" alt="image-20220505035651514"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">□ 示例<span class="number">2</span></span><br><span class="line"><span class="keyword">from</span> smtplib <span class="keyword">import</span> SMTP</span><br><span class="line"><span class="keyword">from</span> email.mime.text <span class="keyword">import</span> MIMEText</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第三方smtp服务设置</span></span><br><span class="line">mail_host = <span class="string">&quot;smtp.qq.com&quot;</span></span><br><span class="line">mail_user = <span class="string">&quot;848723505@qq.com&quot;</span>  <span class="comment"># 发件人邮箱账号</span></span><br><span class="line">mail_pass = <span class="string">&quot;hopo**secret**bbdj&quot;</span>  <span class="comment"># 发件人授权码</span></span><br><span class="line"></span><br><span class="line">recv = <span class="string">&quot;1533431376@qq.com&quot;</span>      <span class="comment"># 收件人邮箱账号</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 构造邮件内容</span></span><br><span class="line"><span class="comment"># 正文内容、正文内容类型、正文内容编码</span></span><br><span class="line">message = MIMEText(<span class="string">&quot;Hello World ~ cPen&quot;</span>, <span class="string">&quot;plain&quot;</span>, <span class="string">&quot;utf-8&quot;</span>)  <span class="comment"># plain是普通的文本</span></span><br><span class="line"></span><br><span class="line">message[<span class="string">&quot;From&quot;</span>] = mail_user <span class="comment"># 把对象像字典一样传参</span></span><br><span class="line">message[<span class="string">&quot;To&quot;</span>] = recv</span><br><span class="line">message[<span class="string">&quot;Subject&quot;</span>] = <span class="string">&quot;I Love Coding&quot;</span></span><br><span class="line"></span><br><span class="line">s = SMTP(<span class="string">&quot;smtp.qq.com&quot;</span>)    <span class="comment"># 使用qq邮箱去发送</span></span><br><span class="line">s.login(<span class="string">&quot;848723505@qq.com&quot;</span>,<span class="string">&quot;hopo**secret**bbdj&quot;</span>)    <span class="comment"># 登录</span></span><br><span class="line">s.sendmail(mail_user,recv,message.as_string())    <span class="comment"># 文件内容需要转换成字符型</span></span><br></pre></td></tr></table></figure><p>效果图</p><p><img src="https://image.cpen.top/image/image-20220505035746706.png" alt="image-20220505035746706"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">□ 示例<span class="number">3</span></span><br><span class="line"><span class="keyword">from</span> smtplib <span class="keyword">import</span> SMTP</span><br><span class="line"><span class="keyword">from</span> email.mime.text <span class="keyword">import</span> MIMEText</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第三方smtp服务设置</span></span><br><span class="line">mail_host = <span class="string">&quot;smtp.qq.com&quot;</span></span><br><span class="line">mail_user = <span class="string">&quot;848723505@qq.com&quot;</span>  <span class="comment"># 发件人邮箱账号</span></span><br><span class="line">mail_pass = <span class="string">&quot;hopo**secret**bbdj&quot;</span>  <span class="comment"># 发件人授权码</span></span><br><span class="line"></span><br><span class="line">recv = <span class="string">&quot;1533431376@qq.com&quot;</span>      <span class="comment"># 收件人邮箱账号</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 把内容识别成网页传送</span></span><br><span class="line">html_msg = <span class="string">&quot; &lt;p&gt;Python mail module test&lt;/p&gt;&lt;p&gt;&lt;a href=&#x27;https://www.baidu.com&#x27;&gt;点击进入百度&lt;/a&gt;&lt;/p&gt;&quot;</span></span><br><span class="line">message = MIMEText(html_msg,<span class="string">&#x27;html&#x27;</span>,<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"></span><br><span class="line">message[<span class="string">&quot;From&quot;</span>] = mail_user <span class="comment"># 把对象像字典一样传参</span></span><br><span class="line">message[<span class="string">&quot;To&quot;</span>] = recv</span><br><span class="line">message[<span class="string">&quot;Subject&quot;</span>] = <span class="string">&quot;cPen mail&quot;</span></span><br><span class="line"></span><br><span class="line">s = SMTP(<span class="string">&quot;smtp.qq.com&quot;</span>)    <span class="comment"># 使用qq邮箱去发送</span></span><br><span class="line">s.login(<span class="string">&quot;848723505@qq.com&quot;</span>,<span class="string">&quot;hopo**secret**bbdj&quot;</span>)    <span class="comment"># 登录</span></span><br><span class="line">s.sendmail(mail_user,recv,message.as_string())    <span class="comment"># 文件内容转换成字符型</span></span><br></pre></td></tr></table></figure><p>效果图</p><p><img src="https://image.cpen.top/image/image-20220505035846092.png" alt="image-20220505035846092"></p></blockquote><h3 id="Foxmail登录">Foxmail登录</h3><blockquote><p>○ Foxmail登录</p><p>[下载Foxmail客户端](<a href="https://www.foxmail.com/">https://www.foxmail.com/</a>)</p><p>先进入设置 －&gt; 新建账号，填入E-mail地址和授权码</p><p>□ 使用POP3协议登录</p><p><img src="https://image.cpen.top/image/image-20220505040116717.png" alt="image-20220505040116717"></p><p>□ 使用IMAP协议登录</p><p><img src="https://image.cpen.top/image/image-20220505040144841.png" alt="image-20220505040144841"></p><p>效果图</p><p><img src="https://image.cpen.top/image/image-20220505040202531.png" alt="image-20220505040202531"></p></blockquote><hr>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 模块 </tag>
            
            <tag> mail </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>03_Python-CSDN_数据类型2</title>
      <link href="/blog/posts/37069.html"/>
      <url>/blog/posts/37069.html</url>
      
        <content type="html"><![CDATA[<p>摘要：以前在 <a href="https://blog.csdn.net/cpen_web/category_11089219.html"><code>CSDN 新星计划</code></a> 上写的文章，迁移至此。<span id="more"></span></p><h1 id="03-Python-数据类型2">03_Python-数据类型2</h1><p><a href="https://blog.csdn.net/cpen_web">博客🔗：https://blog.csdn.net/cpen_web</a></p><hr><p>==容器类型==</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">4种内置数据结构（容器类型）</span><br><span class="line">列表：list=&gt;[val1,val2,val3,val4]</span><br><span class="line">元组：tuple=&gt;(val1,val2,val3,val4)</span><br><span class="line">字典：dict=&gt;&#123;key1:val1,key2:val2&#125;</span><br><span class="line">集合：set=&gt;&#123;key1,key2,key3,key4&#125;</span><br></pre></td></tr></table></figure><h2 id="一-列表（list）">一. 列表（list）</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">列表是处理一组有序项目的数据结构</span><br><span class="line">列表是python中最具灵活性的有序集合对象类型</span><br><span class="line">列表可以包含任何类型的对象：字符串、数字甚至其他列表</span><br><span class="line">列表是可变的数据类型，即这种类型的值是可以被修改的</span><br><span class="line">Example:表示一个购物清单</span><br><span class="line">goods=[&#x27;牛奶&#x27;、&#x27;运动鞋&#x27;、&#x27;咖啡&#x27;、&#x27;手机&#x27;、&#x27;羊肉&#x27;、&#x27;葡萄&#x27;、&#x27;桔子&#x27;]</span><br><span class="line"></span><br><span class="line">列表通过方括号中用逗号分割的项目定义</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="comment"># 定义空列表</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>lst = []</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(lst)</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;list&#x27;</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>lst2 = <span class="built_in">list</span>()<span class="comment"># 注：工厂函数</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(lst2)</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;list&#x27;</span>&gt;</span><br><span class="line"><span class="comment"># 列表可装入python的任何对象：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>lst3 = <span class="built_in">list</span>(<span class="string">&quot;abc&quot;</span>)<span class="comment"># 注：字符串</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>lst3 </span><br><span class="line">[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>lst = [<span class="number">1</span>,<span class="string">&#x27;abc&#x27;</span>,<span class="number">2.5</span>,<span class="literal">True</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>lst = [<span class="number">1</span>,<span class="string">&#x27;abc&#x27;</span>,<span class="number">2.5</span>,<span class="literal">True</span>,lst3]<span class="comment"># 注：其他列表</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>lst</span><br><span class="line">[<span class="number">1</span>, <span class="string">&#x27;abc&#x27;</span>, <span class="number">2.5</span>, <span class="literal">True</span>, [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]]</span><br></pre></td></tr></table></figure><h3 id="列表基本操作">列表基本操作</h3><h4 id="索引">索引</h4><p>​通过下标访问列表中的元素，下标从0开始计数，可取出一个元素</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>lst = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(lst)</span><br><span class="line"><span class="number">140078683813384</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>lst += [<span class="number">4</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(lst)</span><br><span class="line"><span class="number">140078683813384</span><span class="comment"># 注：内存地址不变</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>lst[<span class="number">0</span>]</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>lst[<span class="number">0</span>] = <span class="string">&quot;a&quot;</span><span class="comment"># 注：改变列表里的元素值</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(lst)</span><br><span class="line"><span class="number">140078683813384</span></span><br><span class="line"><span class="comment"># 下标不能越界（Index Error:list index out of range）</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>lst</span><br><span class="line">[<span class="string">&#x27;b&#x27;</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>lst[<span class="number">4</span>]<span class="comment"># 注：下标越界 会报错</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">IndexError: <span class="built_in">list</span> index out of <span class="built_in">range</span></span><br></pre></td></tr></table></figure><h4 id="切片">切片</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">切片是通过下标访问列表中的元素，切片可以取出一个子列表</span><br><span class="line">起止区间：[ start,end )</span><br><span class="line">step:默认=&gt;1</span><br><span class="line">start:默认=&gt;step为正时，start为0；step为负时,start为-1</span><br><span class="line">end:默认=&gt;step为正时，end为列表结尾；step为负时,end为列表开始</span><br><span class="line">注意：三个值都为选填项</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例：正切片</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">0</span>:<span class="number">4</span>]<span class="comment"># 注：切片，前4个</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">str</span> = <span class="string">&quot;123456&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">str</span>[<span class="number">0</span>:<span class="number">4</span>]<span class="comment"># 注：切片，前4个</span></span><br><span class="line"><span class="string">&#x27;1234&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[:<span class="number">4</span>]<span class="comment"># 注：效果一样</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 示例：负切片，步长为-1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[-<span class="number">1</span>:<span class="number">3</span>:-<span class="number">1</span>]<span class="comment"># 注：-1指向6， 3指向4，-1从右往左</span></span><br><span class="line">[<span class="number">6</span>, <span class="number">5</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[-<span class="number">1</span>:-<span class="number">4</span>:-<span class="number">1</span>]<span class="comment"># 注：-1指向6，-4指向3，-1从右往左</span></span><br><span class="line">[<span class="number">6</span>, <span class="number">5</span>, <span class="number">4</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[-<span class="number">1</span>:-<span class="number">44</span>:-<span class="number">1</span>]<span class="comment"># 注：-1指向6，-44越界，-1从右往左</span></span><br><span class="line">[<span class="number">6</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[-<span class="number">1</span>:<span class="number">4</span>:-<span class="number">1</span>]<span class="comment"># 注：-1指向6,  4指向5，-1从右往左</span></span><br><span class="line">[<span class="number">6</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[-<span class="number">3</span>:<span class="number">4</span>:-<span class="number">1</span>]<span class="comment"># 注：-3指向4， 4指向5，4向左取不到5</span></span><br><span class="line">[]<span class="comment"># 注：为空  起始位置有误时，切出来会是空(不会报错)</span></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">切片对象(slice函数)</span><br><span class="line">slice函数的用途：生成一个slice对象，相当于可以给要切的内容取个名字。</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>,<span class="string">&quot;d&quot;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s1 = <span class="built_in">slice</span>(<span class="number">0</span>,<span class="number">3</span>,<span class="number">1</span>)<span class="comment"># 注：引用时需要传参进去</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[s1]<span class="comment"># 注：切片 前3个</span></span><br><span class="line">[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b[s1]<span class="comment"># 注：切片 前3个</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = [<span class="string">&quot;xx&quot;</span>,<span class="string">&quot;yy&quot;</span>,<span class="string">&quot;zz&quot;</span>,<span class="string">&quot;ee&quot;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c[s1]<span class="comment"># 注：切片 前3个</span></span><br><span class="line">[<span class="string">&#x27;xx&#x27;</span>, <span class="string">&#x27;yy&#x27;</span>, <span class="string">&#x27;zz&#x27;</span>]</span><br></pre></td></tr></table></figure><h4 id="增加">增加</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">增加列表元素的方式</span><br><span class="line">append:在末尾，作为整体追加，类型不限</span><br><span class="line">insert:在index位置插入元素</span><br><span class="line">extend:扩展列表</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="comment"># append</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;orange&quot;</span>, <span class="number">123</span>, <span class="number">0.1111</span>, <span class="string">&quot;cali&quot;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.append(<span class="string">&quot;test&quot;</span>)<span class="comment"># 注：追加字符串</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[<span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;orange&#x27;</span>, <span class="number">123</span>, <span class="number">0.1111</span>, <span class="string">&#x27;cali&#x27;</span>, <span class="string">&#x27;test&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>lst = [<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>lst2 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>lst.append(lst2)<span class="comment"># 注：追加的类型是数组</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>lst</span><br><span class="line">[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]]<span class="comment"># 注：追加的类型是数组</span></span><br><span class="line"><span class="comment"># insert</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>lst = [<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>lst.insert(<span class="number">1</span>,<span class="string">&#x27;d&#x27;</span>)<span class="comment"># 注：在第2个元素前插入数据</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>lst</span><br><span class="line">[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]</span><br><span class="line"><span class="comment"># extend</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">str</span> = <span class="string">&quot;abc&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.extend(<span class="built_in">str</span>)<span class="comment"># 注：扩展字符串</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">extend与+</span><br><span class="line">注意：只限可转为list的类型(str,list,tuple)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a2 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.extend(a2)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a + [<span class="string">&quot;5&quot;</span>]<span class="comment"># 注：+ 法只能list 和 list 相加</span></span><br><span class="line">[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="string">&#x27;5&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]<span class="comment"># 注：+ 法 运行结束后 数组a没有变化</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = a + [<span class="string">&quot;5&quot;</span>]<span class="comment"># 注：赋值给数组b</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b<span class="comment"># 注：可以通过 赋值给数组b的方法来保存 变化</span></span><br><span class="line">[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="string">&#x27;5&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(a)</span><br><span class="line"><span class="number">140273972677768</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a += [<span class="string">&quot;6&quot;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(a)</span><br><span class="line"><span class="number">140273972677768</span><span class="comment"># 注：a += [&quot;6&quot;] 内存地址不变   对象不变，内容改变</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = a + [<span class="string">&quot;7&quot;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(a)</span><br><span class="line"><span class="number">140273837551816</span><span class="comment"># 注：a = a + [&quot;7&quot;]内存地址改变</span></span><br></pre></td></tr></table></figure><h4 id="删除">删除</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">删除列表元素的方式</span><br><span class="line">pop：删除元素，默认最后一个（指定index删除）</span><br><span class="line">remove：删除指定的元素（要删除的数据不存在时，会出错）</span><br><span class="line">del：根据下标删除</span><br><span class="line">del是python的一个关键字，用于删除变量(的引用)</span><br><span class="line">clear：清空列表</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="comment"># pop</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.pop()<span class="comment"># 注：默认删除最后1个</span></span><br><span class="line"><span class="string">&#x27;7&#x27;</span><span class="comment"># 注：返回值，删除的元素</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.pop(<span class="number">2</span>)<span class="comment"># 注：指定索引2 删除第3个元素</span></span><br><span class="line"><span class="string">&#x27;c&#x27;</span></span><br><span class="line"><span class="comment"># remove</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="string">&quot;xx&quot;</span>,<span class="string">&quot;yy&quot;</span>,<span class="string">&quot;xx&quot;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.remove(<span class="string">&quot;xx&quot;</span>)<span class="comment"># 注：删除指定元素，只删除第1个</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[<span class="string">&#x27;yy&#x27;</span>, <span class="string">&#x27;xx&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[<span class="string">&#x27;yy&#x27;</span>, <span class="string">&#x27;xx&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.remove(<span class="string">&quot;zz&quot;</span>)<span class="comment"># 注：要删除的数据不存在时，会报错</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">ValueError: <span class="built_in">list</span>.remove(x): x <span class="keyword">not</span> <span class="keyword">in</span> <span class="built_in">list</span></span><br><span class="line"><span class="comment"># del</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="string">&quot;xx&quot;</span>,<span class="string">&quot;yy&quot;</span>,<span class="string">&quot;zz&quot;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">del</span> a[<span class="number">3</span>]<span class="comment"># 注：删除索引3  第4个</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="string">&#x27;yy&#x27;</span>, <span class="string">&#x27;zz&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">del</span> a[<span class="number">0</span>:<span class="number">2</span>]<span class="comment"># 注：切片删除</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = <span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">del</span> c<span class="comment"># 注：del删除变量的引用</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">NameError: name <span class="string">&#x27;c&#x27;</span> <span class="keyword">is</span> <span class="keyword">not</span> defined</span><br><span class="line"><span class="comment"># clear</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[<span class="number">3</span>, <span class="string">&#x27;yy&#x27;</span>, <span class="string">&#x27;zz&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.clear()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[]<span class="comment"># 注：clear清空</span></span><br></pre></td></tr></table></figure><h4 id="修改">修改</h4><p>修改元素主要是利用下标和切片来修改或增加、删除</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"># 示例</span><br><span class="line">&gt;&gt;&gt; a = [1,2,3,&#x27;a&#x27;,&#x27;b&#x27;,&#x27;c&#x27;]</span><br><span class="line">&gt;&gt;&gt; a</span><br><span class="line">[1, 2, 3, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;]</span><br><span class="line">&gt;&gt;&gt; a[2] = &quot;x&quot;# 注：修改元素</span><br><span class="line">&gt;&gt;&gt; a</span><br><span class="line">[1, 2, &#x27;x&#x27;, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;]</span><br><span class="line">&gt;&gt;&gt; a[1:1]# 注：[1,1)</span><br><span class="line">[]# 注：为空</span><br><span class="line">&gt;&gt;&gt; a[1:1] = &quot;abc&quot;# 注：在起始位置 索引为1 处之前 增加列表 str类型转换为列表</span><br><span class="line">&gt;&gt;&gt; a</span><br><span class="line">[1, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, 2, &#x27;x&#x27;, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;]</span><br><span class="line">&gt;&gt;&gt; b = [&quot;a&quot;,&quot;b&quot;,&quot;c&quot;]</span><br><span class="line">&gt;&gt;&gt; b[2:2] = [&quot;x&quot;,&quot;y&quot;]# 注：索引为2处之前  增加列表</span><br><span class="line">&gt;&gt;&gt; b</span><br><span class="line">[&#x27;a&#x27;, &#x27;b&#x27;, &#x27;x&#x27;, &#x27;y&#x27;, &#x27;c&#x27;]</span><br><span class="line">&gt;&gt;&gt; b[2:4] = [&quot;x&quot;,&quot;y&quot;,&quot;z&quot;]# 注：索引2、3 的值 替换</span><br><span class="line">&gt;&gt;&gt; b</span><br><span class="line">[&#x27;a&#x27;, &#x27;b&#x27;, &#x27;x&#x27;, &#x27;y&#x27;, &#x27;z&#x27;, &#x27;c&#x27;]</span><br><span class="line">&gt;&gt;&gt; b[1:5] = &quot;12&quot;# 注：切出来后，再转换为列表。str类型转换为列表</span><br><span class="line">&gt;&gt;&gt; b# 注：索引1、2、3、4 的值 替换 为 ‘1’‘2’</span><br><span class="line">[&#x27;a&#x27;, &#x27;1&#x27;, &#x27;2&#x27;, &#x27;c&#x27;]</span><br><span class="line">&gt;&gt;&gt; b</span><br><span class="line">[&#x27;a&#x27;, &#x27;1&#x27;, &#x27;2&#x27;, &#x27;c&#x27;]</span><br><span class="line">&gt;&gt;&gt; b[5:-3]</span><br><span class="line">[]</span><br><span class="line">&gt;&gt;&gt; b[3:-3]# 注：获取不到</span><br><span class="line">[]</span><br><span class="line">&gt;&gt;&gt; b[3:-3] = &quot;xy&quot;# 注：这个位置开始(start位置开始)，替换成其他的list</span><br><span class="line">&gt;&gt;&gt; b# 注：看 找出的元素是否为空</span><br><span class="line">[&#x27;a&#x27;, &#x27;1&#x27;, &#x27;2&#x27;, &#x27;x&#x27;, &#x27;y&#x27;, &#x27;c&#x27;]</span><br><span class="line">&gt;&gt;&gt; c = [&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;,&quot;1&quot;]</span><br><span class="line">&gt;&gt;&gt; c[1:4] = &quot;hello&quot;# 注：找出b c d  把bcd 替换成h e l l o</span><br><span class="line">&gt;&gt;&gt; c</span><br><span class="line">[&#x27;a&#x27;, &#x27;h&#x27;, &#x27;e&#x27;, &#x27;l&#x27;, &#x27;l&#x27;, &#x27;o&#x27;, &#x27;1&#x27;]</span><br><span class="line">&gt;&gt;&gt; c = [&#x27;a&#x27;, &#x27;h&#x27;, &#x27;e&#x27;, &#x27;l&#x27;, &#x27;l&#x27;, &#x27;o&#x27;, &#x27;1&#x27;]</span><br><span class="line">&gt;&gt;&gt; c[5:3]# 注：获取不到</span><br><span class="line">[]</span><br><span class="line">&gt;&gt;&gt; c[5:3] = [&quot;x&quot;,&quot;y&quot;]# 注：c[5:3]为空，在 o (下标5)处插入x y</span><br><span class="line">&gt;&gt;&gt; c</span><br><span class="line">[&#x27;a&#x27;, &#x27;h&#x27;, &#x27;e&#x27;, &#x27;l&#x27;, &#x27;l&#x27;, &#x27;x&#x27;, &#x27;y&#x27;, &#x27;o&#x27;, &#x27;1&#x27;]</span><br></pre></td></tr></table></figure><h4 id="反转">反转</h4><p>​反转列表-reverse 或 切片</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="comment"># 1.负切片 实现反转，输出的值反转</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[::-<span class="number">1</span>]<span class="comment"># 注：负切片</span></span><br><span class="line">[<span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a<span class="comment"># 注：a本身的值 没有反转</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"><span class="comment"># 2.reverse 字符串的反转</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.reverse()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a<span class="comment"># 注：a本身的值 反转</span></span><br><span class="line">[<span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]</span><br></pre></td></tr></table></figure><h4 id="排序">排序</h4><p>​列表排序-sort</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[<span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.sort()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]<span class="comment"># 注：排序后  a本身的值发生改变</span></span><br><span class="line"><span class="comment"># 反向排序</span></span><br><span class="line">a.sort(reverse=<span class="literal">True</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.sort(reverse=<span class="literal">True</span>)<span class="comment"># 注：反向排序，升序变成降序</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[<span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]<span class="comment"># 注：从大到小排序</span></span><br><span class="line"><span class="comment"># 不支持int和str混合 的排序：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="string">&quot;a&quot;</span>,<span class="number">1</span>,<span class="string">&quot;b&quot;</span>,<span class="number">2</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.sort()</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: <span class="string">&#x27;&lt;&#x27;</span> <span class="keyword">not</span> supported between instances of <span class="string">&#x27;str&#x27;</span> <span class="keyword">and</span> <span class="string">&#x27;int&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="string">&quot;a&quot;</span>,<span class="string">&quot;1&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;2&quot;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.sort()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>]</span><br><span class="line"><span class="comment"># 按 编码排序</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="string">&quot;a&quot;</span>,<span class="string">&quot;1&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;2&quot;</span>,<span class="string">&quot;A&quot;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;A&#x27;</span>]</span><br></pre></td></tr></table></figure><h4 id="统计">统计</h4><p>​len、count、index</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="comment"># len 总长度</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;中&#x27;</span>, <span class="string">&#x27;序&#x27;</span>, <span class="string">&#x27;排&#x27;</span>, <span class="string">&#x27;文&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">len</span>(a)</span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.append([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">len</span>(a)</span><br><span class="line"><span class="number">6</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;中&#x27;</span>, <span class="string">&#x27;序&#x27;</span>, <span class="string">&#x27;排&#x27;</span>, <span class="string">&#x27;文&#x27;</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.extend([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">len</span>(a)</span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="comment"># count统计元素出现的次数</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;中&#x27;</span>, <span class="string">&#x27;序&#x27;</span>, <span class="string">&#x27;排&#x27;</span>, <span class="string">&#x27;文&#x27;</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.count(<span class="string">&quot;a&quot;</span>)</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.count(<span class="number">1</span>)</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="comment"># index返回元素所在的索引位置</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="string">&quot;x&quot;</span>,<span class="string">&quot;y&quot;</span>,<span class="string">&quot;x&quot;</span>,<span class="number">1</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.count(<span class="string">&quot;x&quot;</span>)</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.index(<span class="string">&quot;x&quot;</span>)</span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.index(<span class="string">&quot;z&quot;</span>)<span class="comment"># 注：index通过元素找索引，如果没有会报错</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">ValueError: <span class="string">&#x27;z&#x27;</span> <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">in</span> <span class="built_in">list</span></span><br></pre></td></tr></table></figure><h4 id="遍历">遍历</h4><p>​遍历：依次取出对象中的每一项数据</p><p>​list是一个可迭代对象（iterable），可以直接用for遍历</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.for i in a:</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[<span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;y&#x27;</span>, <span class="string">&#x27;x&#x27;</span>, <span class="number">1</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> a:</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(<span class="string">f&quot;item is ---&gt;<span class="subst">&#123;i&#125;</span>&quot;</span>)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line">item <span class="keyword">is</span> ---&gt;x</span><br><span class="line">item <span class="keyword">is</span> ---&gt;y</span><br><span class="line">item <span class="keyword">is</span> ---&gt;x</span><br><span class="line">item <span class="keyword">is</span> ---&gt;<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.enumerate()函数  </span></span><br><span class="line"><span class="comment"># 特点：会返回元组，元组里包含每一个下标和值</span></span><br><span class="line"><span class="comment"># 注：用1个i去遍历，获取的是元组</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">enumerate</span>(a):</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(<span class="string">f&quot;item is ---&gt;<span class="subst">&#123;i&#125;</span>&quot;</span>)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line">item <span class="keyword">is</span> ---&gt;(<span class="number">0</span>, <span class="string">&#x27;x&#x27;</span>)</span><br><span class="line">item <span class="keyword">is</span> ---&gt;(<span class="number">1</span>, <span class="string">&#x27;y&#x27;</span>)</span><br><span class="line">item <span class="keyword">is</span> ---&gt;(<span class="number">2</span>, <span class="string">&#x27;x&#x27;</span>)</span><br><span class="line">item <span class="keyword">is</span> ---&gt;(<span class="number">3</span>, <span class="number">1</span>)</span><br><span class="line"><span class="comment"># 用2个临时变量，获取enumerate(a)元组的返回</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i,j <span class="keyword">in</span> <span class="built_in">enumerate</span>(a):</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;i&#125;</span>--&gt;<span class="subst">&#123;j&#125;</span>&quot;</span>)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="number">0</span>--&gt;x</span><br><span class="line"><span class="number">1</span>--&gt;y</span><br><span class="line"><span class="number">2</span>--&gt;x</span><br><span class="line"><span class="number">3</span>--&gt;<span class="number">1</span></span><br></pre></td></tr></table></figure><h4 id="判断成员关系">判断成员关系</h4><p>​判断列表中是否有某个数据</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>lst = [<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;d&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="string">&#x27;a&#x27;</span> <span class="keyword">in</span> lst)</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="string">&#x27;x&#x27;</span> <span class="keyword">in</span> lst)</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = <span class="string">&#x27;a&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(s, <span class="string">&#x27;在&#x27;</span> <span class="keyword">if</span> s <span class="keyword">in</span> lst <span class="keyword">else</span> <span class="string">&#x27;不在&#x27;</span>,<span class="string">&#x27;列表里&#x27;</span>)</span><br><span class="line">a 在 列表里</span><br></pre></td></tr></table></figure><h4 id="类型转换">类型转换</h4><p>​字符串(str)转列表(list)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">str</span> = <span class="string">&#x27;abc 123&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>(<span class="built_in">str</span>)</span><br><span class="line">[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27; &#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;3&#x27;</span>]</span><br></pre></td></tr></table></figure><hr><h2 id="二-元组（tuple）">二. 元组（tuple）</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">元组是处理一组有序项目的数据结构</span><br><span class="line">元组和字符串一样是不可变的,即你不能修改元组</span><br><span class="line">元组可以包含任何类型的对象：字符串、数字甚至其他列表</span><br><span class="line">适应场景：性别选择，数据库的查询结果</span><br><span class="line">Example:表示一个购物清单</span><br><span class="line">goods=(&#x27;牛奶&#x27;、&#x27;运动鞋&#x27;、&#x27;咖啡&#x27;、&#x27;手机&#x27;、&#x27;羊肉&#x27;、&#x27;葡萄&#x27;、&#x27;桔子&#x27;)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="comment"># 元组通过圆括号中用逗号分割的项目定义</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = ()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(a)</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;tuple&#x27;</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = (<span class="number">1</span>)<span class="comment"># 注：括号还可以代表集合</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(a)</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;int&#x27;</span>&gt;</span><br><span class="line"><span class="comment"># 元组中只有一个元素的时候，需要在元素后面加个，区分这个括号是表示结合还是表示元组</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = (<span class="number">1</span>,)<span class="comment"># 注：元组中只有1个元素时，需要加逗号(,)表示元组</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(a)</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;tuple&#x27;</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="built_in">tuple</span>()<span class="comment"># 注：定义空元组</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(a)</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;tuple&#x27;</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">()</span><br><span class="line"><span class="comment"># 元组可装入python的任何对象</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = (<span class="string">&quot;a&quot;</span>,<span class="number">1</span>,<span class="number">1.2</span>,<span class="literal">True</span>,<span class="built_in">print</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">(<span class="string">&#x27;a&#x27;</span>, <span class="number">1</span>, <span class="number">1.2</span>, <span class="literal">True</span>, &lt;built-<span class="keyword">in</span> function <span class="built_in">print</span>&gt;)</span><br></pre></td></tr></table></figure><h3 id="元组基本操作">元组基本操作</h3><h4 id="索引-2">索引</h4><p>​通过下标访问列表中的元素，下标从0开始计数，可取出一个元素</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = (<span class="string">&quot;a&quot;</span>,<span class="number">1</span>,<span class="number">1.2</span>,<span class="literal">True</span>,<span class="built_in">print</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">4</span>]</span><br><span class="line">&lt;built-<span class="keyword">in</span> function <span class="built_in">print</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">3</span>]</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="comment"># 下标不能越界，越界会报错</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = (<span class="string">&quot;a&quot;</span>,<span class="number">1</span>,<span class="number">1.2</span>,<span class="literal">True</span>,<span class="built_in">print</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">5</span>]</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">IndexError: <span class="built_in">tuple</span> index out of <span class="built_in">range</span></span><br></pre></td></tr></table></figure><h4 id="切片-2">切片</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">切片是通过下标访问元组中的元素，切片可以取出一个子元组</span><br><span class="line">起止区间：[start,end)</span><br><span class="line">step:默认=&gt;1</span><br><span class="line">start:默认=&gt;step为正时，start为0；step为负时,start为-1</span><br><span class="line">end:默认=&gt;step为正时，end为列表结尾；step为负时,end为列表开始</span><br><span class="line">注意：三个值都为选填项</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = (<span class="string">&quot;a&quot;</span>,<span class="number">1</span>,<span class="number">1.2</span>,<span class="literal">True</span>,<span class="built_in">print</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">1</span>:<span class="number">3</span>]</span><br><span class="line">(<span class="number">1</span>, <span class="number">1.2</span>)</span><br></pre></td></tr></table></figure><h4 id="不可变性">不可变性</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">(<span class="string">&#x27;a&#x27;</span>, <span class="number">1</span>, <span class="number">1.2</span>, <span class="literal">True</span>, &lt;built-<span class="keyword">in</span> function <span class="built_in">print</span>&gt;)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">0</span>] = <span class="number">1</span><span class="comment"># 注：报错</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: <span class="string">&#x27;tuple&#x27;</span> <span class="built_in">object</span> does <span class="keyword">not</span> support item assignment</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tu1 = (<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tu2 = (<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tu3 = tu1 + tu2</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tu3</span><br><span class="line">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br></pre></td></tr></table></figure><h4 id="统计-2">统计</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = (<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="built_in">len</span>(a))</span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure><h4 id="遍历-2">遍历</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">enumerate</span>(a):</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(i)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line">(<span class="number">0</span>, <span class="number">1</span>)<span class="comment"># 注：返回值 是 元组</span></span><br><span class="line">(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">(<span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i,j <span class="keyword">in</span> <span class="built_in">enumerate</span>(a):</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;i&#125;</span>---<span class="subst">&#123;j&#125;</span>&quot;</span>)<span class="comment"># 注：用两个参数 来接收 返回值</span></span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="number">0</span>---<span class="number">1</span></span><br><span class="line"><span class="number">1</span>---<span class="number">2</span></span><br><span class="line"><span class="number">2</span>---<span class="number">3</span></span><br></pre></td></tr></table></figure><h4 id="成员关系">成员关系</h4><p>​成员关系： in , not in</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = (<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&quot;a&quot;</span> <span class="keyword">in</span> a</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&quot;d&quot;</span> <span class="keyword">not</span> <span class="keyword">in</span> a</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure><h2 id="三-字典（dict）">三. 字典（dict）</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">字典是Python中一个键值映射的数据结构</span><br><span class="line">字典是无序的</span><br><span class="line">字典是可变对象</span><br><span class="line">key必须是唯一的,so天生去重</span><br><span class="line">example:</span><br><span class="line">singer=&#123;key1:value,key2:value&#125;</span><br><span class="line">singer=&#123;&quot;李圣杰&quot;:&#x27;痴心绝对&#x27;,&#x27;张韶涵&#x27;:&#x27;阿刁&#x27;,&#x27;汪峰&#x27;:&#x27;普通迪斯高&#x27;&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">字典的定义</span><br><span class="line">字典的key必须是可hash对象</span><br><span class="line">python中所有字符串、数字、元组、布尔值、None都是可hash对象</span><br><span class="line">字典的value可以是任何值</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="comment"># 定义空字典</span></span><br><span class="line"><span class="comment"># 方法1：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = &#123;&#125;<span class="comment"># 注：定义空字典</span></span><br><span class="line"><span class="comment"># 方法2：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="built_in">dict</span>()<span class="comment"># 注：定义空字典，工厂函数</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(a)</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;dict&#x27;</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(b)</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;dict&#x27;</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = [(<span class="string">&#x27;root&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>),(<span class="string">&#x27;admin&#x27;</span>,<span class="string">&#x27;admin&#x27;</span>)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = <span class="built_in">dict</span>(c)<span class="comment"># 注：列表转换成字典  工厂函数</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d</span><br><span class="line">&#123;<span class="string">&#x27;root&#x27;</span>: <span class="string">&#x27;123456&#x27;</span>, <span class="string">&#x27;admin&#x27;</span>: <span class="string">&#x27;admin&#x27;</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>e = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>e</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">dict</span>(e)<span class="comment"># 注：转换的对象要有 键值映射 的格式</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: cannot convert dictionary update sequence element <span class="comment">#0 to a sequence</span></span><br></pre></td></tr></table></figure><h3 id="字典基本操作">字典基本操作</h3><h4 id="取值">取值</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">用法1：dicts[key]=&gt;当key不存在时，会引了KeyError错误</span><br><span class="line">用法2：dicts.get(key,default)=&gt;当key不存在时，返回default值</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = &#123;<span class="string">&quot;a&quot;</span>:<span class="number">4</span>,<span class="string">&quot;b&quot;</span>:<span class="number">2</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="string">&#x27;a&#x27;</span>]=<span class="number">3</span><span class="comment"># 注：修改key=”a”的 value 值</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">&#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">3</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="string">&#x27;c&#x27;</span>]=<span class="number">4</span><span class="comment"># 注：增加键值对</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">&#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">3</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;c&#x27;</span>: <span class="number">4</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="string">&#x27;c&#x27;</span>]<span class="comment"># 注：取值</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="string">&#x27;d&#x27;</span>]<span class="comment"># 注：key不存在，报错</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">KeyError: <span class="string">&#x27;d&#x27;</span></span><br><span class="line"><span class="comment"># 推荐使用get</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">&#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">3</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;c&#x27;</span>: <span class="number">4</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.get(<span class="string">&#x27;d&#x27;</span>)<span class="comment"># 注：不报错</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = a.get(<span class="string">&#x27;d&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(c)</span><br><span class="line"><span class="literal">None</span><span class="comment"># 注：默认值没有设置</span></span><br></pre></td></tr></table></figure><h4 id="增加-修改">增加/修改</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">用法：dicts[key]=value</span><br><span class="line">当key不存在时，表示增加一个键值对</span><br><span class="line">当key存在时，表示修改对应的value值</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例：修改</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">&#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">3</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;c&#x27;</span>: <span class="number">4</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="string">&#x27;a&#x27;</span>] = <span class="number">5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">&#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">5</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;c&#x27;</span>: <span class="number">4</span>&#125;</span><br><span class="line"><span class="comment"># 示例：新增</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="string">&#x27;d&#x27;</span>] = <span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">&#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">5</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;c&#x27;</span>: <span class="number">4</span>, <span class="string">&#x27;d&#x27;</span>: <span class="literal">False</span>&#125;</span><br></pre></td></tr></table></figure><h4 id="删除-2">删除</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">用法1：dicts.pop(key)</span><br><span class="line">用法2：dicts.popitem()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例：dicts.pop(key)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = &#123;<span class="string">&#x27;a&#x27;</span>:<span class="number">5</span>,<span class="string">&#x27;b&#x27;</span>:<span class="number">2</span>,<span class="string">&#x27;c&#x27;</span>:<span class="number">4</span>,<span class="string">&#x27;d&#x27;</span>:<span class="literal">False</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.pop(<span class="string">&#x27;a&#x27;</span>)<span class="comment"># 注：删除 key=‘a’ 的元素</span></span><br><span class="line"><span class="number">5</span><span class="comment"># 注：pop有返回值</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = a.pop(<span class="string">&#x27;b&#x27;</span>)<span class="comment"># 注：获取返回值</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">&#123;<span class="string">&#x27;c&#x27;</span>: <span class="number">4</span>, <span class="string">&#x27;d&#x27;</span>: <span class="literal">False</span>&#125;</span><br><span class="line"><span class="comment"># 示例：dicts.popitem()</span></span><br><span class="line"><span class="comment"># python3里面删除的是最后一个</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = &#123;<span class="string">&quot;x&quot;</span>:<span class="number">1</span>,<span class="string">&quot;y&quot;</span>:<span class="number">2</span>,<span class="string">&quot;z&quot;</span>:<span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.popitem()</span><br><span class="line">(<span class="string">&#x27;z&#x27;</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.popitem()</span><br><span class="line">(<span class="string">&#x27;y&#x27;</span>, <span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.popitem()</span><br><span class="line">(<span class="string">&#x27;x&#x27;</span>, <span class="number">1</span>)</span><br></pre></td></tr></table></figure><h4 id="合并">合并</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">用法1：dict1.update(dict2)=&gt;将dict2合并到dict1</span><br><span class="line">用法2：dict(dict1,**dict2)=&gt;将dict1与dict2合并生成一个新字典</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例：dict1.update(dict2)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = &#123;<span class="string">&quot;x&quot;</span>:<span class="number">1</span>,<span class="string">&quot;y&quot;</span>:<span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = &#123;<span class="string">&quot;q&quot;</span>:<span class="number">2</span>,<span class="string">&quot;w&quot;</span>:<span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.update(b)<span class="comment"># 注：a自带的属性</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">&#123;<span class="string">&#x27;x&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;y&#x27;</span>: <span class="number">3</span>, <span class="string">&#x27;q&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;w&#x27;</span>: <span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">&#123;<span class="string">&#x27;q&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;w&#x27;</span>: <span class="number">3</span>&#125;</span><br><span class="line"><span class="comment"># 示例：dict(dict1, **dict2)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = &#123;<span class="string">&quot;x&quot;</span>:<span class="number">1</span>,<span class="string">&quot;y&quot;</span>:<span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = &#123;<span class="string">&quot;q&quot;</span>:<span class="number">2</span>,<span class="string">&quot;w&quot;</span>:<span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">dict</span>(a,**b)<span class="comment"># 注：工厂函数，返回一个字典  a和b的合并</span></span><br><span class="line">&#123;<span class="string">&#x27;x&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;y&#x27;</span>: <span class="number">3</span>, <span class="string">&#x27;q&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;w&#x27;</span>: <span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a<span class="comment"># 注：a本身没有改变</span></span><br><span class="line">&#123;<span class="string">&#x27;x&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;y&#x27;</span>: <span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">dict</span>()</span><br><span class="line">&#123;&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = <span class="built_in">dict</span>(a,**b)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c</span><br><span class="line">&#123;<span class="string">&#x27;x&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;y&#x27;</span>: <span class="number">3</span>, <span class="string">&#x27;q&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;w&#x27;</span>: <span class="number">3</span>&#125;</span><br></pre></td></tr></table></figure><h4 id="成员关系-2">成员关系</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">用法：</span><br><span class="line">item in dicts</span><br><span class="line">item not in dicts</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = &#123;<span class="string">&quot;x&quot;</span>:<span class="number">1</span>,<span class="string">&quot;y&quot;</span>:<span class="number">2</span>,<span class="string">&quot;z&quot;</span>:<span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">&#123;<span class="string">&#x27;x&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;y&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;z&#x27;</span>: <span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;x&#x27;</span> <span class="keyword">in</span> a<span class="comment"># 注：in  默认 对比的是key值</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">2</span> <span class="keyword">in</span> a</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">2</span> <span class="keyword">in</span> a.values()<span class="comment"># 注：a.values()对比的是value值</span></span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure><h4 id="遍历-3">遍历</h4><p>​默认遍历的是 key</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">&#123;<span class="string">&#x27;x&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;y&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;z&#x27;</span>: <span class="number">3</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 遍历key值</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> a:</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(i)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line">x              <span class="comment"># 注：遍历key值</span></span><br><span class="line">y</span><br><span class="line">z</span><br><span class="line"></span><br><span class="line"><span class="comment"># 遍历value值</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> a.values():</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(i)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="number">1</span>               <span class="comment"># 注：遍历value值</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 既想获得key  也想获得value</span></span><br><span class="line"><span class="comment"># items返回的是元组</span></span><br><span class="line"><span class="comment"># 方式1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> a.items():</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(i)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line">(<span class="string">&#x27;x&#x27;</span>, <span class="number">1</span>)</span><br><span class="line">(<span class="string">&#x27;y&#x27;</span>, <span class="number">2</span>)</span><br><span class="line">(<span class="string">&#x27;z&#x27;</span>, <span class="number">3</span>)</span><br><span class="line"><span class="comment"># 方式2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i,j <span class="keyword">in</span> a.items():<span class="comment"># 注：2个参数获取返回值key,value</span></span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(<span class="string">f&quot;key is <span class="subst">&#123;i&#125;</span>, value is <span class="subst">&#123;j&#125;</span>&quot;</span>)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line">key <span class="keyword">is</span> x, value <span class="keyword">is</span> <span class="number">1</span></span><br><span class="line">key <span class="keyword">is</span> y, value <span class="keyword">is</span> <span class="number">2</span></span><br><span class="line">key <span class="keyword">is</span> z, value <span class="keyword">is</span> <span class="number">3</span></span><br><span class="line"><span class="comment"># 方式3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> a.items():</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(<span class="string">f&quot;key is <span class="subst">&#123;i[<span class="number">0</span>]&#125;</span>, value is <span class="subst">&#123;i[<span class="number">1</span>]&#125;</span>&quot;</span>)<span class="comment"># 注：索引获取参数</span></span><br><span class="line"><span class="meta">... </span></span><br><span class="line">key <span class="keyword">is</span> x, value <span class="keyword">is</span> <span class="number">1</span></span><br><span class="line">key <span class="keyword">is</span> y, value <span class="keyword">is</span> <span class="number">2</span></span><br><span class="line">key <span class="keyword">is</span> z, value <span class="keyword">is</span> <span class="number">3</span></span><br></pre></td></tr></table></figure><hr><h2 id="四-集合（set）">四. 集合（set）</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">集合是一个无序的，不重复的数据组合</span><br><span class="line">集合是一个只含有key的字典</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">集合的作用</span><br><span class="line">去重：把一个列表变成集合，就自动去重了</span><br><span class="line">关系测试：测试两组数据之前的交集、差集、并集等关系</span><br><span class="line">example:</span><br><span class="line">singer=&#123;&quot;李圣杰&quot;,&#x27;张韶涵&#x27;,&#x27;汪峰&#x27;&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">集合的定义</span><br><span class="line">集合通过花括号中，而各个元素用逗号分割</span><br><span class="line">集合元素必须是可hash对象，跟字典一样</span><br><span class="line">set和dict的唯一区别仅在于没有存储对应的value</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="comment"># 定义空集合（2种方式）</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;<span class="comment"># 注：第1种方式</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(a)</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;set&#x27;</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="built_in">set</span>()<span class="comment"># 注：第2种方式</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line"><span class="built_in">set</span>()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(a)</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;set&#x27;</span>&gt;</span><br></pre></td></tr></table></figure><h3 id="集合基本操作">集合基本操作</h3><h4 id="添加">添加</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">用法：s.add(item)=&gt;添加一项</span><br><span class="line">用法：s.update(someitems)=&gt;添加多项</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.add(<span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s</span><br><span class="line">&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.update(<span class="string">&quot;str&quot;</span>)<span class="comment"># 注：str被扩展进来，是一个一个被扩展进来的</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s</span><br><span class="line">&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="string">&#x27;t&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;s&#x27;</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.update(&#123;<span class="string">&quot;x&quot;</span>:<span class="number">1</span>,<span class="string">&quot;y&quot;</span>:<span class="number">2</span>&#125;)<span class="comment"># 注：字典  扩展的是 key值</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s</span><br><span class="line">&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;t&#x27;</span>, <span class="string">&#x27;y&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;s&#x27;</span>&#125;</span><br></pre></td></tr></table></figure><h4 id="移除">移除</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">用法1：s.remove(item)=&gt;移除一项(item不存在会出错KeyError)</span><br><span class="line">用法2：s.discard(item)=&gt;移除一项(item不存在则什么也不做)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="comment"># remove</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s</span><br><span class="line">&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;t&#x27;</span>, <span class="string">&#x27;y&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;s&#x27;</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.remove(<span class="string">&#x27;r&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s</span><br><span class="line">&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;t&#x27;</span>, <span class="string">&#x27;y&#x27;</span>, <span class="string">&#x27;s&#x27;</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.remove(<span class="string">&#x27;p&#x27;</span>)<span class="comment"># 注：“p”不存在，报错</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">KeyError: <span class="string">&#x27;p&#x27;</span></span><br><span class="line"><span class="comment"># discard</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s</span><br><span class="line">&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;t&#x27;</span>, <span class="string">&#x27;y&#x27;</span>, <span class="string">&#x27;s&#x27;</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.discard(<span class="string">&#x27;o&#x27;</span>)<span class="comment"># 注：不存在 不报错  什么也不做</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.discard(<span class="string">&#x27;x&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s</span><br><span class="line">&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="string">&#x27;t&#x27;</span>, <span class="string">&#x27;y&#x27;</span>, <span class="string">&#x27;s&#x27;</span>&#125;</span><br><span class="line"><span class="comment"># pop</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=&#123;<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.pop()</span><br><span class="line"><span class="string">&#x27;c&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.pop()</span><br><span class="line"><span class="string">&#x27;a&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.pop()</span><br><span class="line"><span class="string">&#x27;b&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="集合操作">集合操作</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">并集：t和s的并集,返回一个新的set包含s和t中的每一个元素</span><br><span class="line">交集:t和s的交集,返回一个新的set包含s和t中的公共元素</span><br><span class="line">差集:返回一个新的set包含s中有但是t中没有的元素</span><br><span class="line">对称差集:返回一个新的set包含s和t中不重复的元素（在t或s中，但不会同时出现在二者中）</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="comment"># 创建集合</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">set</span>(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line">&#123;<span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;o&#x27;</span>, <span class="string">&#x27;l&#x27;</span>, <span class="string">&#x27;h&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 并集</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s1 = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s2 = &#123;<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s1 | s2</span><br><span class="line">&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s1.union(s2)</span><br><span class="line">&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 交集</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s1 = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s2 = &#123;<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s1 &amp; s2</span><br><span class="line">&#123;<span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s1.intersection(s2)</span><br><span class="line">&#123;<span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 差集</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s1 = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s2 = &#123;<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s1 - s2</span><br><span class="line">&#123;<span class="number">1</span>&#125;</span><br><span class="line"><span class="comment"># 注：s1里面有的,s2里面没有的</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s2 - s1</span><br><span class="line">&#123;<span class="number">4</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 对称差集</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s1 = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s2 = &#123;<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s1 ^ s2</span><br><span class="line">&#123;<span class="number">1</span>, <span class="number">4</span>&#125;</span><br><span class="line"><span class="comment"># 注：除了交集 的部分</span></span><br></pre></td></tr></table></figure><hr>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 数据类型 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>02_Python-CSDN_数据类型1</title>
      <link href="/blog/posts/4979.html"/>
      <url>/blog/posts/4979.html</url>
      
        <content type="html"><![CDATA[<p>摘要：以前在 <a href="https://blog.csdn.net/cpen_web/category_11089219.html"><code>CSDN 新星计划</code></a> 上写的文章，迁移至此。<span id="more"></span></p><h1 id="02-Python-数据类型1">02_Python-数据类型1</h1><p><a href="https://blog.csdn.net/cpen_web">博客🔗：https://blog.csdn.net/cpen_web</a></p><hr><h2 id="基本类型">基本类型</h2><h3 id="Python数字">Python数字</h3><p>在Python中有3种类型的数——整数、浮点数和复数</p><table><thead><tr><th>数字类型</th><th>示例</th><th>说明</th></tr></thead><tbody><tr><td>整数</td><td>-2, 12389 <br/> 999999L, ∞ <br/> 0b1110, 0xabf, 0o126</td><td>python2中区分整型、长整型，长整型的整数可以 无穷大 <br/> python3中统称为整型 <br/> 整型的二进制，十六进制，八进制表示法</td></tr><tr><td>浮点数</td><td>-3.23, -52.3E-4</td><td>在 python 中可以用科学计数法表示浮点数</td></tr><tr><td>复数</td><td>-5+4j,2.3-4.6j</td><td>其中-5,4为实数，j为虚数</td></tr></tbody></table><ol><li><p>==int==</p><p>python3 中只有 int（可存超长数据）</p><table><thead><tr><th>整型进制表示法</th><th></th><th></th></tr></thead><tbody><tr><td>进制</td><td>表示方法</td><td>示例</td></tr><tr><td>二进制</td><td>以0b开头，只能包含0、1，逢2进1</td><td>0b11，0b12（错误的表示）</td></tr><tr><td>八进制</td><td>以0o开头，能包含0-7，逢8进1</td><td>0o11</td></tr><tr><td>十六进制</td><td>以0x开头，能包含0-F，逢16进1</td><td>0x11</td></tr><tr><td>十进制</td><td>直接由数字0-9组成，逢10进1</td><td>11</td></tr></tbody></table><p>整型进制操作</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">进制转换-bin:任意进制转2进制,接收一个int,返回一个str</span><br><span class="line">进制转换-oct:任意进制转8进制,接收一个int,返回一个str</span><br><span class="line">进制转换-hex:任意进制转16进制,接收一个int,返回一个str</span><br><span class="line">进制转换-int:任意进制转10进制,接收一个int/str,返回一个int</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">bin</span>(<span class="number">10</span>)<span class="comment"># 10进制转2进制</span></span><br><span class="line"><span class="string">&#x27;0b1010&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">bin</span>(<span class="number">0o71</span>)<span class="comment"># 8进制转2进制</span></span><br><span class="line"><span class="string">&#x27;0b111001&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">bin</span>(<span class="number">0x11</span>)<span class="comment"># 16进制转2进制</span></span><br><span class="line"><span class="string">&#x27;0b10001&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">int</span>(<span class="string">&quot;10&quot;</span>)</span><br><span class="line"><span class="number">10</span><span class="comment"># str 转换成 int</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">int</span>(<span class="string">&quot;0o11&quot;</span>,base=<span class="number">8</span>)<span class="comment"># 8进制的字符串，要指定一下</span></span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">int</span>(<span class="number">0o11</span>)<span class="comment"># 8进制整型 直接转换</span></span><br><span class="line"><span class="number">9</span></span><br></pre></td></tr></table></figure></li><li><p>==float==</p><p>float(浮点型)：浮点数即带有小数点的数字</p><p>​float由整数位，小数点，小数位组成，也可以用科学计数法表示，例如-3.23，-52.3E-4，6.23E12</p><p>​float是不精确的</p><p><strong>decimal模块</strong></p><p>​Decimal类型数据是精确的小数，可以传递给Decimal整型或者字符串参数</p><p>官方文档</p><p>​float<a href="https://docs.python.org/3/library/functions.html#float">https://docs.python.org/3/library/functions.html#float</a></p><p>​decimal<a href="https://docs.python.org/3/library/decimal.html?highlight=decimal">https://docs.python.org/3/library/decimal.html?highlight=decimal</a></p></li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例：浮点型数据float是不精确的</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>i = <span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>i = i - <span class="number">0.1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>i</span><br><span class="line"><span class="number">0.9</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>i = i - <span class="number">0.1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>i</span><br><span class="line"><span class="number">0.8</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>i = i - <span class="number">0.1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>i</span><br><span class="line"><span class="number">0.7000000000000001</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>i = i - <span class="number">0.1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>i</span><br><span class="line"><span class="number">0.6000000000000001</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例：Decimal类型数据是精确的小数，可以传递给Decimal整型或者字符串参数</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> decimal <span class="keyword">import</span> getcontext, Decimal, Context</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>mydec = Decimal.from_float(<span class="number">12.222</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>mydec</span><br><span class="line">Decimal(<span class="string">&#x27;12.2219999999999995310417943983338773250579833984375&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>mydec = Decimal(<span class="number">0.9</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>mydec</span><br><span class="line">Decimal(<span class="string">&#x27;0.90000000000000002220446049250313080847263336181640625&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>mydec = Decimal(<span class="string">&quot;3.14&quot;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>mydec</span><br><span class="line">Decimal(<span class="string">&#x27;3.14&#x27;</span>)</span><br></pre></td></tr></table></figure><ol start="3"><li><p>==complex==</p><p>复数complex：复数就是实数和虚数的统称</p><p>在数学中的表示：复数的基本形式是a+bi,其中a,b是实数,a称为实部,bi称为虚部,i是虚数单位</p><p>complex的组成：复数由实数部分和虚数部分组成，一般形式为x＋yj，其中的x是复数的实数部分，y是复数的虚数部分，这里的x和y都是实数</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">5</span> + <span class="number">4j</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.real</span><br><span class="line"><span class="number">5.0</span><span class="comment"># 存放的是浮点型</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.imag</span><br><span class="line"><span class="number">4.0</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="Python字符串">Python字符串</h3><p>字符串：字符串是字符的序列</p><p>表示方法：单引号（‘）；双引号（“）；三引号（’''或”””）；原样输出</p><table><thead><tr><th>符号</th><th>说明</th><th>示例</th></tr></thead><tbody><tr><td>单引(')</td><td>可引用包含双引号的字符串</td><td>‘say“hello”’</td></tr><tr><td>双引号(“)</td><td>可引用包含单引号的字符串</td><td>“What’syourname?”</td></tr><tr><td>三号引(‘’'或”””)</td><td>可引用一个多行的字符串，在三引号中可自由使用单引号和双引号</td><td>‘’‘<br/>这是多行字符<br/>里面可包含单引号’和双引号”<br/>’‘’</td></tr><tr><td>特殊标记®</td><td>不使得转义字符，将字符原样输出</td><td>r”hello\tworld!”</td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">&#x27;test&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="string">&quot;test&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line"><span class="string">&#x27;test&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line"><span class="string">&#x27;test&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string"><span class="meta">... </span>t</span></span><br><span class="line"><span class="string"><span class="meta">... </span>e</span></span><br><span class="line"><span class="string"><span class="meta">... </span>s</span></span><br><span class="line"><span class="string"><span class="meta">... </span>t&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line"><span class="string">&#x27;\nt\ne\ns\nt&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line">t</span><br><span class="line">e</span><br><span class="line">s</span><br><span class="line">t</span><br><span class="line"><span class="comment"># print(a)按照规定的格式打印输出</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = <span class="string">&quot;t1\nt2&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c</span><br><span class="line"><span class="string">&#x27;t1\nt2&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(c)</span><br><span class="line">t1</span><br><span class="line">t2</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = <span class="string">&#x27;t1\nt2&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c</span><br><span class="line"><span class="string">&#x27;t1\nt2&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(c)</span><br><span class="line">t1</span><br><span class="line">t2</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = <span class="string">r&quot;t1\nt2&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(c)</span><br><span class="line">t1\nt2</span><br></pre></td></tr></table></figure><ul><li><p>==转义字符==</p><p>​转义字符是一种特殊的字符常量。转义字符以反斜线&quot;&quot;开头，后跟一个或几个字符。转义字符具有特定的含义，不同于字符原有的意义，故称“转义”字符。</p></li></ul><table><thead><tr><th>转义字符</th><th>描述</th><th>转义字符</th><th>描述</th><th>转义字符</th><th>描述</th></tr></thead><tbody><tr><td>\(在行尾时)</td><td>续行符</td><td>\n</td><td>换行</td><td>\oyy</td><td>八进制数，yy代表的字符，例如：\o12代表换行</td></tr><tr><td>\\</td><td>反斜杠符号</td><td>\v</td><td>纵向制表符</td><td>\xyy</td><td>十六进制数，yy代表的字符，例如：\x0a代表换行</td></tr><tr><td>\’</td><td>单引号</td><td>\t</td><td>横向制表符</td><td>\other</td><td>其它的字符以普通格式输出</td></tr><tr><td>\&quot;</td><td>双引号</td><td>\r</td><td>回车</td><td>\b</td><td>退格(Backspace)</td></tr><tr><td>\a</td><td>响铃</td><td>\f</td><td>换页</td><td>\e</td><td>转义</td></tr><tr><td>\000</td><td>空</td><td></td><td></td><td></td><td></td></tr></tbody></table><ol><li><p>==字符串取值==</p><p>​下标取值法（注意：下标从0开始）</p><p>​切片取值法</p></li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">&quot;test&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">0</span>]</span><br><span class="line"><span class="string">&#x27;t&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">&quot;test&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">0</span>:<span class="number">2</span>]<span class="comment"># 取下标为0~2的数据。包括0，不包括2</span></span><br><span class="line"><span class="string">&#x27;te&#x27;</span><span class="comment"># 前面包括，后面不包括</span></span><br></pre></td></tr></table></figure><p>字符串的不可变的序列</p><p>一旦创造了一个字符串，就不能再改变它</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">&quot;hello world&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">4</span>] = <span class="string">&quot;1&quot;</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: <span class="string">&#x27;str&#x27;</span> <span class="built_in">object</span> does <span class="keyword">not</span> support item assignment</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(a)</span><br><span class="line"><span class="number">140585442705648</span></span><br></pre></td></tr></table></figure><p>级连字符串</p><p>如果把两个字符串相邻放着，它们会被python自动级连</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>info = <span class="string">&quot;chen&quot;</span><span class="string">&quot;peng&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>info</span><br><span class="line"><span class="string">&#x27;chenpeng&#x27;</span></span><br></pre></td></tr></table></figure><ol start="2"><li>==字符串常用方法==<ol><li>==字符串常用方法——判断系列（True/False）==</li></ol></li></ol><table><thead><tr><th>方法</th><th>功能</th></tr></thead><tbody><tr><td>str.isdigit()</td><td>字符串中是否只包含数字</td></tr><tr><td>str.isnumeric()</td><td>字符串中是否只包含数字（包括中文一到九等）</td></tr><tr><td>str.isalnum()</td><td>字符串中是否只包含字母或数字</td></tr><tr><td>str.istitle()</td><td>字符串中是否每个单词首字母大写，其他字母小写</td></tr><tr><td>str.isalpha()</td><td>字符串中是否只包含字母（汉字会算作字母）</td></tr><tr><td>str.isupper()</td><td>字符串中是否全为大写</td></tr><tr><td>str.isidentifier()</td><td>字符串是否为合法标识符</td></tr><tr><td>str.isprintable()</td><td>字符串是否为可打印字符</td></tr><tr><td>str.islower()</td><td>字符串中是否全为小写</td></tr><tr><td>str.isspace()</td><td>字符串中是否只包含空格（tab也算空格）</td></tr><tr><td>str.startswith(prefix[,start[,end]])</td><td>字符串是否以某字符串开始，可以通过start和stop参数设置搜索范围</td></tr><tr><td>str.endswith(suffix[,start[,end]])</td><td>字符串是否以某个字符串结束，可以通过start和stop参数设置搜索范围</td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line">my_str = <span class="string">&quot;This Is TEST!&quot;</span></span><br><span class="line">my_title = <span class="string">&quot;This is My Title&quot;</span></span><br><span class="line">my_num = <span class="string">&quot;123&quot;</span></span><br><span class="line">my_num2 = <span class="string">&quot;一二三四&quot;</span></span><br><span class="line">my_str2 = <span class="string">&quot;hello&quot;</span></span><br><span class="line">my_str3 = <span class="string">&quot;hello123&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 判断系列</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;判断数字&quot;</span>, my_num.isdigit())     <span class="comment"># 字符串中是否只包含数字</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;判断数字&quot;</span>, my_num.isnumeric())   <span class="comment"># 字符串中是否只包含数字（包括中文一到九等）</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;判断数字&quot;</span>, my_num2.isdigit())    <span class="comment"># 只能判断阿拉伯数字</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;判断数字&quot;</span>, my_num2.isnumeric())  <span class="comment"># 可以判断中文数字</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;判断字母：&quot;</span>, my_str.isalpha())      <span class="comment"># 有空格/“!”会报错 # 判断字母（汉字会算作字母）</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;判断字母数字：&quot;</span>, my_str3.isalnum()) <span class="comment"># 有空格会报错 # 判断字母数字</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;判断字符串是否以This开始&quot;</span>, my_title.startswith(<span class="string">&quot;This&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;判断字符串是否以This结束&quot;</span>, my_title.endswith(<span class="string">&quot;This&quot;</span>))</span><br></pre></td></tr></table></figure><p>​</p><p>​2. ==字符串常用方法——查找统计类==</p><table><thead><tr><th>方法</th><th>功能</th></tr></thead><tbody><tr><td>len(string)</td><td>统计字符串长度</td></tr><tr><td>str.index(sub[,start[,end]])</td><td>显示substring在字符串中第一次出现的下标位置，没有会报错</td></tr><tr><td>str.find(sub[,start[,end]])</td><td>查找substring,找到返回其起始位置，找不到返回-1</td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="comment"># 查找统计类</span></span><br><span class="line">my_str = <span class="string">&quot;This Is TEST!&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;长度：&quot;</span>, <span class="built_in">len</span>(my_str))<span class="comment"># 空格、！占长度</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;i 第一次出现的位置&quot;</span>, my_str.index(<span class="string">&quot;i&quot;</span>))<span class="comment"># 字符串“i”第一次出现的位置</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;i 第一次出现的位置&quot;</span>, my_str.find(<span class="string">&quot;i&quot;</span>))<span class="comment"># 字符串“i”第一次出现的位置，找不到返回-1</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;i 出现的次数&quot;</span>, my_str.count(<span class="string">&quot;i&quot;</span>))</span><br></pre></td></tr></table></figure><p>​3. ==字符串常用方法——字符串转换类（返回一个新对象）==</p><table><thead><tr><th>方法</th><th>功能</th></tr></thead><tbody><tr><td>str.upper()</td><td>将字符串转换为大写</td></tr><tr><td>str.lower()</td><td>将字符串转换为小写</td></tr><tr><td>str.title()</td><td>将字符串中的单词首字母大写，其他字母小写</td></tr><tr><td>str.split(‘sep’)</td><td>指定’sep’作为分隔符将字符串切割成列表，分隔符可以是任意字符（默认是空格）</td></tr><tr><td>‘str’.join(list)</td><td>将列表用str拼接成一个大字符串</td></tr><tr><td>str.strip([string])</td><td>去除字符串中首尾的字符串，不带参数默认去除空格</td></tr><tr><td>str.zfill(number)</td><td>返回指定长度的字符串，原字符串右对齐，前面填充0</td></tr><tr><td>str.replace(‘old’,‘new’[,count])</td><td>用新的字符替换老字符，还可以指定替换的个数，默认全部替换</td></tr><tr><td>str.capitalize()</td><td>句子首字母大写</td></tr><tr><td>str.center(width[,fillchar])str.ljust(width[,fillchar])str.rjust(width[,fillchar])</td><td>返回一个原字符串居中(靠左/靠右)对齐，width为总长度，两边用一个字符fillchar填充，如果指定的长度小于原字符串的长度则返回原字符串</td></tr><tr><td>str.expandtabs(number)</td><td>将\t转换成number个空格</td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="comment"># 字符串转换类</span></span><br><span class="line">msg = <span class="string">&quot;  hEllo World Chen   &quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;大写&quot;</span>, msg.upper())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;小写&quot;</span>, msg.lower())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;标题&quot;</span>, msg.title())</span><br><span class="line"></span><br><span class="line">msg2 = <span class="string">&quot;root:x:0:0:root:/root:/bin/bash&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;切割：&quot;</span>, msg2.split(<span class="string">&quot;:&quot;</span>))</span><br><span class="line">msg3 = msg2.split(<span class="string">&quot;:&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;拼接：&quot;</span>, <span class="string">&quot;#&quot;</span>.join(msg3))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;去除首尾空白&quot;</span>, msg.strip(), <span class="string">&quot;######&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;去除root首尾：&quot;</span>, msg2.strip(<span class="string">&quot;root&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;字符串填充：&quot;</span>, msg.zfill(<span class="number">40</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;字符串替换&quot;</span>, msg2.replace(<span class="string">&quot;:&quot;</span>, <span class="string">&quot;%&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;整个字符串首字母大写&quot;</span>, msg.capitalize())</span><br><span class="line">msg4 = <span class="string">&quot;xxx&quot;</span></span><br><span class="line"><span class="built_in">print</span>(msg4.center(<span class="number">50</span>, <span class="string">&#x27; &#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(msg4.center(<span class="number">50</span>, <span class="string">&#x27;-&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(msg4.ljust(<span class="number">50</span>, <span class="string">&quot;-&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(msg4.rjust(<span class="number">50</span>, <span class="string">&quot;-&quot;</span>))</span><br></pre></td></tr></table></figure><ol start="3"><li>==字符串拼接==</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="comment"># 字符串拼接（+）</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">&#x27;I&#x27;</span> + <span class="string">&#x27;Love&#x27;</span> + <span class="string">&#x27;Python&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(a)</span><br><span class="line">ILovePython</span><br><span class="line"></span><br><span class="line"><span class="comment">#字符串拼接（join）</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="string">&#x27;I&#x27;</span>, <span class="string">&#x27;Love&#x27;</span>, <span class="string">&#x27;Python&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="string">&#x27;&#x27;</span>.join(a))</span><br><span class="line">ILovePython</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">+ 与 join的效率问题</span><br><span class="line">一般来说，+ 拼接 效率比 join 拼接低</span><br><span class="line">+拼接，每一次出现都会在内存中开辟1个新的空间，所有效率低，比较耗时</span><br><span class="line">join一次性拼接成1个大的字符串</span><br></pre></td></tr></table></figure><ol start="4"><li>==字符串格式化==</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">字符串格式化（%）</span><br><span class="line">基本格式</span><br><span class="line">%[(name)][flags][width].[precision]typecode</span><br><span class="line">-(name):命名</span><br><span class="line">-flags:+,-,&#x27;&#x27;或0。+表示右对齐；-表示左对齐；&#x27;&#x27;为一个空格，表示在正数的左侧填充一个空格，从而与负数对齐，0表示使用0填充</span><br><span class="line">-width表示显示宽度</span><br><span class="line">-precision表示小数点后精度</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="comment"># %格式化 </span></span><br><span class="line">name = <span class="string">&quot;wen&quot;</span></span><br><span class="line">age = <span class="number">18</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;姓名： %s, 年龄： %s&quot;</span>%(name, age))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;姓名： %s, 年龄： %s&quot;</span>%(age, <span class="string">&quot;wen2&quot;</span>))</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">字符串格式化(format)</span><br><span class="line">&#123;变量:[填充字符][对齐方式 &lt;^&gt;][宽度][格式]&#125;</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="comment"># format 格式化</span></span><br><span class="line">name = <span class="string">&quot;wen&quot;</span></span><br><span class="line">age = <span class="number">18</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;format01 --&gt; 姓名：&#123;&#125;， 年龄：&#123;&#125;&quot;</span>.<span class="built_in">format</span>(name, age))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;format01 --&gt; 姓名：&#123;&#125;， 年龄：&#123;&#125;&quot;</span>.<span class="built_in">format</span>(age, name))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;format02 --&gt; 姓名: &#123;1&#125;, 年龄：&#123;0&#125;&quot;</span>.<span class="built_in">format</span>(name, age))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;format02 --&gt; 姓名: &#123;1&#125;, 年龄：&#123;0&#125;&quot;</span>.<span class="built_in">format</span>(age, name))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;format03 --&gt; 姓名：&#123;name1&#125;, 年龄：&#123;age1&#125;&quot;</span>.<span class="built_in">format</span>(name1 = name, age1 = age))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;format01 --&gt; &#123;0:*&gt;10&#125;&quot;</span>.<span class="built_in">format</span>(<span class="number">10</span>,<span class="number">20</span>))  <span class="comment"># 注：0 第1个变量</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;format01 --&gt; &#123;1:*&gt;10&#125;&quot;</span>.<span class="built_in">format</span>(<span class="number">10</span>,<span class="number">20</span>))  <span class="comment"># 注：1 第2个变量</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;format01 --&gt; &#123;1:*&lt;10&#125;&quot;</span>.<span class="built_in">format</span>(<span class="number">10</span>,<span class="number">20</span>))  <span class="comment"># 注：：执行 ; * 填充字符</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;format01 --&gt; &#123;1:*^10&#125;&quot;</span>.<span class="built_in">format</span>(<span class="number">10</span>,<span class="number">20</span>))  <span class="comment"># 注：^ 居中 ; 10 填充宽度10字符</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;format02 --&gt; &#123;0:.2f&#125;&quot;</span>.<span class="built_in">format</span>(<span class="number">1</span>/<span class="number">3</span>,<span class="number">5.333</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;format02 --&gt; &#123;1:06.2f&#125;&quot;</span>.<span class="built_in">format</span>(<span class="number">1</span>/<span class="number">3</span>,<span class="number">5.333</span>))</span><br><span class="line"><span class="comment"># 二进制</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;format02 --&gt; &#123;0:b&#125;&quot;</span>.<span class="built_in">format</span>(<span class="number">10</span>))</span><br><span class="line"><span class="comment"># 八进制注：16进制是”&#123;0:x&#125;”.format(10)</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;format02 --&gt; &#123;0:o&#125;&quot;</span>.<span class="built_in">format</span>(<span class="number">10</span>))</span><br><span class="line"><span class="comment"># 千分位格式化</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;format02 --&gt; &#123;0:,&#125;&quot;</span>.<span class="built_in">format</span>(<span class="number">123456789</span>))</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">字符串格式化-f</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line"><span class="comment"># f标志符  格式化</span></span><br><span class="line">a = <span class="string">&quot;I&quot;</span></span><br><span class="line">b = <span class="string">&quot;Love&quot;</span></span><br><span class="line">c = <span class="string">&quot;Python&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;a&#125;</span><span class="subst">&#123;b&#125;</span><span class="subst">&#123;c&#125;</span>&quot;</span>)</span><br><span class="line"><span class="comment">#结果 ILovePython</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&#123;a&#125;&#123;b&#125;&#123;c&#125;&quot;</span>.<span class="built_in">format</span>(a = a, b = b, c = c))<span class="comment"># 注：效果等同</span></span><br><span class="line"><span class="comment">#结果 ILovePython</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;a&#125;</span><span class="subst">&#123;b&#125;</span><span class="subst">&#123;c:a^<span class="number">10</span>&#125;</span>&quot;</span>)<span class="comment"># 注：对字符串c的操作：用“a”填充宽度10，居中</span></span><br><span class="line"><span class="comment">#结果 ILoveaaPythonaa</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&#123;a&#125;&#123;b&#125;&#123;c:a^10&#125;&quot;</span>.<span class="built_in">format</span>(a = a, b = b, c = c)) <span class="comment"># 注：效果等同</span></span><br><span class="line"><span class="comment">#结果 ILoveaaPythonaa</span></span><br></pre></td></tr></table></figure><h3 id="Python数字-Booleans">Python数字-Booleans</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">布尔值(Booleans)是一个逻辑值</span><br><span class="line">取值范围只有True和False(真和假)</span><br><span class="line">布尔值为假：</span><br><span class="line">&#x27;&#x27;,0,0.0,(),[],&#123;&#125;,None,False</span><br><span class="line">None是一个特殊的常量，表示一种特殊的数据类型（NoneType）</span><br><span class="line">值布尔值为真：</span><br><span class="line">除了为假的，其他的都为真</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例</span></span><br><span class="line">* 布尔值可以相互加减</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(a == b)</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = (a == b) + (a == d)<span class="comment"># 注：c = 0 +1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="comment"># 布尔值排序</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>lst=[(a==d),(a==b)]  <span class="comment"># 注：(a==d)为真，(a==b)为假</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">sorted</span>(lst)</span><br><span class="line">[<span class="literal">False</span>, <span class="literal">True</span>]  <span class="comment"># 注：因为默认情况下 0为假，1为真</span></span><br></pre></td></tr></table></figure><h3 id="Others">Others</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">○常量</span><br><span class="line">常量是指一旦初始化后就不能修改的固定值</span><br><span class="line">注意：在Python中表示一个常量通常用大写（约定俗成，非强制）表示，如：PI=3.1415926</span><br><span class="line">○NoneType</span><br><span class="line">None表示什么也没有</span><br></pre></td></tr></table></figure><hr>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 数据类型 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>01_Python-CSDN_环境搭建</title>
      <link href="/blog/posts/16756.html"/>
      <url>/blog/posts/16756.html</url>
      
        <content type="html"><![CDATA[<p>摘要：以前在 <a href="https://blog.csdn.net/cpen_web/category_11089219.html"><code>CSDN 新星计划</code></a> 上写的文章，迁移至此。<span id="more"></span></p><h1 id="01-Python-环境搭建">01_Python-环境搭建</h1><p><a href="https://blog.csdn.net/cpen_web">博客🔗：https://blog.csdn.net/cpen_web</a></p><hr><h2 id="①-Python解释器-安装">① Python解释器 安装</h2><ol><li><p>Windows平台</p><p>下载地址：<a href="https://www.python.org/ftp/python/3.9.5/python-3.9.5-amd64.exe%EF%BC%883.9%E7%89%88%E6%9C%AC%EF%BC%89">https://www.python.org/ftp/python/3.9.5/python-3.9.5-amd64.exe（3.9版本）</a></p><p>安装python39</p><p>​exe安装：注意修改目录、环境变量</p><p>​安装路径：C:/python39（安装路径可以自定，但注意不要包含中文或空格等特殊字符）</p><p>​验证：按键盘“win+R”，输入“cmd” , 在命令行测试</p><p>​C:\Users\cPenadm&gt;==python -V==</p><p>​Python 3.9.5</p></li><li><p>Linux平台</p><p>自带python（不同版本的操作系统带的python版本不一样）</p><p>centos-yum安装（3.6版本）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum install epel-release</span><br><span class="line">yum install python36</span><br><span class="line">yum install python36-devel</span><br></pre></td></tr></table></figure></li></ol><h2 id="②-pip工具-设置">② pip工具 设置</h2><p>pip是Python 包管理工具，该工具提供了对Python包的查找、下载、安装、卸载的功能。</p><p>配置国内源<br>解决安装慢的问题</p><ol><li><p>方法 1</p><ul><li><p>升级pip到10.0以上版本</p></li><li><pre><code class="language-bash">pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2. 方法 2</span><br><span class="line"></span><br><span class="line">   1. Windows平台</span><br><span class="line"></span><br><span class="line">      - 创建目录及文件 ==C:\Users\&lt;你的用户名&gt;\pip\pip.ini==</span><br><span class="line"></span><br><span class="line">      - pip.ini文件内容如下：修改成阿里的源，其他国内源也可以</span><br><span class="line"></span><br></pre></td></tr></table></figure>  [global]  index-url=http://mirrors.aliyun.com/pypi/simple/  [install]  trusted-host=mirrors.aliyun.com  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">2. Linux平台</span><br><span class="line"></span><br><span class="line">   ```bash</span><br><span class="line">   mkdir  ~/.pip</span><br><span class="line">   vim  ~/.pip/pip.conf</span><br><span class="line">   #输入以下内容</span><br><span class="line">   [global]</span><br><span class="line">   index-url = https://pypi.tuna.tsinghua.edu.cn/simple</span><br></pre></td></tr></table></figure></code></pre></li></ul></li></ol><h2 id="③-PyCharm-安装">③ PyCharm 安装</h2><p>PyCharm是由JetBrains打造的一款PythonIDE，支持macOS、Windows、Linux系统</p><p>集成开发环境（IDE,IntegratedDevelopmentEnviroment）是用于提供程序开发环境的应用程序，一般包括代码编辑器、编译器、调试器和图形用户界面等工具</p><p>优点：界面友好、调试、语法高亮、Project管理、代码跳转、智能提示、自动完成、单元测试、版本控制等</p><ol><li><p>下载地址</p><p>官网：<a href="http://www.jetbrains.com/pycharm/">http://www.jetbrains.com/pycharm/</a></p></li><li><p>安装</p><p>社区版：免费使用，不用激活</p><p>专业版：功能更丰富，需要激活</p></li><li><p>激活</p><p>打开pycharm，执行：Help-Register</p><p><img src="https://image.cpen.top/image/202203052147100.png" alt="image-20220305214732025"></p></li><li><p>配置Python解释器</p><p>参考：<a href="https://zhuanlan.zhihu.com/p/40716785">https://zhuanlan.zhihu.com/p/40716785</a></p><p><img src="https://image.cpen.top/image/202203052148253.png" alt="image-20220305214846212"></p></li></ol><hr>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 环境 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>04_Hexo-多平台部署-云服务器-GitHub-Gitee</title>
      <link href="/blog/posts/38874.html"/>
      <url>/blog/posts/38874.html</url>
      
        <content type="html"><![CDATA[<p>摘要：<code>多平台</code> + <code>一键部署</code> + <code>云服务器</code><span id="more"></span></p><h1 id="04-Hexo-多平台部署">04_Hexo-多平台部署</h1><h2 id="一-开篇词">一. 开篇词</h2><h3 id="1-1-前言">1.1 前言</h3><ul><li>官方文档介绍了 Hexo 可以同时<code>一键部署</code>到多个平台，只需要同时使用多个 <code>deployer</code>。</li></ul><blockquote><p><a href="https://hexo.io/zh-cn/docs/one-command-deployment">中文官方文档</a></p><p>Hexo 提供了快速方便的一键部署功能，让您只需一条命令就能将网站部署到服务器上。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>在开始之前，您必须先在 <code>_config.yml</code> 中修改参数，一个正确的部署配置中至少要有 <code>type</code> 参数，例如：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br></pre></td></tr></table></figure><p>您可同时使用多个 deployer，Hexo 会依照顺序执行每个 deployer。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">- <span class="built_in">type</span>: git</span><br><span class="line">  repo:</span><br><span class="line">- <span class="built_in">type</span>: heroku</span><br><span class="line">  repo:</span><br></pre></td></tr></table></figure></blockquote><h3 id="1-2-说明">1.2. 说明</h3><ul><li>使用 <code>Git Hooks</code> 同步 Hexo 生成的静态文件。（后期我弃用 git，改用 rsync 了）</li></ul><h2 id="二-步骤">二. 步骤</h2><h3 id="2-1-云服务器创建-Git-仓库">2.1 云服务器创建 Git 仓库</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ cd /opt/git/</span><br><span class="line"></span><br><span class="line">$ git init --bare hexo.git# 创建 Hexo 远程仓库git init --bare 仓库名.git</span><br><span class="line"></span><br><span class="line">$ cd /opt/git/hexo.git/hooks/ </span><br><span class="line"></span><br><span class="line">$ vim post-receive </span><br><span class="line">#!/bin/bash</span><br><span class="line">git --work-tree=/opt/www/hexo --git-dir=/opt/git/hexo.git checkout -f</span><br><span class="line"></span><br><span class="line"># --work-tree=/opt/www/hexo   设置工作树的路径</span><br><span class="line"># --git-dir=/opt/git/hexo.git 设置存储库的路径</span><br><span class="line"></span><br><span class="line">$ chmod +x post-receive# 给钩子文件添加执行权限</span><br><span class="line"></span><br><span class="line">$ mkdir /opt/www/hexo# 创建工作树路径</span><br><span class="line"></span><br><span class="line">$ chmod -R 777 /opt/www/hexo# 授权，否则到后面访问报 403</span><br></pre></td></tr></table></figure><h4 id="2-1-2-deployer-使用-rsync-进行部署">2.1.2 deployer 使用 rsync 进行部署</h4><p>前言：后面发现使用 git 上传至云服务器速度太慢了（不清楚啥原因），改用 rsync。</p><blockquote><p>git 上传速度如下图</p><p><img src="https://image.cpen.top/image/image-20220906115955982.png" alt="image-20220906115955982"></p></blockquote><ol><li><p>使 git bash 支持 rsync（Windows）</p><p>参考<br><a href="https://blog.csdn.net/m0_48613893/article/details/124104757">https://blog.csdn.net/m0_48613893/article/details/124104757</a><br><a href="https://blog.csdn.net/qq_38689395/article/details/125758842">https://blog.csdn.net/qq_38689395/article/details/125758842</a><br>如果文件重复，就跳过<br>如果出错就修改文件名    <code>.\usr\bin\msys-xxhash-0.8.0.dll → msys-xxhash-0.dll</code></p></li><li><p><code>./_config.yml</code> 文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">- type: rsync</span><br><span class="line">  host: IP地址</span><br><span class="line">  user: 使用者名称</span><br><span class="line">  root: 远程主机的根目录</span><br><span class="line">  port: 22</span><br><span class="line">  delete: true</span><br><span class="line">  verbose: true</span><br><span class="line">  ignore_errors: false</span><br></pre></td></tr></table></figure><p>参考 <a href="https://hexo.io/zh-cn/docs/one-command-deployment#Rsync">https://hexo.io/zh-cn/docs/one-command-deployment#Rsync</a></p></li></ol><p>在传大文件（也就10M）时依旧很慢，但比前者速度快些。</p><h3 id="2-2-配置本地Hexo-config-yml">2.2 配置本地Hexo _config.yml</h3><ul><li><code>./_config.yml</code> 文件，同步部署 <code>GitHub、Gitee、云服务器</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Deployment - 部署</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/zh-cn/docs/one-command-deployment.html</span></span><br><span class="line">deploy:</span><br><span class="line">- <span class="built_in">type</span>: git</span><br><span class="line">  repository: root@IP地址:/opt/git/hexo.git</span><br><span class="line">  branch: master</span><br><span class="line">  commit: Site updated</span><br><span class="line">  message: hexo &#123;&#123; now(<span class="string">&#x27;YYYYMMDD&#x27;</span>) &#125;&#125;</span><br><span class="line">- <span class="built_in">type</span>: git</span><br><span class="line">  repository: git@github.com:mycpen/mycpen.github.io.git</span><br><span class="line">  branch: main</span><br><span class="line">  commit: Site updated</span><br><span class="line">  message: hexo &#123;&#123; now(<span class="string">&#x27;YYYYMMDD&#x27;</span>) &#125;&#125;       <span class="comment"># message为自定义提交信息，默认为 Site updated: YYYY-MM-DD HH:mm:ss</span></span><br><span class="line">- <span class="built_in">type</span>: git</span><br><span class="line">  repository: git@gitee.com:mycpen/mycpen.gitee.io.git</span><br><span class="line">  branch: master</span><br><span class="line">  commit: Site updated</span><br><span class="line">  message: hexo &#123;&#123; now(<span class="string">&#x27;YYYYMMDD&#x27;</span>) &#125;&#125;</span><br></pre></td></tr></table></figure><h3 id="2-3-配置-SSH-免密登录">2.3 配置 SSH 免密登录</h3><ul><li>本地 SSH 公钥 如<code>~/.ssh/id_rsa.pub</code>  内容添加至云服务器 <code>~/.ssh/authorized_keys</code> 中</li></ul><h3 id="2-4-部署">2.4 部署</h3><ul><li>本地 Hexo 源文件项目下敲</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean ; hexo g ; hexo d</span><br></pre></td></tr></table></figure><h3 id="2-5-使用-NGINX-做-Web-服务器">2.5 使用 NGINX 做 Web 服务器</h3><ul><li>新增虚拟主机配置</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cat</span> /usr/local/nginx/conf/conf.d/blog.cpen.top.conf</span><br><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    listen 443 ssl;</span><br><span class="line"></span><br><span class="line">    server_name blog.cpen.top;</span><br><span class="line"></span><br><span class="line">    error_page  404  /404.html;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 强制HTTPS跳转</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$scheme</span> = <span class="string">&quot;http&quot;</span>) &#123;</span><br><span class="line">        <span class="built_in">return</span>  307 https://$host<span class="variable">$request_uri</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    root /opt/www/hexo;</span><br><span class="line"></span><br><span class="line">    ssl_certificate     /usr/local/nginx/ssl/blog.cpen.top.pem;</span><br><span class="line">    ssl_certificate_key /usr/local/nginx/ssl/blog.cpen.top.key;</span><br><span class="line"></span><br><span class="line">    access_log /data/service_logs/nginx/blog.cpen.top_access.log misc;</span><br><span class="line">    error_log  /data/service_logs/nginx/blog.cpen.top_error.log;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>最后浏览器访问 <a href="https://blog.cpen.top/">https://blog.cpen.top/</a></li></ul><h2 id="三-注意点">三. 注意点</h2><ol><li><p>配置 SSH <code>免密</code>；</p></li><li><p>存储目录<code>授权</code>；</p><p>给工作树路径 /opt/www/hexo 777 权限，~~一开始没授权 访问报 403，环境为 CentOS 8.2；~~原因找到了，第 5 点。</p></li><li><p>开放端口。注意是否需要在云服务器新增<code>安全组策略</code>，80、443 端口需要打开；</p></li><li><p>SELinux 等原因。</p></li><li><p><code>403 权限问题</code><br>后面查询发现了 <code>403</code> 的原因，Nginx 编译安装时我指定了启动用户为 普通用户（默认为 nobody），导致起的工作进程权限不够。而 Hexo 上传的新的静态文件权限不为 777。</p><p>所以修改 Nginx 的启动用户为 root。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ vim /usr/local/nginx/conf/nginx.conf</span><br><span class="line">user    root;</span><br><span class="line"></span><br><span class="line">$ nginx -s reload</span><br></pre></td></tr></table></figure></li></ol><h2 id="四-参考文章">四. 参考文章</h2><p><a href="https://hexo.io/zh-cn/docs/one-command-deployment">官方文档 一键部署</a></p><p><code>*</code> <a href="https://blog.csdn.net/wangjienull/article/details/109227984">使用 Git Hooks 部署至云服务器</a></p><p><a href="https://blog.csdn.net/qq_38679881/article/details/122730065">使用 Git Hooks 部署至云服务器</a></p><p><a href="https://blog.csdn.net/Y_Ace/article/details/121764537">使用 Git Hooks 部署至云服务器 新增 git 用户、授权目录</a></p><p><code>*</code> <a href="https://www.idczone.net/news/3261.html/">访问403 修改 Nginx 启动用户为 root</a></p><p><code>*</code> <a href="https://blog.csdn.net/alexis7/article/details/109569218">访问403 授权 777 目录</a></p><p><a href="https://www.likecs.com/show-204450505.html">访问 403 CentOS 8 环境</a></p><p><a href="http://www.wjhsh.net/reblue520-p-6239733.html">访问 403 SELinux 未关闭</a></p><hr>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Troubleshooting </tag>
            
            <tag> Hexo </tag>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>03_Hexo-Github Pages 个人博客源文件备份迁移</title>
      <link href="/blog/posts/43907.html"/>
      <url>/blog/posts/43907.html</url>
      
        <content type="html"><![CDATA[<p>摘要：<code>Hexo</code> + <code>迁移 / 备份</code><span id="more"></span></p><h1 id="Github-Pages-个人博客源文件">Github Pages 个人博客源文件</h1><h2 id="1-起因">1. 起因</h2><ol><li><p><strong>源文件保存问题</strong>：<a href="https://hexo.io/">Hexo</a> 搭建的个人博客，其远程仓库只保存 <a href="https://hexo.io/">Hexo</a> 发布后的 Html 静态文件，博客的源 Markdown 文件、主题配置等资源还在本地；</p></li><li><p><strong>源文件隐私</strong>：考虑到源文件的隐秘性，放弃了新建分支存放源文件，而采用新建项目来存放。</p></li></ol><h2 id="2-作用">2. 作用</h2><ol><li>源文件<strong>备份</strong>；</li><li>博客的可移植性。</li></ol><h2 id="3-注意点">3. 注意点</h2><ul><li><p>删除 <code>themes</code> 文件下 clone 的主题文件下的 <code>.git</code> 文件；</p></li><li><p><code>node-modules/</code> 中，自定义了一些配置，改动了源码，需要同步，.gitignore 中不写入；</p><p>.gitignore 配置如下</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.DS_Store</span><br><span class="line">db.json</span><br><span class="line">*.<span class="built_in">log</span></span><br><span class="line">public/</span><br><span class="line">.deploy*/</span><br></pre></td></tr></table></figure><h2 id="4-配置步骤">4. 配置步骤</h2><ol><li><p>将仓库克隆至本地；</p></li><li><p>安装 <a href="https://nodejs.org/en/">Node.js</a> 和 <a href="https://git-scm.com/">GIt</a>；<a href="https://hexo.io/zh-cn/docs/#%E5%AE%89%E8%A3%85">官方中文文档</a></p></li><li><p>安装 <a href="https://hexo.io/zh-cn/docs/#%E5%AE%89%E8%A3%85-Hexo">Hexo</a>；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g hexo-cli</span><br></pre></td></tr></table></figure></li><li><p>如之前未配置 Git 信息，则需配置下；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.email <span class="string">&quot;you@example.com&quot;</span></span><br><span class="line">git config --global user.name <span class="string">&quot;Your Name&quot;</span></span><br></pre></td></tr></table></figure><blockquote><p><img src="https://image.cpen.top/image/image-20220830155020917.png" alt="image-20220830155020917"></p></blockquote></li><li><p>执行 <a href="https://hexo.io/zh-cn/docs/commands">Hexo 命令</a>，生成静态文件、部署网站等。例如：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean ; hexo g ; hexo d ; hexo s</span><br></pre></td></tr></table></figure><blockquote><p>过程顺利。</p><p><img src="https://image.cpen.top/image/image-20220830155418809.png" alt="image-20220830155418809"></p></blockquote></li><li><p>提交本地源文件变更。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull ; git add . ; git commit -m <span class="string">&#x27;backup&#x27;</span> ; git push</span><br></pre></td></tr></table></figure><p>命令组合<code>git pull ; hexo clean ; hexo g ; hexo d ; git add . ; git commit -m 'backup' ; git push</code></p></li></ol><h2 id="5-参考文章">5. 参考文章</h2><p><a href="https://www.jianshu.com/p/a04d75ee9ab6">Hexo 和博客源文件之间的关系</a></p><p><a href="https://hexo.io/zh-cn/docs/github-pages">官方文档分支示例为 gh-pages</a></p><p><a href="https://zhuanlan.zhihu.com/p/127027266">新建仓库样例1</a></p><p><a href="https://blog.csdn.net/weixin_39961522/article/details/112096073">新建仓库样例2</a></p><p><a href="https://blog.csdn.net/stringwinder/article/details/126287503">新建仓库样例3</a></p><p><a href="https://zhuanlan.zhihu.com/p/71544809">新建分支样例1</a></p><p><a href="https://zhuanlan.zhihu.com/p/476603074">新建分支样例2</a></p><hr>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>02_Hexo-出错排查-Nunjucks Error</title>
      <link href="/blog/posts/5162.html"/>
      <url>/blog/posts/5162.html</url>
      
        <content type="html"><![CDATA[<p>摘要：<code>Nunjucks Error</code><span id="more"></span></p><h1 id="Hexo-出错排查">Hexo 出错排查</h1><h2 id="一-Nunjucks-Error">一. Nunjucks Error</h2><p><strong>现象描述</strong></p><blockquote><p>Unhandled rejection Nunjucks Error: _posts/xxx.md [Line 84, Column 13] <code>unknown block tag: 标签</code></p><p><img src="https://image.cpen.top/image/image-20220829151147643.png" alt="image-20220829151147643"></p></blockquote><p><strong>解决办法</strong></p><blockquote><p>参考<a href="https://hexo.io/docs/troubleshooting.html#Escape-Contents">https://hexo.io/docs/troubleshooting.html#Escape-Contents</a><br><a href="https://blog.csdn.net/Calvin_zhou/article/details/109303640">https://blog.csdn.net/Calvin_zhou/article/details/109303640</a></p><p>泄露（Escape）内容</p><p>Hexo 使用 <a href="https://mozilla.github.io/nunjucks/">Nunjucks</a> 来解析文章（旧版本使用 <a href="http://paularmstrong.github.io/swig/">Swig</a>，两者语法类似），内容若包含 <code>&#123;&#123; &#125;&#125;</code> 或 <code>&#123;% %&#125;</code> 可能导致解析错误，您可以用 <a href="https://hexo.io/docs/tag-plugins#Raw"><code>raw</code></a> 标签包裹，single backtick <code>&#123;&#123; &#125;&#125;</code> 或 triple backtick 来避免潜在问题发生。<br>Alternatively, Nunjucks tags can be disabled through the renderer’s option (if supported), <a href="https://hexo.io/api/renderer#Disable-Nunjucks-tags">API</a> or <a href="https://hexo.io/docs/front-matter">front-matter</a>.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% raw %&#125;</span><br><span class="line">Hello &#123;&#123; world &#125;&#125;</span><br><span class="line">&#123;% endraw %&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line">Hello &#123;&#123; world &#125;&#125;</span><br><span class="line">```</span><br></pre></td></tr></table></figure></blockquote><hr>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Troubleshooting </tag>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>04_Django-模板变量/标签/过滤器/继承-url反向解析</title>
      <link href="/blog/posts/65154.html"/>
      <url>/blog/posts/65154.html</url>
      
        <content type="html"><![CDATA[<p>摘要：<code>变量</code> + <code>标签</code> + <code>过滤器</code> + <code>继承</code> + <code>URL 反向解析</code><span id="more"></span></p><h1 id="04-Django-模板变量-标签-过滤器-继承-url反向解析">04_Django-模板变量/标签/过滤器/继承-url反向解析</h1><p><a href="https://www.bilibili.com/video/BV1vK4y1o7jH">视频🔗：https://www.bilibili.com/video/BV1vK4y1o7jH</a><br><a href="https://blog.csdn.net/cpen_web">博客🔗：https://blog.csdn.net/cpen_web</a></p><hr><h2 id="一-模板层-变量和标签">一. 模板层 - 变量和标签</h2><h3 id="变量">变量</h3><ul><li>视图函数中可以将Python变量封装到 <strong>字典</strong> 中传递到模板上</li></ul><p>样例：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">xxx_view</span>(<span class="params">request</span>):</span><br><span class="line">    dic = &#123;</span><br><span class="line">        <span class="string">&quot;变量1&quot;</span>: <span class="string">&quot;值1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;变量2&quot;</span>: <span class="string">&quot;值2&quot;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;xxx.html&#x27;</span>, dic)</span><br></pre></td></tr></table></figure><ul><li>能传递到模板中的 <strong>数据类型</strong></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">str-字符串int-整型</span><br><span class="line">list-数组tuple-元组</span><br><span class="line">dict-字典func-方法</span><br><span class="line">obj-类实例化的对象</span><br></pre></td></tr></table></figure><ul><li>在模板中使用变量语法</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- &#123;&#123; 变量名 &#125;&#125;</span><br><span class="line">- &#123;&#123; 变量名.index &#125;&#125;</span><br><span class="line">- &#123;&#123; 变量名.key &#125;&#125;</span><br><span class="line">- &#123;&#123; 对象.方法 &#125;&#125;</span><br><span class="line">- &#123;&#123; 函数名 &#125;&#125;</span><br></pre></td></tr></table></figure><ul><li>演示：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1:8000/test_html_param</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202202160138597.png" alt="image-20220216013835514"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mysite1/mysite1/urls.py</span></span><br><span class="line">urlpatterns = [</span><br><span class="line">    ...</span><br><span class="line">    path(<span class="string">&#x27;test_html&#x27;</span>, views.test_html)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># mysite1/mysite1/views.py</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_html_param</span>(<span class="params">request</span>):</span><br><span class="line">    dic = &#123;&#125;</span><br><span class="line">    dic[<span class="string">&#x27;int&#x27;</span>] = <span class="number">88</span></span><br><span class="line">    dic[<span class="string">&#x27;str&#x27;</span>] = <span class="string">&#x27;peng&#x27;</span></span><br><span class="line">    dic[<span class="string">&#x27;lst&#x27;</span>] = [<span class="string">&#x27;Tom&#x27;</span>, <span class="string">&#x27;Jack&#x27;</span>, <span class="string">&#x27;Lily&#x27;</span>]</span><br><span class="line">    dic[<span class="string">&#x27;dict&#x27;</span>] = &#123;<span class="string">&#x27;a&#x27;</span>:<span class="number">9</span>, <span class="string">&#x27;b&#x27;</span>:<span class="number">8</span>&#125;</span><br><span class="line">    dic[<span class="string">&#x27;func&#x27;</span>] = say_hi</span><br><span class="line">    dic[<span class="string">&#x27;class_obj&#x27;</span>] = Dog()</span><br><span class="line">    dic[<span class="string">&#x27;script&#x27;</span>] = <span class="string">&#x27;&lt;script&gt;alert(1111)&lt;/script&gt;&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;test_html_param.html&#x27;</span>, dic)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">say_hi</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;hahaha&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">say</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;wangwang&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># mysite1/templates/test_html_param.html</span></span><br><span class="line">&lt;h3&gt;<span class="built_in">int</span> 是 &#123;&#123; <span class="built_in">int</span>|add:<span class="string">&quot;2&quot;</span> &#125;&#125;&lt;/h3&gt;</span><br><span class="line">&lt;h3&gt;<span class="built_in">str</span> 是 &#123;&#123; <span class="built_in">str</span>|upper &#125;&#125;&lt;/h3&gt;</span><br><span class="line">&lt;h3&gt;lst 是 &#123;&#123; lst &#125;&#125;&lt;/h3&gt;</span><br><span class="line">&lt;h3&gt;lst 是 &#123;&#123; lst<span class="number">.0</span> &#125;&#125;&lt;/h3&gt;</span><br><span class="line">&lt;h3&gt;<span class="built_in">dict</span> 是 &#123;&#123; <span class="built_in">dict</span> &#125;&#125;&lt;/h3&gt;</span><br><span class="line">&lt;h3&gt;<span class="built_in">dict</span>[<span class="string">&#x27;a&#x27;</span>] 是 &#123;&#123; <span class="built_in">dict</span>.a &#125;&#125;&lt;/h3&gt;</span><br><span class="line">&lt;h3&gt;function 是 &#123;&#123; func &#125;&#125;&lt;/h3&gt;</span><br><span class="line">&lt;h3&gt;class_obj 是 &#123;&#123; class_obj.say &#125;&#125;&lt;/h3&gt;</span><br><span class="line">&lt;h3&gt;script 是 &#123;&#123; script|safe &#125;&#125;&lt;/h3&gt;</span><br></pre></td></tr></table></figure><hr><h3 id="标签">标签</h3><p><strong>模板标签</strong></p><ul><li>作用：将一些服务器端的功能嵌入到模板中，例如流程控制等</li><li>标签语法：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% 标签 %&#125;</span><br><span class="line">...</span><br><span class="line">&#123;% 结束标签 %&#125;</span><br></pre></td></tr></table></figure><h4 id="if标签">if标签</h4><ul><li><strong>语法</strong>：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;% if 条件表达式1 %&#125;</span><br><span class="line">...</span><br><span class="line">&#123;% elif 条件表达式2 %&#125;</span><br><span class="line">...</span><br><span class="line">&#123;% elif 条件表达式3 %&#125;</span><br><span class="line">...</span><br><span class="line">&#123;% else %&#125;</span><br><span class="line">...</span><br><span class="line">&#123;% endif %&#125;- 需要有结束标签</span><br></pre></td></tr></table></figure><ul><li><strong>注意</strong>：</li></ul><ol><li>if条件表达式里可以用的运算符 ==, !=, &lt;, &gt; , &lt;=, &gt;=, in, not in, is, is not, not、and、or</li><li>在if标记中使用实际括号是无效的语法。如果需要它们指示优先级，则应使用嵌套的if标记。</li></ol><p>官方文档：<a href="https://docs.djangoproject.com/zh-hans/2.2/ref/templates/builtins/#if">https://docs.djangoproject.com/zh-hans/2.2/ref/templates/builtins/#if</a></p><ul><li><strong>演示：</strong></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1:8000/test_if_for</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202202160204292.png" alt="image-20220216020405259"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mysite1/mysite1/urls.py</span></span><br><span class="line">urlpatterns = [</span><br><span class="line">    ...</span><br><span class="line">    path(<span class="string">&#x27;test_if_for&#x27;</span>, views.test_if_for),</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment"># mysite1/mysite1/views.py</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_if_for</span>(<span class="params">request</span>):</span><br><span class="line">    dic = &#123;&#125;</span><br><span class="line">    dic[<span class="string">&#x27;x&#x27;</span>] = <span class="number">20</span></span><br><span class="line">    dic[<span class="string">&#x27;lst&#x27;</span>] = [<span class="string">&#x27;Tom&#x27;</span>, <span class="string">&#x27;Jack&#x27;</span>, <span class="string">&#x27;Lily&#x27;</span>]</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;test_if_for.html&#x27;</span>, dic)</span><br><span class="line"></span><br><span class="line"><span class="comment"># mysite1/templates/test_if_for.html</span></span><br><span class="line">&#123;% <span class="keyword">if</span> x &gt; <span class="number">10</span> %&#125;</span><br><span class="line">今天天气很好</span><br><span class="line">&#123;% <span class="keyword">else</span> %&#125;</span><br><span class="line">今天天气非常好</span><br><span class="line">&#123;% endif %&#125;</span><br><span class="line"></span><br><span class="line">&lt;br&gt;</span><br><span class="line"></span><br><span class="line">&#123;% <span class="keyword">for</span> name <span class="keyword">in</span> lst %&#125;</span><br><span class="line">    &#123;% <span class="keyword">if</span> forloop.first %&#125; &amp;&amp;&amp;&amp;&amp; &#123;% endif %&#125;</span><br><span class="line">    &lt;p&gt; &#123;&#123; forloop.counter &#125;&#125;  &#123;&#123; name &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &#123;% <span class="keyword">if</span> forloop.last %&#125; ===== &#123;% endif %&#125;</span><br><span class="line">&#123;% empty %&#125;</span><br><span class="line">    当前没数据</span><br><span class="line">&#123;% endfor %&#125;</span><br></pre></td></tr></table></figure><ul><li><p><strong>模板标签 - if标签 - 练习</strong></p><p>写一个简单的计算器页面，能够在服务端进行简单加减乘除计算（需记录用户上次填写状态、下拉列表选择状态）</p><p><img src="https://image.cpen.top/image/202202160209924.png" alt="image-20220216020922893"></p><ul><li><p>前端参考代码：</p><p><img src="https://image.cpen.top/image/202202160215265.png" alt="image-20220216021536197"></p></li><li><p><strong>演示：</strong></p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1:8000/mycal</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202202160235992.png" alt="image-20220216023528956"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mysite1/mysite1/urls.py</span></span><br><span class="line">urlpatterns = [</span><br><span class="line">    ...</span><br><span class="line">    path(<span class="string">&#x27;mycal&#x27;</span>, views.test_mycal),</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># mysite1/mysite1/views.py</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_mycal</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&#x27;GET&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">&#x27;mycal.html&#x27;</span>)</span><br><span class="line">    <span class="keyword">elif</span> request.method == <span class="string">&#x27;POST&#x27;</span>:</span><br><span class="line">        <span class="comment">#处理计算</span></span><br><span class="line">        x = <span class="built_in">int</span>(request.POST[<span class="string">&#x27;x&#x27;</span>])</span><br><span class="line">        y = <span class="built_in">int</span>(request.POST[<span class="string">&#x27;y&#x27;</span>])</span><br><span class="line">        op = request.POST[<span class="string">&#x27;op&#x27;</span>]</span><br><span class="line"></span><br><span class="line">        result = <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> op == <span class="string">&#x27;add&#x27;</span>:</span><br><span class="line">            result = x + y</span><br><span class="line">        <span class="keyword">elif</span> op == <span class="string">&#x27;sub&#x27;</span>:</span><br><span class="line">            result = x - y</span><br><span class="line">        <span class="keyword">elif</span> op == <span class="string">&#x27;mul&#x27;</span>:</span><br><span class="line">            result = x * y</span><br><span class="line">        <span class="keyword">elif</span> op == <span class="string">&#x27;div&#x27;</span>:</span><br><span class="line">            result = x / y</span><br><span class="line"></span><br><span class="line">        <span class="comment">#dic=&#123;&#x27;x&#x27;:x, &#x27;y&#x27;:y, &#x27;op&#x27;:op&#125;</span></span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">&#x27;mycal.html&#x27;</span>, <span class="built_in">locals</span>())<span class="comment"># locals方法-局部变量直接封装成字典（Python自带方法）</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># mysite1/templates/mycal.html</span></span><br><span class="line">&lt;form action=<span class="string">&#x27;/mycal&#x27;</span> method=<span class="string">&#x27;post&#x27;</span>&gt;</span><br><span class="line">    &lt;<span class="built_in">input</span> <span class="built_in">type</span>=<span class="string">&#x27;text&#x27;</span> name=<span class="string">&quot;x&quot;</span> value=<span class="string">&quot;&#123;&#123; x &#125;&#125;&quot;</span>&gt;</span><br><span class="line">    &lt;select name=<span class="string">&#x27;op&#x27;</span>&gt;</span><br><span class="line">    &lt;option value=<span class="string">&quot;add&quot;</span>  &#123;% <span class="keyword">if</span> op == <span class="string">&#x27;add&#x27;</span> %&#125;selected&#123;% endif %&#125; &gt; +加&lt;/option&gt;<span class="comment"># ☆ 记录op状态，option selected属性，使用了if标签</span></span><br><span class="line">    &lt;option value=<span class="string">&quot;sub&quot;</span>  &#123;% <span class="keyword">if</span> op == <span class="string">&#x27;sub&#x27;</span> %&#125;selected&#123;% endif %&#125;&gt; -减&lt;/option&gt;</span><br><span class="line">    &lt;option value=<span class="string">&quot;mul&quot;</span>  &#123;% <span class="keyword">if</span> op == <span class="string">&#x27;mul&#x27;</span> %&#125;selected&#123;% endif %&#125;&gt; *乘&lt;/option&gt;</span><br><span class="line">    &lt;option value=<span class="string">&quot;div&quot;</span>  &#123;% <span class="keyword">if</span> op == <span class="string">&#x27;div&#x27;</span> %&#125;selected&#123;% endif %&#125;&gt; /除&lt;/option&gt;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">    &lt;<span class="built_in">input</span> <span class="built_in">type</span>=<span class="string">&#x27;text&#x27;</span> name=<span class="string">&quot;y&quot;</span> value=<span class="string">&quot;&#123;&#123; y &#125;&#125;&quot;</span>&gt; = &lt;span&gt;&#123;&#123; result &#125;&#125;&lt;/span&gt;</span><br><span class="line">    &lt;div&gt;&lt;<span class="built_in">input</span> <span class="built_in">type</span>=<span class="string">&quot;submit&quot;</span> value=<span class="string">&#x27;开始计算&#x27;</span>&gt;&lt;/div&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><h4 id="for标签">for标签</h4><ul><li><p><strong>语法：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% for 变量 in 可迭代对象 %&#125;</span><br><span class="line">    ... 循环语句</span><br><span class="line">&#123;% empty %&#125;</span><br><span class="line">    ... 可迭代对象无数据时填充的语句</span><br><span class="line">&#123;% endfor %&#125;</span><br></pre></td></tr></table></figure><p>官方文档：<a href="https://docs.djangoproject.com/zh-hans/2.2/ref/templates/builtins/#for">https://docs.djangoproject.com/zh-hans/2.2/ref/templates/builtins/#for</a></p></li><li><p><strong>内置变量 - forloop</strong></p></li></ul><p><img src="https://image.cpen.top/image/202202160246199.png" alt="image-20220216024655125"></p><ul><li><strong>演示：</strong></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1:8000/test_if_for</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202202160254425.png" alt="image-20220216025446396"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mysite1/mysite1/urls.py</span></span><br><span class="line">urlpatterns = [</span><br><span class="line">    ...</span><br><span class="line">    path(<span class="string">&#x27;test_if_for&#x27;</span>, views.test_if_for),</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment"># mysite1/mysite1/views.py</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_if_for</span>(<span class="params">request</span>):</span><br><span class="line">    dic = &#123;&#125;</span><br><span class="line">    dic[<span class="string">&#x27;lst&#x27;</span>] = [<span class="string">&#x27;Tom&#x27;</span>, <span class="string">&#x27;Jack&#x27;</span>, <span class="string">&#x27;Lily&#x27;</span>]</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;test_if_for.html&#x27;</span>, dic)</span><br><span class="line"></span><br><span class="line"><span class="comment"># mysite1/templates/test_if_for.html</span></span><br><span class="line">&#123;% <span class="keyword">for</span> name <span class="keyword">in</span> lst %&#125;</span><br><span class="line">    &#123;% <span class="keyword">if</span> forloop.first %&#125; &amp;&amp;&amp;&amp;&amp; &#123;% endif %&#125;</span><br><span class="line">    &lt;p&gt; &#123;&#123; forloop.counter &#125;&#125;  &#123;&#123; name &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &#123;% <span class="keyword">if</span> forloop.last %&#125; ===== &#123;% endif %&#125;</span><br><span class="line">&#123;% empty %&#125;</span><br><span class="line">    当前没数据</span><br><span class="line">&#123;% endfor %&#125;</span><br></pre></td></tr></table></figure><h3 id="小节">小节</h3><ul><li>变量调用 - 点大法</li><li>标签语法 {% 标签 %} {% 结束标签 %}</li></ul><hr><h2 id="二-模板层-过滤器和继承">二. 模板层 - 过滤器和继承</h2><h3 id="过滤器">过滤器</h3><ul><li>定义：在变量输出时对变量的值进行处理</li><li>作用：可以通过使用 过滤器 来改变变量的输出显示</li><li>语法：**{{ 变量 | 过滤器1:'参数1' | 过滤器2:'参数2' ... }}**</li></ul><p>官方文档：<a href="https://docs.djangoproject.com/zh-hans/2.2/ref/templates/builtins/">https://docs.djangoproject.com/zh-hans/2.2/ref/templates/builtins/</a></p><ul><li><p><strong>常用过滤器：</strong></p><p><img src="https://image.cpen.top/image/202202160307400.png" alt="image-20220216030721308"></p></li><li><p>演示：</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1:8000/test_html_param</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202202160312462.png" alt="image-20220216031236417"></p><p><img src="https://image.cpen.top/image/202202160313992.png" alt="image-20220216031311962"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mysite1/mysite1/urls.py</span></span><br><span class="line">urlpatterns = [</span><br><span class="line">    ...</span><br><span class="line">    path(<span class="string">&#x27;test_html&#x27;</span>, views.test_html)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># mysite1/mysite1/views.py</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_html_param</span>(<span class="params">request</span>):</span><br><span class="line">    dic = &#123;&#125;</span><br><span class="line">    dic[<span class="string">&#x27;int&#x27;</span>] = <span class="number">88</span></span><br><span class="line">    dic[<span class="string">&#x27;script&#x27;</span>] = <span class="string">&#x27;&lt;script&gt;alert(1111)&lt;/script&gt;&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;test_html_param.html&#x27;</span>, dic)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">say_hi</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;hahaha&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">say</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;wangwang&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># mysite1/templates/test_html_param.html</span></span><br><span class="line">&lt;h3&gt;<span class="built_in">int</span> 是 &#123;&#123; <span class="built_in">int</span>|add:<span class="string">&quot;2&quot;</span> &#125;&#125;&lt;/h3&gt;</span><br><span class="line">&lt;h3&gt;<span class="built_in">str</span> 是 &#123;&#123; <span class="built_in">str</span>|upper &#125;&#125;&lt;/h3&gt;</span><br><span class="line">&lt;h3&gt;script 是 &#123;&#123; script|safe &#125;&#125;&lt;/h3&gt;</span><br></pre></td></tr></table></figure><h3 id="继承">继承</h3><p><strong>模板的继承</strong></p><p>​如下样例：</p><p><img src="https://image.cpen.top/image/202202160321750.png" alt="image-20220216032123690"></p><ul><li><p>模板继承可以使父模板的内容重用，子模板直接继承父模板的全部内容并可以覆盖父模板中相应的块</p></li><li><p>语法 - 父模板中：</p><ul><li>[x] 定义父模板中的**块 block **标签</li><li>[x] 表时出哪些在<strong>子模块</strong>中是允许被<strong>修改</strong>的</li><li>[x] block 标签：<strong>在父模板中定义，可以在子模板中覆盖</strong></li></ul></li><li><p>语法 - 子模板中：</p><ul><li><p>[x] 继承模板 <code>extends</code> 标签（写在模板文件的第一行）</p><p>例如 <code>&#123;% extends 'base.html' %&#125;</code></p></li><li><p>[x] 子模板 重写父模板中的内容块</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% block block_name %&#125;</span><br><span class="line">子模板块用来覆盖父模板中 block_name 块的内容</span><br><span class="line">&#123;% endblock block_name %&#125;- block_name 可写可不写</span><br></pre></td></tr></table></figure></li></ul></li><li><p>重写的覆盖规则</p><ul><li>[x] 不重写，将按照父模板中的效果显示</li><li>[x] 重写，则按照重写效果显示</li></ul></li><li><p>注意</p><ul><li>[x] 模板继承时，服务器端的动态内容无法继承</li></ul></li><li><p><strong>演示：</strong></p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1:8000/base_index</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202202161504056.png" alt="image-20220216150400013"></p><p><img src="https://image.cpen.top/image/202202161504615.png" alt="image-20220216150430581"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mysite1/mysite1/urls.py</span></span><br><span class="line">urlpatterns = [</span><br><span class="line">    ...</span><br><span class="line">    path(<span class="string">&#x27;base_index&#x27;</span>, views.base_view, name=<span class="string">&#x27;base_index&#x27;</span>),</span><br><span class="line">    path(<span class="string">&#x27;music_index&#x27;</span>, views.music_view),</span><br><span class="line">    path(<span class="string">&#x27;sport_index&#x27;</span>, views.sport_view),</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment"># mysite1/mysite1/views.py</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">base_view</span>(<span class="params">request</span>):</span><br><span class="line">    lst = [<span class="string">&#x27;Tom&#x27;</span>, <span class="string">&#x27;Jack&#x27;</span>]</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;base.html&#x27;</span>, <span class="built_in">locals</span>())</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">music_view</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;music.html&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sport_view</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;sport.html&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#-------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># mysite1/templates/base.html# 父模板</span></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;en&quot;</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &#123;% block mytitle %&#125;</span><br><span class="line">    &lt;title&gt;主页&lt;/title&gt;<span class="comment"># 子模板能改的地方</span></span><br><span class="line">    &#123;% endblock %&#125;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&#123;&#123; lst &#125;&#125;<span class="comment"># 子模板无法继承变量（动态内容）</span></span><br><span class="line">&lt;a href=<span class="string">&quot;/music_index&quot;</span>&gt;音乐频道&lt;/a&gt;<span class="comment"># 子模板不能改</span></span><br><span class="line">&lt;a href=<span class="string">&quot;/sport_index&quot;</span>&gt;体育频道&lt;/a&gt;</span><br><span class="line">&lt;br&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% block info %&#125;</span><br><span class="line">    这是主页<span class="comment"># 子模板能改的地方</span></span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line">&lt;br&gt;</span><br><span class="line"></span><br><span class="line">&lt;h3&gt;有任何问题联系xxxx&lt;/h3&gt;<span class="comment"># 子模板不能改</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># mysite1/templates/music.html# 子模板</span></span><br><span class="line">&#123;% extends <span class="string">&#x27;base.html&#x27;</span> %&#125;<span class="comment"># 继承父模板</span></span><br><span class="line"></span><br><span class="line">&#123;% block mytitle %&#125;</span><br><span class="line">    &lt;title&gt;音乐频道&lt;/title&gt;<span class="comment"># 子模板重写block</span></span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block info %&#125;</span><br><span class="line">    欢迎来到音乐频道</span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># mysite1/templates/sport.html</span></span><br><span class="line">&#123;% extends <span class="string">&#x27;base.html&#x27;</span> %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block mytitle %&#125;</span><br><span class="line">    &lt;title&gt;体育频道&lt;/title&gt;</span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block info %&#125;</span><br><span class="line">    欢迎来到体育频道</span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="小节-2">小节</h3><ul><li><p><strong>过滤器</strong></p><p>{ <code>变量</code> | <code>过滤器</code>1:‘<code>参数值</code>1’ | 过滤器2:‘参数值2’ … }</p></li><li><p><strong>模板的继承</strong></p><p>父模板 - <code>定义可被修改的block</code></p><p>子模板 - 继承<code>父模板</code>；按需修改<code>父模板中定义的block</code></p></li></ul><hr><h2 id="三-url反向解析">三. url反向解析</h2><ul><li><p><strong>代码中 url 出现位置</strong></p><ol><li><p>==模板== 【html中】</p><ol><li><p>&lt;a ==href===‘url’&gt;超链接&lt;/a&gt;</p><p>点击后 页面跳转至 url</p></li><li><p>&lt;form ==action===‘url’ method=‘post’&gt;</p><p>form表单中的数据 用post方法提交至 url</p></li></ol></li><li><p>==视图函数==中 - 302跳转    HttpResponseRedirect(‘url’)</p><p>将用户地址栏中的地址跳转到 url</p></li></ol></li><li><p><strong>代码中 url 书写规范</strong></p><ol><li><p>==绝对地址==</p><p>​<a href="http://127.0.0.1:8000/page/1">http://127.0.0.1:8000/page/1</a></p></li><li><p>==相对地址==</p><ol><li>‘==/==page/1’ -==‘/’ 开头的相对地址==，浏览器会把当前地址栏里的 协议，ip 和 端口 加上这个地址，作为最终访问地址，即如果当前页面地址栏为 <a href="http://127.0.0.1:8000/page/3%EF%BC%9B%E5%BD%93%E5%89%8D%E7%9B%B8%E5%AF%B9%E5%9C%B0%E5%9D%80%E6%9C%80%E7%BB%88%E7%BB%93%E6%9E%9C%E4%B8%BA">http://127.0.0.1:8000/page/3；当前相对地址最终结果为</a> ==<code>http://127.0.0.1:8000</code>== + /page/1（☆ 高频使用）</li><li>‘page/1’ -==没有 ‘/’ 开头的相对地址==，浏览器会根据<code>当前 url 的最后一个 / 之前的内容 加上 该相对地址</code> 作为最终访问地址，例如当前地址栏地址为 ==http://127.0.0.1:8000/topic/==detail；则该相对地址最终结果为 ==<code>http://127.0.0.1:8000/topic/</code>== + page/1</li></ol></li></ol></li><li><p><strong>演示：</strong></p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1:8000/test/url</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202202161656031.png" alt="image-20220216165641996"></p><p><img src="https://image.cpen.top/image/202202161657095.png" alt="image-20220216165734057"></p><p><img src="https://image.cpen.top/image/202202161702913.png" alt="image-20220216170206874"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mysite1/mysite1/urls.py</span></span><br><span class="line">urlpatterns = [</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment"># http://127.0.0.1:8000/test/url</span></span><br><span class="line">    path(<span class="string">&#x27;test/url&#x27;</span>, views.test_url),</span><br><span class="line">    path(<span class="string">&#x27;test_url_result&#x27;</span>, views.test_url_result)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># mysite1/mysite1/views.py</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_url</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;test_url.html&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_url_result</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">&#x27;---test url res is ok&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># mysite1/templates/test_url.html</span></span><br><span class="line">&lt;a href=<span class="string">&quot;http://127.0.0.1:8000/test_url_result&quot;</span>&gt;绝对地址&lt;/a&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;/test_url_result&quot;</span>&gt;带<span class="string">&#x27;/&#x27;</span>的相对地址&lt;/a&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;test_url_result&quot;</span>&gt;不带<span class="string">&#x27;/&#x27;</span>的相对地址&lt;/a&gt;<span class="comment"># 浏览器解析为 http://127.0.0.1:8000/test/test_url_result</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li><p><strong>url 反向解析</strong></p><ul><li><p>url 反向解析是指在视图或者模板中，用 ==path 定义的名称==来==动态查找或计算出相应的路由==</p></li><li><p><strong>path 函数的语法</strong></p><ul><li>[x] path(route, views, ==name===“别名”)</li><li>[x] path(‘page’, views.page_view, name=“page_url”)</li><li>根据 path 中的 ‘name=’ 关键字传给 url 确定了个唯一确定的名字，在模板或视图中，可以通过这个名字反向推断出此 url 信息</li></ul></li><li><p>==模板中== - 通过 url 标签实现地址的反向解析</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% url &#x27;别名&#x27; %&#125;</span><br><span class="line">&#123;% url &#x27;别名&#x27; &#x27;参数值1&#x27; &#x27;参数值2&#x27; %&#125;</span><br><span class="line">ex:</span><br><span class="line">&#123;% url &#x27;pagen&#x27; &#x27;400&#x27; %&#125;--- 传参一律是 str</span><br><span class="line">&#123;% url &#x27;person&#x27; age=&#x27;18&#x27; name=&#x27;gxn&#x27; %&#125;</span><br></pre></td></tr></table></figure><ul><li><strong>演示：在模板中使用</strong></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1:8000/test/url</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202202161725987.png" alt="image-20220216172535944"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mysite1/mysite1/urls.py</span></span><br><span class="line">urlpatterns = [</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment"># http://127.0.0.1:8000/test/url</span></span><br><span class="line">    path(<span class="string">&#x27;test/url&#x27;</span>, views.test_url),</span><br><span class="line">    path(<span class="string">&#x27;test_urls_result/&lt;int:age&gt;&#x27;</span>, views.test_url_result, name=<span class="string">&#x27;tr&#x27;</span>)<span class="comment"># 起别名 tr</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment"># mysite1/mysite1/views.py</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_url</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;test_url.html&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_urls_result</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">&#x27;---test url res is ok&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># mysite1/templates/test_url.html</span></span><br><span class="line">&lt;a href=<span class="string">&quot;&#123;% url &#x27;tr&#x27; &#x27;100&#x27; %&#125;&quot;</span>&gt;url反向解析版本&lt;/a&gt;<span class="comment"># ☆ 模板中使用别名</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>在==视图函数==中 → 可调用 django 中的 ==reverse== 方法进行反向解析</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> reverse</span><br><span class="line">reverse(<span class="string">&#x27;别名&#x27;</span>, args=[], kwargs=&#123;&#125;)</span><br><span class="line">ex:</span><br><span class="line"><span class="built_in">print</span>(reverse(<span class="string">&#x27;pagen&#x27;</span>, args=[<span class="number">300</span>]))</span><br><span class="line"><span class="built_in">print</span>(reverse(<span class="string">&#x27;person&#x27;</span>, kwargs=</span><br><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;peng&#x27;</span>, <span class="string">&#x27;age&#x27;</span>:<span class="number">23</span>&#125;))</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li><p>演示：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1:8000/test/url</span><br><span class="line"></span><br><span class="line"># 302跳转 - 响应头里的 location 标记跳转地址</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202202161742771.png" alt="image-20220216174234729"></p><p><img src="https://image.cpen.top/image/202202161745717.png" alt="image-20220216174547656"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mysite1/mysite1/urls.py</span></span><br><span class="line">urlpatterns = [</span><br><span class="line">    ...</span><br><span class="line">    path(<span class="string">&#x27;base_index&#x27;</span>, views.base_view, name=<span class="string">&#x27;base_index&#x27;</span>),<span class="comment"># 起别名 base_index</span></span><br><span class="line">    <span class="comment"># http://127.0.0.1:8000/test/url</span></span><br><span class="line">    path(<span class="string">&#x27;test/url&#x27;</span>, views.test_url),</span><br><span class="line">    path(<span class="string">&#x27;test_urls_result/&lt;int:age&gt;&#x27;</span>, views.test_url_result, name=<span class="string">&#x27;tr&#x27;</span>)<span class="comment"># 起别名 tr</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># mysite1/mysite1/views.py</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">base_view</span>(<span class="params">request</span>):</span><br><span class="line">    lst = [<span class="string">&#x27;Tom&#x27;</span>, <span class="string">&#x27;Jack&#x27;</span>]</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;base.html&#x27;</span>, <span class="built_in">locals</span>())</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_url</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;test_url.html&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_url_result</span>(<span class="params">request, age</span>):</span><br><span class="line">    <span class="comment">#302跳转</span></span><br><span class="line">    <span class="keyword">from</span> django.urls <span class="keyword">import</span> reverse</span><br><span class="line">    url = reverse(<span class="string">&#x27;base_index&#x27;</span>)<span class="comment"># ☆ 视图函数中使用别名</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponseRedirect(url)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># mysite1/templates/test_url.html</span></span><br><span class="line">&lt;a href=<span class="string">&quot;&#123;% url &#x27;tr&#x27; &#x27;100&#x27; %&#125;&quot;</span>&gt;url反向解析版本&lt;/a&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># mysite1/templates/base.html</span></span><br><span class="line">略</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul></li></ul></li></ul><h2 id="四-总结">四. 总结</h2><ul><li>请求（request）和响应（HttpResponseqing）</li><li>GET/POST处理 - request.GET/POST</li><li>MVC 和 MTV</li><li>模板层基础配置</li><li>模板变量/标签/过滤器/继承</li><li>url反向解析</li></ul><hr>]]></content>
      
      
      <categories>
          
          <category> Django </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Django </tag>
            
            <tag> URL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>03_Django-GET请求和POST请求-设计模式及模板层</title>
      <link href="/blog/posts/42935.html"/>
      <url>/blog/posts/42935.html</url>
      
        <content type="html"><![CDATA[<p>摘要：<code>GET</code> + <code>POST</code> + <code>MTV</code> + <code>模板层</code><span id="more"></span></p><h1 id="03-Django-GET请求和POST请求-设计模式及模板层">03_Django-GET请求和POST请求-设计模式及模板层</h1><p><a href="https://www.bilibili.com/video/BV1vK4y1o7jH">视频🔗：https://www.bilibili.com/video/BV1vK4y1o7jH</a><br><a href="https://blog.csdn.net/cpen_web">博客🔗：https://blog.csdn.net/cpen_web</a></p><hr><h2 id="一-GET请求和POST请求">一. GET请求和POST请求</h2><h3 id="定义">定义</h3><blockquote><p>·无论是GET还是POST，统一都由<code>视图函数</code>接收请求，通过判断request.method区分具体的请求动作</p><p>·样例：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> requests.method == <span class="string">&#x27;GET&#x27;</span>:</span><br><span class="line">    处理GET请求时的业务逻辑</span><br><span class="line"><span class="keyword">elif</span> requests.method == <span class="string">&#x27;POST&#x27;</span>:</span><br><span class="line">    处理POST请求的业务逻辑</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    其他请求业务逻辑</span><br></pre></td></tr></table></figure><p>------------------------------------------------------------------</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">演示</span><br><span class="line"></span><br><span class="line"> &lt;项目同名文件夹下&gt;/views.py</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_get_post</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&#x27;GET&#x27;</span>:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">elif</span> request.method == <span class="string">&#x27;POST&#x27;</span>:</span><br><span class="line">        <span class="comment">#处理用户提交数据</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">&#x27;--test get post is ok--&#x27;</span>)</span><br></pre></td></tr></table></figure></blockquote><h3 id="GET处理">GET处理</h3><blockquote><p>·GET请求动作，一般用于向服务器<code>获取数据</code></p><p>·能够产生GET请求的场景：</p><p>​- 浏览器地址栏中输入URL，回车后</p><p>​- &lt;<code>a href</code>=“地址?参数=值&amp;参数=值”&gt;</p><p>​- <code>form表单</code>中的<code>method为get</code></p><p>------------------------------------------------------------------</p><p>GET请求方式中，如果有数据需要传递给服务器，通常会用<code>查询字符串（Query String）</code>传递【注意：<code>不要传递敏感数据</code>】</p><p>URL格式：xxx<code>?参数名1=值1&amp;参数名2=值2...</code></p><p>- 如：<a href="http://127.0.0.1:8000/page1">http://127.0.0.1:8000/page1</a><code>?a=100&amp;b=200</code></p><p>服务器端接收参数</p><p>获取客户端请求GET请求提交的数据</p><p>·方法示例：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">request.GET[<span class="string">&#x27;参数名&#x27;</span>] <span class="comment"># QueryDict</span></span><br><span class="line">request.GET.get(<span class="string">&#x27;参数名&#x27;</span>, <span class="string">&#x27;默认值&#x27;</span>)</span><br><span class="line">request.GET.getlist(<span class="string">&#x27;参数名&#x27;</span>)</span><br><span class="line"><span class="comment"># mypage?a=100&amp;b=200&amp;c=300&amp;b=400</span></span><br><span class="line"><span class="comment"># request.GET=QueryDict(&#123;&#x27;a&#x27;: [&#x27;100&#x27;], &#x27;b&#x27;: [&#x27;200&#x27;, &#x27;400&#x27;], &#x27;c&#x27;: [&#x27;300&#x27;]&#125;)</span></span><br><span class="line"><span class="comment"># a = request.GET[&#x27;a&#x27;]</span></span><br><span class="line"><span class="comment"># b = request.GET[&#x27;b&#x27;] # Error</span></span><br></pre></td></tr></table></figure><p>------------------------------------------------------------------</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">演示</span><br><span class="line"></span><br><span class="line">http://<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">8000</span>/test_get_post?a=<span class="number">400</span></span><br><span class="line">--test get post <span class="keyword">is</span> ok--</span><br><span class="line">终端</span><br><span class="line">&lt;QueryDict: &#123;<span class="string">&#x27;a&#x27;</span>: [<span class="string">&#x27;400&#x27;</span>, <span class="string">&#x27;200&#x27;</span>, <span class="string">&#x27;100&#x27;</span>]&#125;&gt;</span><br><span class="line"><span class="number">100</span></span><br><span class="line">[<span class="string">&#x27;400&#x27;</span>, <span class="string">&#x27;200&#x27;</span>, <span class="string">&#x27;100&#x27;</span>]</span><br><span class="line">no c</span><br><span class="line"></span><br><span class="line"> &lt;项目同名文件夹下&gt;/urls.py</span><br><span class="line">urlpatterns = [</span><br><span class="line">    ...</span><br><span class="line">    path(<span class="string">&#x27;test_get_post&#x27;</span>, views.test_get_post)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"> &lt;项目同名文件夹下&gt;/views.py</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_get_post</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&#x27;GET&#x27;</span>:</span><br><span class="line">        <span class="built_in">print</span>(request.GET)</span><br><span class="line">        <span class="built_in">print</span>(request.GET[<span class="string">&#x27;a&#x27;</span>])</span><br><span class="line">        <span class="comment"># 问卷调查 = form get   兴趣爱好 - 复选框</span></span><br><span class="line">        <span class="built_in">print</span>(request.GET.getlist(<span class="string">&#x27;a&#x27;</span>))</span><br><span class="line">        <span class="built_in">print</span>(request.GET.get(<span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;no c&#x27;</span>))</span><br><span class="line">    <span class="keyword">elif</span> request.method == <span class="string">&#x27;POST&#x27;</span>:</span><br><span class="line">        <span class="comment">#处理用户提交数据</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">&#x27;--test get post is ok--&#x27;</span>)</span><br></pre></td></tr></table></figure><p>------------------------------------------------------------------</p><p>·思考：之前的计算器功能，能否拿查询字符串做？</p><p>​<a href="http://127.0.0.1:8000/%E6%95%B4%E6%95%B0/%E6%93%8D%E4%BD%9C%E7%AC%A6/%E6%95%B4%E6%95%B0">http://127.0.0.1:8000/整数/操作符/整数</a></p><p>​<a href="http://127.0.0.1:8000/cal?x=10&amp;y=20&amp;op=add">http://127.0.0.1:8000/cal?x=10&amp;y=20&amp;op=add</a></p></blockquote><h3 id="POST处理">POST处理</h3><blockquote><p>·POST请求动作，一般用于<code>向服务器提交大量/隐私数据</code></p><p>·客户端通过表单等POST请求将数据传递给服务器端，如：</p><p><img src="https://image.cpen.top/image/202205052323569.png" alt="image-20220505232318528"></p><p>·服务器端<code>接收参数</code></p><p>​通过request.method来判断是否为POST请求，如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> request.method == <span class="string">&#x27;POST&#x27;</span>:</span><br><span class="line"> 处理POST请求的数据并响应</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"> 处理非POST请求的响应</span><br></pre></td></tr></table></figure><p>------------------------------------------------------------------</p><p><strong>使用post方式接收客户端数据</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">request.POST[<span class="string">&#x27;参数名&#x27;</span>] <span class="comment"># request.POST  绑定QueryDict</span></span><br><span class="line">request.POST.get(<span class="string">&#x27;参数名&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">request.POST.getlist(<span class="string">&#x27;参数名&#x27;</span>)</span><br></pre></td></tr></table></figure><p><strong><code>取消csrf验证，否则Django将会拒绝客户端发来的POST请求，报403响应</code></strong></p><p>------------------------------------------------------------------</p><p><strong>取消csrf验证</strong></p><p>​- 禁止掉settings.py中MIDDLEWARE中的CsrfviewsMiddleWare的中间件</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">MIDDLEWARE = [</span><br><span class="line">...</span><br><span class="line"> <span class="comment"># &#x27;django.middleware.csrf.CsrfViewMiddleware&#x27;,</span></span><br><span class="line"> ...</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>------------------------------------------------------------------</p><p>演示</p><p><a href="http://127.0.0.1:8000/test_get_post">http://127.0.0.1:8000/test_get_post</a></p><p><img src="https://image.cpen.top/image/202205052336498.png" alt="image-20220505233651466"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">post <span class="keyword">is</span> ok</span><br><span class="line">终端</span><br><span class="line">uname <span class="keyword">is</span> cpen</span><br><span class="line"></span><br><span class="line"> &lt;项目同名文件夹下&gt;/urls.py</span><br><span class="line">urlpatterns = [</span><br><span class="line">    ...</span><br><span class="line">    path(<span class="string">&#x27;test_get_post&#x27;</span>, views.test_get_post)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"> &lt;项目同名文件夹下&gt;/views.py</span><br><span class="line">POST_FORM = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">&lt;form method=&#x27;post&#x27; action=&#x27;/test_get_post&#x27;&gt;</span></span><br><span class="line"><span class="string">    用户名: &lt;input type=&#x27;text&#x27; name=&#x27;uname&#x27;&gt;</span></span><br><span class="line"><span class="string">    &lt;input type=&#x27;submit&#x27; value=&#x27;提交&#x27;&gt;</span></span><br><span class="line"><span class="string">&lt;/form&gt;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_get_post</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&#x27;GET&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> HttpResponse(POST_FORM)</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure><p>---------------------------------------------------------------------------------------------------------------------------------</p><p>小节</p><p>·Django处理GET请求</p><p>​查询字符串 - 少量数据传递</p><p>·Django处理POST请求</p><p>​专用于浏览器提交数据</p></blockquote><hr><h2 id="二-Django的设计模式及模板层">二. Django的设计模式及模板层</h2><h3 id="MVC和MTV">MVC和MTV</h3><h4 id="传统的MVC">传统的MVC</h4><blockquote><p>MVC代表<code>Model-View-Controller</code>（模型-视图-控制器）模式。</p><ul><li><p>[x] <code>M模型层（Model）</code>，主要用于对数据库层的封装</p></li><li><p>[x] <code>V视图层（View）</code>，用于向用户展示结果（WHAT + HOW）</p></li><li><p>[x] <code>C控制（Controller）</code>，用于处理请求、获取数据、返回结果（重要）</p></li></ul><p>作用：<code>降低模块间的耦合度（解耦）</code></p><p><img src="https://image.cpen.top/image/202205052338248.png" alt="image-20220505233857207"></p></blockquote><h4 id="Django的MTV模式">Django的MTV模式</h4><blockquote><p>MTV代表<code>Model-Template-View</code>（模型-模板-视图）模式。</p><ul><li><p>[x] <code>M模型层（Model）</code>负责与数据库交互</p></li><li><p>[x] <code>T模板层（Template）</code>负责呈现内容到浏览器（HOW）</p></li><li><p>[x] <code>V视图层（View）</code>是核心，负责接收请求、获取数据、返回结果（WHAT）</p></li></ul><p>作用：<code>降低模块间的耦合度（解耦）</code></p><p><img src="https://image.cpen.top/image/202205052340887.png" alt="image-20220505234057843"></p><p>---------------------------------------------------------------------------------------------------------------------------------</p><p><img src="https://image.cpen.top/image/202205052341004.jpg" alt="img"></p></blockquote><h3 id="模板层">模板层</h3><h4 id="什么是模板">什么是模板</h4><blockquote><p>1、模板是可以根据<code>字典</code>数据动态变化的<code>html网页</code></p><p>2、模板可以<code>根据视图中传递的字典数据动态生成相应的HTML网页</code></p><p><img src="https://image.cpen.top/image/202205052342133.png" alt="image-20220505234226094"></p></blockquote><h4 id="模板配置">模板配置</h4><blockquote><p>创建模板文件夹 <code>&lt;项目名&gt;/templates</code></p><p>在<code>settings.py</code>中<code>TEMPLATES</code>配置项</p><p>​1.BACKEND：指定模板的引擎</p><p>​2.<code>DIRS</code>：模板的搜索目录（可以是一个或多个）</p><p>​3.APP_DIRS：是否要在应用中的templates文件夹中搜索模板文件</p><p>​4.OPTIONS：有关模板的选项</p><p>·配置项中 需要修改部分</p><p>​设置DIRS - <code>'DIRS': [os.path.join(BASE_DIR, 'templates')],</code></p><p>------------------------------------------------------------------</p><p>演示</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"> &lt;项目同名文件夹下&gt;/settings.py</span><br><span class="line">TEMPLATES = [</span><br><span class="line">    &#123;</span><br><span class="line">        ...</span><br><span class="line">        <span class="string">&#x27;DIRS&#x27;</span>: [os.path.join(BASE_DIR, <span class="string">&#x27;templates&#x27;</span>)],</span><br><span class="line">        ...</span><br></pre></td></tr></table></figure></blockquote><h4 id="模板的加载方式">模板的加载方式</h4><blockquote><p><strong>方案1</strong> - 通过loader获取模板，通过HttpResponse进行响应（特点：麻烦）</p><p>在视图函数中：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.template <span class="keyword">import</span> loader</span><br><span class="line"><span class="comment"># 1.通过 loader 加载模板</span></span><br><span class="line">t = loader.get_template(<span class="string">&quot;模板文件名&quot;</span>)</span><br><span class="line"><span class="comment"># 2.将 t 转换成 HTML 字符串</span></span><br><span class="line">html = t.reader(字典数据)</span><br><span class="line"><span class="comment"># 3.用响应对象将转换的字符串内容返回给浏览器</span></span><br><span class="line"><span class="keyword">return</span> HttpResponse(html)</span><br></pre></td></tr></table></figure><p>--------------------------------------------------------------------------------------</p><p><strong>演示</strong></p><p><a href="http://127.0.0.1:8000/test_html">http://127.0.0.1:8000/test_html</a></p><p><img src="https://image.cpen.top/image/202205052345270.png" alt="image-20220505234508244"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"> &lt;项目同名文件夹下&gt;/urls.py</span><br><span class="line">urlpatterns = [</span><br><span class="line">    ...</span><br><span class="line">    path(<span class="string">&#x27;test_html&#x27;</span>, views.test_html)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"> &lt;项目同名文件夹下&gt;/views.py</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_html</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">from</span> django.template <span class="keyword">import</span> loader</span><br><span class="line">    t = loader.get_template(<span class="string">&#x27;test_html.html&#x27;</span>)</span><br><span class="line">    html = t.render()</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(html)</span><br><span class="line"></span><br><span class="line"> &lt;项目文件夹下&gt;/templates/test_html.html</span><br><span class="line">&lt;h3&gt;我是模板层的~~~~&lt;/h3&gt;</span><br></pre></td></tr></table></figure><p>---------------------------------------------------------------------------------------------------------------------------------</p><p><strong>方案2</strong> - 通过render() 直接加载并响应模板（特点：方便，大量使用这种）</p><p>在视图函数中：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br><span class="line"><span class="keyword">return</span> render(request, <span class="string">&#x27;模板文件名&#x27;</span>, 字典数据)</span><br></pre></td></tr></table></figure><p>--------------------------------------------------------------------------------------</p><p><strong>演示</strong></p><p><a href="http://127.0.0.1:8000/test_html">http://127.0.0.1:8000/test_html</a></p><p><img src="https://image.cpen.top/image/202205052346308.png" alt="image-20220505234639279"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> &lt;项目同名文件夹下&gt;/views.py</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_html</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="comment"># 方案2</span></span><br><span class="line">    <span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;test_html.html&#x27;</span>)</span><br></pre></td></tr></table></figure></blockquote><h4 id="视图层与模板层之间的交互">视图层与模板层之间的交互</h4><blockquote><p>1、视图函数中可以将Python<code>变量</code>封装到字典中传递到模板</p><p>样例：</p><p>def xxx_view(request):<br>dic = {<br>“变量1”: “值1”,<br>“变量2”: “值2”,<br>}<br>return render(request, ‘xxx.html’, <code>dic</code>)</p><p>2、模板中，我们可以用 <strong></strong> 的语法 调用视图传进来的变量</p><p>--------------------------------------------------------------------------------------</p><p><strong>演示</strong></p><p><a href="http://127.0.0.1:8000/test_html">http://127.0.0.1:8000/test_html</a></p><p><img src="https://image.cpen.top/image/202205052348278.png" alt="image-20220505234825246"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> &lt;项目同名文件夹下&gt;/urls.py</span><br><span class="line">urlpatterns = [</span><br><span class="line">    ...</span><br><span class="line">    path(<span class="string">&#x27;test_html&#x27;</span>, views.test_html)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"> &lt;项目同名文件夹下&gt;/views.py</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_html</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br><span class="line">    dic = &#123;<span class="string">&#x27;username&#x27;</span>: <span class="string">&#x27;peng&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">23</span>&#125;</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;test_html.html&#x27;</span>, dic)</span><br><span class="line"></span><br><span class="line"> &lt;项目文件夹下&gt;/templates/test_html.html</span><br><span class="line">&lt;h3&gt;&#123;&#123; username &#125;&#125;是模板层的~~~~&lt;/h3&gt;</span><br></pre></td></tr></table></figure></blockquote><hr>]]></content>
      
      
      <categories>
          
          <category> Django </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Django </tag>
            
            <tag> MTV </tag>
            
            <tag> HTTP </tag>
            
            <tag> GET </tag>
            
            <tag> POST </tag>
            
            <tag> MVC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>02_Django-路由配置-HTTP协议的请求和响应</title>
      <link href="/blog/posts/57095.html"/>
      <url>/blog/posts/57095.html</url>
      
        <content type="html"><![CDATA[<p>摘要：<code>路由</code> + <code>HTTP请求与响应</code><span id="more"></span></p><h1 id="02-Django-路由配置-HTTP协议的请求和响应">02_Django-路由配置-HTTP协议的请求和响应</h1><p><a href="https://www.bilibili.com/video/BV1vK4y1o7jH">视频🔗：https://www.bilibili.com/video/BV1vK4y1o7jH</a><br><a href="https://blog.csdn.net/cpen_web">博客🔗：https://blog.csdn.net/cpen_web</a></p><hr><h2 id="一-路由配置">一. 路由配置</h2><blockquote><p>==settings.py==中的 ==`ROOT_URLCONF`== 指定了主路由配置列表 ==urlpatterns== 的文件位置</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># file: &lt;项目同名文件夹下&gt;/urls.py</span></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;page/2003/&#x27;</span>, views.page_2003_view),</span><br><span class="line">    ... <span class="comment"># 此处配置主路由</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure></blockquote><h3 id="path">path()</h3><h4 id="path-函数">path()函数</h4><blockquote><p>path()函数</p><p>导入 - from django.urls import path</p><p>语法 - ==path(route, views, name=None)==</p><p>参数:</p><p>​1.==route==: 字符串类型，匹配的请求==路径==</p><p>​2.==views==: 指定路径所对应的==视图处理函数的名称==</p><p>​3.<strong>name</strong>: 为地址起 <strong>别名</strong>，在模块中地址反向解析时使用</p></blockquote><blockquote><p>练习 - 建立一个小网站：</p><p>​输入网址：<a href="http://127.0.0.1:8000">http://127.0.0.1:8000</a>, 在网页中输出：这是我的首页</p><p>​输入网址：<a href="http://127.0.0.1:8000/page/1">http://127.0.0.1:8000/page/1</a>, 在网页中输出：这是编号为1的网页</p><p>​输入地址：<a href="http://127.0.0.1:8000/page/2">http://127.0.0.1:8000/page/2</a>, 在网页中输出：这是编号为2的网页</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1:8000</span><br><span class="line">http://127.0.0.1:8000/page/1</span><br><span class="line">http://127.0.0.1:8000/page/2</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"> &lt;项目同名文件夹下&gt;/urls.py</span><br><span class="line">urlpatterns = [</span><br><span class="line">    <span class="comment">#http://127.0.0.1:8000</span></span><br><span class="line">    path(<span class="string">&#x27;&#x27;</span>, views.index_view),</span><br><span class="line">    <span class="comment">#http://127.0.0.1:8000/page/1</span></span><br><span class="line">    path(<span class="string">&#x27;page/1&#x27;</span>, views.page1_view),</span><br><span class="line">    <span class="comment">#http://127.0.0.1:8000/page/2</span></span><br><span class="line">    path(<span class="string">&#x27;page/2&#x27;</span>, views.page2_view)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"> &lt;项目同名文件夹下&gt;/views.py</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index_view</span>(<span class="params">request</span>):</span><br><span class="line">    html = <span class="string">&#x27;这是我的首页&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(html)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">page1_view</span>(<span class="params">request</span>):</span><br><span class="line">    html = <span class="string">&#x27;这是编号为1的网页&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(html)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">page2_view</span>(<span class="params">request</span>):</span><br><span class="line">    html = <span class="string">&#x27;这是编号为2的网页&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(html)</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>思考</p><p>建立如上一百个网页该怎么办？</p><p>例如：</p><p>​<a href="http://127.0.0.1:8000/page/3">http://127.0.0.1:8000/page/3</a></p><p>​<a href="http://127.0.0.1:8000/page/4">http://127.0.0.1:8000/page/4</a></p><p>​…</p><p>​<a href="http://127.0.0.1:8000/page/100">http://127.0.0.1:8000/page/100</a></p></blockquote><h4 id="path转换器">path转换器</h4><blockquote><p>语法：==&lt;转换器类型: 自定义名&gt;==</p><p>作用：若转换器类型匹配到对应类型的==数据==，则将数据按照==关键字传参==的方式传递给==视图函数==</p><p>例子：path(‘page/==&lt;int:page&gt;==’, <a href="http://view.xxx">view.xxx</a>)</p><p>==<strong>转换器类型</strong>：str、int、slug、path==</p><p><img src="https://image.cpen.top/image/202205042137686.png" alt="image-20220504213759635"></p></blockquote><blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">http://<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">8000</span>/page/<span class="number">30</span></span><br><span class="line"></span><br><span class="line"> &lt;项目同名文件夹下&gt;/urls.py</span><br><span class="line">urlpatterns = [</span><br><span class="line">    <span class="comment">#http://127.0.0.1:8000/page/3-100</span></span><br><span class="line">    path(<span class="string">&#x27;page/&lt;int:pg&gt;&#x27;</span>, views.pagen_view)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"> &lt;项目同名文件夹下&gt;/views.py</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">pagen_view</span>(<span class="params">request, pg</span>):</span><br><span class="line">    html = <span class="string">&#x27;这是编号为%s的网页!&#x27;</span>%(pg)</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(html)</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>练习：小计算器</p><p>​定义一个路由的格式为：</p><p>​==http://127.0.0.1:8000/整数/操作字符串[add/sub/mul]/整数==</p><p>​从路由中提取数据，做相应的操作后返回给浏览器</p><p>​效果如下：</p><p>​输入：==127.0.0.1:8000/100/add/200==</p><p>​页面显示结果：==300==</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">http://<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">8000</span>/<span class="number">100</span>/add/<span class="number">200</span></span><br><span class="line">结果为：<span class="number">300</span></span><br><span class="line"></span><br><span class="line"> &lt;项目同名文件夹下&gt;/urls.py</span><br><span class="line">urlpatterns = [</span><br><span class="line">    <span class="comment">#http://127.0.0.1:8000/整数/操作符/整数</span></span><br><span class="line">    path(<span class="string">&#x27;&lt;int:n&gt;/&lt;str:op&gt;/&lt;int:m&gt;&#x27;</span>, views.cal_view)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"> &lt;项目同名文件夹下&gt;/views.py</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cal_view</span>(<span class="params">request, n, op, m</span>):</span><br><span class="line">    <span class="keyword">if</span> op <span class="keyword">not</span> <span class="keyword">in</span> [<span class="string">&#x27;add&#x27;</span>, <span class="string">&#x27;sub&#x27;</span>, <span class="string">&#x27;mul&#x27;</span>]:</span><br><span class="line">        <span class="keyword">return</span> HttpResponse(<span class="string">&#x27;Your op is wrong&#x27;</span>)</span><br><span class="line">    result = <span class="number">0</span></span><br><span class="line">    <span class="keyword">if</span> op == <span class="string">&#x27;add&#x27;</span>:</span><br><span class="line">        result = n + m</span><br><span class="line">    <span class="keyword">elif</span> op == <span class="string">&#x27;sub&#x27;</span>:</span><br><span class="line">        result = n - m</span><br><span class="line">    <span class="keyword">elif</span> op == <span class="string">&#x27;mul&#x27;</span>:</span><br><span class="line">        result = n * m</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">&#x27;结果为：%s&#x27;</span>%(result))</span><br></pre></td></tr></table></figure></blockquote><h3 id="re-path">re_path()</h3><h4 id="re-path-函数">re_path()函数</h4><blockquote><p>re_path()函数</p><p>在 url 的匹配过程中可以使用==正则==表达式进行精确匹配</p><p>语法：</p><p>​re_path(==reg==, view, name=xxx)</p><p>​正则表达式为==命名分组模式(**?P&lt;name&gt;**pattern)==; 匹配提取参数后用关键字传参方式传递给视图函数</p></blockquote><blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">样例</span><br><span class="line"><span class="comment"># 可匹配 http://127.0.0.1:8000/20/mul/40</span></span><br><span class="line"><span class="comment"># 不可匹配 http://127.0.0.1:8000/200/mul/400</span></span><br><span class="line"></span><br><span class="line">http://<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">8000</span>/<span class="number">10</span>/add/<span class="number">20</span>  -&gt;  x:<span class="number">10</span> op:add y:<span class="number">20</span></span><br><span class="line"></span><br><span class="line"> &lt;项目同名文件夹下&gt;/urls.py</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path, re_path</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    <span class="comment">#http://127.0.0.1:8000/整数2/操作符/整数2</span></span><br><span class="line">    re_path(<span class="string">r&#x27;^(?P&lt;x&gt;\d&#123;1,2&#125;)/(?P&lt;op&gt;\w+)/(?P&lt;y&gt;\d&#123;1,2&#125;)$&#x27;</span>, views.cal2_view),</span><br><span class="line">]<span class="comment"># \d 整数; \w 字符</span></span><br><span class="line"></span><br><span class="line"> &lt;项目同名文件夹下&gt;/views.py</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cal2_view</span>(<span class="params">request, x, op, y</span>):</span><br><span class="line">    html = <span class="string">&#x27;x:%s op:%s y:%s&#x27;</span>%(x, op, y)</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(html)</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>练习</p><p>访问地址：</p><p>​<a href="http://127.0.0.1:8000/birthday/%E5%9B%9B%E4%BD%8D%E6%95%B0%E5%AD%97/%E4%B8%80%E5%88%B0%E4%B8%A4%E4%BD%8D%E6%95%B0%E5%AD%97/%E4%B8%80%E5%88%B0%E4%B8%A4%E4%BD%8D%E6%95%B0%E5%AD%97">http://127.0.0.1:8000/birthday/四位数字/一到两位数字/一到两位数字</a></p><p>​<a href="http://127.0.0.1:8000/birthday/%E4%B8%80%E5%88%B0%E4%B8%A4%E4%BD%8D%E6%95%B0%E5%AD%97/%E4%B8%80%E5%88%B0%E4%B8%A4%E4%BD%8D%E6%95%B0%E5%AD%97/%E5%9B%9B%E4%BD%8D%E6%95%B0%E5%AD%97">http://127.0.0.1:8000/birthday/一到两位数字/一到两位数字/四位数字</a></p><p>最终输出：生日为：xxxx年xx月xx日</p><blockquote><p>效果样例：</p><p>​输入网址：<a href="http://127.0.0.1:8000/birthday/2015/12/11">http://127.0.0.1:8000/birthday/2015/12/11</a></p><p>​显示为：生日为：2015年12月11日</p><p>​输入网址：<a href="http://127.0.0.1:8000/birthday/2/28/2008">http://127.0.0.1:8000/birthday/2/28/2008</a></p><p>​显示为：生日为：2008年2月28日</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">http://<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">8000</span>/birthday/<span class="number">1992</span>/01/01</span><br><span class="line">生日为<span class="number">1992</span>年01月01日</span><br><span class="line"></span><br><span class="line"> &lt;项目同名文件夹下&gt;/urls.py</span><br><span class="line">urlpatterns = [</span><br><span class="line">    <span class="comment">#http://127.0.0.1:8000/birthday/年4/月2/日2</span></span><br><span class="line">    re_path(<span class="string">r&#x27;^birthday/(?P&lt;y&gt;\d&#123;4&#125;)/(?P&lt;m&gt;\d&#123;1,2&#125;)/(?P&lt;d&gt;\d&#123;1,2&#125;)$&#x27;</span>, views.birthday_view),</span><br><span class="line">    <span class="comment">#http://127.0.0.1:8000/birthday/月2/日2/年4</span></span><br><span class="line">    re_path(<span class="string">r&#x27;^birthday/(?P&lt;m&gt;\d&#123;1,2&#125;)/(?P&lt;d&gt;\d&#123;1,2&#125;)/(?P&lt;y&gt;\d&#123;4&#125;)$&#x27;</span>, views.birthday_view),</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"> &lt;项目同名文件夹下&gt;/views.py</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">birthday_view</span>(<span class="params">request, y, m, d</span>):</span><br><span class="line">    html = <span class="string">&quot;生日为%s年%s月%s日&quot;</span>%(y, m, d)</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(html)</span><br></pre></td></tr></table></figure></blockquote><hr><p><strong>Django Day02</strong></p><blockquote><p>请求和响应</p><p>GET请求和POST请求</p><p>Django的设计模式及模板层</p><p>模板层 - 变量和标签</p><p>模板层 - 过滤器和继承</p><p>url反向解析</p></blockquote><hr><h2 id="二-HTTP协议的请求和响应">二. HTTP协议的请求和响应</h2><blockquote><p>定义</p><p>​==请求==是指浏览器端通过==HTTP协议==发送给服务器端的数据</p><p>​响应是指==服务器端接收到请求后==做相应的处理后再==回复给浏览器端的数据==</p><p><img src="https://image.cpen.top/image/202205052203494.png" alt="image-20220505220331451"></p></blockquote><h3 id="请求">请求</h3><h4 id="请求样例">请求样例</h4><blockquote><p><strong>请求样例</strong></p><p><img src="https://image.cpen.top/image/202205052257694.png" alt="image-20220505225754654"></p></blockquote><h4 id="请求中的方法">请求中的方法</h4><blockquote><p>根据HTTP标准，HTTP请求可以使用多种请求方法</p><p><code>HTTP1.0</code>定义了三种请求方法：GET，POST和HEAD方法（最常用）</p><p><code>HTTP1.1</code>新增了五种请求方法：OPTIONS，PUT，DELETE，TRACE和CONNECT方法</p><p><img src="https://image.cpen.top/image/202205052258651.png" alt="image-20220505225851617"></p><p><img src="https://image.cpen.top/image/202205052259640.png" alt="image-20220505225903610"></p></blockquote><h4 id="Django中的请求">Django中的请求</h4><blockquote><p>请求在Django中实则就是 <code>视图函数的第一个参数</code>，即HttpRequest对象</p><p><code>Django接收到http协议的请求后</code>，会根据<code>请求数据</code>报文创建<code>HttpRequest对象</code></p><p>HttpRequest对象 通过<code>属性</code> 描述了 请求的 所有相关信息</p></blockquote><blockquote><p><code>·path_info</code>：URL字符串</p><p><code>·method</code>：字符串，表示HTTP请求方法，常用值：==`GET`==、==`POST`==</p><p><code>·GET</code>：<code>QueryDict</code>查询字典的对象，包含get请求方法的所有数据</p><p><code>·POST</code>：QueryDict查询字典的对象，包含post请求方式的所有数据</p><p><code>·FILES</code>：类似于字典的对象，包含所有的上传文件信息</p><p>·COOKIES：Python字典，包含所有的cookie，键和值都为字符串</p><p>·session：似于字典的对象，表示当前的会话</p><p>·body：字符串，请求体的内容（POST或PUT）</p><p>·scheme：请求协议（‘http’/‘https’）</p><p>·request.get_full_path()：请求的完整路径</p><p>·request.META：请求中的元数据（消息头）</p><p>​- request.META[‘REMOTE_ADDR’]：客户端IP地址</p></blockquote><blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">http://<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">8000</span>/test_request?a=<span class="number">1</span>&amp;b=<span class="number">1</span></span><br><span class="line">test request ok</span><br><span class="line">终端</span><br><span class="line">path info <span class="keyword">is</span> /test_request</span><br><span class="line">method <span class="keyword">is</span> GET</span><br><span class="line">querystring <span class="keyword">is</span> &lt;QueryDict: &#123;<span class="string">&#x27;a&#x27;</span>: [<span class="string">&#x27;1&#x27;</span>], <span class="string">&#x27;b&#x27;</span>: [<span class="string">&#x27;1&#x27;</span>]&#125;&gt;</span><br><span class="line">full path <span class="keyword">is</span> /test_request?a=<span class="number">1</span>&amp;b=<span class="number">1</span></span><br><span class="line">[<span class="number">20</span>/Dec/<span class="number">2021</span> <span class="number">23</span>:<span class="number">27</span>:09] <span class="string">&quot;GET /test_request?a=1&amp;b=1 HTTP/1.1&quot;</span> <span class="number">200</span> <span class="number">15</span></span><br><span class="line"></span><br><span class="line"> &lt;项目同名文件夹下&gt;/urls.py</span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;test_request&#x27;</span>, views.test_request)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"> &lt;项目同名文件夹下&gt;/views.py</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_request</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;path info is&#x27;</span>, request.path_info)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;method is&#x27;</span>, request.method)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;querystring is&#x27;</span>, request.GET)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;full path is&#x27;</span>, request.get_full_path())</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">&#x27;test request ok&#x27;</span>)</span><br></pre></td></tr></table></figure></blockquote><h3 id="响应">响应</h3><h4 id="响应样例">响应样例</h4><blockquote><p><strong>响应样例</strong></p><p><img src="https://image.cpen.top/image/202205052307158.png" alt="image-20220505230704121"></p></blockquote><h4 id="响应状态码">响应状态码</h4><blockquote><p>HTTP状态码的英文为HTTP Status Code</p><p>下面是常见的HTTP状态码：</p><p>- <code>200</code> - 请求成功</p><p>- <code>301</code> - 永久重定向-资源（网页等）被永久转移到其它URL</p><p>- <code>302</code> - 临时重定向</p><p>- <code>404</code> - 请求的资源（网页等）不存在</p><p>- <code>500</code> - 内部服务器错误</p><p>HTTP状态码由三个十进制数字组成，第一个十进制数字定义了状态码的类型，后两个数字没有分类的作用。HTTP状态码共分为5种类型：</p><p><img src="https://image.cpen.top/image/202205052308576.png" alt="image-20220505230809542"></p></blockquote><h4 id="Django中的响应对象">Django中的响应对象</h4><blockquote><p>构造函数格式：</p><p>​HttpResponse(content=<code>响应体</code>, <code>content_type</code>=响应体数据类型, status=<code>状态码</code>)</p><p>作用：</p><p>​向客户端浏览器返回响应，同时携带响应体内容</p><p>常用的**<code>Conten-Type</code>**如下</p><p>- ‘<code>text/html</code>’（默认的，html文件）</p><p>- ‘text/plain’（纯文本）</p><p>- ‘text/css’（css文件）</p><p>- ‘<code>text/javascript</code>’（js文件）</p><p>- ‘multipart/form-data’（文件提交）</p><p>- ‘application/<code>json</code>’（json传输）</p><p>- ‘application/xml’（xml文件）</p><p>------------------------------------------------------------------</p><p>HttpResponse子类</p><p><img src="https://image.cpen.top/image/202205052310989.png" alt="image-20220505231038952"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">http://<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">8000</span>/test_request</span><br><span class="line">  =&gt; http://<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">8000</span>/page/<span class="number">1</span></span><br><span class="line"></span><br><span class="line"> &lt;项目同名文件夹下&gt;/urls.py</span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;test_request&#x27;</span>, views.test_request)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"> &lt;项目同名文件夹下&gt;/views.py</span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> HttpResponse, HttpResponseRedirect</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_request</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">return</span> HttpResponseRedirect(<span class="string">&#x27;/page/1&#x27;</span>)</span><br></pre></td></tr></table></figure></blockquote><hr>]]></content>
      
      
      <categories>
          
          <category> Django </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Django </tag>
            
            <tag> HTTP </tag>
            
            <tag> 状态码 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>01_Django-介绍-项目结构-URL和视图函数</title>
      <link href="/blog/posts/14763.html"/>
      <url>/blog/posts/14763.html</url>
      
        <content type="html"><![CDATA[<p>摘要：<code>MTV</code> + <code>URL</code> + <code>视图函数</code> + <code>项目结构</code><span id="more"></span></p><h1 id="01-Django-介绍-项目结构-URL和视图函数">01_Django-介绍-项目结构-URL和视图函数</h1><p><a href="https://www.bilibili.com/video/BV1vK4y1o7jH">视频🔗：https://www.bilibili.com/video/BV1vK4y1o7jH</a><br><a href="https://blog.csdn.net/cpen_web">博客🔗：https://blog.csdn.net/cpen_web</a></p><hr><h2 id="一-课程目录">一. 课程目录</h2><blockquote><p>Django介绍</p><p>Django项目结构</p><p>URL和视图函数</p><p>路由配置</p><p><img src="https://image.cpen.top/image/202205042042834.jpg" alt="img"></p></blockquote><hr><h2 id="二-Django介绍">二. Django介绍</h2><h3 id="起源">起源</h3><blockquote><p><strong>2005年发布，采用Python语言编写的开源web框架</strong></p><p><strong>早期的时候Django主做新闻和内容管理的</strong></p><p><strong>重量级的Python Web框架，Django配备了常用的大部分组件</strong></p></blockquote><h3 id="组件">组件</h3><blockquote><p>包含组件如下：</p><p>​基本配置文件/路由系统</p><p>​==模型层(M)/模块层(T)/视图层(V)==</p><p>​Cookies和Session</p><p>​分页及发邮件</p><p>​Admin管理后台</p></blockquote><h3 id="用途">用途</h3><blockquote><p>用途一：网站/微信公众号/小程序后端开发</p><p><img src="https://image.cpen.top/image/202205042044041.jpg" alt="img"></p><p>用途二：人工智能平台融合</p><p><img src="https://image.cpen.top/image/202205042044045.jpg" alt="img"></p></blockquote><h3 id="版本">版本</h3><blockquote><p>Django官网：<a href="http://www.djangoproject.com">http://www.djangoproject.com</a></p><p>Django中文文档参考网站：<a href="https://yiyibooks.cn/">https://yiyibooks.cn/</a></p><p>版本</p><p>​最新版本3.0.x</p><p>​当前教学版本2.2.12</p></blockquote><h3 id="安装">安装</h3><blockquote><p>支持Python的版本 - 3.5，3.6，3.7，3.8</p><p>==在线安装==</p><p>​虚拟机执行 ==sudo pip3 install django==2.2.12==</p><p>​检查是否成功 sudo pip3 freeze |grep -i ‘Django’</p><p>==离线安装== - 官方下载离线安装包</p><p>​将安装包复制到虚拟机</p><p>​解压缩 tar -xvf Django-2.2.12.tar.gz</p><p>​进入目录 cd Django-2.2.12</p><p>​执行安装 sudo python3 <a href="http://setup.py">setup.py</a> install</p><p>​检查是否成功 sudo pip3 freeze |grep -i ‘Django’</p></blockquote><hr><h2 id="三-Django项目结构">三. Django项目结构</h2><h3 id="创建项目">创建项目</h3><blockquote><p>成功安装 Django 后，虚拟机终端会有 django-admin 命令</p><p>执行 ==django-admin startproject 项目名== 即可创建出对应项目文件夹</p><p>例如 终端执行 django-admin startproject mysite1; 则创建出mysite1项目</p></blockquote><h3 id="启动服务">启动服务</h3><blockquote><p>启动[测试开发阶段]</p><p>​1.终端cd进入到项目文件夹，例如 cd mysite1</p><p>​2.进入到项目文件夹后，执行 ==<strong>python3 <a href="http://manage.py">manage.py</a> runserver</strong>== 启动django服务完【注：该启动方式下，Django在前台启动服务，默认监听8000端口】</p><p>​3.浏览器访问 <strong><a href="http://127.0.0.1:8000">http://127.0.0.1:8000</a></strong> 可看到django的启动页面</p><p>​注：【如果想更换端口，则可以用 python3 <a href="http://manage.py">manage.py</a> runserver 端口号】</p></blockquote><h3 id="关闭服务">关闭服务</h3><blockquote><p>方式1：在runserver启动终端下</p><p>​执行 ==Ctrl + c== 可关闭Django服务</p><p>方式2：在取它终端下</p><p>​执行 sudo lsof -i:8000 查询出Django的进程id</p><p>​执行 ==kill -9== 对应Django进程id</p></blockquote><h3 id="启动常见问题">启动常见问题</h3><blockquote><p>问题：启动时报错</p><p>​==Error: That port is already in use.==</p><p>问题原因：端口已被使用，证明当前Django启动时，默认监听的8000端口已被其他进程占用</p><p>解决方案：参考关闭服务</p></blockquote><h3 id="结构解析">结构解析</h3><blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">展开mysite1项目，结构如下</span><br><span class="line">$ tree mysite1</span><br><span class="line">mysite1</span><br><span class="line">├── db.sqlite3<span class="comment">#注：默认django数据库存储文件</span></span><br><span class="line">├── manage.py<span class="comment"># *</span></span><br><span class="line">└── mysite1<span class="comment"># *</span></span><br><span class="line">    ├── __init__.py</span><br><span class="line">    ├── __pycache__</span><br><span class="line">    │   ├── __init__.cpython-39.pyc</span><br><span class="line">    │   ├── settings.cpython-39.pyc</span><br><span class="line">    │   ├── urls.cpython-39.pyc</span><br><span class="line">    │   └── wsgi.cpython-39.pyc</span><br><span class="line">    ├── settings.py</span><br><span class="line">    ├── urls.py</span><br><span class="line">    └── wsgi.py</span><br></pre></td></tr></table></figure></blockquote><h4 id="manage-py"><a href="http://manage.py">manage.py</a></h4><blockquote><p>==manage.py包含项目管理的子命令==，如：</p><p>​python3 <a href="http://manage.py">manage.py</a> runserver 启动服务</p><p>​python3 <a href="http://manage.py">manage.py</a> startapp 创建应用</p><p>​python3 <a href="http://manage.py">manage.py</a> migrate 数据库迁移</p><p>​…</p><p>​直接执行python3 <a href="http://manage.py">manage.py</a> 可列出所有的Django子命令</p></blockquote><h4 id="项目同名文件夹">项目同名文件夹</h4><blockquote><p>项目同名文件夹 - mysite1/mysite1</p><p>​==__init__==: Python包的初始化文件</p><p>​==wsgi.py==: WEB服务网关的配置文件 - Django正式启动时，需要用到</p><p>​==urls.py==: 项目的主路由配置 - HTTP请求进入Django时，优先调用该文件</p><p>​==settings.py==: 项目的配置文件 - 包含项目启动时需要的配置</p></blockquote><h4 id="settings-py"><a href="http://settings.py">settings.py</a></h4><blockquote><p>settings.py包含了Django项目启动的所有配置项</p><p>配置项分为 公有配置 和 自定义配置</p><p>配置项格式例：BASE_DIR = ‘xxxx’</p><p>公有配置 - Django官网提供的基础配置</p><p>​<a href="https://docs/djangoproject.com/en/2.2/ref/settings/">https://docs/djangoproject.com/en/2.2/ref/settings/</a></p></blockquote><h5 id="公有配置">公有配置</h5><blockquote><p>==<strong>BASE_DIR</strong>==</p><p>​用于绑定当前项目的绝对路径（动态计算出来的），所有文件夹都可以依赖此路径</p><p>==<strong>DEBUG</strong>==</p><p>​用于配置Django项目的启动模式，取值：</p><p>​True表示开发环境中使用 开发调试模式（用于开发中）</p><p>​False表示当前项目运行在 生产环境中</p><p>==<strong>ALLOWED_HOSTS</strong>==</p><p>设置允许访问到本项目的host头值</p><p>​[]空列表, 表示只有请求头中host为 127.0.0.1, localhost 能访问本项目 - DEBUG = True时生效</p><p>​[‘*’], 表示任何请求头的host都能访问到当前项目</p><p>​[‘192.168.1.3’, ‘127.0.0.1’] 表示只有当前两个host头的值能访问当前项目</p><p>示例：如果要在局域网其它主机也能访问此主机的Django服务，启动方式如下：</p><p>​==python3 <a href="http://manage.py">manage.py</a> runserver 0.0.0.0:5000==</p><p>​指定网络设备如果内网环境下其它主机想正常访问该站点，需要加ALLOWED_HOSTS=[‘内网ip’]</p><p>==<strong>INSTALLED_APPS</strong>== - 指定当前项目中安装的应用列表</p><p>==<strong>MIDDLEWARE</strong>== - 用于注册中间件</p><p>==<strong>TEMPLATES</strong>== - 用于指定模板的配置信息</p><p>==<strong>DATABASES</strong>== - 用于指定数据库的配置信息</p><p>==<strong>LANGUAGE_CODE</strong>== - 用于指定语言配置</p><p>​英语: “en-us”</p><p>​中文: “zh-Hans”</p><p>==<strong>TIME_ZONE</strong>== - 用于指定当前服务器端时区</p><p>​世界标准时间: “UTC”</p><p>​中国时区: “Asia/Shanghai”</p><p>==<strong>ROOT_URLCONF</strong>== - 用于配置主url配置 ‘mysite1.urls’</p><p>​ROOT_URLCONF = ‘mysite1.urls’</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#项目绝对路径</span></span><br><span class="line">BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))</span><br><span class="line"></span><br><span class="line">DEBUG = <span class="literal">True</span></span><br><span class="line"><span class="comment"># 启动模式</span></span><br><span class="line"><span class="comment"># True - 调试模式</span></span><br><span class="line"><span class="comment"># 1,检测代码改动后，立刻重启服务</span></span><br><span class="line"><span class="comment"># 2,报错页面</span></span><br><span class="line"><span class="comment"># False - 正式启动模式 / 上线模式</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#请求头Host头</span></span><br><span class="line">ALLOWED_HOSTS = [<span class="string">&#x27;127.0.0.1&#x27;</span>]</span><br><span class="line"><span class="comment">#ALLOWED_HOSTS = [&#x27;www.tedu1.com&#x27;]</span></span><br></pre></td></tr></table></figure></blockquote><h5 id="自定义配置">自定义配置</h5><blockquote><p>settings.py中也可以添加 开发人员 ==自定义的配置==</p><p>配置建议：名字尽量个性化 - 以防覆盖掉公有配置</p><p>​例如：ALIPAY_KEY = ‘xxxxxx’</p><p>settings.py中的所有配置项，都可以按需的在代码中引入</p><p>引入方式：==from django.conf import settings==</p></blockquote><hr><h2 id="四-URL和视图函数">四. URL和视图函数</h2><h3 id="URL-结构">URL - 结构</h3><blockquote><p>定义 - 即统一资源定位符 Uniform Resource Locator</p><p>作用 - 用来表示互联网上某个资源的地址</p><p>URL的一般语法格式为（注：[] 代表其中的内容可省略）：</p><p>​==protocol://hostname[:port]/path[?query][#fragment]==</p><p>​<a href="http://tts.tmooc.cn/video/showVideo?menuld=657421&amp;version=AID999#subject">http://tts.tmooc.cn/video/showVideo?menuld=657421&amp;version=AID999#subject</a></p></blockquote><h4 id="protocol（协议）">protocol（协议）</h4><blockquote><p><strong>==http://==<a href="http://tts.tmooc.cn">tts.tmooc.cn</a></strong></p><p>http 通过HTTP访问该资源。格式 http://</p><p>https 通过安全的HTTPS访问该资源。格式 https://</p><p>file资源是本地计算机上的文件。格式 file:///</p></blockquote><h4 id="hostname（主机名）">hostname（主机名）</h4><blockquote><p><strong>http:// ==tts.tmooc.cn==</strong></p><p>是指存放资源的服务器的域名系统（DNS）主机名、域名 或 IP地址</p></blockquote><h4 id="port（端口号）">port（端口号）</h4><blockquote><p><strong><a href="http://tts.tmooc.cn">http://tts.tmooc.cn</a> ==:80==</strong></p><p>整数，可选，省略时使用方案的默认端口</p><p>各种传输协议都有默认的端口号，如http的默认端口为80</p></blockquote><h4 id="path（路由地址）">path（路由地址）</h4><blockquote><p><strong><a href="http://tts.tmooc.cn/">http://tts.tmooc.cn/</a> ==video/showVideo==</strong></p><p>由零或多个 “/” 符号隔开的字符串，一般用来表示主机上的一个目录或文件地址。路由地址决定了服务器端如何处理这个请求</p></blockquote><h4 id="query（查询）">query（查询）</h4><blockquote><p><strong>video/showVideo==?menuld=657421&amp;version=AID999==</strong></p><p>可选，用于给动态网页传递参数，可有多个参数，用 “&amp;” 符号隔开，每个参数的名和值用 “=” 符号隔开</p></blockquote><h4 id="fragment（信息片段）">fragment（信息片段）</h4><blockquote><p><strong>Version=AID999==#subject==</strong></p><p><a href="https://docs.djangoproject.com/en/2.2/">https://docs.djangoproject.com/en/2.2/</a> ==#the-template-layer==</p><p>字符串，用于指定网络资源中的片段。例如一个网页中有多个名词解释，可使用fragment直接定位到某一名词解释</p></blockquote><h3 id="处理URL请求">处理URL请求</h3><blockquote><p>浏览器 地址栏 -&gt; <strong><a href="http://127.0.0.1:8000/page/2003/">http://127.0.0.1:8000/page/2003/</a></strong></p><p>​1.Django从配置文件中 根据 ==ROOT_URLCONF== 找到 主路由文件；默认情况下，该文件在 项目同名目录下的urls；例如 ==mysite1/mysite1/urls.py==</p><p>​2.Django加载 主路由文件中的 ==urlpatterns== 变量【包含很多路由的数组】</p><p>​3.依次匹配 urlpatterns 中的 URL，匹配到第一个合适的中断后续匹配</p><p>​4.匹配成功 - 调用对应的视图函数处理请求，返回响应</p><p>​5.匹配失败 - 返回404响应</p></blockquote><h3 id="主路由-urls-py">主路由 - <a href="http://urls.py">urls.py</a></h3><blockquote><p>主路由 - <a href="http://urls.py">urls.py</a> 样例</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line">form . <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;admin/&#x27;</span>, admin.site.urls),</span><br><span class="line">    path(<span class="string">&#x27;page/2003/&#x27;</span>, views.page_2003),</span><br><span class="line">    path(<span class="string">&#x27;page/2004/&#x27;</span>, views.page_2004),</span><br><span class="line">]</span><br></pre></td></tr></table></figure></blockquote><h3 id="视图函数">视图函数</h3><blockquote><p>视图函数是用于==接收一个浏览器请求==（==HttpRequest==对象）并通过==HttpRequest==对象==返回响应==的函数。此函数可以接收浏览器请求并根据业务逻辑返回相应的响应内容给浏览器</p><p>语法</p><p>​def xxx_view(<strong>==request==</strong>[, 其它参数…]):</p><p>​<strong>==return HttpResponse对象==</strong></p><blockquote><p>样例</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># file: &lt;项目同名文件夹下&gt;/views.py</span></span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> HttpResponse</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">page1_view</span>(<span class="params">request</span>):</span><br><span class="line">    html = <span class="string">&quot;&lt;h1&gt;这是第1个页面&lt;/h1&gt;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(html)</span><br></pre></td></tr></table></figure></blockquote></blockquote><h3 id="示例">示例</h3><blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">http://<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">8000</span>/page/<span class="number">2003</span>/</span><br><span class="line"></span><br><span class="line"> &lt;项目同名文件夹下&gt;/urls.py</span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;admin/&#x27;</span>, admin.site.urls),</span><br><span class="line">    <span class="comment">#http://127.0.0.1:8000/page/2003/</span></span><br><span class="line">    path(<span class="string">&#x27;page/2003/&#x27;</span>, views.page_2003_view)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"> &lt;项目同名文件夹下&gt;/views.py</span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> HttpResponse</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">page_2003_view</span>(<span class="params">request</span>):</span><br><span class="line">    html = <span class="string">&quot;&lt;h1&gt;这是第1个页面&lt;/h1&gt;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(html)</span><br></pre></td></tr></table></figure></blockquote><hr>]]></content>
      
      
      <categories>
          
          <category> Django </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Django </tag>
            
            <tag> MTV </tag>
            
            <tag> URL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>03_Java-运算符-标识符命名规则规范-键盘输入-进制</title>
      <link href="/blog/posts/61e9d308.html"/>
      <url>/blog/posts/61e9d308.html</url>
      
        <content type="html"><![CDATA[<p>摘要：<code>运算符</code> + <code>标识符</code> + <code>进制</code><span id="more"></span></p><h1 id="03-Java-运算符-标识符命名规则规范-键盘输入-进制">03_Java-运算符-标识符命名规则规范-键盘输入-进制</h1><p><a href="https://www.bilibili.com/video/BV1fh411y7R8">视频🔗：https://www.bilibili.com/video/BV1fh411y7R8</a><br><a href="https://blog.csdn.net/cpen_web">博客🔗：https://blog.csdn.net/cpen_web</a></p><hr><h2 id="运算符">运算符</h2><p><strong>运算符</strong></p><ul><li>运算符介绍</li></ul><p>​运算符是一种特殊的符号，用以表示数据的运算、赋值和比较等。</p><ol><li><p>算术运算符</p></li><li><p>赋值运算符</p></li><li><p>关系运算符 [比较运算符]</p></li><li><p>逻辑运算符</p></li><li><p>位运算符 [需要二进制基础]</p></li><li><p>三元运算符</p></li></ol><hr><h3 id="一-算术运算符">一. 算术运算符</h3><p><strong>算术运算符</strong></p><ul><li><p>介绍</p><p>算术运算符是对数值类型的变量进行运算的，在 Java 程序中使用的非常多。</p></li><li><p>算术运算符一览</p></li></ul><blockquote><p><code>% 的本质看一个公式：a % b = a - a / b * b</code></p><p><code>a % b当 a 是小数时，公式 = a - (int)a / b * b</code></p><img src="https://image.cpen.top/image/202205082301910.png" alt="image-20220508230138805" style="zoom: 67%;" /><img src="https://image.cpen.top/image/202205092131114.png" alt="image-20220509213107049" style="zoom:67%;" /></blockquote><hr><ul><li>案例演示</li></ul><blockquote><img src="https://image.cpen.top/image/202205082304543.png" alt="image-20220508230401456" style="zoom: 67%;" /></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 演示算术运算符的使用 </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArithmeticOperator</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">// /使用</span></span><br><span class="line">System.out.println(<span class="number">10</span> / <span class="number">4</span>); <span class="comment">//从数学来看是2.5, java中 2</span></span><br><span class="line">System.out.println(<span class="number">10.0</span> / <span class="number">4</span>); <span class="comment">//java是2.5</span></span><br><span class="line"><span class="comment">// 注释快捷键 ctrl + /, 再次输入 ctrl + / 取消注释</span></span><br><span class="line"><span class="type">double</span> <span class="variable">d</span> <span class="operator">=</span> <span class="number">10</span> / <span class="number">4</span>;<span class="comment">//java中10 / 4 = 2, 2=&gt;2.0 </span></span><br><span class="line">System.out.println(d);<span class="comment">// 是2.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// % 取模 ,取余</span></span><br><span class="line"><span class="comment">// 在 % 的本质 看一个公式!!!! a % b = a - a / b * b</span></span><br><span class="line"><span class="comment">// -10 % 3 =&gt; -10 - (-10) / 3 * 3 = -10 + 9 = -1</span></span><br><span class="line"><span class="comment">// 10 % -3 = 10 - 10 / (-3) * (-3) = 10 - 9 = 1</span></span><br><span class="line"><span class="comment">// -10 % -3 =  (-10) - (-10) / (-3) * (-3) = -10 + 9 = -1</span></span><br><span class="line">System.out.println(<span class="number">10</span> % <span class="number">3</span>); <span class="comment">//1</span></span><br><span class="line"></span><br><span class="line">System.out.println(-<span class="number">10</span> % <span class="number">3</span>); <span class="comment">// -1</span></span><br><span class="line">System.out.println(<span class="number">10</span> % -<span class="number">3</span>); <span class="comment">//1</span></span><br><span class="line">System.out.println(-<span class="number">10</span> % -<span class="number">3</span>);<span class="comment">//-1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//++的使用</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">i++;<span class="comment">//自增 等价于 i = i + 1; =&gt; i = 11</span></span><br><span class="line">++i;<span class="comment">//自增 等价于 i = i + 1; =&gt; i = 12</span></span><br><span class="line">System.out.println(<span class="string">&quot;i=&quot;</span> + i);<span class="comment">//12</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">作为表达式使用</span></span><br><span class="line"><span class="comment">        前++：++i先自增后赋值</span></span><br><span class="line"><span class="comment">        后++：i++先赋值后自增</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">8</span>;</span><br><span class="line"><span class="comment">//int k = ++j; //等价 j=j+1;k=j; </span></span><br><span class="line"><span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> j++; <span class="comment">// 等价 k =j;j=j+1;</span></span><br><span class="line">System.out.println(<span class="string">&quot;k=&quot;</span> + k + <span class="string">&quot;j=&quot;</span> + j);<span class="comment">//8 9</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>细节说明</li></ul><blockquote><img src="https://image.cpen.top/image/202205082326729.png" alt="image-20220508232614621" style="zoom:67%;" /></blockquote><hr><p>算数运算符使用</p><ul><li>面试题</li></ul><blockquote><img src="https://image.cpen.top/image/202205082326225.png" alt="image-20220508232646110" style="zoom: 67%;" /><ul><li>自增，自减课堂练习, 看看输出什么</li></ul><blockquote><img src="https://image.cpen.top/image/202205082338509.png" alt="image-20220508233829424" style="zoom:67%;" /></blockquote></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//练习</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArithmeticOperatorExercise01</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// int i = 1;//i-&gt;1</span></span><br><span class="line"><span class="comment">// i = i++; //规则使用临时变量: (1) temp=i;(2) i=i+1;(3)i=temp;</span></span><br><span class="line"><span class="comment">// System.out.println(i); // 1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// int i=1;</span></span><br><span class="line"><span class="comment">// i=++i; //规则使用临时变量: (1) i=i+1;(2) temp=i;(3)i=temp;</span></span><br><span class="line"><span class="comment">// System.out.println(i); //2</span></span><br><span class="line"><span class="comment">// </span></span><br><span class="line"><span class="comment">// 测试输出</span></span><br><span class="line"><span class="type">int</span> <span class="variable">i1</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">i2</span> <span class="operator">=</span> <span class="number">20</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> i1++;</span><br><span class="line">        System.out.print(<span class="string">&quot;i=&quot;</span>+i);<span class="comment">//10</span></span><br><span class="line">        System.out.println(<span class="string">&quot;i2=&quot;</span>+i2);<span class="comment">//20</span></span><br><span class="line">        i = --i2; </span><br><span class="line">        System.out.print(<span class="string">&quot;i=&quot;</span>+i);<span class="comment">//19</span></span><br><span class="line">        System.out.println(<span class="string">&quot;i2=&quot;</span>+i2);<span class="comment">//19</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>课堂练习 2<a href="//ArithmeticOperatorExercise02.java">//ArithmeticOperatorExercise02.java</a></li></ul><ol><li><p>假如还有 59 天放假，问：合 xx 个星期零 xx 天</p></li><li><p>定义一个变量保存华氏温度，华氏温度转换摄氏温度的公式为：5/9*(华氏温度-100),请求出华氏温度对应的摄氏温度。 [234.5]</p></li><li><p>代码</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//课堂练习</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArithmeticOperatorExercise02</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1.需求:</span></span><br><span class="line"><span class="comment">//假如还有59天放假，问：合xx个星期零xx天</span></span><br><span class="line"><span class="comment">//2.思路分析</span></span><br><span class="line"><span class="comment">//(1) 使用int 变量 days 保存 天数</span></span><br><span class="line"><span class="comment">//(2) 一个星期是7天 星期数weeks： days / 7 零xx天leftDays days % 7</span></span><br><span class="line"><span class="comment">//(3) 输出</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//3.走代码</span></span><br><span class="line"><span class="type">int</span> <span class="variable">days</span> <span class="operator">=</span> <span class="number">25911</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">weeks</span> <span class="operator">=</span> days / <span class="number">7</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">leftDays</span> <span class="operator">=</span> days % <span class="number">7</span>;</span><br><span class="line">System.out.println(days + <span class="string">&quot;天 合&quot;</span> + weeks + <span class="string">&quot;星期零&quot;</span> </span><br><span class="line">+ leftDays + <span class="string">&quot;天&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//1.需求</span></span><br><span class="line"><span class="comment">//定义一个变量保存华氏温度，华氏温度转换摄氏温度的公式为</span></span><br><span class="line"><span class="comment">//：5/9*(华氏温度-100),请求出华氏温度对应的摄氏温度</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//2思路分析</span></span><br><span class="line"><span class="comment">//(1) 先定义一个double huaShi 变量保存 华氏温度</span></span><br><span class="line"><span class="comment">//(2) 根据给出的公式，进行计算即可5/9*(华氏温度-100)</span></span><br><span class="line"><span class="comment">//    考虑数学公式和java语言的特性</span></span><br><span class="line"><span class="comment">//(3) 将得到的结果保存到double sheShi</span></span><br><span class="line"><span class="comment">//3走代码</span></span><br><span class="line"><span class="type">double</span> <span class="variable">huaShi</span> <span class="operator">=</span> <span class="number">1234.6</span>;</span><br><span class="line"><span class="type">double</span> <span class="variable">sheShi</span> <span class="operator">=</span> <span class="number">5.0</span> / <span class="number">9</span> * (huaShi - <span class="number">100</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;华氏温度&quot;</span> + huaShi </span><br><span class="line">+ <span class="string">&quot; 对应的摄氏温度=&quot;</span> + sheShi);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="二-关系运算符-比较运算符">二. 关系运算符(比较运算符)</h3><p>**关系运算符(比较运算符) **</p><ul><li><strong>介绍</strong></li></ul><ol><li><p>关系运算符的结果都是 boolean 型，也就是要么是 true，要么是 false</p></li><li><p>关系表达式 经常用在 if 结构的条件中或循环结构的条件中</p></li></ol><ul><li><strong>关系运算符一览</strong></li></ul><blockquote><img src="https://image.cpen.top/image/202205090011985.png" alt="image-20220509001153917" style="zoom: 67%;" /></blockquote><ul><li><strong>案例演示</strong></li></ul><p>案例演示关系运算符的使用(RelationalOperator.java)。</p><blockquote><img src="https://image.cpen.top/image/202205090015981.png" alt="image-20220509001501843" style="zoom: 67%;" /></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//演示关系运算符的使用</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RelationalOperator</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">9</span>;  <span class="comment">//老韩提示:  开发中，不可以使用  a, b </span></span><br><span class="line"><span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">8</span>;</span><br><span class="line">System.out.println(a &gt; b);<span class="comment">//T </span></span><br><span class="line">System.out.println(a &gt;= b); <span class="comment">//T</span></span><br><span class="line">System.out.println(a &lt;= b); <span class="comment">//F</span></span><br><span class="line">System.out.println(a &lt; b);  <span class="comment">//F</span></span><br><span class="line">System.out.println(a == b); <span class="comment">//F</span></span><br><span class="line">System.out.println(a != b); <span class="comment">//T</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> a &gt; b; <span class="comment">//T</span></span><br><span class="line">System.out.println(<span class="string">&quot;flag=&quot;</span> + flag);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong>细节说明</strong></li></ul><ol><li><p>关系运算符的结果都是 boolean 型，也就是要么是 true，要么是 false。</p></li><li><p>关系运算符组成的表达式，我们称为关系表达式。 a &gt; b</p></li><li><p>比较运算符&quot;==“不能误写成”=&quot;</p></li></ol><hr><h3 id="三-逻辑运算符">三. 逻辑运算符</h3><p><strong>逻辑运算符</strong></p><ul><li><strong>介绍</strong></li></ul><p>​用于连接多个条件（多个关系表达式），最终的结果也是一个 boolean 值。</p><ul><li><strong>逻辑运算符一览</strong></li></ul><p>分为两组学习</p><ol><li><p><code>短路与 &amp;&amp; ， 短路或 ||，取反 ! </code></p></li><li><p><code>逻辑与 &amp;，逻辑或 |，^ 逻辑异或 </code></p></li></ol><blockquote><img src="https://image.cpen.top/image/202205090021561.png" alt="image-20220509002134483" style="zoom: 67%;" /></blockquote><ul><li>[x] <strong>说明逻辑运算规则</strong>：</li></ul><ol><li><p>a&amp;b : &amp; 叫逻辑与：规则：当 a 和 b 同时为 true ,则结果为 true, 否则为 false</p></li><li><p>a&amp;&amp;b : &amp;&amp; 叫短路与：规则：当 a 和 b 同时为 true ,则结果为 true,否则为 false</p></li><li><p>a|b : | 叫逻辑或，规则：当 a 和 b ，有一个为 true ,则结果为 true,否则为 false</p></li><li><p>a||b : || 叫短路或，规则：当 a 和 b ，有一个为 true ,则结果为 true,否则为 false</p></li><li><p>!a : 叫取反，或者非运算。当 a 为 true, 则结果为 false, 当 a 为 false 是，结果为 true</p></li><li><p>a^b: 叫逻辑异或，当 a 和 b 不同时，则结果为 true, 否则为 false</p></li></ol><hr><h4 id="短路与逻辑与">短路与逻辑与</h4><ul><li><strong>&amp;&amp; 和 &amp; 基本规则</strong></li></ul><table><thead><tr><th>名称</th><th>语法</th><th>特点</th></tr></thead><tbody><tr><td>短路与&amp;&amp;</td><td>条件 1&amp;&amp;条件 2</td><td>两个条件都为 true，结果为 true,否则 false</td></tr><tr><td>逻辑与&amp;</td><td>条件 1&amp;条件 2</td><td>两个条件都为 true，结果为 true,否则 false</td></tr></tbody></table><ul><li><strong>&amp;&amp; 和 &amp; 案例演示</strong></li></ul><p>案例演示&amp;&amp; 和 &amp; 运算符的使用(LogicOperator01.java)。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 演示逻辑运算符的使用</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LogicOperator01</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//&amp;&amp;短路与  和 &amp; 案例演示</span></span><br><span class="line"><span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> <span class="number">50</span>;</span><br><span class="line"><span class="keyword">if</span>(age &gt; <span class="number">20</span> &amp;&amp; age &lt; <span class="number">90</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;ok100&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//&amp;逻辑与使用</span></span><br><span class="line"><span class="keyword">if</span>(age &gt; <span class="number">20</span> &amp; age &lt; <span class="number">90</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;ok200&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//区别</span></span><br><span class="line"><span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">4</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">9</span>;</span><br><span class="line"><span class="comment">//对于&amp;&amp;短路与而言，如果第一个条件为false ,后面的条件不再判断</span></span><br><span class="line"><span class="comment">//对于&amp;逻辑与而言，如果第一个条件为false ,后面的条件仍然会判断</span></span><br><span class="line"><span class="keyword">if</span>(a &lt; <span class="number">1</span> &amp; ++b &lt; <span class="number">50</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;ok300&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;a=&quot;</span> + a + <span class="string">&quot; b=&quot;</span> + b);<span class="comment">// 4 10</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong>&amp;&amp; 和 &amp; 使用区别</strong></li></ul><ol><li><p>&amp;&amp;短路与：如果第一个条件为 false，则第二个条件不会判断，最终结果为 false，效率高</p></li><li><p>&amp; 逻辑与：不管第一个条件是否为 false，第二个条件都要判断，效率低</p></li><li><p>开发中， 我们使用的基本是使用短路与<code>&amp;&amp;</code>, 效率高</p></li></ol><hr><h4 id="短路或逻辑或">短路或逻辑或</h4><ul><li><strong>|| 和 | 基本规则</strong></li></ul><table><thead><tr><th>名称</th><th>语法</th><th>特点</th></tr></thead><tbody><tr><td>短路或||</td><td>条件 1||条件2</td><td>两个条件中只要有一个成立，结果为 true,否则为 false</td></tr><tr><td>逻辑或|</td><td>条件 1|条件2</td><td>只要有一个条件成立，结果为 true,否则为 false</td></tr></tbody></table><ul><li><strong>|| 和 | 案例演示</strong></li></ul><p>案例演示&amp;&amp; || !运算符的使用(LogicOperator02.java)。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//演示| || 使用</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LogicOperator02</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//||短路或  和 |逻辑或 案例演示</span></span><br><span class="line"><span class="comment">//|| 规则: 两个条件中只要有一个成立，结果为true,否则为false</span></span><br><span class="line"><span class="comment">//| 规则: 两个条件中只要有一个成立，结果为true,否则为false</span></span><br><span class="line"><span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> <span class="number">50</span>;</span><br><span class="line"><span class="keyword">if</span>(age &gt; <span class="number">20</span> || age &lt; <span class="number">30</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;ok100&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//|逻辑或使用</span></span><br><span class="line"><span class="keyword">if</span>(age &gt; <span class="number">20</span> | age &lt; <span class="number">30</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;ok200&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//看看区别</span></span><br><span class="line"><span class="comment">//(1)||短路或：如果第一个条件为true，</span></span><br><span class="line"><span class="comment">//则第二个条件不会判断，最终结果为true，效率高</span></span><br><span class="line"><span class="comment">//(2)| 逻辑或：不管第一个条件是否为true，第二个条件都要判断，效率低</span></span><br><span class="line"><span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">4</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">9</span>;</span><br><span class="line"><span class="keyword">if</span>( a &gt; <span class="number">1</span> || ++b &gt; <span class="number">4</span>) &#123; <span class="comment">// 可以换成 | 测试</span></span><br><span class="line">System.out.println(<span class="string">&quot;ok300&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;a=&quot;</span> + a + <span class="string">&quot; b=&quot;</span> + b); <span class="comment">//4 9</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong>|| 和 | 使用区别</strong></li></ul><ol><li><p>||短路或：如果第一个条件为 true，则第二个条件不会判断，最终结果为 true，效率高</p></li><li><p>| 逻辑或：不管第一个条件是否为 true，第二个条件都要判断，效率低</p></li><li><p>开发中，我们基本使用 <code>||</code></p></li></ol><hr><h4 id="逻辑非逻辑异或">逻辑非逻辑异或</h4><ul><li><strong>! 取反 基本规则</strong></li></ul><table><thead><tr><th>名称</th><th>语法</th><th>特点</th></tr></thead><tbody><tr><td>! 非（取反）</td><td>!条件</td><td>如果条件本身成立，结果为 false，否则为 true</td></tr></tbody></table><ul><li><strong>! 案例演示</strong></li></ul><p>案例演示 !运算符的使用(InverseOperator.java)。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//!和^案例演示</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InverseOperator</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//! 操作是取反 T-&gt;F  , F -&gt; T</span></span><br><span class="line">System.out.println(<span class="number">60</span> &gt; <span class="number">20</span>); <span class="comment">//T</span></span><br><span class="line">System.out.println(!(<span class="number">60</span> &gt; <span class="number">20</span>)); <span class="comment">//F</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//a^b: 叫逻辑异或，当 a 和 b 不同时，则结果为true, 否则为false</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">b</span> <span class="operator">=</span> (<span class="number">10</span> &gt; <span class="number">1</span>) ^ ( <span class="number">3</span> &gt; <span class="number">5</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;b=&quot;</span> + b);<span class="comment">//T</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong>^ 案例演示</strong></li></ul><p>a^b: 叫逻辑异或，当 a 和 b 不同时，则结果为 true, 否则为 false</p><p>^逻辑异或，System.out.println( (4 &lt; 1) ^ (6 &gt; 3) ); // T</p><hr><p><strong>逻辑运算符练习</strong></p><ul><li>练习题 1 请写出每题的输出结果</li></ul><blockquote><p>x ++== 6，先比较，再自增</p><img src="https://image.cpen.top/image/202205091319381.png" alt="image-20220509131958291" style="zoom:67%;" /></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//验证</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// int x = 5;</span></span><br><span class="line"><span class="comment">// int y=5;</span></span><br><span class="line"><span class="comment">// if(x++==6 &amp; ++y==6)&#123; //逻辑与</span></span><br><span class="line"><span class="comment">// x = 11;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// System.out.println(&quot;x=&quot;+x+&quot;,y=&quot;+y);</span></span><br><span class="line"><span class="comment">// //6, 6</span></span><br><span class="line"><span class="comment">// int x = 5,y = 5;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// if(x++==6 &amp;&amp; ++y==6)&#123;</span></span><br><span class="line"><span class="comment">// x = 11;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// System.out.println(&quot;x=&quot;+x+&quot;,y=&quot;+y);</span></span><br><span class="line"><span class="comment">// //6, 5</span></span><br><span class="line"><span class="comment">// </span></span><br><span class="line"><span class="comment">// int x = 5,y = 5;</span></span><br><span class="line"><span class="comment">// if(x++==5 | ++y==5)&#123;</span></span><br><span class="line"><span class="comment">// x =11;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// System.out.println(&quot;x=&quot;+x+&quot;,y=&quot;+y);</span></span><br><span class="line"><span class="comment">//11, 6</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// int x = 5,y = 5;</span></span><br><span class="line"><span class="comment">// if(x++==5 || ++y==5)&#123;</span></span><br><span class="line"><span class="comment">// x =11;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// System.out.println(&quot;x=&quot;+x+&quot;,y=&quot;+y);</span></span><br><span class="line"><span class="comment">//11, 5</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="type">boolean</span> x=<span class="literal">true</span>;</span><br><span class="line"><span class="type">boolean</span> y=<span class="literal">false</span>;</span><br><span class="line"><span class="type">short</span> z=<span class="number">46</span>;</span><br><span class="line"><span class="keyword">if</span>( (z++==<span class="number">46</span>)&amp;&amp; (y=<span class="literal">true</span>) )   z++;  </span><br><span class="line"><span class="keyword">if</span>((x=<span class="literal">false</span>) || (++z==<span class="number">49</span>))  z++; </span><br><span class="line">System. out.println(<span class="string">&quot;z=&quot;</span>+z); <span class="comment">//50 </span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>练习题 2 请写输出结果</li></ul><blockquote><img src="https://image.cpen.top/image/202205091324402.png" alt="image-20220509132450314" style="zoom:67%;" /></blockquote><hr><h3 id="四-赋值运算符">四. 赋值运算符</h3><ul><li><strong>介绍</strong></li></ul><p>赋值运算符就是将某个运算后的值，赋给指定的变量。</p><ul><li><p><strong>赋值运算符的分类</strong></p></li><li><p>[x] 基本赋值运算符 =      int a = 10;</p></li><li><p>[x] 复合赋值运算符</p></li></ul><p>​+= ，-= ，*= ， /= ，%= 等 , 重点讲解一个 += ，其它的使用是一个道理</p><p>​a += b; [等价 a = a + b; ]</p><p>​a -= b;  [等价 a = a - b; ]</p><ul><li><strong>案例演示</strong></li></ul><p>案例演示赋值运算符的基本使用。AssignOperator.java</p><ol><li><p>赋值基本案例 [int num1 = 10]</p></li><li><p>+= 的使用案例</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//演示赋值运算符的使用</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AssignOperator</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">n1</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">n1 += <span class="number">4</span>;<span class="comment">// n1 = n1 + 4;</span></span><br><span class="line">System.out.println(n1); <span class="comment">// 14</span></span><br><span class="line">n1 /= <span class="number">3</span>;<span class="comment">// n1 = n1 / 3;//4</span></span><br><span class="line">System.out.println(n1); <span class="comment">// 4</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//复合赋值运算符会进行类型转换</span></span><br><span class="line"><span class="type">byte</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line">b += <span class="number">2</span>; <span class="comment">// 等价 b = (byte)(b + 2);</span></span><br><span class="line">b++; <span class="comment">// b = (byte)(b+1);</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong>赋值运算符特点</strong></li></ul><ol><li><p>运算顺序从右往左        int num = a + b + c;</p></li><li><p>赋值运算符的左边 只能是变量,右边 可以是变量、表达式、常量值</p></li></ol><p>​int num = 20; int num2= 78 * 34 - 10; int num3 = a;</p><ol start="3"><li>复合赋值运算符等价于下面的效果</li></ol><p>​比如：a+=3;等价于 a=a+3; 其他类推</p><ol start="4"><li>复合赋值运算符会进行类型转换。</li></ol><p>​byte b = 2; b+=3; b++;</p><blockquote><img src="https://image.cpen.top/image/202205091347006.png" alt="image-20220509134732958" style="zoom: 67%;" /></blockquote><hr><h3 id="五-三元运算符">五. 三元运算符</h3><ul><li><strong>基本语法</strong></li></ul><p>条件表达式 ? 表达式 1: 表达式 2;</p><p><code>运算规则</code>：</p><ol><li><p>如果条件表达式为 true，运算后的结果是表达式 1；</p></li><li><p>如果条件表达式为 false，运算后的结果是表达式 2；</p></li></ol><p>口诀: [一灯大师：<strong>一真大师</strong>]</p><ul><li><strong>案例演示</strong> TernaryOperator.java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//三元运算符使用</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TernaryOperator</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">99</span>;</span><br><span class="line"><span class="comment">// 解读</span></span><br><span class="line"><span class="comment">// 1. a &gt; b 为 false</span></span><br><span class="line"><span class="comment">// 2. 返回 b--, 先返回 b的值,然后在 b-1</span></span><br><span class="line"><span class="comment">// 3. 返回的结果是99 </span></span><br><span class="line"><span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> a &gt; b ? a++ : b--;</span><br><span class="line">System.out.println(<span class="string">&quot;result=&quot;</span> + result);</span><br><span class="line">System.out.println(<span class="string">&quot;a=&quot;</span> + a);</span><br><span class="line">System.out.println(<span class="string">&quot;b=&quot;</span> + b);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><ul><li><strong>使用细节</strong> TernaryOperatorDetail.java</li></ul><ol><li><p>表达式 1 和表达式 2 要为可以赋给接收变量的类型(或可以自动转换)</p></li><li><p>三元运算符可以转成 if–else 语句</p></li></ol><p>​int res = a &gt; b ? a++ : --b;</p><p>​if ( a &gt; b) res = a++;</p><p>​else res = --b;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//三元运算符细节</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TernaryOperatorDetail</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//表达式1和表达式2要为可以赋给接收变量的类型</span></span><br><span class="line"><span class="comment">//(或可以自动转换/或者强制转换)</span></span><br><span class="line"><span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">8</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span> a &gt; b ? (<span class="type">int</span>)<span class="number">1.1</span> : (<span class="type">int</span>)<span class="number">3.4</span>;<span class="comment">//可以的</span></span><br><span class="line"><span class="type">double</span> <span class="variable">d</span> <span class="operator">=</span> a &gt; b ? a : b + <span class="number">3</span>;<span class="comment">//可以的，满足 int -&gt; double</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong>课堂练习</strong></li></ul><p><strong>案例：实现三个数的最大值</strong> TernaryOperatorExercise.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TernaryOperatorExercise</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//案例：实现三个数的最大值</span></span><br><span class="line"><span class="type">int</span> <span class="variable">n1</span> <span class="operator">=</span> <span class="number">553</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">n2</span> <span class="operator">=</span> <span class="number">33</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">n3</span> <span class="operator">=</span> <span class="number">123</span>;</span><br><span class="line"><span class="comment">//思路</span></span><br><span class="line"><span class="comment">//1. 先得到 n1 和 n2 中最大数 , 保存到 max1</span></span><br><span class="line"><span class="comment">//2. 然后再 求出 max1 和  n3中的最大数，保存到 max2</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">max1</span> <span class="operator">=</span> n1 &gt; n2 ? n1 : n2;</span><br><span class="line"><span class="type">int</span> <span class="variable">max2</span> <span class="operator">=</span> max1 &gt; n3 ? max1 : n3;</span><br><span class="line">System.out.println(<span class="string">&quot;最大数=&quot;</span> + max2);</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用一条语句实现, 推荐使用上面方法</span></span><br><span class="line"><span class="comment">//老师提示: 后面我们可以使用更好方法,比如排序</span></span><br><span class="line"><span class="comment">// int max = (n1 &gt; n2 ? n1 : n2) &gt; n3 ? </span></span><br><span class="line"><span class="comment">// (n1 &gt; n2 ? n1 : n2) : n3;</span></span><br><span class="line"><span class="comment">// System.out.println(&quot;最大数=&quot; + max);</span></span><br><span class="line"><span class="comment">// </span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="六-运算符优先级">六. 运算符优先级</h3><p><strong>运算符优先级</strong></p><ol><li><p>运算符有不同的优先级，所谓优先级就是表达式运算中的运算顺序。如右表，上一行运算符总优先于下一行。</p></li><li><p>只有单目运算符、赋值运算符是从右向左运算的。</p></li><li><p>一览表, 不要背，使用多了，就熟悉了</p></li></ol><blockquote><p><strong>梳理小节</strong>：小伙伴有一个大致印象，使用多了，就熟悉</p><ol><li>() , {} 等</li><li>单目运算  ++ –</li><li>算数运算符</li><li>位移运算符</li><li>比较运算符</li><li>逻辑运算符</li><li>三元运算符</li><li>赋值运算符</li></ol><img src="https://image.cpen.top/image/202205091622856.png" alt="image-20220509162226749" style="zoom: 67%;" /></blockquote><hr><h2 id="标识符命名规则和规范">标识符命名规则和规范</h2><h3 id="七-标识符规则">七. 标识符规则</h3><p><strong>标识符的命名<code>规则</code>和<code>规范</code></strong></p><blockquote><img src="https://image.cpen.top/image/202205091628391.png" alt="image-20220509162810243" style="zoom:67%;" /></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">abcclass</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> <span class="number">40</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">N</span> <span class="operator">=</span> <span class="number">50</span>;</span><br><span class="line">System.out.println(<span class="string">&quot;n=&quot;</span> + n);<span class="comment">//40</span></span><br><span class="line">System.out.println(<span class="string">&quot;N=&quot;</span> + N);<span class="comment">//50</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//? abc 和 aBc 是两个不同变量</span></span><br><span class="line"><span class="type">int</span> <span class="variable">abc</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">aBc</span> <span class="operator">=</span> <span class="number">200</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//int a b = 300;//x</span></span><br><span class="line"><span class="comment">//int a-b=10;</span></span><br><span class="line"><span class="type">int</span> <span class="variable">goto1</span> <span class="operator">=</span> <span class="number">10</span>;</span><br></pre></td></tr></table></figure><ul><li><strong>判断下面变量名是否正确</strong></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">hsp<span class="comment">//ok </span></span><br><span class="line">hsp12<span class="comment">//ok </span></span><br><span class="line">1hsp<span class="comment">//错误, 数字不能开头 </span></span><br><span class="line">h-s<span class="comment">// 错误 , 不能有 - </span></span><br><span class="line">x h<span class="comment">// 错误， 有空格 </span></span><br><span class="line">h$<span class="number">4</span><span class="comment">// ok </span></span><br><span class="line">class<span class="comment">//错误，class 关键字 </span></span><br><span class="line"><span class="type">int</span> <span class="comment">// 错误 ,int 是关键字 </span></span><br><span class="line"><span class="type">double</span><span class="comment">//错误 ,double 是关键字 </span></span><br><span class="line"><span class="keyword">public</span><span class="comment">//错误 ,public 是关键字 </span></span><br><span class="line"><span class="keyword">static</span><span class="comment">//错误 ,static 是关键字 </span></span><br><span class="line">goto<span class="comment">//错误, goto 是保留字 </span></span><br><span class="line">stu_name<span class="comment">//ok</span></span><br></pre></td></tr></table></figure><hr><h3 id="八-标识符规范">八. 标识符规范</h3><p><strong>标识符命名规范[更加专业]</strong></p><ol><li><p>包名：多单词组成时所有字母都小写：aaa.bbb.ccc //比如 com.hsp.crm</p></li><li><p>类名、接口名：多单词组成时，所有单词的首字母大写：XxxYyyZzz [大驼峰]</p></li></ol><p>​比如： TankShotGame</p><ol start="3"><li>变量名、方法名：多单词组成时，第一个单词首字母小写，第二个单词开始每个单词首字母大写：xxxYyyZzz [小驼峰， 简称 驼峰法]</li></ol><p>​比如： tankShotGame</p><ol start="4"><li>常量名：所有字母都大写。多单词时每个单词用下划线连接：XXX_YYY_ZZZ</li></ol><p>​比如 ：定义一个所得税率 TAX_RATE</p><ol start="5"><li>后面我们学习到 类，包，接口，等时，我们的命名规范要这样遵守,更加详细的看文档.</li></ol><hr><h3 id="九-关键字保留字">九. 关键字保留字</h3><p><strong>关键字</strong></p><p>关键字的定义和特点 (<strong><code>不用背</code></strong>)</p><p>定义：被 Java 语言赋予了特殊含义，用做 <strong>专门用途的字符串</strong>（单词）</p><p>特点：关键字中所有字母都为小写</p><blockquote><img src="https://image.cpen.top/image/202205091647948.png" alt="image-20220509164734847" style="zoom: 67%;" /><img src="https://image.cpen.top/image/202205091647396.png" alt="image-20220509164755233" style="zoom:67%;" /></blockquote><hr><p><strong>保留字</strong></p><ul><li><strong>介绍</strong></li></ul><p>​Java 保留字：现有 Java 版本<strong>尚未使用</strong>，但<strong>以后版本可能会作为关键字使用</strong>。自己命名标识符时要避免使用这些保留字</p><p>byValue、cast、future、 generic、 inner、 operator、 outer、 rest、 var 、 goto 、const</p><hr><h2 id="键盘输入">键盘输入</h2><h3 id="十-键盘输入">十. 键盘输入</h3><p><strong>键盘输入语句</strong></p><ul><li><strong>介绍</strong></li></ul><p>在编程中，需要接收用户输入的数据，就可以使用键盘输入语句来获取。Input.java , 需要一个 扫描器(对象), 就是 Scanner</p><ul><li><strong>步骤 ：</strong></li></ul><ol><li><p>导入该类的所在包, java.util.*</p></li><li><p>创建该类对象（声明变量）</p></li><li><p>调用里面的功能</p></li></ol><blockquote><img src="https://image.cpen.top/image/202205091653715.png" alt="image-20220509165317654" style="zoom: 67%;" /></blockquote><ul><li><strong>案例演示：</strong></li></ul><p>要求：可以从控制台接收用户信息，【姓名，年龄，薪水】</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;<span class="comment">//表示把java.util下的Scanner类导入 </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Input</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//演示接受用户的输入</span></span><br><span class="line"><span class="comment">//步骤</span></span><br><span class="line"><span class="comment">//Scanner类 表示 简单文本扫描器，在java.util 包</span></span><br><span class="line"><span class="comment">//1. 引入/导入 Scanner类所在的包</span></span><br><span class="line"><span class="comment">//2. 创建 Scanner 对象 , new 创建一个对象,体会</span></span><br><span class="line"><span class="comment">//   myScanner 就是 Scanner类的对象</span></span><br><span class="line"><span class="type">Scanner</span> <span class="variable">myScanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"><span class="comment">//3. 接收用户输入了， 使用 相关的方法</span></span><br><span class="line">System.out.println(<span class="string">&quot;请输入名字&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//当程序执行到 next 方法时，会等待用户输入~~~</span></span><br><span class="line"><span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> myScanner.next(); <span class="comment">//接收用户输入字符串</span></span><br><span class="line">System.out.println(<span class="string">&quot;请输入年龄&quot;</span>);</span><br><span class="line"><span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> myScanner.nextInt(); <span class="comment">//接收用户输入int</span></span><br><span class="line">System.out.println(<span class="string">&quot;请输入薪水&quot;</span>);</span><br><span class="line"><span class="type">double</span> <span class="variable">sal</span> <span class="operator">=</span> myScanner.nextDouble(); <span class="comment">//接收用户输入double</span></span><br><span class="line">System.out.println(<span class="string">&quot;人的信息如下:&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;名字=&quot;</span> + name </span><br><span class="line">+ <span class="string">&quot; 年龄=&quot;</span> + age + <span class="string">&quot; 薪水=&quot;</span> + sal);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><img src="https://image.cpen.top/image/202205091705772.png" alt="image-20220509170543727" style="zoom:67%;" /></blockquote><hr><h2 id="进制">进制</h2><h3 id="十一-四种进制介绍">十一. 四种进制介绍</h3><p><strong>进制(程序员的基本功)</strong></p><ul><li><strong>进制介绍</strong></li></ul><p>对于整数，有四种表示方式：</p><p>二进制：0,1 ，满 2 进 1.以 0b 或 0B 开头。</p><p>十进制：0-9 ，满 10 进 1。</p><p>八进制：0-7 ，满 8 进 1. 以数字 0 开头表示。</p><p>十六进制：0-9 及 A(10)-F(15)，满 16 进 1. 以 <strong>0x</strong> <strong>或</strong> <strong>0X</strong> 开头表示。此处的 A-F 不区分大小写。</p><ul><li><strong>举例说明</strong> BinaryTest.java</li></ul><blockquote><img src="https://image.cpen.top/image/202205091711778.png" alt="image-20220509171113729" style="zoom: 80%;" /><img src="https://image.cpen.top/image/202205091713548.png" alt="image-20220509171329500" style="zoom: 80%;" /></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//演示四种进制</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BinaryTest</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//n1 二进制</span></span><br><span class="line"><span class="type">int</span> <span class="variable">n1</span> <span class="operator">=</span> <span class="number">0b1010</span>;</span><br><span class="line"><span class="comment">//n2 10进制</span></span><br><span class="line"><span class="type">int</span> <span class="variable">n2</span> <span class="operator">=</span> <span class="number">1010</span>;</span><br><span class="line"><span class="comment">//n3 8进制</span></span><br><span class="line"><span class="type">int</span> <span class="variable">n3</span> <span class="operator">=</span> <span class="number">01010</span>;</span><br><span class="line"><span class="comment">//n4 16进制</span></span><br><span class="line"><span class="type">int</span> <span class="variable">n4</span> <span class="operator">=</span> <span class="number">0X10101</span>;</span><br><span class="line">System.out.println(<span class="string">&quot;n1=&quot;</span> + n1);</span><br><span class="line">System.out.println(<span class="string">&quot;n2=&quot;</span> + n2);</span><br><span class="line">System.out.println(<span class="string">&quot;n3=&quot;</span> + n3);</span><br><span class="line">System.out.println(<span class="string">&quot;n4=&quot;</span> + n4);</span><br><span class="line">System.out.println(<span class="number">0x23A</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong>进制的图示</strong></li></ul><blockquote><img src="https://image.cpen.top/image/202205091714710.png" alt="image-20220509171412620" style="zoom: 67%;" /><img src="https://image.cpen.top/image/202205091715746.png" alt="image-20220509171547659" style="zoom:67%;" /></blockquote><hr><p><strong>进制的转换(基本功)</strong></p><p><strong>进制转换的介绍</strong></p><ul><li>第一组：</li></ul><ol><li><p>二进制转十进制</p></li><li><p>八进制转十进制</p></li><li><p>十六进制转十进制</p></li></ol><ul><li>第二组：</li></ul><ol><li><p>十进制转二进制</p></li><li><p>十进制转八进制</p></li><li><p>十进制转十六进制</p></li></ol><ul><li>第三组</li></ul><ol><li><p>二进制转八进制</p></li><li><p>二进制转十六进制</p></li></ol><ul><li>第四组</li></ul><ol><li><p>八进制转二进制</p></li><li><p>十六进制转二进制</p></li></ol><ul><li><strong>其他进制转十进制</strong></li></ul><blockquote><img src="https://image.cpen.top/image/202205091721120.png" style="zoom: 67%;" /></blockquote><h3 id="十二-2进制转10进制">十二. 2进制转10进制</h3><p><strong>二进制转换成十进制示例</strong></p><blockquote><img src="https://image.cpen.top/image/202205091722031.png" alt="image-20220509172209929" style="zoom: 67%;" /></blockquote><h3 id="十三-8进制转10进制">十三. 8进制转10进制</h3><p><strong>八进制转换成十进制示例</strong></p><blockquote><p><img src="https://image.cpen.top/image/202205091726949.png" alt="image-20220509172629860"></p></blockquote><h3 id="十四-16进制转10进制">十四. 16进制转10进制</h3><p><strong>十六进制转换成十进制示例</strong></p><p>规则：<code>从最低位(右边)开始，将每个位上的数提取出来，乘以 16 的(位数-1)次方，然后求和</code>。</p><p>案例：请将 0x23A 转成十进制的数</p><p>0x23A = 10 * 16^0 + 3 * 16 ^ 1 + 2 * 16^2 = 10 + 48 + 512 = 570</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(<span class="number">0x23A</span>);<span class="comment">//570</span></span><br></pre></td></tr></table></figure><p>课堂练习：请将</p><p>0b110001100 转成 十进制</p><p>02456 转成十进制</p><p>0xA45 转成十进制</p><hr><p><strong>十进制转其它进制</strong></p><blockquote><img src="https://image.cpen.top/image/202205091733796.png" alt="image-20220509173320742" style="zoom: 67%;" /></blockquote><h3 id="十五-10进制转2进制">十五. 10进制转2进制</h3><p><strong>十进制转换成二进制</strong></p><p>规则：<code>将该数不断除以 2，直到商为 0 为止，然后将每步得到的余数倒过来，就是对应的二进制</code>。</p><p>案例：请将 <code>34</code> 转成二进制 = <code>0B00100010</code></p><blockquote><img src="https://image.cpen.top/image/202205091941102.png" alt="image-20220509194122002" style="zoom:50%;" /></blockquote><h3 id="十六-10进制转8进制">十六. 10进制转8进制</h3><p><strong>十进制转换成八进制</strong></p><p>规则：<code>将该数不断除以 8，直到商为 0 为止，然后将每步得到的余数倒过来，就是对应的八进制</code>。</p><p>案例：请将 <code>131</code> 转成八进制 =&gt; <code>0203</code></p><blockquote><img src="https://image.cpen.top/image/202205091945088.png" alt="image-20220509194522001" style="zoom:50%;" /></blockquote><h3 id="十七-10进制转16进制">十七. 10进制转16进制</h3><p><strong>十进制转换成十六进制</strong></p><p>规则：<code>将该数不断除以 16，直到商为 0 为止，然后将每步得到的余数倒过来，就是对应的十六进制</code>。</p><p>案例：请将 <code>237</code> 转成十六进制 =&gt; <code>0xED</code></p><blockquote><img src="https://image.cpen.top/image/202205091946894.png" alt="image-20220509194651804" style="zoom:50%;" /></blockquote><ul><li>课堂练习：(一定练习，使用计算器/用程序去验证)</li></ul><p>​123 转成 二进制 =&gt; ?</p><p>​678 转成八进制 =&gt; 04126</p><p>​8912 转成十六进制 =&gt; ?</p><hr><p><strong>二进制转换成八进制、十六进制</strong></p><blockquote><img src="https://image.cpen.top/image/202205091950138.png" alt="image-20220509195013056" style="zoom:67%;" /></blockquote><h3 id="十八-2进制转8进制">十八. 2进制转8进制</h3><p>规则：<code>从低位开始,将二进制数每三位一组，转成对应的八进制数即可</code>。</p><p>案例：请将 <code>ob11010101</code> 转成八进制</p><p>ob11(3)010(2)101(5) =&gt; <code>0325</code></p><blockquote><img src="https://image.cpen.top/image/202205091954021.png" alt="image-20220509195435973" style="zoom: 67%;" /></blockquote><h3 id="十九-2进制转16进制">十九. 2进制转16进制</h3><p>规则：<code>从低位开始，将二进制数每四位一组，转成对应的十六进制数即可</code>。</p><p>案例：请将 <code>ob11010101</code> 转成十六进制</p><p>ob1101(D)0101(5) = <code>0xD5 </code></p><blockquote><img src="https://image.cpen.top/image/202205091957282.png" alt="image-20220509195728223" style="zoom:67%;" /></blockquote><p>课堂练习：请将</p><p>​0b11100101 转成 八进制</p><p>​0b1110010110 转成 十六进制 =&gt; 0x396</p><hr><p><strong>八进制、十六进制转成二进制</strong></p><blockquote><img src="https://image.cpen.top/image/202205091959650.png" alt="image-20220509195905562" style="zoom:67%;" /></blockquote><h3 id="二十-8进制转2进制">二十. 8进制转2进制</h3><p>规则：<code>将八进制数每 1 位，转成对应的一个 3 位的二进制数即可</code>。</p><p>案例：请将 <code>0237</code> 转成二进制</p><p>02(010)3(011)7(111) = <code>0b10011111 </code></p><blockquote><img src="https://image.cpen.top/image/202205092004043.png" alt="image-20220509200424994" style="zoom: 67%;" /></blockquote><h3 id="二一-16进制转2进制">二一. 16进制转2进制</h3><p>规则：<code>将十六进制数每 1 位，转成对应的</code> <strong><code>4 位的一个二进制数</code></strong><code>即可</code>。</p><p>案例：请将 <code>0x23B</code> 转成二进制</p><p>0x2(0010)3(0011)B(1011) = <code>0b001000111011</code></p><blockquote><img src="https://image.cpen.top/image/202205092015230.png" alt="image-20220509201525174" style="zoom:67%;" /></blockquote><ul><li>课堂练习：请将</li></ul><p>01230 转成 二进制</p><p>0xAB29 转成二进制 =&gt; 0xA(1010)B(1011)2(0010)9(1001) =&gt;0b1010101100101001</p><hr><h3 id="二二-位运算思考题">二二. 位运算思考题</h3><p><strong>位运算的思考题</strong></p><ol><li>请看下面的代码段，回答 a,b,c,d,e 结果是多少?</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">maiin</span><span class="params">(String []args)</span> </span><br><span class="line">&#123; </span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a=<span class="number">1</span>&gt;&gt;<span class="number">2</span>;<span class="comment">// 1 向右位移 2 位 </span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> b=-<span class="number">1</span>&gt;&gt;<span class="number">2</span>;<span class="comment">//算术右移 </span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> c=<span class="number">1</span>&lt;&lt;<span class="number">2</span>;<span class="comment">//算术左移 </span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> d=-<span class="number">1</span>&lt;&lt;<span class="number">2</span>;<span class="comment">// </span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> e=<span class="number">3</span>&gt;&gt;&gt;<span class="number">2</span>;<span class="comment">//无符号右移 </span></span><br><span class="line"></span><br><span class="line"><span class="comment">//a,b,c,d,e 结果是多少 </span></span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;a=&quot;</span>+a); </span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;b=&quot;</span>+b); </span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;c=&quot;</span>+c); </span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;d=&quot;</span>+d); </span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;e=&quot;</span>+e); </span><br><span class="line"></span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><ol start="2"><li>请回答在 java 中，下面的表达式运算的结果是: (位操作)， 晚上练习</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">~<span class="number">2</span>=?<span class="comment">// 按位取反 </span></span><br><span class="line"></span><br><span class="line"><span class="number">2</span>&amp;<span class="number">3</span>=?<span class="comment">// 2 按位与 3 </span></span><br><span class="line"></span><br><span class="line"><span class="number">2</span>|<span class="number">3</span>=? </span><br><span class="line"></span><br><span class="line">~-<span class="number">5</span>=? </span><br><span class="line"></span><br><span class="line"><span class="number">13</span>&amp;<span class="number">7</span>=? </span><br><span class="line"></span><br><span class="line"><span class="number">5</span>|<span class="number">4</span>=? </span><br><span class="line"></span><br><span class="line">-<span class="number">3</span>^<span class="number">3</span>=?<span class="comment">//^ 按位异或</span></span><br></pre></td></tr></table></figure><hr><h3 id="二三-原码反码补码">二三. 原码反码补码</h3><p><strong>二进制在运算中的说明</strong></p><blockquote><img src="https://image.cpen.top/image/202205092025779.png" alt="image-20220509202541652" style="zoom: 67%;" /></blockquote><p><strong><code>原码、反码、补码(重点 难点)</code></strong></p><blockquote><img src="https://image.cpen.top/image/202205092027076.png" alt="image-20220509202730922" style="zoom:67%;" /><p>第 7 点，因为补码把正数、负数统一起来了</p></blockquote><hr><h3 id="二四-位运算">二四. 位运算</h3><p><strong>位运算符</strong></p><ul><li>java 中有 7 个位运算(&amp;、|、^、~、&gt;&gt;、&lt;&lt;和 &gt;&gt;&gt;)</li></ul><blockquote><img src="https://image.cpen.top/image/202205092039745.png" alt="image-20220509203957600" style="zoom: 50%;" /></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//位运算</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BitOperator</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2&amp;3</span></span><br><span class="line"><span class="comment">//看老师的推导过程</span></span><br><span class="line"><span class="comment">//1. 先得到 2的补码 =&gt; 2的原码 00000000 00000000 00000000 00000010</span></span><br><span class="line"><span class="comment">//   2的补码 00000000 00000000 00000000 00000010</span></span><br><span class="line"><span class="comment">//2. 3的补码 3的原码 00000000 00000000 00000000 00000011</span></span><br><span class="line"><span class="comment">//   3的补码 00000000 00000000 00000000 00000011</span></span><br><span class="line"><span class="comment">//3. 按位&amp;</span></span><br><span class="line"><span class="comment">//   00000000 00000000 00000000 00000010</span></span><br><span class="line"><span class="comment">//   00000000 00000000 00000000 00000011 </span></span><br><span class="line"><span class="comment">//   00000000 00000000 00000000 00000010 &amp; 运算后的补码</span></span><br><span class="line"><span class="comment">//   运算后的原码 也是  00000000 00000000 00000000 00000010</span></span><br><span class="line"><span class="comment">//   结果就是  2</span></span><br><span class="line">System.out.println(<span class="number">2</span>&amp;<span class="number">3</span>);<span class="comment">//2</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// ~-2</span></span><br><span class="line"><span class="comment">//推导</span></span><br><span class="line"><span class="comment">//1. 先得到 -2的原码 10000000 00000000 00000000 00000010</span></span><br><span class="line"><span class="comment">//2. -2的 反码     11111111 11111111 11111111 11111101</span></span><br><span class="line"><span class="comment">//3. -2的 补码       11111111 11111111 11111111 11111110</span></span><br><span class="line"><span class="comment">//4. ~-2操作        00000000 00000000 00000000 00000001运算后的补码</span></span><br><span class="line"><span class="comment">//5. 运算后的原码 就是 00000000 00000000 00000000 00000001 =&gt; 1</span></span><br><span class="line">System.out.println(~-<span class="number">2</span>);<span class="comment">//1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//推导</span></span><br><span class="line"><span class="comment">//1. 得到2的补码 00000000 00000000 00000000 00000010</span></span><br><span class="line"><span class="comment">//2. ~2操作     11111111 11111111 11111111 11111101  运算后的补码</span></span><br><span class="line"><span class="comment">//3. 运算后的反码  11111111 11111111 11111111 11111100</span></span><br><span class="line"><span class="comment">//4. 运算后的原码  10000000 00000000 00000000 00000011=&gt;-3</span></span><br><span class="line">System.out.println(~<span class="number">2</span>); <span class="comment">//-3</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>位运算符</strong></p><ul><li>还有 3 个位运算符 <code>&gt;&gt;、&lt;&lt; 和 &gt;&gt;&gt;</code> , 运算规则:</li></ul><ol><li><p>算术右移 &gt;&gt;：低位溢出,符号位不变,并用符号位补溢出的高位</p></li><li><p>算术左移 &lt;&lt;: 符号位不变,低位补 0</p></li><li><p>&gt;&gt;&gt; 逻辑右移也叫无符号右移,运算规则是: 低位溢出，高位补 0</p></li><li><p>特别说明：没有 &lt;&lt;&lt; 符号</p></li></ol><ul><li>应用案例 BitOperator02.java</li></ul><ol><li><p>int a=1&gt;&gt;2; //1 =&gt; 00000001 =&gt; 00000000 本质 1 / 2 / 2 =0</p></li><li><p>int c=1&lt;&lt;2; //1 =&gt; 00000001 =&gt; 00000100 本质 1 * 2 * 2 = 4</p></li></ol><blockquote><img src="https://image.cpen.top/image/202205092121652.png" alt="image-20220509212136583" style="zoom:67%;" /></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BitOperator02</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">System.out.println(<span class="number">1</span> &gt;&gt; <span class="number">2</span>); <span class="comment">//0</span></span><br><span class="line">System.out.println(<span class="number">1</span> &lt;&lt; <span class="number">2</span>); <span class="comment">//4</span></span><br><span class="line">System.out.println(<span class="number">4</span> &lt;&lt; <span class="number">3</span>); <span class="comment">// 4 * 2 * 2 * 2 = 32</span></span><br><span class="line">System.out.println(<span class="number">15</span> &gt;&gt; <span class="number">2</span>); <span class="comment">// 15 / 2 / 2 = 3</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>完成前面的案例</li></ul><p>建议：掌握老师讲解的即可，不用再深入</p><hr><p><strong>本章作业</strong></p><blockquote><img src="https://image.cpen.top/image/202205092125669.png" alt="image-20220509212539569" style="zoom:50%;" /></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(-<span class="number">10.4</span>%<span class="number">3</span>); <span class="comment">// -1.4近似值</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> i=<span class="number">66</span>;</span><br><span class="line">System.out.println(++i+i); <span class="comment">//134</span></span><br></pre></td></tr></table></figure><blockquote><img src="https://image.cpen.top/image/202205092135664.png" alt="image-20220509213557540" style="zoom:50%;" /></blockquote><blockquote><img src="https://image.cpen.top/image/202205092137307.png" alt="image-20220509213758196" style="zoom:50%;" /></blockquote><hr>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 运算符 </tag>
            
            <tag> 进制 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>02_Java-变量-数据类型</title>
      <link href="/blog/posts/e0c2d865.html"/>
      <url>/blog/posts/e0c2d865.html</url>
      
        <content type="html"><![CDATA[<p>摘要：<code>编码</code> + <code>[byte , short , int , long , float ,double] char , boolean</code><span id="more"></span></p><h1 id="02-Java-变量-数据类型">02_Java-变量-数据类型</h1><p><a href="https://www.bilibili.com/video/BV1fh411y7R8">视频🔗：https://www.bilibili.com/video/BV1fh411y7R8</a><br><a href="https://blog.csdn.net/cpen_web">博客🔗：https://blog.csdn.net/cpen_web</a></p><hr><h2 id="一-变量">一. 变量</h2><h3 id="变量原理">变量原理</h3><p><strong>变量</strong></p><ul><li>为什么需要变量</li></ul><blockquote><p>一个程序就是一个世界</p><img src="https://image.cpen.top/image/202205081522508.png" alt="image-20220508152241409" style="zoom:50%;" /></blockquote><ul><li><code>变量是程序的基本组成单位</code></li></ul><blockquote><img src="https://image.cpen.top/image/202205081525550.png" alt="image-20220508152541414" style="zoom:50%;" /></blockquote><ul><li><strong><code>简单的原理示意图</code></strong></li></ul><blockquote><img src="https://image.cpen.top/image/202205081526570.png" alt="image-20220508152603437" style="zoom:67%;" /></blockquote><hr><h3 id="变量概念">变量概念</h3><p>**变(变化)量(值)的介绍 **</p><ul><li>概念</li></ul><p>​<strong><code>变量相当于内存中一个数据存储空间</code><strong>的表示，你可以把变量看做是一个房间的门牌号，通过</strong>门牌号</strong>我们可以找到房</p><p>间，而通过变量名可以访问到变量(值)。</p><ul><li>变量使用的基本步骤</li></ul><ol><li>声明变量</li></ol><p>​int a;</p><ol start="2"><li>赋值</li></ol><p>​a = 60; //应该这么说: 把 60 赋给 a</p><ol start="3"><li>使用 System.out.println(a);</li></ol><p>​//也可以一步到位[int a = 60; 通常我们是一步完成]</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Var01</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//声明变量</span></span><br><span class="line"><span class="type">int</span> a;</span><br><span class="line">a = <span class="number">100</span>;</span><br><span class="line">System.out.println(a); </span><br><span class="line"></span><br><span class="line"><span class="comment">//还可以这样使用</span></span><br><span class="line"><span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">800</span>;</span><br><span class="line">System.out.println(b); </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="变量入门">变量入门</h3><p><strong>变量快速入门</strong></p><p>变量使用入门案例</p><p>看演示并对代码进行说明， <strong>演示记录 人的信息的代码</strong></p><blockquote><p><img src="https://image.cpen.top/image/202205081541203.png" alt="image-20220508154108162"></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Var02</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//记录人的信息</span></span><br><span class="line"><span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> <span class="number">30</span>;</span><br><span class="line"><span class="type">double</span> <span class="variable">score</span> <span class="operator">=</span> <span class="number">88.9</span>;</span><br><span class="line"><span class="type">char</span> <span class="variable">gender</span> <span class="operator">=</span> <span class="string">&#x27;男&#x27;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;king&quot;</span>;</span><br><span class="line"><span class="comment">//输出信息, 快捷键</span></span><br><span class="line">System.out.println(<span class="string">&quot;人的信息如下:&quot;</span>);</span><br><span class="line">System.out.println(name);</span><br><span class="line">System.out.println(age);</span><br><span class="line">System.out.println(score);</span><br><span class="line">System.out.println(gender);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="变量细节">变量细节</h3><ul><li>变量使用注意事项</li></ul><blockquote><img src="https://image.cpen.top/image/202205081544320.png" alt="image-20220508154442205" style="zoom: 50%;" /></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">VarDetail</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//变量必须先声明，后使用, 即有顺序</span></span><br><span class="line"><span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">50</span>;<span class="comment">//int</span></span><br><span class="line">System.out.println(a);<span class="comment">//50</span></span><br><span class="line"><span class="comment">//该区域的数据/值可以在同一类型范围内不断变化</span></span><br><span class="line"><span class="comment">//a = &quot;jack&quot;; //×</span></span><br><span class="line">a = <span class="number">88</span>; <span class="comment">//对</span></span><br><span class="line">System.out.println(a);<span class="comment">//88</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//变量在同一个作用域内不能重名</span></span><br><span class="line"><span class="comment">//int a = 77;//错误</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">666</span>;<span class="comment">//对</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="加号使用">加号使用</h3><ul><li><strong><code>程序中 +号的使用</code></strong></li></ul><blockquote><p><img src="https://image.cpen.top/image/202205081556066.png" alt="image-20220508155649918"></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Plus</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">System.out.println(<span class="number">100</span> + <span class="number">98</span>); <span class="comment">//198</span></span><br><span class="line">System.out.println(<span class="string">&quot;100&quot;</span> + <span class="number">98</span>);<span class="comment">//10098</span></span><br><span class="line"></span><br><span class="line">System.out.println(<span class="number">100</span> + <span class="number">3</span> + <span class="string">&quot;hello&quot;</span>);<span class="comment">//103hello</span></span><br><span class="line">System.out.println(<span class="string">&quot;hello&quot;</span> + <span class="number">100</span> +<span class="number">3</span>); <span class="comment">//hello1003</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="二-数据类型">二. 数据类型</h2><p><strong>数据类型</strong></p><p>每一种数据都定义了明确的数据类型，在内存中分配了不同大小的内存空间(字节)。</p><blockquote><img src="https://image.cpen.top/image/202205081601014.png" alt="image-20220508160100958" style="zoom: 67%;" /><hr><ul><li>[x] <code>上图说明 [老韩要求小伙伴，背下来!!!!] </code></li></ul><ol><li><strong>java 数据类型分为两大类 <code>基本数据类型， 引用类型</code></strong></li><li>**基本数据类型有 <code>8 种 数值型 [byte , short , int , long , float ,double] char , boolean</code> **</li><li><strong><code>引用类型 [类，接口， 数组]</code></strong></li></ol></blockquote><hr><h3 id="整型">整型</h3><p><strong>整数类型</strong></p><ul><li>基本介绍</li></ul><blockquote><p>Java 的整数类型就是用于存放整数值的，比如 12 , 30, 3456 等等</p></blockquote><ul><li>案例演示：</li></ul><blockquote><p>byte n1 = 10;</p><p>short n2 = 10;</p><p>int n3 = 10;//4 个字节</p><p>long n4 = 10; //8 个字节</p><img src="https://image.cpen.top/image/202205081615524.png" alt="image-20220508161536496" style="zoom: 80%;" /></blockquote><ul><li><strong><code>整型的类型</code></strong></li></ul><blockquote><img src="https://image.cpen.top/image/202205081612814.png" alt="image-20220508161227727" style="zoom: 67%;" /></blockquote><ul><li><strong><code>整型的使用细节</code></strong> IntDetail.java</li></ul><blockquote><p><code>bit：计算机中的最小存储单位</code> ；<code>byte：计算机中基本存储单位</code></p><img src="https://image.cpen.top/image/202205081740262.png" alt="image-20220508174011108" style="zoom: 50%;" /><img src="https://image.cpen.top/image/202205081749504.png" alt="image-20220508174900285" style="zoom: 67%;" /></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IntDetail</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Java的整型常量（具体值）默认为 int 型，声明long型常量须后加‘l’或‘L’</span></span><br><span class="line"><span class="type">int</span> <span class="variable">n1</span> <span class="operator">=</span> <span class="number">1</span>;<span class="comment">//4个字节</span></span><br><span class="line"><span class="comment">//int n2 = 1L;//不对</span></span><br><span class="line"><span class="type">long</span> <span class="variable">n3</span> <span class="operator">=</span> <span class="number">1L</span>;<span class="comment">//对</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="浮点数">浮点数</h3><p><strong>浮点类型</strong></p><ul><li>基本介绍</li></ul><blockquote><p>Java 的浮点类型可以表示一个小数，比如 123.4 ，7.8 ，0.12 等等</p></blockquote><ul><li>案例演示</li></ul><blockquote><img src="https://image.cpen.top/image/202205081756499.png" alt="image-20220508175600469" style="zoom: 67%;" /></blockquote><ul><li><code>浮点型的分类</code></li></ul><blockquote><img src="https://image.cpen.top/image/202205081756711.png" alt="image-20220508175638655" style="zoom: 67%;" /></blockquote><ul><li><strong>说明一下</strong></li></ul><ol><li>关于浮点数在机器中存放形式的简单说明,<strong><code>浮点数=符号位+指数位+尾数位 </code></strong></li><li>尾数部分可能丢失，<code>造成精度损失</code>(小数都是近似值)。</li></ol><hr><p><strong>浮点数细节</strong></p><ul><li><code>浮点型使用细节</code> FloatDetail.java</li></ul><blockquote><img src="https://image.cpen.top/image/202205081759392.png" alt="image-20220508175933221" style="zoom: 50%;" /></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FloatDetail</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Java 的浮点型常量(具体值)默认为double型，声明float型常量，须后加‘f’或‘F&#x27;</span></span><br><span class="line"><span class="comment">//float num1 = 1.1; //错误</span></span><br><span class="line"><span class="type">float</span> <span class="variable">num2</span> <span class="operator">=</span> <span class="number">1.1F</span>; <span class="comment">//对的</span></span><br><span class="line"><span class="type">double</span> <span class="variable">num3</span> <span class="operator">=</span> <span class="number">1.1</span>; <span class="comment">//对</span></span><br><span class="line"><span class="type">double</span> <span class="variable">num4</span> <span class="operator">=</span> <span class="number">1.1f</span>; <span class="comment">//对</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//十进制数形式：如：5.12       512.0f        .512   (必须有小数点）</span></span><br><span class="line"><span class="type">double</span> <span class="variable">num5</span> <span class="operator">=</span> <span class="number">.123</span>; <span class="comment">//等价 0.123</span></span><br><span class="line">System.out.println(num5);</span><br><span class="line"><span class="comment">//科学计数法形式:如：5.12e2 [5.12 * 10的2次方 ]      5.12E-2   [5.12 / 10的2次方] </span></span><br><span class="line">System.out.println(<span class="number">5.12e2</span>);<span class="comment">//512.0</span></span><br><span class="line">System.out.println(<span class="number">5.12E-2</span>);<span class="comment">//0.0512</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//通常情况下，应该使用double型，因为它比float型更精确。</span></span><br><span class="line"><span class="comment">//[举例说明]double num9 = 2.1234567851;float num10 =  2.1234567851F;</span></span><br><span class="line"><span class="type">double</span> <span class="variable">num9</span> <span class="operator">=</span>  <span class="number">2.1234567851</span>;</span><br><span class="line"><span class="type">float</span> <span class="variable">num10</span> <span class="operator">=</span>  <span class="number">2.1234567851F</span>;</span><br><span class="line">System.out.println(num9);</span><br><span class="line">System.out.println(num10);</span><br><span class="line"></span><br><span class="line"><span class="comment">//浮点数使用陷阱: 2.7 和 8.1 / 3  比较</span></span><br><span class="line"><span class="comment">//看看一段代码</span></span><br><span class="line"><span class="type">double</span> <span class="variable">num11</span> <span class="operator">=</span> <span class="number">2.7</span>;</span><br><span class="line"><span class="type">double</span> <span class="variable">num12</span> <span class="operator">=</span> <span class="number">2.7</span>;<span class="comment">//8.1 / 3; //2.7</span></span><br><span class="line">System.out.println(num11);<span class="comment">//2.7</span></span><br><span class="line">System.out.println(num12);<span class="comment">//接近2.7的一个小数，而不是2.7</span></span><br><span class="line"><span class="comment">//得到一个重要的使用点: 当我们对运算结果是小数的进行相等判断是，要小心</span></span><br><span class="line"><span class="comment">//应该是以两个数的差值的绝对值，在某个精度范围内判断</span></span><br><span class="line"><span class="keyword">if</span>( num11 == num12) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;num11 == num12 相等&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//正确的写法 , ctrl + / 注释快捷键, 再次输入就取消注释</span></span><br><span class="line"><span class="keyword">if</span>(Math.abs(num11 - num12) &lt; <span class="number">0.000001</span> ) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;差值非常小，到我的规定精度，认为相等...&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 可以通过java API  来看 下一个视频介绍如何使用API</span></span><br><span class="line">System.out.println(Math.abs(num11 - num12));</span><br><span class="line"><span class="comment">//细节:如果是直接查询得的的小数或者直接赋值，是可以判断相等</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><img src="https://image.cpen.top/image/202205081810094.png" alt="image-20220508181024027" style="zoom: 67%;" /><img src="https://image.cpen.top/image/202205081819949.png" alt="image-20220508181900845" style="zoom:67%;" /></blockquote><hr><h3 id="Java-API文档">Java API文档</h3><p><strong>Java API 文档</strong></p><blockquote><img src="https://image.cpen.top/image/202205081822551.png" alt="image-20220508182220368" style="zoom:50%;" /><img src="https://image.cpen.top/image/202205081851674.png" alt="image-20220508185115534" style="zoom: 67%;" /></blockquote><hr><h3 id="字符型">字符型</h3><p><strong>字符类型(char)</strong></p><ul><li>基本介绍</li></ul><p>​字符类型可以表示<code>单个字符</code>,字符类型是 char，char 是两个字节(可以存放汉字)，多个字符我们用字符串 String(我们后面详细讲解 String)</p><ul><li><strong>案例演示</strong> Char01.java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#代码 </span><br><span class="line"><span class="type">char</span> <span class="variable">c1</span> <span class="operator">=</span> <span class="string">&#x27;a&#x27;</span>; </span><br><span class="line"><span class="type">char</span> <span class="variable">c2</span> <span class="operator">=</span> <span class="string">&#x27;\t&#x27;</span>; </span><br><span class="line"><span class="type">char</span> <span class="variable">c3</span> <span class="operator">=</span> <span class="string">&#x27;韩&#x27;</span>; </span><br><span class="line"><span class="type">char</span> <span class="variable">c4</span> <span class="operator">=</span> <span class="number">97</span>;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//演示char的基本使用</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Char01</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">char</span> <span class="variable">c1</span> <span class="operator">=</span> <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"><span class="type">char</span> <span class="variable">c2</span> <span class="operator">=</span> <span class="string">&#x27;\t&#x27;</span>;</span><br><span class="line"><span class="type">char</span> <span class="variable">c3</span> <span class="operator">=</span> <span class="string">&#x27;韩&#x27;</span>;</span><br><span class="line"><span class="type">char</span> <span class="variable">c4</span> <span class="operator">=</span> <span class="number">97</span>; <span class="comment">//说明: 字符类型可以直接存放一个数字</span></span><br><span class="line"></span><br><span class="line">System.out.println(c1);</span><br><span class="line">System.out.println(c2);</span><br><span class="line">System.out.println(c3);</span><br><span class="line">System.out.println(c4);<span class="comment">//当输出c4时候，会输出97表示的字符 =&gt; 编码的概念（输出为 a）</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p><strong>字符型细节</strong></p><ul><li><strong><code>字符类型使用细节</code></strong></li></ul><blockquote><p><img src="https://image.cpen.top/image/202205081910193.png" alt="image-20220508191001995"></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CharDetail</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//在java中，char的本质是一个整数，在默认输出时，是unicode码对应的字符</span></span><br><span class="line"><span class="comment">//要输出对应的数字，可以(int)字符</span></span><br><span class="line"><span class="type">char</span> <span class="variable">c1</span> <span class="operator">=</span> <span class="number">97</span>;</span><br><span class="line">System.out.println(c1); <span class="comment">// a</span></span><br><span class="line"></span><br><span class="line"><span class="type">char</span> <span class="variable">c2</span> <span class="operator">=</span> <span class="string">&#x27;a&#x27;</span>; <span class="comment">//输出&#x27;a&#x27; 对应的 数字</span></span><br><span class="line">System.out.println((<span class="type">int</span>)c2);<span class="comment">//强转为 int类型</span></span><br><span class="line"><span class="type">char</span> <span class="variable">c3</span> <span class="operator">=</span> <span class="string">&#x27;韩&#x27;</span>;</span><br><span class="line">System.out.println((<span class="type">int</span>)c3);<span class="comment">//38889</span></span><br><span class="line"><span class="type">char</span> <span class="variable">c4</span> <span class="operator">=</span> <span class="number">38889</span>;</span><br><span class="line">System.out.println(c4);<span class="comment">//韩</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//char类型是可以进行运算的，相当于一个整数，因为它都对应有Unicode码.</span></span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&#x27;a&#x27;</span> + <span class="number">10</span>);<span class="comment">//107</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//课堂小测试</span></span><br><span class="line"><span class="type">char</span> <span class="variable">c5</span> <span class="operator">=</span> <span class="string">&#x27;b&#x27;</span> + <span class="number">1</span>;<span class="comment">//98+1==&gt; 99</span></span><br><span class="line">System.out.println((<span class="type">int</span>)c5); <span class="comment">//99</span></span><br><span class="line">System.out.println(c5); <span class="comment">//99 -&gt; 对应的字符 -&gt; 编码表ASCII(规定好的) =&gt; c</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><img src="https://image.cpen.top/image/202205081912794.png" alt="image-20220508191250728" style="zoom: 67%;" /><hr><p>ASCII码对照表：</p><img src="https://image.cpen.top/image/202205081920627.png" alt="ASCII码对照表" style="zoom:50%;" /></blockquote><hr><p><strong>字符型本质</strong></p><ul><li><strong><code>字符类型本质探讨</code></strong></li></ul><blockquote><img src="https://image.cpen.top/image/202205081923962.png" alt="image-20220508192303779" style="zoom:67%;" /></blockquote><hr><p><strong>常用编码</strong></p><blockquote><ul><li><code>ASCII 码介绍(了解) </code></li></ul><img src="https://image.cpen.top/image/202205081938505.png" alt="image-20220508193828402" style="zoom:67%;" /><ul><li><code>Unicode 编码介绍(了解)</code></li></ul><img src="https://image.cpen.top/image/202205081939699.png" alt="image-20220508193912565" style="zoom:67%;" /><ul><li><code>UTF-8 编码介绍(了解) </code></li></ul><img src="https://image.cpen.top/image/202205081939863.png" alt="image-20220508193948746" style="zoom:67%;" /></blockquote><hr><h3 id="布尔类型">布尔类型</h3><p><strong>布尔类型</strong></p><ul><li>布尔类型：boolean</li></ul><blockquote><img src="https://image.cpen.top/image/202205081949760.png" alt="image-20220508194909551" style="zoom: 50%;" /><img src="https://image.cpen.top/image/202205081958309.png" alt="image-20220508195843226" style="zoom:50%;" /></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Boolean01</span> &#123; </span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//演示判断成绩是否通过的案例</span></span><br><span class="line"><span class="comment">//定义一个布尔变量</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">isPass</span> <span class="operator">=</span> <span class="literal">true</span>;<span class="comment">//</span></span><br><span class="line"><span class="keyword">if</span>(isPass == <span class="literal">true</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;考试通过，恭喜&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;考试没有通过，下次努力&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="基本数据类型转换">基本数据类型转换</h3><h4 id="自动类型转">自动类型转</h4><p><strong>自动类型转换基础</strong></p><ul><li><strong><code>自动类型转换</code></strong></li></ul><blockquote><img src="https://image.cpen.top/image/202205082000505.png" alt="image-20220508200046295" style="zoom:50%;" /></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AutoConvert</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//演示自动转换</span></span><br><span class="line"><span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="string">&#x27;a&#x27;</span>;<span class="comment">//ok char -&gt; int</span></span><br><span class="line"><span class="type">double</span> <span class="variable">d1</span> <span class="operator">=</span> <span class="number">80</span>; <span class="comment">//ok int -&gt; double</span></span><br><span class="line">System.out.println(num);<span class="comment">//97</span></span><br><span class="line">System.out.println(d1);<span class="comment">//80.0</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p><strong>自动类型转换细节</strong></p><ul><li><code>自动类型转换注意和细节</code></li></ul><blockquote><img src="https://image.cpen.top/image/202205082001882.png" alt="image-20220508200129693" style="zoom:50%;" /></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//自动类型转换细节</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AutoConvertDetail</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//细节1： 有多种类型的数据混合运算时，</span></span><br><span class="line"><span class="comment">//系统首先自动将所有数据转换成容量最大的那种数据类型，然后再进行计算</span></span><br><span class="line"><span class="type">int</span> <span class="variable">n1</span> <span class="operator">=</span> <span class="number">10</span>; <span class="comment">//ok</span></span><br><span class="line"><span class="comment">//float d1 = n1 + 1.1;//错误 n1 + 1.1 =&gt; 结果类型是 double</span></span><br><span class="line"><span class="comment">//double d1 = n1 + 1.1;//对 n1 + 1.1 =&gt; 结果类型是 double</span></span><br><span class="line"><span class="type">float</span> <span class="variable">d1</span> <span class="operator">=</span> n1 + <span class="number">1.1F</span>;<span class="comment">//对 n1 + 1.1 =&gt; 结果类型是 float</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//细节2: 当我们把精度(容量)大 的数据类型赋值给精度(容量)小 的数据类型时，</span></span><br><span class="line"><span class="comment">//就会报错，反之就会进行自动类型转换。</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//int n2 = 1.1;//错误 double -&gt; int </span></span><br><span class="line"></span><br><span class="line"><span class="comment">//细节3: (byte, short) 和 char之间不会相互自动转换</span></span><br><span class="line"><span class="comment">//当把具体数赋给 byte 时，(1)先判断该数是否在byte范围内，如果是就可以</span></span><br><span class="line"><span class="type">byte</span> <span class="variable">b1</span> <span class="operator">=</span> <span class="number">10</span>; <span class="comment">//对  , -128-127</span></span><br><span class="line"><span class="comment">// int n2 = 1; //n2 是int </span></span><br><span class="line"><span class="comment">// byte b2 = n2; //错误，原因： 如果是变量赋值，判断类型</span></span><br><span class="line"><span class="comment">// </span></span><br><span class="line"><span class="comment">// char c1 = b1; //错误， 原因 byte 不能自动转成 char</span></span><br><span class="line"><span class="comment">// </span></span><br><span class="line"><span class="comment">// </span></span><br><span class="line"></span><br><span class="line"><span class="comment">//细节4: byte，short，char  他们三者可以计算，在计算时首先转换为int类型</span></span><br><span class="line"></span><br><span class="line"><span class="type">byte</span> <span class="variable">b2</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="type">byte</span> <span class="variable">b3</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"><span class="type">short</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="comment">//short s2 = b2 + s1;//错, b2 + s1 =&gt; int</span></span><br><span class="line"><span class="type">int</span> <span class="variable">s2</span> <span class="operator">=</span> b2 + s1;<span class="comment">//对, b2 + s1 =&gt; int</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//byte b4 = b2 + b3; //错误: b2 + b3 =&gt; int</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//boolean 不参与转换</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">pass</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line"><span class="comment">//int num100 = pass;// boolean 不参与类型的自动转换</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//自动提升原则： 表达式结果的类型自动提升为 操作数中最大的类型</span></span><br><span class="line"><span class="comment">//看一道题</span></span><br><span class="line"></span><br><span class="line"><span class="type">byte</span> <span class="variable">b4</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="type">short</span> <span class="variable">s3</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">num200</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="type">float</span> <span class="variable">num300</span> <span class="operator">=</span> <span class="number">1.1F</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">double</span> <span class="variable">num500</span> <span class="operator">=</span> b4 + s3 + num200 + num300; <span class="comment">//float -&gt; double</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h4 id="强制类型转换">强制类型转换</h4><p><strong><code>强制类型转换</code></strong></p><ul><li>介绍</li></ul><p>​自动类型转换的逆过程，<strong>将容量大的数据类型转换为容量小的数据类型</strong>。使用时要加上强制转换符 ( )，但可能造成 <strong>精度降低或溢出</strong>,<code>格外要注意</code>。</p><ul><li>案例演示 ForceConvert.java</li></ul><blockquote><img src="https://image.cpen.top/image/202205082035050.png" alt="image-20220508203534000" style="zoom: 67%;" /></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ForceConvert</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//演示强制类型转换</span></span><br><span class="line"><span class="type">int</span> <span class="variable">n1</span> <span class="operator">=</span> (<span class="type">int</span>)<span class="number">1.9</span>;</span><br><span class="line">System.out.println(<span class="string">&quot;n1=&quot;</span> + n1);<span class="comment">//1, 造成精度损失</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">n2</span> <span class="operator">=</span> <span class="number">2000</span>;</span><br><span class="line"><span class="type">byte</span> <span class="variable">b1</span> <span class="operator">=</span> (<span class="type">byte</span>)n2;</span><br><span class="line">System.out.println(<span class="string">&quot;b1=&quot;</span> + b1);<span class="comment">//造成 数据溢出</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><ul><li><code>强制类型转换细节说明</code></li></ul><blockquote><img src="https://image.cpen.top/image/202205082040412.png" alt="image-20220508204000221" style="zoom:67%;" /></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ForceConvertDetail</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//演示强制类型转换</span></span><br><span class="line"><span class="comment">//强转符号只针对于最近的操作数有效，往往会使用小括号提升优先级</span></span><br><span class="line"><span class="comment">//int x = (int)10*3.5+6*1.5;//编译错误： double -&gt; int </span></span><br><span class="line"><span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> (<span class="type">int</span>)(<span class="number">10</span>*<span class="number">3.5</span>+<span class="number">6</span>*<span class="number">1.5</span>);<span class="comment">// (int)44.0 -&gt; 44</span></span><br><span class="line">System.out.println(x);<span class="comment">//44</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">char</span> <span class="variable">c1</span> <span class="operator">=</span> <span class="number">100</span>; <span class="comment">//ok</span></span><br><span class="line"><span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> <span class="number">100</span>; <span class="comment">//ok</span></span><br><span class="line"><span class="comment">//char c2 = m; //错误</span></span><br><span class="line"><span class="type">char</span> <span class="variable">c3</span> <span class="operator">=</span> (<span class="type">char</span>)m; <span class="comment">//ok</span></span><br><span class="line">System.out.println(c3);<span class="comment">//100对应的字符, d字符</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="类型转换练习">类型转换练习</h3><ul><li>基本数据类型转换-练习题</li></ul><blockquote><img src="https://image.cpen.top/image/202205082047938.png" alt="image-20220508204706715" style="zoom:67%;" /></blockquote><hr><h3 id="基本数据类型和String类型的转换">基本数据类型和String类型的转换</h3><p><strong>基本数据类型和 String 类型的转换</strong></p><ul><li>介绍和使用</li></ul><blockquote><img src="https://image.cpen.top/image/202205082051513.png" alt="image-20220508205109331" style="zoom:67%;" /></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StringToBasic</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//基本数据类型 -&gt; String</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">n1</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line"><span class="type">float</span> <span class="variable">f1</span> <span class="operator">=</span> <span class="number">1.1F</span>;</span><br><span class="line"><span class="type">double</span> <span class="variable">d1</span> <span class="operator">=</span> <span class="number">4.5</span>;</span><br><span class="line"><span class="type">boolean</span> <span class="variable">b1</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> n1 + <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">s2</span> <span class="operator">=</span> f1 + <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">s3</span> <span class="operator">=</span> d1 + <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">s4</span> <span class="operator">=</span> b1 + <span class="string">&quot;&quot;</span>;</span><br><span class="line">System.out.println(s1 + <span class="string">&quot; &quot;</span> + s2 + <span class="string">&quot; &quot;</span> + s3 + <span class="string">&quot; &quot;</span> + s4);<span class="comment">// 100  1.1  4.5  true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//String -&gt; 对应的基本数据类型</span></span><br><span class="line"><span class="type">String</span> <span class="variable">s5</span> <span class="operator">=</span> <span class="string">&quot;123&quot;</span>;</span><br><span class="line"><span class="comment">//会在OOP 讲对象和方法的时候回详细</span></span><br><span class="line"><span class="comment">//解读 使用 基本数据类型对应的包装类，的相应方法，得到基本数据类型</span></span><br><span class="line"><span class="type">int</span> <span class="variable">num1</span> <span class="operator">=</span> Integer.parseInt(s5);</span><br><span class="line"><span class="type">double</span> <span class="variable">num2</span> <span class="operator">=</span> Double.parseDouble(s5);</span><br><span class="line"><span class="type">float</span> <span class="variable">num3</span> <span class="operator">=</span> Float.parseFloat(s5);</span><br><span class="line"><span class="type">long</span> <span class="variable">num4</span> <span class="operator">=</span> Long.parseLong(s5);</span><br><span class="line"><span class="type">byte</span> <span class="variable">num5</span> <span class="operator">=</span> Byte.parseByte(s5);</span><br><span class="line"><span class="type">boolean</span> <span class="variable">b</span> <span class="operator">=</span> Boolean.parseBoolean(<span class="string">&quot;true&quot;</span>);</span><br><span class="line"><span class="type">short</span> <span class="variable">num6</span> <span class="operator">=</span> Short.parseShort(s5);</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;===================&quot;</span>);</span><br><span class="line">System.out.println(num1);<span class="comment">//123</span></span><br><span class="line">System.out.println(num2);<span class="comment">//123.0</span></span><br><span class="line">System.out.println(num3);<span class="comment">//123.0</span></span><br><span class="line">System.out.println(num4);<span class="comment">//123</span></span><br><span class="line">System.out.println(num5);<span class="comment">//123</span></span><br><span class="line">System.out.println(num6);<span class="comment">//123</span></span><br><span class="line">System.out.println(b);<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//怎么把字符串转成字符char -&gt; 含义是指 把字符串的第一个字符得到</span></span><br><span class="line"><span class="comment">//解读  s5.charAt(0) 得到 s5字符串的第一个字符 &#x27;1&#x27;</span></span><br><span class="line">System.out.println(s5.charAt(<span class="number">0</span>));</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><img src="https://image.cpen.top/image/202205082126362.png" alt="image-20220508212639235" style="zoom:67%;" /></blockquote><hr><p><strong>String转基本类型细节</strong></p><ul><li>注意事项</li></ul><p>案例演示: StringToBasicDetail.java</p><ol><li><p>在将 String 类型转成 基本数据类型时，<code>要确保 String 类型能够转成有效的数据</code>，比如 我们可以把 “123” , 转成一个整数，但是不能把 “hello” 转成一个整数</p></li><li><p>如果格式不正确，就会 <strong>抛出异常，程序就会终止</strong>， 这个问题在异常处理章节中，会处理</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 演示字符串转基本数据类型的细节</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StringToBasicDetail</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line"><span class="comment">//转成int</span></span><br><span class="line"><span class="type">int</span> <span class="variable">n1</span> <span class="operator">=</span> Integer.parseInt(str);<span class="comment">// 抛异常</span></span><br><span class="line">System.out.println(n1);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="本章作业">本章作业</h3><ul><li>本章作业</li></ul><blockquote><img src="https://image.cpen.top/image/202205082139428.png" alt="image-20220508213920336" style="zoom: 67%;" /><img src="https://image.cpen.top/image/202205082139032.png" alt="image-20220508213940898" style="zoom:67%;" /></blockquote><ol><li></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Homework01</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n1;</span><br><span class="line">        n1 = <span class="number">13</span>;</span><br><span class="line">        <span class="type">int</span> n2;</span><br><span class="line">        n2 = <span class="number">17</span>;</span><br><span class="line">        <span class="type">int</span> n3;</span><br><span class="line">        n3 = n1 + n2;</span><br><span class="line">        System.out.println(<span class="string">&quot;n3 = &quot;</span> + n3);<span class="comment">//30</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">n4</span> <span class="operator">=</span> <span class="number">38</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n5</span> <span class="operator">=</span> n4 - n3;</span><br><span class="line">        System.out.println(<span class="string">&quot;n5 = &quot;</span> + n5);<span class="comment">//8</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Homework02</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//使用 char 类型，分别保存 \n \t \r  \\  1  2  3等字符，并打印输出</span></span><br><span class="line"><span class="type">char</span> <span class="variable">c1</span> <span class="operator">=</span> <span class="string">&#x27;\n&#x27;</span>; <span class="comment">//换行</span></span><br><span class="line"><span class="type">char</span> <span class="variable">c2</span> <span class="operator">=</span> <span class="string">&#x27;\t&#x27;</span>; <span class="comment">//制表位</span></span><br><span class="line"><span class="type">char</span> <span class="variable">c3</span> <span class="operator">=</span> <span class="string">&#x27;\r&#x27;</span>; <span class="comment">//回车</span></span><br><span class="line"><span class="type">char</span> <span class="variable">c4</span> <span class="operator">=</span> <span class="string">&#x27;\\&#x27;</span>; <span class="comment">//输出\</span></span><br><span class="line"><span class="type">char</span> <span class="variable">c5</span> <span class="operator">=</span> <span class="string">&#x27;1&#x27;</span>; <span class="comment">//换行</span></span><br><span class="line"><span class="type">char</span> <span class="variable">c6</span> <span class="operator">=</span> <span class="string">&#x27;2&#x27;</span>; <span class="comment">//换行</span></span><br><span class="line"><span class="type">char</span> <span class="variable">c7</span> <span class="operator">=</span> <span class="string">&#x27;3&#x27;</span>; <span class="comment">//换行</span></span><br><span class="line">System.out.println(c1);</span><br><span class="line">System.out.println(c2);</span><br><span class="line">System.out.println(c3);</span><br><span class="line">System.out.println(c4);</span><br><span class="line">System.out.println(c5);</span><br><span class="line">System.out.println(c6);</span><br><span class="line">System.out.println(c7);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Homework03</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//编程，保存两本书名，用+拼接，看效果。保存两个性别，</span></span><br><span class="line"><span class="comment">//用加号拼接，看效果。保存两本书价格，用加号拼接，看效果</span></span><br><span class="line"></span><br><span class="line"><span class="type">String</span> <span class="variable">book1</span> <span class="operator">=</span> <span class="string">&quot;天龙八部&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">book2</span> <span class="operator">=</span> <span class="string">&quot;笑傲江湖&quot;</span>;</span><br><span class="line">System.out.println(book1 + book2);<span class="comment">//天龙八部笑傲江湖</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//性别应该使用char保存</span></span><br><span class="line"><span class="type">char</span> <span class="variable">c1</span> <span class="operator">=</span> <span class="string">&#x27;男&#x27;</span>;</span><br><span class="line"><span class="type">char</span> <span class="variable">c2</span> <span class="operator">=</span> <span class="string">&#x27;女&#x27;</span>;</span><br><span class="line">System.out.println(c1 + c2);<span class="comment">//得到  男 字符码值 + 女 字符码值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//保存两本书价格</span></span><br><span class="line"><span class="type">double</span> <span class="variable">price1</span> <span class="operator">=</span> <span class="number">123.56</span>;</span><br><span class="line"><span class="type">double</span> <span class="variable">price2</span> <span class="operator">=</span> <span class="number">100.11</span>;</span><br><span class="line">System.out.println(price1 + price2);<span class="comment">//就是 123.56+100.11</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><img src="https://image.cpen.top/image/202205082200764.png" alt="image-20220508220036706" style="zoom: 67%;" /></blockquote><ol start="4"><li></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Homework04</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> 姓名年龄成绩性别爱好</span></span><br><span class="line"><span class="comment">     xxxxxxxxxx</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">要求：</span></span><br><span class="line"><span class="comment">1) 用变量将姓名、年龄、成绩、性别、爱好存储</span></span><br><span class="line"><span class="comment">2) 使用+</span></span><br><span class="line"><span class="comment">3) 添加适当的注释</span></span><br><span class="line"><span class="comment">4) 添加转义字符, 使用一条语句输出</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//姓名</span></span><br><span class="line"><span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;jack&quot;</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> <span class="number">20</span>;</span><br><span class="line"><span class="type">double</span> <span class="variable">score</span> <span class="operator">=</span> <span class="number">80.9</span>;</span><br><span class="line"><span class="type">char</span> <span class="variable">gender</span> <span class="operator">=</span> <span class="string">&#x27;男&#x27;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">hobby</span> <span class="operator">=</span> <span class="string">&quot;打篮球&quot;</span>;</span><br><span class="line"><span class="comment">//输出了信息, 可以使用换行</span></span><br><span class="line">System.out.println(<span class="string">&quot;姓名\t年龄\t成绩\t性别\t爱好\n&quot;</span> + name + <span class="string">&quot;\t&quot;</span> </span><br><span class="line">+ age + <span class="string">&quot;\t&quot;</span> + score + <span class="string">&quot;\t&quot;</span> + gender + <span class="string">&quot;\t&quot;</span> + hobby);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><img src="https://image.cpen.top/image/202205082205511.png" alt="image-20220508220526449" style="zoom: 67%;" /></blockquote><hr>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 编码 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>01_Java-特性-jdk-运行机制-转义字符-注释-代码规范</title>
      <link href="/blog/posts/9f806995.html"/>
      <url>/blog/posts/9f806995.html</url>
      
        <content type="html"><![CDATA[<p>摘要：<code>jdk</code> + <code>oop</code> + <code>转义字符</code><span id="more"></span></p><h1 id="01-Java-特性-jdk-运行机制-转义字符-注释-代码规范">01_Java-特性-jdk-运行机制-转义字符-注释-代码规范</h1><p><a href="https://www.bilibili.com/video/BV1fh411y7R8">视频🔗：https://www.bilibili.com/video/BV1fh411y7R8</a><br><a href="https://blog.csdn.net/cpen_web">博客🔗：https://blog.csdn.net/cpen_web</a></p><hr><h2 id="一-就业方向">一. 就业方向</h2><img src="https://image.cpen.top/image/202205080320118.png" alt="image-20220508032024978" style="zoom:50%;" /><hr><h2 id="二-开发场景">二. 开发场景</h2><p>Java 开发场景举例 1-<code>SSM</code></p><p><img src="https://image.cpen.top/image/202205080322295.png" alt="image-20220508032255198"></p><p>Java 开发场景举例 2：<code>Android 核心代码</code></p><p><img src="https://image.cpen.top/image/202205080324796.png" alt="image-20220508032454652"></p><p>Java 开发场景举例 3：<code>大数据-hadoop </code></p><p><img src="https://image.cpen.top/image/202205080325177.png" alt="image-20220508032545050"></p><hr><h2 id="三-应用领域">三. 应用领域</h2><ul><li>企业级应用</li></ul><p>主要指复杂的大企业的**<code>软件系统</code><strong>、各种类型的</strong><code>网站</code>**。应用领域包括金融、电信、交通、电子商务等。</p><img src="https://image.cpen.top/image/202205080327015.png" alt="image-20220508032702906" style="zoom:50%;" /><ul><li>Android 平台应用</li></ul><p>Android 应用程序使用 Java 语言编写。Android 开发水平的高低很大程度上取决于 Java 语言核心能力是否扎实。</p><img src="https://image.cpen.top/image/202205080327181.png" alt="image-20220508032750052" style="zoom:50%;" /><ul><li>移动领域应用</li></ul><p>主要表现在消费和嵌入式领域，是指在各种小型设备上的应用，包括机顶盒、车载的大屏影音娱乐设备、汽车通信设备、扫码的 POS 机等。</p><img src="https://image.cpen.top/image/202205080329788.png" alt="image-20220508032900704" style="zoom:50%;" /><hr><h2 id="四-程序举例">四. 程序举例</h2><ul><li><strong>什么是程序</strong></li></ul><p>程序：计算机执行某些操作或解决某个问题而 <strong><code>编写的一系列有序指令的集合</code></strong></p><p>举例说明:</p><blockquote><img src="https://image.cpen.top/image/202205080343728.png" alt="image-20220508034312623" style="zoom:50%;" /><img src="https://image.cpen.top/image/202205080343441.png" alt="image-20220508034326323" style="zoom: 67%;" /></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//老师写的最简单的程序，完成 1+1, 体会</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">1</span> + <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// 显示</span></span><br><span class="line">System.out.print(<span class="string">&quot;结果=&quot;</span> + res);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202205080403773.png" alt="image-20220508040315730"></p><hr><h2 id="五-故事">五. 故事</h2><ul><li>Java 诞生小故事</li></ul><ol><li><code>1995年 第1个版本</code></li><li><code>Java之父 gosling</code></li><li><code>最新版本：15</code></li><li><code>公司里用的最多的版本：8、11</code></li><li><code>Java 所有权：甲骨文</code></li></ol><blockquote><img src="https://image.cpen.top/image/202205080344966.png" alt="image-20220508034456860" style="zoom: 67%;" /><p><img src="https://image.cpen.top/image/202205080408088.png" alt="image-20220508040836044"></p></blockquote><ul><li>Java 技术体系平台</li></ul><blockquote><p><code>标准版、企业版、小型版</code></p><p><code>Java SE、Java EE、Java ME</code></p><img src="https://image.cpen.top/image/202205080412778.png" style="zoom:50%;" /></blockquote><hr><h2 id="六-特性">六. 特性</h2><ul><li><strong>Java 重要特点</strong></li></ul><ol><li>Java 语言是面向对象的(<strong><code>oop</code></strong>)</li><li>Java <code>语言是健壮的</code>。Java 的强类型机制、异常处理、垃圾的自动收集等是 Java 程序健壮性的重要保证</li><li>Java 语言是**<code>跨平台性的</code>**。[即: <strong>一个编译好的.class 文件可以在多个系统下运行，这种特性称为跨平台</strong>]</li></ol><blockquote><img src="https://image.cpen.top/image/202205080415181.png" style="zoom:50%;" /></blockquote><ol start="4"><li>Java 语言是解释型的[了解]</li></ol><p>​<strong>解释性语言：javascript,PHP, java 编译性语言: c / c++</strong></p><p>​区别是：<code>解释性语言</code>，编译后的代码，<code>不能直接被机器执行,需要解释器来执行</code>, <code>编译性语言</code>, 编译后的代码, 可以<code>直接被机器执行</code>, c /c++</p><hr><ul><li><p><strong>Java 的开发工具</strong></p><ul><li><p>工具选择</p><ul><li><p>如何选择开发工具</p><p>​我们先选择用文本编辑器本 sublime，到大家对 java 有一定了解后，我们再使用 IDEA 和 Eclipse 开发工具。</p></li><li><p>这是为什么呢</p><p>​更深刻的理解 java 技术,培养代码感。【面试时，往往程序员手写代码】</p><p>​有利于公司面试</p><pre><code>  &gt; &lt;img src=&quot;https://image.cpen.top/image/202205080421152.png&quot; alt=&quot;image-20220508042124961&quot; style=&quot;zoom:50%;&quot; /&gt;</code></pre></li></ul></li></ul></li></ul><hr><h2 id="七-jdk介绍、安装、配置">七. jdk介绍、安装、配置</h2><ul><li><p><strong>Java 运行机制及运行过程</strong></p><ul><li><p>Java 语言的特点：<code>跨平台性</code></p><blockquote><img src="https://image.cpen.top/image/202205080428588.png" alt="image-20220508042849189" style="zoom:50%;" /></blockquote></li><li><p>Java 核心机制-Java 虚拟机 [<code>JVM</code> java virtual machine]</p></li></ul></li><li><p><code>Java 核心机制-Java 虚拟机 [JVM java virtual machine]</code></p></li></ul><p><strong>基本介绍</strong></p><ol><li><p>JVM 是一个虚拟的计算机，具有指令集并使用不同的存储区域。负责执行指令，管理数据、内存、寄存器，包含在 <strong><code>JDK 中</code></strong>.</p></li><li><p>对于不同的平台，有不同的虚拟机。</p></li><li><p>Java 虚拟机机制屏蔽了底层运行平台的差别，实现了“一次**<code>编译</code><strong>，到处</strong><code>运行</code>**” [说明]</p></li></ol><p><strong>示意图</strong></p><blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//指令</span></span><br><span class="line">javac<span class="comment">// 编译</span></span><br><span class="line">java<span class="comment">// 运行</span></span><br></pre></td></tr></table></figure><img src="https://image.cpen.top/image/202205080434503.png" alt="image-20220508043429400" style="zoom: 67%;" /></blockquote><hr><p><strong><code>什么是 JDK，JRE</code></strong></p><ul><li><code>JDK 基本介绍 </code></li></ul><ol><li>JDK 的全称(Java Development Kit   <strong><code>Java 开发工具包</code></strong>)</li></ol><p>​JDK = JRE + java 的开发工具 [java, javac,javadoc,javap 等]</p><ol start="2"><li>JDK 是提供给 Java 开发人员使用的，其中包含了 java 的开发工具，也包括了 JRE。所以安装了 JDK，就不用在单独安装 JRE 了。</li></ol><ul><li><code>JRE 基本介绍</code></li></ul><ol><li>JRE(Java Runtime Environment  <code> Java 运行环境</code>)</li></ol><p>​JRE = JVM + Java 的核心类库[类]</p><ol start="2"><li>包括 Java 虚拟机(JVM Java Virtual Machine)和 Java 程序所需的核心类库等，如果想要运行一个开发好的 Java 程序，计算机中只需要安装 JRE 即可。</li></ol><blockquote><img src="https://image.cpen.top/image/202205080445424.png" style="zoom:67%;" /></blockquote><ul><li><code>JDK、JRE 和 JVM 的包含关系</code></li></ul><ol><li><p><strong><code>JDK = JRE + 开发工具集</code></strong>（例如 Javac,java 编译工具等)</p></li><li><p><strong><code>JRE = JVM + Java SE</code></strong> <strong><code>标准类库</code></strong>（java 核心类库）</p></li><li><p>如果只想运行开发好的 .class 文件 只需要 JRE</p></li></ol><hr><p><strong>下载、安装 JDK</strong></p><blockquote><p><a href="https://www.oracle.com/java/technologies/downloads/">https://www.oracle.com/java/technologies/downloads/</a></p><p><img src="https://image.cpen.top/image/202205080450598.png" alt=""></p></blockquote><p><strong>配置环境变量 path</strong></p><ul><li><p>为什么要配置 path</p><blockquote><img src="https://image.cpen.top/image/202205080507309.png" alt="image-20220508050732153" style="zoom:50%;" /></blockquote></li><li><p>配置环境变量 path 的步骤</p></li></ul><blockquote><img src="https://image.cpen.top/image/202205080512224.png" style="zoom:50%;" /></blockquote><hr><p>安装 JDK 的练习</p><blockquote><p>请同学们安装好 JDK，配置好 path 环境变量。可以在控制台下正确的执行, (10min)</p><img src="https://image.cpen.top/image/202205080520103.png" alt="image-20220508052000041" style="zoom:50%;" /><p>环境变量配置细节说明:</p><img src="https://image.cpen.top/image/202205080520181.png" alt="image-20220508052022102" style="zoom:50%;" /><hr><img src="https://image.cpen.top/image/202205080521628.png" alt="image-20220508052141440" style="zoom: 50%;" /><img src="https://image.cpen.top/image/202205080528717.png" alt="image-20220508052824602" style="zoom:50%;" /><hr><img src="https://image.cpen.top/image/202205080529498.png" alt="image-20220508052931384" style="zoom:50%;" /><img src="https://image.cpen.top/image/202205080533822.png" alt="image-20220508053340793" style="zoom: 67%;" /><img src="https://image.cpen.top/image/202205080534562.png" alt="image-20220508053443524" style="zoom:67%;" /></blockquote><hr><h2 id="八-快速入门">八. 快速入门</h2><ul><li>需求说明</li></ul><p>要求开发一个 Hello.java 程序，可以输出 “hello,world!”</p><ul><li>开发步骤</li></ul><ol><li><p>将 Java 代码编写到扩展名为 <code>Hello.java 的文件</code>中。[代码说明]</p></li><li><p>通过 <code>javac</code> 命令对该 java 文件进行<code>编译</code>，生成 <code>.class</code> 文件。</p></li><li><p>通过 <code>java</code> 命令对生成的 class 文件进行<code>运行</code>。</p></li></ol><ul><li>运行原理示意图</li></ul><blockquote><img src="https://image.cpen.top/image/202205080545433.png" alt="image-20220508054554366" style="zoom: 67%;" /></blockquote><blockquote><img src="https://image.cpen.top/image/202205080607424.png" alt="image-20220508060705278" style="zoom:50%;" /></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//这是java的快速入门， 演示java的开发步骤</span></span><br><span class="line"><span class="comment">//对代码的相关说明</span></span><br><span class="line"><span class="comment">//1. public class Hello 表示Hello是一个类,是一个public公有的类</span></span><br><span class="line"><span class="comment">//2. Hello&#123; &#125; 表示一个类的开始和结束</span></span><br><span class="line"><span class="comment">//3. public static void main(String[] args) 表示一个主方法,即我们程序的入口</span></span><br><span class="line"><span class="comment">//4. main() &#123;&#125; 表示方法的开始和结束</span></span><br><span class="line"><span class="comment">//5. System.out.println(&quot;hello,world~&quot;); 表示输出&quot;hello,world~&quot;到屏幕</span></span><br><span class="line"><span class="comment">//6. ;表示语句结束</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Hello</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;韩顺平教育 hello&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//一个源文件中最多只能有一个public类。其它类的个数不限。[演示]</span></span><br><span class="line"><span class="comment">//Dog 是一个类</span></span><br><span class="line"><span class="comment">//编译后，每一个类，都对于一个.class</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//一个源文件中最多只能有一个public类。其它类的个数不限，也可以将main方法写在非public类中，</span></span><br><span class="line"><span class="comment">//然后指定运行非public 类，这样入口方法就是非public 的main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;hello, 小狗狗~&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Tiger</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;hello, 小老虎~&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><img src="https://image.cpen.top/image/202205080611636.png" alt="image-20220508061152606" style="zoom:67%;" /></blockquote><hr><h2 id="九-运行机制">九. 运行机制</h2><p><strong>Java 开发快速入门</strong></p><ul><li><code>Java执行流程分析</code></li></ul><blockquote><p>.java文件源文件</p><p>.class文件字节码文件</p><img src="https://image.cpen.top/image/202205080612745.png" alt="image-20220508061231609" style="zoom: 67%;" /></blockquote><ul><li><code>什么是编译</code></li></ul><blockquote><img src="https://image.cpen.top/image/202205080619173.png" alt="image-20220508061953033" style="zoom: 67%;" /></blockquote><ul><li><code>什么是运行</code></li></ul><blockquote><img src="https://image.cpen.top/image/202205080623909.png" alt="image-20220508062339779" style="zoom:67%;" /></blockquote><hr><h2 id="十-开发细节">十. 开发细节</h2><ul><li><strong><code>Java开发注意事项和细节说明</code></strong></li></ul><img src="https://image.cpen.top/image/202205080627135.png" alt="image-20220508062754938" style="zoom: 50%;" /><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Hello</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;韩顺平教育 hello&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//一个源文件中最多只能有一个public类。其它类的个数不限。[演示]</span></span><br><span class="line"><span class="comment">//Dog 是一个类</span></span><br><span class="line"><span class="comment">//编译后，每一个类，都对于一个.class</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//一个源文件中最多只能有一个public类。其它类的个数不限，也可以将main方法写在非public类中，</span></span><br><span class="line"><span class="comment">//然后指定运行非public 类，这样入口方法就是非public 的main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;hello, 小狗狗~&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Tiger</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;hello, 小老虎~&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><img src="https://image.cpen.top/image/202205080638351.png" alt="image-20220508063831299" style="zoom: 67%;" /></blockquote><hr><h2 id="十一-学习方法">十一. 学习方法</h2><blockquote><ul><li>老韩聊: 如何快速掌握技术或知识点</li></ul><img src="https://image.cpen.top/image/202205081310765.png" alt="image-20220508131030628" style="zoom: 80%;" /></blockquote><hr><h2 id="十二-转义字符">十二. 转义字符</h2><p><strong>Java 转义字符</strong></p><ul><li><code>Java 常用的转义字符</code></li></ul><p>在控制台，输入 tab 键，可以实现命令补全</p><ol><li><p><code>\t</code> ：一个<code>制表位</code>，实现对齐的功能</p></li><li><p><code>\n</code> ：<code>换行符</code></p></li><li><p><code>\\</code> ：<code>一个\ </code></p></li><li><p><code>\&quot;</code> :<code>一个&quot; </code></p></li><li><p><code>\'</code> ：<code>一个' </code></p></li><li><p><strong><code>\r</code></strong> :<strong><code>一个回车</code></strong> System.out.println(“韩顺平教育\r 北京”);</p></li></ol><ul><li>说明</li></ul><p>应用实例</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//演示转义字符的使用</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ChangeChar</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// \t  ：一个制表位，实现对齐的功能</span></span><br><span class="line">System.out.println(<span class="string">&quot;北京\t天津\t上海&quot;</span>);</span><br><span class="line"><span class="comment">// \n  ：换行符</span></span><br><span class="line">System.out.println(<span class="string">&quot;jack\nsmith\nmary&quot;</span>);</span><br><span class="line"><span class="comment">// \\  ：一个\  \\</span></span><br><span class="line">System.out.println(<span class="string">&quot;C:\\Windows\\System32\\cmd.exe&quot;</span>);</span><br><span class="line"><span class="comment">// \&quot;  :一个&quot;</span></span><br><span class="line">System.out.println(<span class="string">&quot;老韩说:\&quot;要好好学习java,有前途\&quot;&quot;</span>);</span><br><span class="line"><span class="comment">// \&#x27;  ：一个&#x27;</span></span><br><span class="line">System.out.println(<span class="string">&quot;老韩说:\&#x27;要好好学习java,有前途\&#x27;&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// \r  :一个回车  System.out.println(&quot;韩顺平教育\r北京&quot;);</span></span><br><span class="line"><span class="comment">// 解读</span></span><br><span class="line"><span class="comment">// 1. 输出  韩顺平教育</span></span><br><span class="line"><span class="comment">// 2. \r表示回车 </span></span><br><span class="line">System.out.println(<span class="string">&quot;韩顺平教育\r北京&quot;</span>); <span class="comment">// 北京平教育</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><img src="https://image.cpen.top/image/202205081323663.png" alt="image-20220508132315623" style="zoom: 67%;" /><img src="https://image.cpen.top/image/202205081327844.png" alt="image-20220508132732792" style="zoom: 67%;" /><hr><img src="https://image.cpen.top/image/202205081328387.png" alt="image-20220508132852344" style="zoom:67%;" /><img src="https://image.cpen.top/image/202205081329085.png" alt="image-20220508132927045" style="zoom:67%;" /></blockquote><hr><ul><li>课堂练习</li></ul><p>要求：请使用一句输出语句，达到输入如下图形的效果 2min</p><blockquote><img src="https://image.cpen.top/image/202205081331278.png" alt="image-20220508133105218" style="zoom:67%;" /></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ChangeCharExer01</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//完成代码</span></span><br><span class="line">System.out.println(<span class="string">&quot;书名\t作者\t价格\t销量\n三国\t罗贯中\t120\t1000&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//示意 =&gt; 可读性很好</span></span><br><span class="line"><span class="comment">//下面代码完成 两个数相加</span></span><br><span class="line"><span class="comment">//定义变量</span></span><br><span class="line"><span class="type">int</span> <span class="variable">n1</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">n2</span> <span class="operator">=</span> <span class="number">30</span>;</span><br><span class="line"><span class="comment">//求和</span></span><br><span class="line"><span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> n1 + n2;</span><br><span class="line"><span class="comment">//输出结果</span></span><br><span class="line">System.out.println(<span class="string">&quot;结果=&quot;</span> + sum);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="十三-易犯错误">十三. 易犯错误</h2><blockquote><img src="https://image.cpen.top/image/202205081335827.png" alt="image-20220508133503644" style="zoom: 50%;" /><img src="https://image.cpen.top/image/202205081336546.png" alt="image-20220508133644384" style="zoom:50%;" /></blockquote><hr><h2 id="十四-注释">十四. 注释</h2><p><strong>注释(comment)</strong></p><ul><li>介绍：</li></ul><p>​用于注解说明解释程序的文字就是注释，注释提高了代码的阅读性（可读性）；注释是<code>一个程序员必须要具有的良好编程习惯</code>。将自己的思想通过注释先整理出来，再用代码去体现。 [举例]</p><ul><li><strong><code>Java 中的注释类型</code></strong></li></ul><ol><li><p><code>单行注释 // </code></p></li><li><p><code>多行注释 /* */ </code></p></li><li><p><code>文档注释 /** */ </code></p></li></ol><ul><li><code>单行注释： </code></li></ul><p>基本格式</p><p>格式： //注释文字</p><ul><li><code>多行注释： </code></li></ul><p>基本格式</p><p>格式： /* 注释文字 */</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//演示注释使用</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Comment01</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//单行注释</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//多行注释</span></span><br><span class="line"><span class="comment">/* 示意 =&gt; 可读性很好</span></span><br><span class="line"><span class="comment">下面代码完成 两个数相加</span></span><br><span class="line"><span class="comment">定义变量 </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">注释</span></span><br><span class="line"><span class="comment">注释</span></span><br><span class="line"><span class="comment">int n1 = 10;... </span></span><br><span class="line"><span class="comment">System.out.println(&quot;ok~~&quot;);</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="type">int</span> <span class="variable">n1</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">n2</span> <span class="operator">=</span> <span class="number">30</span>;</span><br><span class="line"><span class="comment">//求和</span></span><br><span class="line"><span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> n1 + n2;</span><br><span class="line"><span class="comment">//输出结果</span></span><br><span class="line">System.out.println(<span class="string">&quot;结果=&quot;</span> + sum);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>使用细节</li></ul><ol><li><p>被注释的文字，不会被 JVM（java 虚拟机）解释执行</p></li><li><p>多行注释里面不允许有多行注释嵌套</p></li></ol><ul><li><code>文档注释：</code></li></ul><blockquote><p><img src="https://image.cpen.top/image/202205081402422.png" alt="image-20220508140217257"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>  韩顺平</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>  1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Comment02</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><img src="https://image.cpen.top/image/202205081404635.png" alt="image-20220508140443548" style="zoom:50%;" /><img src="https://image.cpen.top/image/202205081405177.png" alt="image-20220508140522118" style="zoom:50%;" /><img src="https://image.cpen.top/image/202205081405617.png" alt="image-20220508140555554" style="zoom:50%;" /></blockquote><hr><ul><li><strong>javadoc 标签</strong></li></ul><p>javadoc 工具软件识别以下标签：</p><table><thead><tr><th>标签</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td>@author</td><td>标识一个类的作者</td><td>@author description</td></tr><tr><td>@deprecated</td><td>指名一个过期的类或成员</td><td>@deprecated description</td></tr><tr><td>{@docRoot}</td><td>指明当前文档根目录的路径</td><td>Directory Path</td></tr><tr><td>@exception</td><td>标志一个类抛出的异常</td><td>@exception exception-name explanation</td></tr><tr><td>{@inheritDoc}</td><td>从直接父类继承的注释</td><td>Inherits a comment from the immediate surperclass.</td></tr><tr><td>{@link}</td><td>插入一个到另一个主题的链接</td><td>{@link name text}</td></tr><tr><td>{@linkplain}</td><td>插入一个到另一个主题的链接，但是该链接显示纯文本字体</td><td>Inserts an in-line link to another topic.</td></tr><tr><td>@param</td><td>说明一个方法的参数</td><td>@param parameter-name explanation</td></tr><tr><td>@return</td><td>说明返回值类型</td><td>@return explanation</td></tr><tr><td>@see</td><td>指定一个到另一个主题的链接</td><td>@see anchor</td></tr><tr><td>@serial</td><td>说明一个序列化属性</td><td>@serial description</td></tr><tr><td>@serialData</td><td>说明通过writeObject( ) 和 writeExternal( )方法写的数据</td><td>@serialData description</td></tr><tr><td>@serialField</td><td>说明一个ObjectStreamField组件</td><td>@serialField name type description</td></tr><tr><td>@since</td><td>标记当引入一个特定的变化时</td><td>@since release</td></tr><tr><td>@throws</td><td>和 @exception标签一样.</td><td>The @throws tag has the same meaning as the @exception tag.</td></tr><tr><td>{@value}</td><td>显示常量的值，该常量必须是static属性。</td><td>Displays the value of a constant, which must be a static field.</td></tr><tr><td>@version</td><td>指定类的版本</td><td>@version info</td></tr></tbody></table><hr><ul><li>代码演示</li></ul><blockquote><img src="https://image.cpen.top/image/202205081414164.png" alt="image-20220508141428106" style="zoom:50%;" /><img src="https://image.cpen.top/image/202205081414376.png" alt="image-20220508141447322" style="zoom:50%;" /><img src="https://image.cpen.top/image/202205081415068.png" alt="image-20220508141519015" style="zoom:50%;" /><img src="https://image.cpen.top/image/202205081415355.png" alt="image-20220508141539312" style="zoom:50%;" /></blockquote><hr><h2 id="十五-代码规范">十五. 代码规范</h2><ul><li><code>Java 代码规范</code></li></ul><blockquote><p><img src="https://image.cpen.top/image/202205081416659.png" alt="image-20220508141621467"></p><img src="https://image.cpen.top/image/202205081421585.png" alt="image-20220508142107515" style="zoom:50%;" /></blockquote><hr><h2 id="十六-DOS原理-路径-DOS指令">十六. DOS原理-路径-DOS指令</h2><ul><li>DOS 命令(了解)</li></ul><p>DOS 介绍</p><p>Dos： Disk Operating System 磁盘操作系统, 简单说一下 windows 的目录结构。[<strong>原理图</strong>]</p><blockquote><p><strong>原理图</strong></p><p><img src="https://image.cpen.top/image/202205081427390.png" alt="image-20220508142750248"></p></blockquote><ul><li>相关的知识补充: <strong><code>相对路径， 绝对路径</code></strong></li></ul><blockquote><img src="https://image.cpen.top/image/202205081429068.png" alt="image-20220508142920905" style="zoom: 67%;" /></blockquote><ul><li><strong><code>常用的</code></strong> <code>dos 命令 </code></li></ul><ol><li>查看<code>当前目录是有什么内容</code> dir</li></ol><p>​dir <code>dir d:\abc2\test200 </code></p><ol start="2"><li>切换到其他盘下：盘符号 cd : change directory</li></ol><p>​案例演示：切换到 c 盘 <code>cd /D c: </code></p><ol start="3"><li>切换到当前盘的其他目录下 (使用相对路径和绝对路径演示), …\表示上一级目录</li></ol><p>​案例演示： <code>cd d:\abc2\test200 </code>cd …\…\abc2\test200</p><ol start="4"><li>切换到上一级：</li></ol><p>​案例演示： <code>cd .. </code></p><ol start="5"><li>切换到根目录：<code>cd \ </code></li></ol><p>​案例演示：cd \</p><ol start="6"><li><p>查看指定的目录下所有的子级目录 <code>tree </code></p></li><li><p><code>清屏 cls</code></p></li><li><p>退出 DOS <code>exit </code></p></li><li><p>说明: <strong>因为小伙伴后面使用</strong> <strong>DOS</strong> <strong>非常少</strong>，所以对下面的几个指令，老韩给大家演示下, 大家了解即可 (<code>md[创建目录],rd[删除目录],copy[拷贝文件],del[删除文件],echo[输入内容到文件],type,move[剪切]</code>) =&gt; <strong>Linux</strong>,</p></li></ol><hr><h2 id="十七-本章作业">十七. 本章作业</h2><ul><li>本章作业</li></ul><blockquote><img src="https://image.cpen.top/image/202205081452380.png" alt="image-20220508145216238" style="zoom:50%;" /><hr><ul><li>1</li></ul></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Homework01</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//编写hello, world程序</span></span><br><span class="line">System.out.println(<span class="string">&quot;hello,world&quot;</span>); </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><ul><li>2</li></ul></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将个人的基本信息（姓名、性别、籍贯、住址）打印到控制台上输出。各条信息分别占一行</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Homework02</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//考察对转义字符</span></span><br><span class="line">System.out.println(<span class="string">&quot;姓名\t性别\t籍贯\t住址\n顺平\t男\t四川\t北京&quot;</span>); </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><ul><li>3</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//JDK,JRE,JVM的关系</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line">答：</span><br><span class="line"><span class="number">1.</span> JDK = JRE + java开发工具</span><br><span class="line"><span class="number">2.</span> JRE = JVM + 核心类库</span><br></pre></td></tr></table></figure><ul><li>4</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//环境变量path配置及其作用</span></span><br><span class="line"><span class="number">1.</span> 环境变量的作用是为了在 dos 的任意目录，可以去使用 java 和 javac 命令</span><br><span class="line"><span class="number">2.</span> 先配置 JAVA_HOME = 指向 jdk 安装的主目录</span><br><span class="line"><span class="number">3.</span> 编辑 path 环境变量，增加 %JAVA_HOME%\bin </span><br></pre></td></tr></table></figure><ul><li>5</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Java编写步骤</span></span><br><span class="line"><span class="number">1.</span> 编写java的源代码</span><br><span class="line"><span class="number">2.</span> javac 编译 ,得到对应的 .class 字节码文件</span><br><span class="line"><span class="number">3.</span> java 运行, 本质就是把 .class 加载到 jvm 运行</span><br></pre></td></tr></table></figure><ul><li>6</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Java编写7个规范</span></span><br><span class="line"><span class="number">1.</span> 类,方法的注释，使用javadoc的方式，即文档注释</span><br><span class="line"><span class="number">2.</span> 非javadoc注释，往往是对代码的说明(给程序的维护者),说明如何修改，注意事项</span><br><span class="line"><span class="number">3.</span> 使用tab ，整体将代码右移, 使用 shift+tab 整体左移</span><br><span class="line"><span class="number">4.</span> 运算符和 = 的两边，给空格，代码看上去清楚 <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> <span class="number">1</span> + <span class="number">4</span>;</span><br><span class="line"><span class="number">5.</span> 源码文件使用 utf-<span class="number">8</span> 编码</span><br><span class="line"><span class="number">6.</span> 行宽字符不要超过 <span class="number">80</span></span><br><span class="line"><span class="number">7.</span> 代码编程风格有两种 次行风格，行尾风格(推荐)</span><br></pre></td></tr></table></figure><ul><li>7</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//初学者java易犯错误 </span></span><br><span class="line"><span class="number">1.</span> 编译或者运行时，找不到文件 javac Hell0.java, 把文件名或者目录找对</span><br><span class="line"><span class="number">2.</span> 主类名和文件名不一致 , 修改时保持一致即可</span><br><span class="line"><span class="number">3.</span> 缺少;</span><br><span class="line"><span class="number">4.</span> 拼写错误，比如 <span class="number">1</span> -&gt; l <span class="number">0</span>-&gt;<span class="number">0</span>, <span class="keyword">void</span> -&gt; viod , 要求写代码时，一定要小心</span><br><span class="line"></span><br><span class="line">强调: 先思考-&gt;自己练习-&gt;看老师评讲</span><br><span class="line"></span><br></pre></td></tr></table></figure></blockquote><hr>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>01_Hexo-Hexo + Pure搭建博客-自定义</title>
      <link href="/blog/posts/8236.html"/>
      <url>/blog/posts/8236.html</url>
      
        <content type="html"><![CDATA[<p>摘要：<code>Hexo</code> + <code>GitHub</code> + <code>Pure</code>主题 搭建私人博客<span id="more"></span></p><h1 id="Hexo-搭建私人博客">Hexo 搭建私人博客</h1><h2 id="一-介绍">一. 介绍</h2><h3 id="1-1-Hexo">1.1 Hexo</h3><blockquote><p>Hexo 是一个快速、简洁且高效的博客框架。Hexo 使用 <a href="http://daringfireball.net/projects/markdown/">Markdown</a>（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。<a href="https://hexo.io">Hexo 官网</a></p></blockquote><h3 id="1-2-Pure-主题">1.2 Pure 主题</h3><p><a href="https://github.com/cofess/hexo-theme-pure">https://github.com/cofess/hexo-theme-pure</a></p><p><a href="https://blog.cofess.com/">https://blog.cofess.com/</a></p><hr><h2 id="二-参考">二. 参考</h2><p>Hexo 官网<a href="https://hexo.io/zh-cn/docs/index.html">https://hexo.io/zh-cn/docs/index.html</a></p><p>Pure 项目地址<a href="https://github.com/cofess/hexo-theme-pure/blob/master/README.cn.md">https://github.com/cofess/hexo-theme-pure/blob/master/README.cn.md</a></p><h3 id="搭建-魔改">搭建 &amp; 魔改</h3><ul><li><p><a href="https://github.com/cofess/hexo-theme-pure/blob/master/README.cn.md">Pure 项目中文文档</a></p></li><li><p><a href="https://hwame.top/20200520/hello-hexo-setup-deploy.html">https://hwame.top</a></p></li><li><p><a href="https://blog.cofess.com/2017/11/01/hexo-blog-theme-pure-usage-description.html">作者: Hexo博客主题pure使用说明</a></p></li><li><p><a href="https://www.cnblogs.com/zzk31/p/14062887.html">https://www.cnblogs.com/zzk31/p/14062887.html</a></p></li><li><p><a href="https://blog.csdn.net/qq_42983502/article/details/106745567">https://blog.csdn.net/qq_42983502/article/details/106745567</a></p></li><li><p>gitalk</p><ul><li><a href="https://www.jianshu.com/p/b1161eb3f848">https://www.jianshu.com/p/b1161eb3f848</a></li><li><a href="https://cors-anywhere.herokuapp.com/corsdemo">https://cors-anywhere.herokuapp.com/corsdemo</a></li><li><a href="https://www.cnblogs.com/qisi007/p/13731562.html">https://www.cnblogs.com/qisi007/p/13731562.html</a></li><li><a href="https://www.jianshu.com/p/02fc71f3633f">https://www.jianshu.com/p/02fc71f3633f</a></li></ul></li></ul><hr><h2 id="三-命令">三. 命令</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean ; hexo g ; hexo d ; hexo s</span><br></pre></td></tr></table></figure><hr><h2 id="四-评论-收录">四. 评论 &amp; 收录</h2><p>Valine 评论<a href="https://www.leancloud.cn/">https://www.leancloud.cn/</a></p><p>Valine 评论<a href="https://www.leancloud.app/">https://www.leancloud.app/</a>国外站点，国内账号受限，域名没白嫖成功，可能是这个原因 → <a href="https://forum.leancloud.cn/t/2022-8/25408">https://forum.leancloud.cn/t/2022-8/25408</a></p><p>谷歌收录<a href="">https://search.google.com/search-console</a></p><p>百度收录<a href="https://ziyuan.baidu.com">https://ziyuan.baidu.com</a></p><p>MD5 在线加密<a href="https://md5jiami.bmcx.com/">https://md5jiami.bmcx.com/</a>评论区通过密文，识别博主身份</p><hr><h2 id="五-相关路径">五. 相关路径</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[<span class="symbol">文章路径</span>]: </span><br><span class="line"><span class="link">\source\_posts</span></span><br><span class="line">[<span class="symbol">站点配置文件</span>]: </span><br><span class="line"><span class="link">\_config.yml</span></span><br><span class="line">[<span class="symbol">主题配置文件</span>]: </span><br><span class="line"><span class="link">\themes\pure\_config.yml&quot;关于、个人介绍、公告&quot;</span></span><br><span class="line">[<span class="symbol">友链文件</span>]: </span><br><span class="line"><span class="link">\source\_data\links.yml</span></span><br><span class="line">[<span class="symbol">语言</span>]: </span><br><span class="line"><span class="link">\themes\pure\languages</span></span><br><span class="line">[<span class="symbol">左下角运行时间</span>]: </span><br><span class="line"><span class="link">\themes\pure\layout\_common\footer.ejs&quot;时间、版权&quot;</span></span><br><span class="line">[<span class="symbol">评论角色配置</span>]: </span><br><span class="line"><span class="link">\themes\pure\layout\_script\_comment\valine.ejs</span></span><br><span class="line">[<span class="symbol">css样式</span>]:</span><br><span class="line"><span class="link">\themes\pure\source\css\style.css</span></span><br><span class="line">[<span class="symbol">搜索栏限制</span>]: </span><br><span class="line"><span class="link">\themes\pure\source\js\insight.js&quot;160行&quot;</span></span><br></pre></td></tr></table></figure><hr><h2 id="六-内容样例">六. 内容样例</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: Test</span><br><span class="line">date: 2022-08-28 00:09:00</span><br><span class="line">updated: 2022-08-28 00:09:01</span><br><span class="line">thumbnail: https://image.cpen.top/image/test.png</span><br><span class="line">tags:</span><br><span class="line"><span class="bullet">    -</span> Test</span><br><span class="line">category:</span><br><span class="line"><span class="bullet">    -</span> Test</span><br><span class="line">mathjax: true</span><br><span class="line">toc: true</span><br><span class="line"><span class="section">top: true</span></span><br><span class="line"><span class="section">---</span></span><br><span class="line">描述&lt;!-- more --&gt;</span><br></pre></td></tr></table></figure><h3 id="文章指定多个-category">文章指定多个 category</h3><blockquote><p>多个分类</p><p>如果我们的要求是将文章同时分到两个或者多个不同的类目下呢？官方给出的方法是：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">categories:</span><br><span class="line">  - [Sports]</span><br><span class="line">  - [Baseball]</span><br></pre></td></tr></table></figure><p>参考文章：<a href="https://www.jianshu.com/p/4438c417611e">Hexo 一篇文章多个 categories    https://www.jianshu.com/p/4438c417611e</a></p></blockquote><hr><h2 id="七-自定义">七. 自定义</h2><h3 id="7-1-搜索框索引突破-5">7.1 搜索框索引突破 5</h3><ol><li><code>F12</code> 定位到搜索框的 类选择器 为 ins-section-header</li><li>grep，定位到配置文件为 <code>\themes\pure\source\js\insight.js</code></li><li>Ctrl + F，搜索 5，定位到第 160 行，修改限制</li></ol><blockquote><p><img src="https://image.cpen.top/image/image-20220830075511578.png" alt="image-20220830075511578"></p><p><img src="https://image.cpen.top/image/image-20220830075224471.png" alt="image-20220830075224471"></p><p><img src="https://image.cpen.top/image/image-20220830075722865.png" alt="image-20220830075722865"></p></blockquote><h3 id="7-2-左侧头像链接，target-修改为-self">7.2 左侧头像链接，target 修改为 _self</h3><p>a 标签，修改 target: ‘_blank’ → ‘_self’</p><blockquote><p><img src="https://image.cpen.top/image/image-20220830080811356.png" alt="image-20220830080811356"></p><p><img src="https://image.cpen.top/image/image-20220830080916410.png" alt="image-20220830080916410"></p><p><img src="https://image.cpen.top/image/image-20220830080945424.png" alt="image-20220830080945424"></p></blockquote><hr><h3 id="7-3-文章目录，一级标题不跳转">7.3 文章目录，一级标题不跳转</h3><p>有时发现一级标题不会跳转</p><p><s>配置文件<code>\node_modules\hexo\lib\plugins\helper\toc.js</code></s></p><p><s>更新下 <code>\node_modules\hexo\lib\plugins\helper\toc.js</code> 文件，又正常了。时灵时不灵的。。。</s></p><p><s>参考<a href="https://hwame.top/20200520/hello-hexo-troubleshooting.html#3-%E5%A6%82%E4%BD%95%E5%8F%96%E6%B6%88%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95%E7%9A%84%E8%87%AA%E5%8A%A8%E7%BC%96%E5%8F%B7">https://hwame.top/如何取消文章目录的自动编号</a></s></p><p>修改 “.\node_modules\hexo-renderer-markdown-it\index.js” level 为 1</p><blockquote><p><img src="https://image.cpen.top/image/image-20220906033013691.png" alt="image-20220906033013691"></p></blockquote><ul><li><p>参考文章：</p><p><a href="https://blog.csdn.net/Fosu_Chenai/article/details/111192850">https://blog.csdn.net/Fosu_Chenai/article/details/111192850 评论</a></p></li></ul><hr><h3 id="7-4-滚动条加粗-加小箭头">7.4 滚动条加粗 + 加小箭头</h3><ul><li><p>修改 css 样式，路径 <code>.\hexo-source\themes\pure\source\css\style.css</code></p><ol><li><code>Ctlrl + F</code> 定位 <code>scrollbar</code>；</li><li>调高 <code>height</code>，使代码框 右拉滚动条加粗；</li><li>右侧下拉条变粗；</li></ol><blockquote><p><strong>7.4.1 代码框加粗</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * scrollbar</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line">::-webkit-scrollbar &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">15px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">14px</span>;# 调高</span><br><span class="line">  <span class="attribute">background</span>: transparent;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/image-20220901164700329.png" alt="image-20220901164700329"></p><p><strong>7.4.2 右侧下拉条变粗 + 添加小箭头</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 滚动条箭头</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">::-webkit-scrollbar-button &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">0px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">display</span>: block; </span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#c3c3c3</span>;</span><br><span class="line">&#125;</span><br><span class="line">::-webkit-scrollbar &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">5px</span> solid white;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">::-webkit-scrollbar-thumb &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#b0b0b0</span>;</span><br><span class="line">  <span class="attribute">background-clip</span>: padding-box;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">0.05em</span> solid <span class="number">#eeeeee</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">::-webkit-scrollbar-track &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#bbbbbb</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* Buttons */</span></span><br><span class="line">::-webkit-scrollbar-button:single-button &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#bbbbbb</span>;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">border-style</span>: solid;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">13px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">16px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* Up */</span></span><br><span class="line">::-webkit-scrollbar-button:single-button:vertical:decrement &#123;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">0px</span> <span class="number">8px</span> <span class="number">8px</span> <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">border-color</span>: transparent transparent <span class="number">#555555</span> transparent;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">::-webkit-scrollbar-button:single-button:vertical:decrement:hover &#123;</span><br><span class="line">  <span class="attribute">border-color</span>: transparent transparent <span class="number">#777777</span> transparent;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* Down */</span></span><br><span class="line">::-webkit-scrollbar-button:single-button:vertical:increment &#123;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">8px</span> <span class="number">8px</span> <span class="number">0</span> <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="number">#555555</span> transparent transparent transparent;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">::-webkit-scrollbar-button:vertical:single-button:increment:hover &#123;</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="number">#777777</span> transparent transparent transparent;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/image-20220901164914382.png" alt="image-20220901164914382"></p></blockquote></li></ul><p><strong>参考文章</strong></p><ul><li><a href="http://www.qianduanheidong.com/blog/article/27901/a1c9346c7830d6ffa3f2/">右侧下拉条新增箭头</a></li><li><a href="https://www.php.cn/css-tutorial-475268.html">:-webkit-scrollbar 滚动条整体部分     https://www.php.cn/css-tutorial-475268.html</a></li></ul><h3 id="7-5-Valine-评论框添加一言">7.5 Valine 评论框添加一言</h3><p><strong>参考文章</strong></p><ul><li><a href="https://blog.justlovesmile.top/posts/27831.html">https://blog.justlovesmile.top/posts/27831.html</a></li></ul><p>偶然看到的文章，然后自己就加了这个功能。</p><ul><li><p>路径：<code>.\themes\pure\layout\_script\_comment\valine.ejs</code>；</p></li><li><p>加到最后 <code>&lt;/script&gt;</code> 标签之前；c=j 请求获得网易云的句子，开始网抑云吧；</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">fetch(&#x27;https://v1.hitokoto.cn/?c=j&#x27;)</span><br><span class="line">.then(response =&gt; response.json())</span><br><span class="line">.then(data =&gt; &#123;</span><br><span class="line">  document.getElementById(&quot;veditor&quot;).setAttribute(&quot;placeholder&quot;,data.hitokoto+&quot;__&quot;+data.from);</span><br><span class="line">&#125;)</span><br><span class="line">.catch(console.error)</span><br></pre></td></tr></table></figure></li></ul><blockquote><p>修改方法：</p><ol><li><p>找到博客对应添加valine的位置，例如Ayer主题的位于hexo\themes\ayer\layout_partial\post\valine.ejs</p></li><li><p>在内部添加一段代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">   fetch(&#x27;https://v1.hitokoto.cn&#x27;)</span><br><span class="line">    .then(response =&gt; response.json())</span><br><span class="line">    .then(data =&gt; &#123;</span><br><span class="line">      document.getElementById(&quot;veditor&quot;).setAttribute(&quot;placeholder&quot;,data.hitokoto+&quot;__&quot;+data.from);</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(console.error)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li><li><p>Api接口说明：<br>（1）<a href="https://v1.hitokoto.cn/">https://v1.hitokoto.cn/</a> （从7种分类中随机抽取）<br>（2）<a href="https://v1.hitokoto.cn/?c=b">https://v1.hitokoto.cn/?c=b</a> （请求获得一个分类是漫画的句子）<br>参数说明<br>a动画<br>b漫画<br>c游戏<br>d文学<br>e原创<br>f来自网络<br>g其他<br>h影视<br>i诗词<br>j网易云<br>k哲学<br>l抖机灵<br>其他作为动画类型处理<br>可选择多个分类，例如： ?c=a&amp;c=c</p></li></ol><p>（3）<a href="https://v1.hitokoto.cn/?c=f&amp;encode=text">https://v1.hitokoto.cn/?c=f&amp;encode=text</a> （请求获得一个来自网络的句子，并以纯文本格式输出）</p><ol start="4"><li>返回的格式说明<br>返回参数名称描述<br>id一言标识<br>hitokoto一言正文。编码方式 unicode。使用 utf-8。<br>type类型<br>from一言的出处<br>from_who一言的作者<br>creator添加者<br>creator_uid添加者用户标识<br>reviewer审核员标识<br>uuid一言唯一标识；可以链接到 <a href="https://hitokoto.cn?uuid=%5Buuid%5D">https://hitokoto.cn?uuid=[uuid]</a> 查看这个一言的完整信息<br>commit_from提交方式<br>created_at添加时间<br>length句子长度<br>例如：返回的data,通过data.hitokoto获取句子正文</li></ol><p>作者: Justlovesmile<br>链接: <a href="https://blog.justlovesmile.top/posts/27831.html">https://blog.justlovesmile.top/posts/27831.html</a><br>来源: Justlovesmile’s BLOG<br>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p></blockquote><p>PS：这位大佬的博客真好看~~</p><h3 id="7-6-左侧-归档、分类-改为默认收起">7.6 左侧 归档、分类 改为默认收起</h3><ul><li>默认是展开的</li></ul><blockquote><p><img src="https://image.cpen.top/image/image-20220901203849607.png" alt="image-20220901203849607"></p><p><img src="https://image.cpen.top/image/image-20220901203907981.png" alt="image-20220901203907981"></p></blockquote><ul><li>修改以下文件，改为收起状态。如图<ul><li>style=“height: 0px” 应该可以不用写，收起状态默认就是 0 ~~</li></ul></li></ul><blockquote><p><code>.\themes\pure\layout\categories.ejs</code></p><p><code>.\themes\pure\layout\_partial\archive.ejs</code></p><p><img src="https://image.cpen.top/image/image-20220901203746673.png" alt="image-20220901203746673"></p><p><img src="https://image.cpen.top/image/image-20220901203807739.png" alt="image-20220901203807739"></p></blockquote><hr><h2 id="八-未解决的小需求">八. 未解决的小需求</h2><ol><li><p>（已解决，#7.3）一级目录，右侧导航栏 有时跳转失败；</p></li><li><p>Valine 评论系统，下面的评论 被@后，未显示 @信息，而别人的是成功的；</p><blockquote><p>我的</p><p><img src="https://image.cpen.top/image/image-20220901171817579.png" alt="image-20220901171817579"></p><p>其他大佬的</p><p><img src="https://image.cpen.top/image/image-20220901171912131.png" alt="image-20220901171912131"></p></blockquote></li><li><p>引用时 使用 #，会被导航目录误认为 一级标题；</p><blockquote><p><img src="https://image.cpen.top/image/image-20220901172133945.png" alt="image-20220901172133945"></p><p><img src="https://image.cpen.top/image/image-20220901172316157.png" alt="image-20220901172316157"></p></blockquote></li><li><p>（已解决）生成在 /public 目录的静态文件都被压缩了，<s>我看别人的没被压缩，不清楚啥原因。</s> 因为配置了这个 <a href="https://github.com/cofess/hexo-theme-pure/blob/master/README.cn.md#%E5%8D%9A%E5%AE%A2%E4%BC%98%E5%8C%96">https://github.com/cofess/hexo-theme-pure/blob/master/README.cn.md 博客优化</a> 压缩了文件</p><blockquote><p><img src="https://image.cpen.top/image/image-20220901175404486.png" alt="image-20220901175404486"></p></blockquote></li><li><p>（已解决）文章内部一级、二级…标题左侧无锚点</p><blockquote><p>理想效果图</p><p><img src="https://image.cpen.top/image/image-20220906034109271.png" alt="image-20220906034109271"></p><p><s>似乎是环境配置问题，我用虚拟机推送静态文件，就有显示；用真实 win机 推送 就没有锚点，重装 git 也没显示（可能不是 git 的问题）。。。</s></p><p>因为压缩了静态文件，全部注释 <code>hexo-neat</code> 配置。<br>参考<br><a href="https://github.com/cofess/hexo-theme-pure#hexo-neat">https://github.com/cofess/hexo-theme-pure#hexo-neat</a><br><a href="https://github.com/rozbo/hexo-neat#options">https://github.com/rozbo/hexo-neat#options</a></p></blockquote></li></ol><p>无伤大雅，<s>我一般一级标题写的是文章标题</s>；评论区也就是个摆设；<s>静态文件被压缩，可能别人还觉得我是故意，嘿</s>~~</p><p>最后总结：魔改要适量，太费时 还得不到提升，不如多看几个前端视频 多写几篇文章。。。</p><hr>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Pure </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>22_Linux基础-ansible1</title>
      <link href="/blog/posts/22091.html"/>
      <url>/blog/posts/22091.html</url>
      
        <content type="html"><![CDATA[<p>摘要：博客迁移 <a href="https://blog.csdn.net/cpen_web"><code>https://blog.csdn.net/cpen_web</code></a> → 本站<span id="more"></span></p><h1 id="22-Linux基础-ansible1">22_Linux基础-ansible1</h1><p><a href="https://blog.csdn.net/cpen_web">博客🔗：https://blog.csdn.net/cpen_web</a></p><hr><h2 id="一-selinux、established">一. selinux、established</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">示例1：永久修改selinux</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@cPen_A ~]<span class="comment"># vim /etc/selinux/config </span></span><br><span class="line">SELINUX=disabled</span><br><span class="line">============================================================================================</span><br><span class="line">示例：排查连接不上4.00 - 9.00没写完</span><br><span class="line">ps -ef igrep sshd</span><br><span class="line">lsof -i:2233</span><br><span class="line"><span class="built_in">cat</span> /etc/services</span><br><span class="line"></span><br><span class="line">[root@cPen_B ~]<span class="comment"># netstat -anplut igrep ssh</span></span><br><span class="line">Active Internet connections (servers and established)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    </span><br><span class="line">tcp        0      0 0.0.0.0:2233            0.0.0.0:*               LISTEN      911/sshd            </span><br><span class="line">tcp        0     36 192.168.0.31:2233       192.168.0.42:54290      ESTABLISHED 1402/sshd: root [<span class="built_in">pr</span> </span><br><span class="line">tcp6       0      0 :::2233                 :::*                    LISTEN      911/sshd            </span><br><span class="line">udp        0      0 192.168.0.31:68         192.168.0.250:67        ESTABLISHED 893/NetworkManager  </span><br><span class="line">[root@cPen_B ~]<span class="comment"># netstat -aplut igrep ssh</span></span><br><span class="line">Active Internet connections (servers and established)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    </span><br><span class="line">tcp        0      0 0.0.0.0:infocrypt       0.0.0.0:*               LISTEN      911/sshd            </span><br><span class="line">tcp        0     36 cPen_B:infocrypt        192.168.0.42:54290      ESTABLISHED 1402/sshd: root [<span class="built_in">pr</span> </span><br><span class="line">tcp6       0      0 [::]:infocrypt          [::]:*                  LISTEN      911/sshd            </span><br><span class="line">udp        0      0 cPen_B:bootpc           192.168.0.250:bootps    ESTABLISHED 893/NetworkManager </span><br><span class="line"><span class="comment">##############################################################################################################</span></span><br><span class="line">示例2：看当前系统有多少连接 (establish)</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@cPen_B ~]<span class="comment"># netstat -anplut|grep -E &quot;ESTABLISHED|LISTEN|TIME_WAIT&quot;|awk -F&quot; &quot; &#123;&#x27;print $6&#x27;&#125;|sort|uniq -c</span></span><br><span class="line">      2 ESTABLISHED</span><br><span class="line">      2 LISTEN</span><br><span class="line"><span class="comment">#-------------------------------------------------------------------------------</span></span><br><span class="line">[root@cPen_B ~]<span class="comment"># netstat -anplut</span></span><br><span class="line">Active Internet connections (servers and established)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    </span><br><span class="line">tcp        0      0 0.0.0.0:2233            0.0.0.0:*               LISTEN      911/sshd            </span><br><span class="line">tcp        0    232 192.168.0.31:2233       192.168.0.42:54290      ESTABLISHED 1402/sshd: root [<span class="built_in">pr</span> </span><br><span class="line"><span class="comment">#-------------------------------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># pstree查看进程之间的关系</span></span><br><span class="line"><span class="comment"># netstat查看当前网络连接</span></span><br></pre></td></tr></table></figure><hr><h2 id="二-SSH访问控制">二. SSH访问控制</h2><blockquote><p><strong>SSH使用TCP Wrappers实现访问控制 # 注：做访问控制</strong></p><p><strong>主要配置文件</strong></p><ul><li>/etc/hosts.allow</li><li>/etc/hosts.deny</li></ul><p><img src="https://image.cpen.top/image/image-20220826172246758.png" alt="image-20220826172246758"></p></blockquote><blockquote><p><strong>TCP Wrappers可以控制哪些服务</strong></p><ul><li>受super daemon（xinetd）管理的服务 # 注：守护进程的服务</li><li>支持libwrap.so模块的服务</li></ul></blockquote><blockquote><p><strong>TCP Wrappers的访问控制原则</strong></p><ul><li>首先检查 hosts.allow 文件，若找到相匹配的策略，则允许访问</li><li>否则继续检查 hosts.deny 文件，若找到相匹配的策略，则拒绝访问</li><li>如果两个文件中都没有相匹配的策略，则允许访问</li></ul><p>#注：守护进程层面的控制</p><p><img src="https://image.cpen.top/image/image-20220826172422236.png" alt="image-20220826172422236"></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">示例：/etc/hosts.deny</span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">[root@cPen_A ~]<span class="comment"># vim /etc/hosts.deny </span></span><br><span class="line">sshd:192.168.0.31</span><br><span class="line"><span class="comment"># 注：访问控制，拒绝192.168.0.31 不需要重启服务，有守护进程帮它控制</span></span><br></pre></td></tr></table></figure><blockquote><p>#注：主机公钥在 /etc/ssh/下面默认使用ecdsa模式</p><p>#注：known_hosts文件里有什么前面是ip地址，后面是公钥</p><p>#注：authorized_keys放受信任的公钥</p></blockquote><hr><h2 id="三-ssh隧道">三. ssh隧道</h2><blockquote><p><strong>#注：本地端口转发</strong></p><p>CSDN<a href="https://www.cnblogs.com/keerya/p/7612715.html">https://www.cnblogs.com/keerya/p/7612715.html</a></p><p>端口转发：A、C、B主机。主机B起了个nginx服务 端口号80；主机A不能直接访问主机B，但主机A可以访问主机C，主机C可以访问主机B <strong>(A–&gt;C–&gt;B)</strong>；A可以ssh到C，A跳到C，然后访问B的80端口 (nginx)。现在 在主机C上面建立一个隧道，隧道开启15577端口连接B的80端口，A去访问15577端口相当于去访问B的80映射</p><p>#注：ssh隧道 第一个用于不能直接访问的情况；第二个考虑密文传输</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@cPen_C ~]<span class="comment"># lsof -i:15577 # 注：在C主机上操作，15577端口未被占用</span></span><br><span class="line">[root@cPen_C ~]<span class="comment"># ssh -g -L 15577:192.168.0.39:80 sanchuang@192.168.0.39 -p 2233</span></span><br><span class="line"><span class="comment">#注：192.168.0.39 右边B主机ip地址   # 注：在C主机上开通一个隧道 端口为15577</span></span><br><span class="line">[root@cPen_A ~]<span class="comment"># curl 192.168.0.48:15577# 注：模仿网络访问 (80端口nginx网页使用curl访问)</span></span><br><span class="line">&lt;!DOCTYPE html PUBLIC <span class="string">&quot;-//W3C//DTD XHTML 1.1//EN&quot;</span> <span class="string">&quot;http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd&quot;</span>&gt;<span class="comment"># 注：返回的内容</span></span><br><span class="line"><span class="comment">#注：192.168.0.48 中间C主机ip地址# 注：注意防火墙iptables -F</span></span><br><span class="line"><span class="comment">#注：访问中间C主机的15577端口 转接成右边B主机的80端口</span></span><br><span class="line"><span class="comment">#注：注意 不能绑定到本地的回环地址 127.0.0.1只能访问自己 (所以 -g) -g作用 本地所有ip都是访问</span></span><br><span class="line"><span class="comment">#注：- L是本地端口转发</span></span><br><span class="line"><span class="comment">#注：一般可以开启65535个端口</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>#总结：ssh隧道</strong></p><p><strong>端口转发</strong></p><p>1、关闭防火墙</p><p>2、关闭selinux</p><p><strong>#本地端口转发</strong></p><p># ssh -g -L 15577:192.168.0.39:80 192.168.0.39 -p 2233# 注：<strong>C主机上执行 把B主机80端口映射本地15577端口</strong>*</p><p>​<strong>B主机80端口</strong><strong>B主机</strong></p><p>实验环境：</p><p>A主机：192.168.0.132</p><p>C主机：192.168.0.48</p><p>B主机：192.168.0.39</p><p>在C主机上执行：[root@cPen_C ~]# ssh -g -L 15577:192.168.0.39:80 192.168.0.39 -p 2233</p><p>把B主机的80端口映射到本地的15577端口</p><p>访问C主机的15577端口就是访问B主机的80端口</p></blockquote><blockquote><p><strong>#远程端口转发</strong></p><p># ssh -R 15566:192.168.0.39:80 -fN 192.168.0.132 -p 2233 # 注：<strong>C主机上 把B主机80端口 映射到 A主机15566端口</strong></p><p>​<strong>B主机</strong><strong>80端口</strong><strong>A主机</strong></p><p>远程端口转发：在C主机上执行：[root@C .ssh]# ssh -R 15566:192.168.0.39:80 -fN 192.168.0.132 -p 2233</p><p>把B主机的80端口映射到A主机的15566端口</p><p>访问A主机的15566就是访问B主机的80</p><p>#注：A主机 192.168.0.132</p><p>#注：B主机 192.168.0.39</p><p>#注：在C主机上建立远程通道，在C主机上为A主机启动15566端口，映射到B主机</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@cPen_A ~]<span class="comment"># lsof -i:15566# 注：A主机开启15566端口</span></span><br><span class="line">sshd    2067 root    8u  IPv6  38604      0t0  TCP localhost:15566 (LISTEN)<span class="comment"># 注：监听的是本地回环地址</span></span><br><span class="line">sshd    2067 root    9u  IPv4  38605      0t0  TCP localhost:15566 (LISTEN)</span><br><span class="line">[root@cPen_A ~]<span class="comment"># curl 127.0.0.1:15566# 注：访问本地15566端口映射到B主机的80端口</span></span><br><span class="line">&lt;!DOCTYPE html PUBLIC <span class="string">&quot;-//W3C//DTD XHTML 1.1//EN&quot;</span> <span class="string">&quot;http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd&quot;</span>&gt; <span class="comment"># 返回的内容</span></span><br></pre></td></tr></table></figure></blockquote><hr><h2 id="四-ansible服务">四. ansible服务</h2><blockquote><p>ansible是一个自动化运维工具的名称</p><p>基于Python开发，集合了众多运维工具的优点（puppet,fabric,slatstack），实现批量系统配置，程序的部署，批量运行命令等</p></blockquote><p>.--------------------------------------------------------------------------------------------------------------------------------------------</p><blockquote><p>Linux运维：自动化（脚本），智能化，平台化</p><p>Linux运维人员，人肉运维不可取</p><p>诞生了一系列的运维工具，ansible就是其中之一</p></blockquote><p>.--------------------------------------------------------------------------------------------------------------------------------------------</p><blockquote><p>日常运维：</p><p>1、软件安装</p><p>2、服务的配置</p><p>3、运行脚本</p><p>4、升级</p><p>5、备份</p></blockquote><p>.--------------------------------------------------------------------------------------------------------------------------------------------</p><blockquote><p>ansible基于Python开发，依赖于：paramiko,PyYaml和jinja三个关键组件</p><p>基于ssh协议，只要……没写完</p><p>#其他服务需要部署agent，而ansible只需要部署到server，只要十万台的key都上传到其他机器上</p><p>#注：glibc内核底层的库</p></blockquote><p>.--------------------------------------------------------------------------------------------------------------------------------------------</p><blockquote><p><strong>#实验环境</strong></p><p>a： 192.168.0.132（ansible）</p><p>c: 192.168.0.48</p><p>b:  192.168.0.39</p><p>实验前提，做好免密码认证，详见ssh服务</p><p>a --&gt; b , a --&gt; c a可以免密码登录到b和c</p><p><strong>1、在a上安装ansible</strong></p><p>[root@cPen_A .ssh]# yum install epel-release# 注：安装epel源</p><p>[root@cPen_A .ssh]# yum install ansible # 注：安装ansible</p><p><strong>2、配置</strong></p><p>配置目录：</p><p>/etc/ansible/ansible.cfg</p><p>ansible的主配置文件，这个文件主要定义了roles_path路径,主机清单路径,连接清单中的主机方式等配置,这些大部的默认配置已经足够我们平时使用,如需要特别配置可以自行去修改</p><p>/etc/ansible/hosts</p><p>这个配置文件就是默认的主机清单配置文件，可以通过ansible.cfg重新定义</p><p>备份/etc/ansible/hosts文件</p><p>编辑/etc/ansible/hosts文件</p><p>#将需要管理的主机添加到webser组</p><p>#如果通过ssh登录的端口不是22号端口，就需要在配置文件中指明端口号</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@cPen_A ansible]<span class="comment"># cp hosts&#123;,.bak&#125;# 注：备份</span></span><br><span class="line">[root@cPen_A ansible]<span class="comment"># ls</span></span><br><span class="line">ansible.cfg  hosts  hosts.bak  roles</span><br><span class="line">[root@cPen_A ansible]<span class="comment"># &gt;hosts# 注：老的清空</span></span><br><span class="line">[root@cPen_A ansible]<span class="comment"># vim hosts</span></span><br><span class="line">[webser]</span><br><span class="line">192.168.0.31:2233</span><br><span class="line">192.168.0.55</span><br></pre></td></tr></table></figure></blockquote><blockquote><p><strong>ansible组成：</strong></p><p>​1、host inventory--#定义客户机，可以对客户机进行分类：db类，web类…等等</p><p>​2、playbook  --#剧本 让主机按照我给定的剧本去完成一些事情</p><p>​3、module --#模块 实现一个个功能的程序</p><p>​4、pluging --#插件 实现一些额外的小功能</p></blockquote><p>.--------------------------------------------------------------------------------------------------------------------------------------------</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[root@cPen_A /]<span class="comment"># cd /etc</span></span><br><span class="line">[root@cPen_A etc]<span class="comment"># ls |grep ansible</span></span><br><span class="line">ansible</span><br><span class="line">[root@cPen_A etc]<span class="comment"># cd ansible</span></span><br><span class="line">[root@cPen_A ansible]<span class="comment"># ls</span></span><br><span class="line">ansible.cfg  hosts  roles<span class="comment"># 注：host定义主机清单</span></span><br><span class="line">[root@cPen_A ansible]<span class="comment"># less ansible.cfg </span></span><br><span class="line"><span class="comment">#inventory      = /etc/ansible/hosts# 注：主机清单</span></span><br><span class="line"><span class="comment">#library        = /usr/share/my_modules/</span></span><br><span class="line"><span class="comment">#module_utils   = /usr/share/my_module_utils/</span></span><br><span class="line"><span class="comment">#remote_tmp     = ~/.ansible/tmp</span></span><br><span class="line">……</span><br><span class="line">[root@cPen_A ansible]<span class="comment"># less hosts </span></span><br><span class="line"><span class="comment">## [webservers]# 注：[中括号]里webservers 组名  对这个组进行访问控制</span></span><br><span class="line"><span class="comment">## alpha.example.org</span></span><br><span class="line"><span class="comment">## beta.example.org</span></span><br><span class="line"><span class="comment">## 192.168.1.100</span></span><br><span class="line"><span class="comment">## 192.168.1.110</span></span><br><span class="line"></span><br><span class="line">3、ansible使用</span><br><span class="line">-m指定模块名</span><br><span class="line"></span><br><span class="line">HOST-PATTERN         <span class="comment">#匹配主机模式,如all表示所有主机</span></span><br><span class="line">-m MOD_NAME          <span class="comment">#模块名   如:ping</span></span><br><span class="line">-a MOD_ARGS         <span class="comment">#模块执行的参数</span></span><br><span class="line">-f FORKS            <span class="comment">#生成几个子进行程执行</span></span><br><span class="line">-C                   <span class="comment">#(不执行，模拟跑)</span></span><br><span class="line">-u Username         <span class="comment">#某主机的用户名</span></span><br><span class="line">-c  CONNection      <span class="comment">#连接方式（default smart）    </span></span><br></pre></td></tr></table></figure><p>.--------------------------------------------------------------------------------------------------------------------------------------------</p><blockquote><p>ansible 主执行程序,一般用于命令行下执行<br>ansible-playbook 执行playbook中的任务<br>ansible-doc 获取各模块的帮助信息</p></blockquote><p>.--------------------------------------------------------------------------------------------------------------------------------------------</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@cPen_A ~]<span class="comment"># ansible -h# 注：ansible -h帮助文档</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#-------------------------------------------------------------------------</span></span><br><span class="line">[root@cPen_A ~]<span class="comment"># ansible</span></span><br><span class="line">………………</span><br><span class="line">ansible: error: too few arguments</span><br><span class="line">[root@cPen_A ~]<span class="comment"># which ansible</span></span><br><span class="line">/usr/bin/ansible</span><br><span class="line">[root@cPen_A ~]<span class="comment"># ls -al /bin/ansible</span></span><br><span class="line">lrwxrwxrwx 1 root root 20 11月 24 16:41 /bin/ansible -&gt; /usr/bin/ansible-2.7</span><br><span class="line">Ansible</span><br><span class="line">[root@cPen_A ~]<span class="comment"># ansible all -m shell -a &quot;ip a&quot;# 注：匹配所有主机 使用shell模块 执行ip a</span></span><br><span class="line"><span class="comment">#注：指定ansible……没写完都执行命令</span></span><br><span class="line">[root@cPen_A ~]<span class="comment"># ansible all -m shell -a &quot;mkdir /tmp/sc&quot;</span></span><br><span class="line">……</span><br><span class="line">192.168.0.55 | CHANGED | rc=0 &gt;&gt;<span class="comment"># 注：返回0 执行执行成功</span></span><br><span class="line">……</span><br><span class="line">[root@cPen_A ~]<span class="comment"># ansible webser -m shell -a &quot;mkdir /tmp/sc&quot;# 注：匹配webser组</span></span><br><span class="line">192.168.0.55 | FAILED | rc=1 &gt;&gt;<span class="comment"># 注：返回1 表示执行失败</span></span><br></pre></td></tr></table></figure><hr>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Ansible </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>21_Linux基础-ssh服务3</title>
      <link href="/blog/posts/57744.html"/>
      <url>/blog/posts/57744.html</url>
      
        <content type="html"><![CDATA[<p>摘要：博客迁移 <a href="https://blog.csdn.net/cpen_web"><code>https://blog.csdn.net/cpen_web</code></a> → 本站<span id="more"></span></p><h1 id="21-Linux基础-ssh服务3">21_Linux基础-ssh服务3</h1><p><a href="https://blog.csdn.net/cpen_web">博客🔗：https://blog.csdn.net/cpen_web</a></p><hr><h2 id="一-回顾">一. 回顾</h2><h3 id="1-1-ssh">1.1 ssh</h3><p><strong>ssh</strong></p><p>secure shell</p><ul><li>远程登录连接，控制主机</li><li>数据的传输都是加密的</li><li>基于非对称加密技术</li></ul><h3 id="1-2-加密技术">1.2 加密技术</h3><p><strong>加密技术</strong></p><p><strong>对称加密</strong></p><ul><li><p>双方共同拥有一把钥匙，其中一方拿着加密，另外一方就拿着解密</p></li><li><p>弊端：这个公钥的钥匙很容易被有心人获取</p></li></ul><p><strong>非对称加密</strong></p><ul><li>使用公钥对进行加解密</li><li>生成一对钥匙，其中一方作为私钥，另一方就是公钥</li><li>私钥是只有自己知道，私钥保存在本地</li><li>公钥是给需要通信的人，公钥可以给其他人</li><li>使用公钥加密，私钥解密，一般用在数据加密传输<br>(A、B 2个人，B给A用加密的方式传输数据，私钥在A手里，B用A的公钥对数据加密)</li><li>使用私钥加密，公钥解密，一般用于认证<br>(A向B发送数据，B用于确认是不是A发送的数据，客户端A用A的私钥对数据进行加密，服务端B拿A的公钥进行解密。只管认证，不管加密性)</li></ul><h3 id="1-3-ssh登录">1.3 ssh登录</h3><p><strong>ssh登录</strong></p><p>登录方式</p><ul><li>密码登录<br>流程<br>1、客户端发送登录请求<br>2、服务器发送机器的公钥发送给客户端<br>3、客户端用服务器的公钥对密码进行加密，发送给服务端<br>4、服务器收到密文之后，用私钥进行解密，与/etc/shadow进行验证<br>5、返回验证结果</li><li>密钥登录，公钥认证<br>1、客户端生成公钥对<br>2、将客户端的用户公钥发送给服务器，保存在目标用户~/.ssh/authorized_keys<br>3、客户端发送请求，服务器返回1个随机字符串<br>4、客户端收到随机字符串之后，用自己的私钥加密，发送给服务器<br>5、服务器收到密文之后，用客户端的公钥进行解密，拿到随机字符串与生成的字符串比较。返回认证结果(随机字符串其他人拿到了就拿到了，没有任何关系，因为A的公钥很多人都可以有)</li><li>弊端<ul><li>第三方攻击</li><li>A无法判定收到的这个公钥是不是B的</li><li>为了解决这个问题<ul><li>第一次登录的时候会进行人为确认</li><li>确认了之后，将B机器主机公钥存放在~/.ssh/known_hosts，以后每次登录都会进行对比(如果系统重装后，登录不上，提示known_hosts……，将known_hosts删掉)</li></ul></li></ul></li></ul><p><strong>公钥认证</strong></p><p>1、使用命令生成公钥对</p><p>​ssh-keygen</p><p>​-t 选项 指定生成的加密算法</p><p>​默认是rsa算法加密，过程中一直敲回车就可以了</p><p>2、客户端将公钥发送给服务器</p><p>​保存在目标用户的~/.ssh/authorized_keys</p><p>3、检测权限</p><p>​authorized_keys 600权限</p><p>​.ssh 以及家目录都给755以下权限</p><p>或者 允许密码验证登录时(前提条件) # ssh-copy-id <a href="mailto:wy@192.168.0.39">wy@192.168.0.39</a> -p 2233 把公钥发送过去</p><p>[root@cPen_python ~]# ssh-copy-id <a href="mailto:wy@192.168.0.39">wy@192.168.0.39</a> -p 2233# 注：需要可以支持密码登录</p><h3 id="1-4-ssh远程操作工具">1.4 ssh远程操作工具</h3><p><strong>ssh远程操作工具</strong></p><blockquote><ul><li>ssh<ul><li>远程执行命令，远程登录</li><li>登录方式<ul><li>ssh 服务器ip地址<ul><li>使用当前用户和默认端口登录</li><li>使用客户端的当前用户名，登录到远端服务器的同名用户下，默认端口22<br>(没有同名用户，登录失败)</li></ul></li><li>ssh 用户名@服务器ip地址<ul><li>登录到远端服务器的指定用户下，使用默认端口22登录</li></ul></li><li>ssh 服务器地址 -l 用户名 -p 端口号<ul><li>指定用户名和端口去登录</li></ul></li><li>ssh -o 接一些配置选项 服务器的ip地址<br>#无序输入yes，自动保存hostkey<br>ssh -o StrictHostKeyChecking=no 192.168.0.132 -p 223</li><li>ssh -i /tmp/id_rsa 指定私钥认证文件<br>默认情况在~/.ssh/这下面找私钥</li><li>ssh -vvv<br>打印登录过程的详细信息</li></ul></li></ul></li></ul></blockquote><h3 id="1-5-服务配置">1.5 服务配置</h3><p><strong>服务配置</strong></p><ul><li><strong>服务安装包</strong><ul><li><h2 id="oepnssh">oepnssh</h2>[root@cPen_python ~]# which ssh<br>/usr/bin/ssh<br>[root@cPen_python ~]# rpm -qf /usr/bin/ssh<br>openssh-clients-7.4p1-21.el7.x86_64</li></ul></li><li><strong>配置文件</strong><ul><li>/etc/ssh/sshd_config服务端配置文件</li><li>/etc/ssh/ssh_config   客户端配置</li></ul></li><li><strong>主程序</strong><br>服务端 /usr/sbin/sshd<br>客户端 /usr/bin/ssh</li><li>重新加载配置<br>重启服务 service sshd restart/reload<br>kill -1 sshd的pid<br>kill -HUP sshd的pid号</li></ul><h3 id="1-6-查看ssh服务启动情况">1.6 查看ssh服务启动情况</h3><p><strong>查看ssh服务启动情况</strong></p><p>1、ps -aux/-ef</p><p>2、pidof sshd</p><p>3、netstat -autpln所有接口(a)的udp tcp连接，显示出所有程序§ 监听状态(l) n数字显示端口号</p><p>​# 注：查看网络连接状态</p><p>​# ps -eo pid,uid,comm|grep sshd# 注：<strong>-eo查看特定字段信息</strong></p><p>4、lsof -i:22打印出程序所需要的文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># ps aux |grep sshd</span></span><br><span class="line">root       1066  0.0  0.1 112924  4316 ?        Ss   09:41   0:00 /usr/sbin/sshd -D</span><br><span class="line">root       1608  0.0  0.1 158928  5608 ?        Ss   09:43   0:00 sshd: root@pts/0</span><br><span class="line">root       9546  0.0  0.0 112824   980 pts/0    S+   11:26   0:00 grep --color=auto sshd</span><br><span class="line">[root@localhost ~]<span class="comment"># ps -ef |grep sshd</span></span><br><span class="line">root       1066      1  0 09:41 ?        00:00:00 /usr/sbin/sshd -D</span><br><span class="line">root       1608   1066  0 09:43 ?        00:00:00 sshd: root@pts/0</span><br><span class="line">root       9550   1612  0 11:26 pts/0    00:00:00 grep --color=auto sshd</span><br><span class="line">[root@localhost ~]<span class="comment"># ps -eo pid,uid,comm|grep sshd# 注：-eo查看特定字段信息</span></span><br><span class="line">  1066     0 sshd</span><br><span class="line">  1608     0 sshd</span><br></pre></td></tr></table></figure><h3 id="1-7-ssh-agent">1.7 ssh-agent</h3><p><strong>ssh-agent</strong></p><p>​管理密钥</p><p>​在你自己的机器上开启这个服务</p><p>​配置: xshell–&gt; 主机属性–》ssh --》勾选 使用xagent进行身份验证 ;勾选 使用代理转发</p><p>#注：自己的机器是Windows，在Windows上开启ssh-agent服务，现在有A、B 2台机器，A、B两台机器都有Windows的公钥，这种情况开启ssh-agent(xshell里面开启)，A登录B时默认情况会拿windows的公钥进行加密，B机器用Windows的私钥进行解密必须在xshell里进行操作，这都是xshell的行为</p><hr><h2 id="二-跳板机">二. 跳板机</h2><blockquote><p>#注：跳板机给办公人员用的 跳板机/堡垒机 为了保护系统的安全</p><p>#注：使用ssh-agent 访问跳板机和想要访问的主机</p><p>#注：使用场景 阿里的业务 本来有10万台主机(在局域网里面，没有外网，外部不能访问)，我在家里，十万台机器捞出一台，这1台主机可以访问外网(跳板机/堡垒机)，这1台跳板机的配置尤其重要</p><p>开启ssh-agent，把自己主机的公钥添加到目标主机和堡垒机下 (目标主机的权限和堡垒机的权限)</p><p>#注：连到A上，从A跳到B上，B不一定有当前主机的公私钥</p><p>#跳板机 安全加固：</p><p>不能使用root直接登录，使用sudo赋予相应权限</p><p>不能使用默认端口登录</p><p>不能使用密码登录，都使用公钥登录</p><p>添加防火墙配置</p></blockquote><blockquote><p>总结：</p><p>#跳板机</p><p>#安全加固</p><p>​1、不能使用密码登录</p><p>​2、不能使用root登录</p><p>​3、修改默认端口</p><p>​4、添加防火墙配置</p><p>​5、使用跳板机登录</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br></pre></td><td class="code"><pre><span class="line">示例1：查看路由 ip r</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@cPen_python ~]<span class="comment"># ip r# 注：查看路由</span></span><br><span class="line">default via 192.168.0.1 dev ens33 proto dhcp metric 100 </span><br><span class="line">192.168.0.0/24 dev ens33 proto kernel scope <span class="built_in">link</span> src 192.168.0.32 metric 100 </span><br><span class="line">[root@cPen_python ~]<span class="comment"># ip r delete default via 192.168.0.1# 注：删除网关</span></span><br><span class="line">[root@cPen_python ~]<span class="comment"># ip r</span></span><br><span class="line">192.168.0.0/24 dev ens33 proto kernel scope <span class="built_in">link</span> src 192.168.0.32 metric 100 </span><br><span class="line">[root@cPen_python ~]<span class="comment"># ping www.baidu.com# 注：删除后ping不通外网</span></span><br><span class="line">connect: 网络不可达</span><br><span class="line">[root@cPen_python ~]<span class="comment"># ping 8.8.8.8</span></span><br><span class="line">connect: 网络不可达</span><br><span class="line">[root@cPen_python ~]<span class="comment"># ip r add default via 192.168.0.1# 注：还原</span></span><br><span class="line">============================================================================================</span><br><span class="line"></span><br><span class="line">示例2：A机器登录到B机器(简化登录) vim .ssh/config</span><br><span class="line"><span class="comment">#以后会遇到很多机器，ip地址是记不住的</span></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#A机器登录到B机器，操作前需要先把A机器公钥放到B机器上 进行授权</span></span><br><span class="line"><span class="comment">#不修改全全局配置，只修改个人配置：在用户家目录下创建.隐藏文件</span></span><br><span class="line"><span class="comment">#在客户端上配置(配到自己的主机上)</span></span><br><span class="line"><span class="comment">#注：意思是将机器root@192.168.0.31 -p 2233 取个别名叫B</span></span><br><span class="line"><span class="comment">#ForwardAgent yes# 注：转发 开启</span></span><br><span class="line"><span class="comment">#StrictHostKeyChecking no# 注：不需要输入yes 直接把key保存在known_hosts里面</span></span><br><span class="line"><span class="comment">#ServerAliveInterval 60# 注：存活状态，检测服务存活状态</span></span><br><span class="line"><span class="comment">#IdentityFile ~/.ssh/id_rsa# 注：指定认证私钥</span></span><br><span class="line"><span class="comment">#示例如下</span></span><br><span class="line">[root@cPen_python ~]<span class="comment"># vim .ssh/config</span></span><br><span class="line"><span class="comment">###############################################</span></span><br><span class="line">ForwardAgent <span class="built_in">yes</span></span><br><span class="line">StrictHostKeyChecking no</span><br><span class="line">ServerAliveInterval 60</span><br><span class="line">IdentityFile ~/.ssh/id_rsa</span><br><span class="line"><span class="comment">###############################################</span></span><br><span class="line">Host B</span><br><span class="line">    HostName 192.168.0.31</span><br><span class="line">    User    cPen</span><br><span class="line">    Port    2233</span><br><span class="line">[root@cPen_python .ssh]<span class="comment"># chmod 600 config# 注：授予权限 不执行这条语句 可能会报错</span></span><br><span class="line">[root@cPen_python .ssh]<span class="comment"># ssh B</span></span><br><span class="line">Last login: Mon Nov 23 15:05:16 2020 from 192.168.0.32<span class="comment"># 注：登录成功</span></span><br><span class="line">[root@cPen_centos8 ~]<span class="comment"># </span></span><br><span class="line"><span class="comment">#注：即简化 # ssh 192.168.0.31 -l root -p 2233 操作 (比如登录到ftp服务器 ssh ftp)</span></span><br><span class="line">============================================================================================</span><br><span class="line"></span><br><span class="line">示例3：查看端口连接状态 (客户机想访问服务器的时候使用 客户机上telnet) telnet 192.168.0.31 2233</span><br><span class="line"><span class="comment">#注：这个命令只能测tcp的 udp的测不了，但是大部分服务都是tcp的</span></span><br><span class="line"><span class="comment">#查看端口是否可以访问(即服务是否可达) telnet 192.168.0.31 2233</span></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#ping命令 是查看2台机器网络是否连通</span></span><br><span class="line"><span class="comment">#查看服务是否可达使用 telnet命令</span></span><br><span class="line"><span class="comment">#示例：查看端口是否可达(服务是否可达)</span></span><br><span class="line">[root@cPen_python .ssh]<span class="comment"># yum install telnet -y</span></span><br><span class="line">[root@cPen_python .ssh]<span class="comment"># telnet 192.168.0.31 2233</span></span><br><span class="line">Trying 192.168.0.31...</span><br><span class="line">Connected to 192.168.0.31.<span class="comment"># 注：服务可达</span></span><br><span class="line">Escape character is <span class="string">&#x27;^]&#x27;</span>.</span><br><span class="line">SSH-2.0-OpenSSH_8.0</span><br><span class="line">============================================================================================</span><br><span class="line"></span><br><span class="line">示例4：提示主机不被信任 WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#注：提示WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!</span></span><br><span class="line">将~/.ssh/known_hosts 删掉</span><br><span class="line">============================================================================================</span><br><span class="line"></span><br><span class="line">示例5：永久修改主机名 hostnamectl set-hostname <span class="string">&quot;A&quot;</span></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#方法1</span></span><br><span class="line">[root@cPen_python .ssh]<span class="comment"># hostnamectl set-hostname &quot;A&quot;</span></span><br><span class="line"><span class="comment">#注：其实是修改 /etc/hostname</span></span><br><span class="line">[root@A ~]<span class="comment"># less /etc/hostname </span></span><br><span class="line"><span class="comment">#方法2</span></span><br><span class="line"><span class="comment">#或者直接修改 /etc/hostname</span></span><br><span class="line"><span class="comment">#临时修改主机名</span></span><br><span class="line">[root@B ~]<span class="comment"># hostname cp</span></span><br><span class="line">============================================================================================</span><br><span class="line"></span><br><span class="line">示例6：查看进程数 pstree -p</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#注：看程序树状结构 pstree -p</span></span><br><span class="line">[root@cPen_python .ssh]<span class="comment"># pstree -p |grep sshd</span></span><br><span class="line">           |-sshd(1065)-+-sshd(3782)---bash(3784)</span><br><span class="line">           |            |-sshd(3980)---bash(3982)-+-grep(4318)</span><br><span class="line">           |            |-sshd(4059)---bash(4061)</span><br><span class="line">           |            `-sshd(4288)---bash(4290)</span><br><span class="line"><span class="comment">#注：前面是父程序，后面是父程序创造出来的子程序，子程序分配新的bash环境，bash环境在操作命令grep</span></span><br><span class="line"><span class="comment">#注：父进程创造出子进程，子进程有创造出一个子进程，子进程创造出一个新的bash环境</span></span><br><span class="line"><span class="comment">#-------------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">#注：连接到B机器后bash环境多了一个ssh子进程去处理B机器</span></span><br><span class="line">[root@a ~]<span class="comment"># ssh B</span></span><br><span class="line">Last login: Mon Nov 23 15:52:16 2020 from 192.168.0.32</span><br><span class="line">[root@a .ssh]<span class="comment"># pstree -p |grep sshd</span></span><br><span class="line">           |-sshd(1065)-+-sshd(3782)---bash(3784)</span><br><span class="line">           |            |-sshd(3980)---bash(3982)-+-grep(4325)</span><br><span class="line">           |            |-sshd(4059)---bash(4061)---ssh(4323)</span><br><span class="line">           |            `-sshd(4288)---bash(4290)</span><br><span class="line">============================================================================================</span><br><span class="line"></span><br><span class="line">示例7：修改客户端配置 ~/.ssh/config</span><br><span class="line"><span class="comment">#配置文件：~/.ssh/config</span></span><br><span class="line"><span class="comment">#工作中使用跳板机代理登录 (客户端的配置，方便开发配置)</span></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#注：假设现在有A、B、C三台机器，B是跳板机，假设A C不通，A通B，B通C，B通D，B通E…………</span></span><br><span class="line"><span class="comment">#注：B机器当做跳板机，A是自己的本地机，A机器做代理，B机器自动做转发</span></span><br><span class="line"><span class="comment">#注：在本地机A机器中操作</span></span><br><span class="line">[root@a ~]<span class="comment"># vim ~/.ssh/config </span></span><br><span class="line"><span class="comment">###############################################</span></span><br><span class="line">ForwardAgent <span class="built_in">yes</span></span><br><span class="line">StrictHostKeyChecking no</span><br><span class="line">ServerAliveInterval 60</span><br><span class="line">IdentityFile ~/.ssh/id_rsa</span><br><span class="line"><span class="comment">###############################################</span></span><br><span class="line">Host B</span><br><span class="line">    HostName 192.168.0.31</span><br><span class="line">    User    sanchuang</span><br><span class="line">    Port    2233</span><br><span class="line"></span><br><span class="line">Host 192.168.0.54</span><br><span class="line">    User  sanchuang</span><br><span class="line">    Port 2233</span><br><span class="line">    ProxyCommand  ssh 192.168.0.31 -W %h:%p -l sanchuang -p 2233</span><br><span class="line"><span class="comment">#注：ProxyCommand表示 A通过跳板机(192.168.0.31)B登录到</span></span><br><span class="line"><span class="comment">#-------------------------------------------------------------------------------------------</span></span><br><span class="line">Host */ftp*/10.* 以10网段开头的ip地址 ssh 10.0.0.1 跳到这个配置执行</span><br><span class="line">    User    sanchuang</span><br><span class="line">    Port    2233</span><br><span class="line">    ProxyCommand  ssh B nc %h %p -w 10 2&gt;/dev/null</span><br><span class="line"><span class="comment">#注：上课时冲突 前面写Host *与ssh B冲突</span></span><br><span class="line">============================================================================================</span><br><span class="line"></span><br><span class="line">示例8：远程执行命令 ssh B</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#不登录B机器，执行B机器上的命令 (一般用于脚本)</span></span><br><span class="line">[root@a ~]<span class="comment"># ssh B ifconfig# 注：登录到B执行 ifconfig命令</span></span><br><span class="line">[root@a ~]<span class="comment"># ssh B ip a# 注：登录到B执行 查看ip地址 命令 ；命令的返回是B机器给的</span></span><br><span class="line">[root@a ~]<span class="comment"># ssh B &quot;/usr/sbin/ip a&quot;# 注：脚本里建议使用命令的绝对路径</span></span><br><span class="line">============================================================================================</span><br><span class="line"></span><br><span class="line">示例9：远程传输 scp (前提ssh可以连接)</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#注：传输文件</span></span><br><span class="line">[root@a ~]<span class="comment"># touch ahost</span></span><br><span class="line">[root@a ~]<span class="comment"># scp ahost B:/tmp# 注：将A机器 当前路径ahost文件cp到B机器下的/tmp路径下</span></span><br><span class="line">ahost                                                                                                     100%    0     0.0KB/s   00:00  </span><br><span class="line">[root@a ~]<span class="comment"># scp B:/tmp/bhost ./# 注：将B机器 /tmp/bhost文件cp到当前路径</span></span><br><span class="line">bhost                                                                                                     100%    0     0.0KB/s   00:00  </span><br><span class="line">[root@a ~]<span class="comment"># scp B:tmp/testhost ./# 注：将B机器 家目录下 tmp/testhost文件cp到当前路径</span></span><br><span class="line"><span class="comment">#注：传输目录 </span></span><br><span class="line">[root@a ~]<span class="comment"># scp -r adir B:# 注：将A机器当前路径下 adir文件夹 cp到B机器家目录下</span></span><br><span class="line">[root@a ~]<span class="comment"># scp -r adir B:bdir# 注：复制文件夹并改名</span></span><br><span class="line">[root@a ~]<span class="comment"># scp -r adir B:bdir/# 注：和上面的没有区别</span></span><br><span class="line">============================================================================================</span><br><span class="line"></span><br><span class="line">示例10：sftp传输文件 (前提ssh可以连接)</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#注：ftp文件传输</span></span><br><span class="line"><span class="comment">#注：sftp 传输文件 本地和异地传输文件</span></span><br><span class="line"><span class="comment">#注：格式 sftp 用户名@主机名</span></span><br><span class="line">[sanchuang@a ~]$ sftp B</span><br><span class="line">Connected to B.</span><br><span class="line">sftp&gt; <span class="built_in">ls</span><span class="comment"># 注：显示远程目录列表</span></span><br><span class="line">2q        aa        adir      bb        bdir      testdir   testdir2  testhost  </span><br><span class="line">sftp&gt; get bdir</span><br><span class="line">Fetching /home/sanchuang/bdir/ to bdir</span><br><span class="line">Cannot download non-regular file: /home/sanchuang/bdir/</span><br><span class="line">sftp&gt; mget bdir</span><br><span class="line">Fetching /home/sanchuang/bdir/ to bdir</span><br><span class="line">Cannot download non-regular file: /home/sanchuang/bdir/</span><br><span class="line">sftp&gt; get 2q<span class="comment"># 注：get 远程路径下载文件</span></span><br><span class="line">Fetching /home/sanchuang/2q to 2q</span><br><span class="line">/home/sanchuang/2q                                                                                       100%  226   107.5KB/s   00:00    </span><br><span class="line">sftp&gt; <span class="built_in">exit</span></span><br><span class="line">============================================================================================</span><br><span class="line"></span><br><span class="line">示例11：pssh pscp命令 (前提ssh可以连接)</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#批量处理</span></span><br><span class="line">pssh</span><br><span class="line">  -h  指定主机文件列表，内容格式”[user@]host[:Port]”</span><br><span class="line">  -i  指定每个服务器的处理信息</span><br><span class="line">[root@a ~]<span class="comment"># yum install pssh -y# 注：没有的话需要安装epel源</span></span><br><span class="line">[root@a ~]<span class="comment"># cat ip.txt </span></span><br><span class="line">192.168.0.31:2233</span><br><span class="line">192.168.0.54:22</span><br><span class="line">[root@a ~]<span class="comment"># pssh -h ip.txt -i &quot;/usr/sbin/ip a&quot;</span></span><br><span class="line">[1] 17:18:13 [FAILURE] 192.168.0.54:22 Exited with error code 255、</span><br><span class="line">Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password).</span><br><span class="line">……<span class="comment"># 注：需要保证ssh能不能过去</span></span><br><span class="line">[2] 17:18:13 [SUCCESS] 192.168.0.31:2233<span class="comment"># 注：返回SUCCESS表示执行成功</span></span><br><span class="line">……</span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000</span><br><span class="line">……</span><br><span class="line">2: ens33: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen </span><br><span class="line">……</span><br><span class="line"><span class="comment">#-------------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">#ip.txt里面可以这样写</span></span><br><span class="line">[root@a ~]<span class="comment"># vim ip.txt </span></span><br><span class="line">sanchuang@192.168.0.31:2233</span><br><span class="line">sanchuang@192.168.0.54:2233</span><br><span class="line">============================================================================================</span><br><span class="line"></span><br><span class="line">示例12：pscp.pssh 批量传输文件 (前提ssh可以连接)</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@a ~]<span class="comment"># pscp.pssh -h ip.txt pscptest /tmp</span></span><br><span class="line"><span class="comment"># 注：把当前目录下的pscptest文件传送到目标主机的/tmp目录下</span></span><br><span class="line">[root@a ~]<span class="comment"># vim ip.txt </span></span><br><span class="line">sanchuang@192.168.0.31:2233</span><br><span class="line">sanchuang@192.168.0.54:2233</span><br><span class="line">[root@a ~]<span class="comment"># pscp.pssh -h ip.txt pscptest /tmp</span></span><br><span class="line">[1] 17:41:31 [FAILURE] sanchuang@192.168.0.54:2233 Exited with error code 1</span><br><span class="line">[2] 17:41:31 [SUCCESS] sanchuang@192.168.0.31:2233</span><br><span class="line">============================================================================================</span><br><span class="line"></span><br><span class="line">示例13：fping 批量ping(前提ssh可以连接)</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#注：批量ping 使用fping命令</span></span><br><span class="line">[root@a ~]<span class="comment"># yum install fping -y</span></span><br><span class="line">[root@a ~]<span class="comment"># fping -g 192.168.0.1/24# 注：-g 根据网段去ping</span></span><br><span class="line">192.168.0.1 is alive</span><br><span class="line">……</span><br><span class="line">192.168.0.254 is unreachable</span><br><span class="line">[root@a ~]<span class="comment"># fping -f ip.txt # 注：-f根据文件指定ip去ping</span></span><br><span class="line">192.168.0.31 is alive</span><br><span class="line">192.168.0.54 is alive</span><br><span class="line">[root@a ~]<span class="comment"># vim ip.txt </span></span><br><span class="line">192.168.0.31</span><br><span class="line">192.168.0.54</span><br></pre></td></tr></table></figure><hr><h2 id="三-ssh服务补充">三. ssh服务补充</h2><h3 id="3-1-ssh">3.1 ssh</h3><blockquote><p>ssh --&gt; secure shell</p><p>作用：远程登录和操作远程的服务器 --&gt; 信息加密 --&gt; 非常安全的远程登录协议</p><p>#注：远程登录远程操控 省成本</p><p>ssh协议 属于<strong>应用层</strong>的协议</p><p>Linux：openssh --&gt; centos7/8自带</p><p>Windows没有ssh协议</p></blockquote><h3 id="3-2-命令">3.2 命令</h3><blockquote><p>命令：</p><p>​ssh</p><p>​scp# 注：远程copy</p><p>​sftp</p><p>​ssh-keygen</p><p>​ssh-copy-id</p></blockquote><h3 id="3-3-登录方式">3.3 登录方式</h3><blockquote><p>登录方式：</p><p>​Xshell# 注：不开源</p><p>​putty # 注：开源</p><p>​secureCRT# 注：开源</p><ol><li>用户名和密码</li></ol><p>​/etc/passwd# 注：放用户名</p><p>​/etc/shadow# 注：放密码</p><ol start="2"><li>密钥</li></ol><p>​公钥和私钥</p><p>​public key --&gt; 公开# 注：给别人</p><p>​private key # 注：自己所有</p></blockquote><h3 id="3-4-安全加固措施">3.4 安全加固措施</h3><blockquote><p>安全加固措施：</p><ol><li><p>修改端口号  22</p><p>​nmap # 注：端口扫描</p><p>​nc   # 注：端口扫描</p><ol start="2"><li><p>禁用root</p><p>su# 注：su 切换到root</p></li></ol></li><li><p>密码复杂性</p></li><li><p>启用密钥    # 注：禁止密码认证</p></li><li><p>打补丁 或者 安装最新版本的ssh软件</p></li><li><p>iptables防火墙</p></li></ol><p>#注：免密通道（密钥登录）</p></blockquote><h3 id="3-5-免密通道">3.5 免密通道</h3><blockquote><p>免密通道：</p><p>​单向信任# 注：把密钥给其他主机</p><p>​双向信任# 注：双方互给公钥</p><p>#注：一般用root用户，为了安全起见用普通用户</p></blockquote><h3 id="3-6-ansible">3.6 ansible</h3><blockquote><p>ansible：自动化运维的工具：批量管理和操作</p><p>#注：ansible批量管理 批量部署的软件；底层用的ssh协议，推荐建立免密通道</p><p>#注：ansible软件 用Python写的</p></blockquote><h3 id="3-7-日志文件：-var-log-secure">3.7 日志文件：/var/log/secure</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">日志文件：/var/log/secure</span><br><span class="line">[root@cPen_centos8 ssh]<span class="comment"># vim /etc/ssh/sshd_config </span></span><br><span class="line"><span class="comment"># Logging</span></span><br><span class="line"><span class="comment">#SyslogFacility AUTH</span></span><br><span class="line">SyslogFacility AUTHPRIV<span class="comment"># 注：日志类型 认证类型 AUTHPRIV 设置</span></span><br><span class="line"><span class="comment">#LogLevel INFO</span></span><br><span class="line"></span><br><span class="line">日志文件：</span><br><span class="line">/var/log/secure</span><br><span class="line">[sanchuang@cPen_centos8 ~]$ ps aux|grep rsyslog<span class="comment"># 注：外包日志的进程</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ssh将自己的日志功能外包给rsyslog服务去帮它记录日志</span><br><span class="line"></span><br><span class="line">[sanchuang@cPen_centos8 ~]$ vim /etc/rsyslog.conf </span><br><span class="line"><span class="comment"># The authpriv file has restricted access.</span></span><br><span class="line">authpriv.*                                              /var/log/secure</span><br></pre></td></tr></table></figure><h3 id="3-8-ssh服务登录不了，如何排除？">3.8 ssh服务登录不了，如何排除？</h3><blockquote><p>ssh服务登录不了，如何排除？</p><ol><li><p>检测网络是否通畅</p><p>ping</p></li><li><p>检测ssh服务是否启动，检查端口，selinux</p></li><li><p>ssh的配置：是否禁用root，是否禁用密码认证</p></li><li><p>检查防火墙iptables</p><p>​        service firewalled stop</p></li><li><p>黑白名单        # 注：centos6、7里面用，8里面没有</p></li></ol></blockquote><h3 id="3-9-ssh免密通道">3.9 ssh免密通道</h3><blockquote><p>ssh免密通道</p><ol><li><p>生成密钥对</p><p>​ssh-keygen</p><p>​ssh-keygen -t ecdsa</p></li><li><p>上传公钥</p><p>​    ssh-copy-id -i id_ecdsa.pub <a href="mailto:root@192.168.0.35">root@192.168.0.35</a></p><p>​    ssh-copy-id -p 2299 -i id_ecdsa.pub <a href="mailto:root@192.168.0.35">root@192.168.0.35</a></p></li><li><p>远程连接</p><p>​    ssh -p ‘2299’ ‘root@192.168.0.39’</p></li></ol></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">免密通道的建立步骤：</span><br><span class="line">[root@localhost .ssh]<span class="comment"># ssh-keygen -t ecdsa</span></span><br><span class="line">[root@localhost .ssh]<span class="comment"># ssh-copy-id -p 2299 -i id_ecdsa.pub root@192.168.0.39</span></span><br><span class="line">[root@localhost .ssh]<span class="comment"># ssh -p &#x27;2299&#x27; &#x27;root@192.168.0.39&#x27;</span></span><br><span class="line"></span><br><span class="line">known_hosts：存放我们曾经ssh连接过的机器的公钥</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">scp就是在2台机器之间底层使用ssh协议来拷贝文件或者文件夹</span><br><span class="line">[root@cPen_centos8 ssh]<span class="comment"># ssh root@192.168.0.24# 注：远程登录</span></span><br><span class="line">[root@cPen_centos8 ssh]<span class="comment"># ssh root@192.168.0.24 df -Th# 注：远程执行命令</span></span><br><span class="line">[root@cPen_python ssh]<span class="comment"># scp echo.sh root@192.168.0.35:/root# 注：传文件  （源文件 远程）</span></span><br><span class="line">[root@cPen_python ssh]<span class="comment"># scp -r /boot root@192.168.0.35:/root# 注：传文件夹</span></span><br><span class="line">[root@cPen_python ssh]<span class="comment"># scp -r root@192.168.0.35:/etc/passwd# 注：拿文件夹</span></span><br><span class="line">[root@cPen_python ssh]<span class="comment"># ssh root@192.168.0.35 bash /root/echo.sh feng zhang wang</span></span><br><span class="line">scp就是在2台机器之间底层使用ssh协议来拷贝文件或者文件夹</span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">[root@cPen_centos8 ssh]<span class="comment"># getenforce # 注：查看selinux</span></span><br><span class="line">Disabled</span><br><span class="line">[root@cPen_centos8 ssh]<span class="comment"># setenforce 0# 注：临时关闭selinux</span></span><br><span class="line">setenforce: SELinux is disabled</span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">[sanchuang@cPen_centos8 ~]$ ifdown ens33</span><br><span class="line">[sanchuang@cPen_centos8 ~]$ ifup ens33</span><br><span class="line"><span class="comment">#注：禁用root用户登录后，本地可以用root用户登录</span></span><br></pre></td></tr></table></figure><hr>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> SSH </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>20_Linux基础-ssh服务2</title>
      <link href="/blog/posts/46092.html"/>
      <url>/blog/posts/46092.html</url>
      
        <content type="html"><![CDATA[<p>摘要：博客迁移 <a href="https://blog.csdn.net/cpen_web"><code>https://blog.csdn.net/cpen_web</code></a> → 本站<span id="more"></span></p><h1 id="20-Linux基础-ssh服务2">20_Linux基础-ssh服务2</h1><p><a href="https://blog.csdn.net/cpen_web">博客🔗：https://blog.csdn.net/cpen_web</a></p><hr><h2 id="一-公钥认证排错">一. 公钥认证排错</h2><p>1、确保公钥正确</p><p>2、确保~/.ssh/authorized_keys文件权限为600</p><p>3、确保家目录以及.ssh目录权限为755以下权限，即属组和其他人没有7的权限</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">示例</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@cPen_web .ssh]<span class="comment"># ssh -vvv wy@192.168.0.30# 注：看ssh登录时的详细信息</span></span><br><span class="line"><span class="comment">#注：B机器下操作</span></span><br><span class="line">[wy@cPen_web .ssh]$ vim authorized_keys<span class="comment"># 注：把A机器的公钥粘过去</span></span><br><span class="line">[wy@cPen_web .ssh]$ <span class="built_in">chmod</span> 600 authorized_keys </span><br><span class="line">[wy@cPen_web home]$ <span class="built_in">chmod</span> 755 wy<span class="comment"># 注：公钥认证家目录其他人权限不能太高</span></span><br><span class="line">[wy@cPen_web ~]$ <span class="built_in">chmod</span> 755 .ssh<span class="comment"># 注：给.ssh也是755 权限</span></span><br></pre></td></tr></table></figure><hr><h2 id="二-登录方式">二. 登录方式</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@cPen_web .ssh]<span class="comment"># ssh wy@192.168.0.30</span></span><br><span class="line">[root@cPen_web .ssh]<span class="comment"># ssh 192.168.0.30 -l wy</span></span><br><span class="line">[root@cPen_web .ssh]<span class="comment"># ssh 192.168.0.30 -l wy -p 22# 注：指定用户，指定端口（默认22号端口）</span></span><br><span class="line">[root@cPen_web .ssh]<span class="comment"># ssh -vvv 192.168.0.30 wy# 注：查看登录过程的详细信息</span></span><br><span class="line">…………</span><br><span class="line">debug1: Trying private key: /root/.ssh/id_dsa</span><br><span class="line">debug3: no such identity: /root/.ssh/id_dsa: No such file or directory</span><br><span class="line">debug1: Trying private key: /root/.ssh/id_ecdsa</span><br><span class="line">debug3: no such identity: /root/.ssh/id_ecdsa: No such file or directory</span><br><span class="line">debug1: Trying private key: /root/.ssh/id_ed25519</span><br><span class="line">debug3: no such identity: /root/.ssh/id_ed25519: No such file or directory</span><br><span class="line">debug1: Trying private key: /root/.ssh/id_xmss</span><br><span class="line">debug3: no such identity: /root/.ssh/id_xmss: No such file or directory</span><br><span class="line">…………</span><br><span class="line"><span class="comment">#注：默认会去寻找~/.ssh/id_rsa，然后再找id_dsa等等...</span></span><br><span class="line"><span class="comment">#注：rsa  dsa  ecdsa  加密算法</span></span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#注：不接任何用户名，会以A机器上的当前用户去登录B机器上的同名用户（不管B机器有没有这个用户）(没有就登录失败)</span></span><br><span class="line">[sanchuang@cPen_web ~]$ ssh 192.168.0.30</span><br><span class="line">Are you sure you want to <span class="built_in">continue</span> connecting (<span class="built_in">yes</span>/no/[fingerprint])? <span class="built_in">yes</span></span><br><span class="line">sanchuang@192.168.0.30<span class="string">&#x27;s password: </span></span><br><span class="line"><span class="string">[sanchuang@cPen_web ~]$ </span></span><br><span class="line"><span class="string">----------------------------------</span></span><br><span class="line"><span class="string">#注：登录时默认会去寻找家目录下的~/.ssh/id_rsa去进行认证，所有尽量不要在生成key的时候将它的默认路径更改</span></span><br></pre></td></tr></table></figure><hr><h2 id="三-登录验证原理-密码登录">三. 登录验证原理 - 密码登录</h2><p><strong>1、密码登录</strong></p><p>​client向server发送登陆请求，server将自己的公钥发送给client<br>​client使用这个公钥，将密码进行加密，发送给server<br>​server用私钥解密登陆密码，验证合法性<br>​server返回验证结果给client</p><p>这个流程有一个问题，怎么保证收到的公钥就是目标server的公钥？（中间人攻击）<br>如果一个攻击者中途拦截了client的登录请求，发送自己的公钥给client，client端就会用攻击者的公钥进行数据加密，攻击者接收到信息后，用自己的私钥就可以解密了，这就窃取了client的登陆信息了</p><p>为了解决这个问题，client端第一次登录的时候，会进行一个公钥确认</p><p>确认server服务端的这个host主机摘要，确认成功之后就会将server端的pubkey保存在~/know_hosts里面<br>以后每次连接都会验证这个know_hosts里的key和收到的pubkey是否一致</p><p>server主机的pubkey保存在/etc/ssh/目录下，默认使用ssh_host_ecdsa_key.pub</p><p><strong>#注：SSH基于公钥加密的技术</strong></p><blockquote><p><img src="https://image.cpen.top/image/202208241152622.png" alt="image-20220824115204565"></p><p>#注：第一步A机器向B机器发送登录请求（还没有道输入密码的阶段）</p><p>#注：B机器接收到A机器的请求之后，把B机器的公钥发送给A机器</p><p>#注：A机器拿到公钥之后，用公钥对密码进行加密（密码是密文，不能让别人知道）</p><p>#注：A机器把加好密的这一串密文发给B</p><p>#注： B机器收到来此A机器的机密之后的密码，用私钥解密，得到passwd，再与/etc/shadow密码进行比较验证是否通过</p><p>#注：B机器向A机器返回登陆结果（成功或者失败）</p><p><strong>#注：密码登录涉及公钥加密，ssh整个都设计公钥加密（无论是密码登录或公钥登录）</strong></p><p>#注：没有保证第3方人攻击</p><p>#注：公钥加密私钥解密、私钥加密公钥解密（为了区分后面+.pub）</p><p>#注：成对存在成对加解密</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#注：第一次登录机器时，一般会要输入yes（是否信任B主机），然后把key放到know_hosts里面</span></span><br><span class="line">A机器下</span><br><span class="line">[root@cPen_web .ssh]<span class="comment"># ssh 192.168.0.30 -l wy -p 22</span></span><br><span class="line">………………</span><br><span class="line">Are you sure you want to <span class="built_in">continue</span> connecting (<span class="built_in">yes</span>/no/[fingerprint])? <span class="built_in">yes</span></span><br><span class="line">………………</span><br><span class="line">[root@cPen_web .ssh]<span class="comment"># cat known_hosts </span></span><br><span class="line">192.168.0.30 ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBO+Xv/RYitaOHx0iyAbcOXLIPZEn75xh94pJ2L+MWOV/V3YRezYCgHJSwAJm5N9ceqtYCKoXUL3cCJeuGiiDH0A=</span><br><span class="line">B机器下</span><br><span class="line">[root@cPen_web .ssh]<span class="comment"># cd /etc/ssh# 注：ssh服务的配置文件</span></span><br><span class="line">[root@cPen_web ssh]<span class="comment"># ls</span></span><br><span class="line">moduli      sshd_config         ssh_host_ecdsa_key.pub  ssh_host_ed25519_key.pub  ssh_host_rsa_key.pub</span><br><span class="line">ssh_config  ssh_host_ecdsa_key  ssh_host_ed25519_key    ssh_host_rsa_key</span><br><span class="line">[root@cPen_web ssh]<span class="comment"># cat ssh_host_ecdsa_key.pub # 注：默认使用ssh_host_ecdsa_key.pub</span></span><br><span class="line">ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBO+Xv/RYitaOHx0iyAbcOXLIPZEn75xh94pJ2L+MWOV/V3YRezYCgHJSwAJm5N9ceqtYCKoXUL3cCJeuGiiDH0A= </span><br><span class="line"><span class="comment">#注：A机器保存的key就是B机器/etc/ssh/ssh_host_ecdsa_key.pub下面的</span></span><br><span class="line"><span class="comment">#注：A机器生成的公钥就是B机器/etc/ssh/ssh_host_ecdsa_key.pub下面的</span></span><br></pre></td></tr></table></figure><p>第一次登录 输入yes的原因：信任它<br>-#注：为了增加安全性，第一次连接B主机的时候，都会进行一个主机确认（yes）<br>-#注：输入yes表示，是可信任主机，那就是将主机的pubkey保存在~/.ssh/known_hosts里面，以后每次连接都会验证接收的key是否和know_hosts里一直，不一致，会登录异常</p><p>.--------------------------------------------------------------------------------------------------------------------------</p><p>-#注：A机器向B机器发送请求登录<br>-#注：B机器向A机器返回公钥<br>-#注：如果A机器向B机器发送请求的时候，被C给拦截了<br>-#注：C就伪造一下，把它的公钥发送给A<br>-#注：A把密文用C的公钥加密发送给B，c就可以拿自己的密钥解密信息，不安全<br>-#注：只能自己确认（人为确认）接收的公钥是否是B机器的，输入yes，know_hosts就是自己信任的主机，把B主机的公钥保存到know_hosts里面<br>-#注：后续都会拿know_hosts里面 这个公钥和B发送的公钥进行比较（密钥不一致时会提示 登录失败不受信任）</p><p>-#注：这个key是属于主机的key，验证这台主机的<br>-#注：公钥登录的key属于用户的，是验证用户的key</p><hr><h2 id="四-登录验证原理-公钥认证登录">四. 登录验证原理 - 公钥认证登录</h2><p>2、公钥认证登陆</p><p>​client端生成公钥对，将公钥追加在server端的~/.ssh/authorized_keys（1行1个公钥）<br>​发送登录请求，server收到请求之后，生成随机字符串发送给client<br>​client用自己的私钥对字符串进行加密，发送给server<br>​server收到加密字符串之后用公钥解密，比较解密出的字符串和之前生成的字符串是否一致<br>​返回结果给client</p><p>-#注：公私钥对是成对存在的，一个用于加密，一个用于解密，具体哪个为私钥，哪个为公钥就看使用者自己管理</p><p>注意：非对称加密计数<br><strong>使用公钥进行加密，私钥解密，基本用于数据加密</strong><br><strong>使用私钥加密公钥解密，用于认证</strong>（对数据加密性没有要求，拿到就拿到）</p><blockquote><p><img src="https://image.cpen.top/image/202208241157484.png" alt="image-20220824115746442"></p><p>-#注：第一步在A机器上生成公钥对<br>-#注：B主机将A主机的公钥写入B主机用户的~/.ssh/authorized_keys里面<br>-#注：A主机向B机器发送登录请求<br>-#注：B机器收到请求之后，会生成一个随机字符串。把这个随机字符串发送给A机器<br>-#注：A机器收到随机字符串后，用私钥加密<br>-#注：A机器将加密之后的字符串发送给B机器<br>-#注：B机器拿到A机器的加密字符串之后，用公钥解密，再比较解密之后的字符串和生成的字符串是否一致。<br>-#注：B机器再返回结果</p><p>-#注：ABC3台机器，A上面的公钥在BC上都有，C也能公钥解密，得到字符串（对数据加密性没有要求，拿到就拿到）</p></blockquote><hr><h2 id="五-总结">五. 总结</h2><h3 id="5-1-SSH服务介绍">5.1 SSH服务介绍</h3><p><strong>远程Shell应用程序</strong></p><ul><li>允许用户在远程机器上执行任意命令</li><li>让标准输出在本地</li><li>早期明文远程协议：telnet</li></ul><p><strong>SSH（Secure Shell，安全的外壳）</strong></p><ul><li>为客户机提供安全的Shell环境，用于远程管理</li><li>默认端口：TCP <code>22</code></li></ul><p><strong>SSH基于公钥加密（非对称加密）技术</strong></p><ul><li>数据加密传输</li><li>客户端和服务器的身份验证</li></ul><h3 id="5-2-公钥加密体系">5.2 公钥加密体系</h3><p>**公钥（Public Key）和私钥（Private Key）  **</p><ul><li>公钥和私钥是成对生成的，这两个密钥互不相同，两个密钥可以互相加密和解密</li><li>不能根据一个密钥而推算出另外一个密钥</li><li>公钥对外公开，私钥只有私钥的持有人才知道</li><li>私钥应该由密钥的持有人妥善保管</li></ul><p><strong>根据实现的功能不同，可以分为数据加密和数字签名</strong></p><hr><h2 id="六-数据加密">六. 数据加密</h2><p>**发送方使用接收方的公钥加密数据 **<br><strong>接收方使用自己的私钥解密数据</strong></p><blockquote><p><img src="https://image.cpen.top/image/202208241324278.png" alt="image-20220824132431228"></p></blockquote><p><strong>数据加密能保证所发送数据的机密性</strong></p><p>.--------------------------------------------------------------------------------------------------------------------------</p><blockquote><p>-#注：数据加密 主要是为了保障 接收方的数据安全性</p><p>-#注：把A机器的公钥发送给B机器<br>-#注：B用A机器的公钥对传输内容进行加密，然后把信息发送给A机器<br>-#注：将加密内容发送给A机器，此时只有A机器有权限获取里面的内容</p><p>-#注：数据加密 主要是为了保障 接收方的数据安全性<br>-#注：不能保障收到的数据一定是B机器发过来的</p><img src="https://image.cpen.top/image/202208241325586.png" alt="image-20220824132542539" style="zoom:80%;" /></blockquote><hr><h2 id="七-数字签名">七. 数字签名</h2><p><strong>发送方</strong></p><ul><li>对原始数据执行HASH算法得到摘要值</li><li>发送方用自己私钥加密摘要值</li><li>将加密的摘要值与原始数据发送给接收方</li></ul><blockquote><p><img src="https://image.cpen.top/image/202208241327579.png" alt="image-20220824132704531"></p></blockquote><p><strong>数字签名保证数据完整性、身份验证和不可否认</strong></p><p>.--------------------------------------------------------------------------------------------------------------------------</p><blockquote><p>-#数据签名<br>-#注：如何保障收到的数据一定是B机器发过来的<br>-#注：（A机器上要有B机器的公钥，B机器也要有A机器的公钥）<br>-#注：A机器公钥给B机器<br>-#注：B机器公钥给A机器<br>-#注：B机器向A机器发送数据：B机器先用自己的私钥对摘要信息（hash，一般是data的hash散列值 做信息的摘要信息，验证信息-完整值）进行加密生成签名。B机器再用A机器的公钥对信息内容和签名进行加密，发送给A机器<br>-#注：A机器收到B机器的密文数据后，用自己的私钥进行解密。得到解密后的明文后，用B机器的公钥来解密B机器生成的签名</p><p>-#注：数据签名 验证发送方的数据安全（验证发送方是不是我想要的发送方）</p><img src="https://image.cpen.top/image/202208241328958.png" alt="image-20220824132809916" style="zoom:80%;" /></blockquote><hr><h2 id="八-SSH身份验证过程">八. SSH身份验证过程</h2><blockquote><p><img src="https://image.cpen.top/image/202208241330947.png" alt="image-20220824133013889"></p></blockquote><hr><h2 id="九-电子邮件数字签名过程">九. 电子邮件数字签名过程</h2><blockquote><p><img src="https://image.cpen.top/image/202208241331576.png" alt="image-20220824133104520"></p></blockquote><hr><h2 id="十-OpenSSH">十. OpenSSH</h2><p><strong>OpenSSH</strong></p><ul><li>官方站点：<a href="http://www.openssh.com">http://www.openssh.com</a></li><li>主要软件包：openssh-server、openssh-clients</li><li>服务名：<code>sshd</code></li><li>服务端主程序：<strong>/usr/sbin/sshd</strong>  # 注：都是可执行的脚本</li><li>客户端主程序：<strong>/usr/bin/ssh</strong>  # 注：都是可执行的脚本</li><li>服务端配置文件：/etc/ssh/<code>sshd_config</code></li><li>客户端配置文件：/etc/ssh/<code>ssh_config</code></li></ul><p>-#注：xshell就是模拟ssh的客户端<br>-#注：linux yum下下来的包基本都是rpm包</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">示例1：查看命令属于哪个包下载的</span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">ssh是通过openssh下载的</span><br><span class="line">[root@cPen_web ~]<span class="comment"># which ssh</span></span><br><span class="line">/usr/bin/ssh</span><br><span class="line">[root@cPen_web ~]<span class="comment"># rpm -qf /usr/bin/ssh</span></span><br><span class="line">openssh-clients-8.0p1-4.el8_1.x86_64</span><br><span class="line">[root@cPen_web ~]<span class="comment"># yum list |grep openssh</span></span><br><span class="line">===============================================================================</span><br><span class="line"></span><br><span class="line">示例2：启动sshd服务的实际上是执行行的服务启动脚本文件 /usr/sbin/sshd（真正执行服务的脚本）</span><br><span class="line">[root@cPen_web ~]<span class="comment"># rpm -qf /usr/sbin/sshd</span></span><br><span class="line">openssh-server-8.0p1-4.el8_1.x86_64</span><br><span class="line">[root@cPen_web ~]<span class="comment"># service sshd restart# 注：service 守护进程 帮它去管理服务</span></span><br><span class="line">Redirecting to /bin/systemctl restart sshd.service</span><br><span class="line">[root@cPen_web ~]<span class="comment"># </span></span><br><span class="line"><span class="comment">#注：守护进程可以帮助管理，想关闭或打开。自己管理的话，很难，要手动的kill 或者 先kill再起来</span></span><br><span class="line">===============================================================================</span><br><span class="line"></span><br><span class="line">示例3：直接执行脚本/usr/sbin/sshd 启动服务</span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#如果服务起来，会有22号端口属于listen监听状态</span></span><br><span class="line">[root@cPen_web ~]<span class="comment"># service sshd stop</span></span><br><span class="line">[root@cPen_web ~]<span class="comment"># lsof -i:22</span></span><br><span class="line">COMMAND  PID      USER   FD   TYPE DEVICE SIZE/OFF NODE NAME</span><br><span class="line">sshd    1709      root    5u  IPv4  37939      0t0  TCP cPen_web:ssh-&gt;192.168.0.42:54537 (ESTABLISHED)</span><br><span class="line">sshd    2185      root    5u  IPv4  50589      0t0  TCP cPen_web:ssh-&gt;192.168.0.42:57389 (ESTABLISHED)</span><br><span class="line">[root@cPen_web ~]<span class="comment"># /usr/sbin/sshd</span></span><br><span class="line">[root@cPen_web ~]<span class="comment"># lsof -i:22</span></span><br><span class="line">COMMAND  PID      USER   FD   TYPE DEVICE SIZE/OFF NODE NAME</span><br><span class="line">sshd    1709      root    5u  IPv4  37939      0t0  TCP cPen_web:ssh-&gt;192.168.0.42:54537 (ESTABLISHED)</span><br><span class="line">sshd    2185      root    5u  IPv4  50589      0t0  TCP cPen_web:ssh-&gt;192.168.0.42:57389 (ESTABLISHED)</span><br><span class="line">sshd    2282      root    4u  IPv4  52306      0t0  TCP *:ssh (LISTEN)<span class="comment"># 注：处于监听状态</span></span><br><span class="line">sshd    2282      root    6u  IPv6  52308      0t0  TCP *:ssh (LISTEN)</span><br><span class="line">===============================================================================</span><br><span class="line"></span><br><span class="line">示例4：直接启动vsftpd服务端</span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#注：vsftpd是服务端，ftp是客户端</span></span><br><span class="line">[root@cPen_web ~]<span class="comment"># vsftpd# 注：启动vsftpd服务端（可以直接启动）</span></span><br><span class="line"><span class="comment">#注：查看服务是否起来（4种）</span></span><br><span class="line">[root@cPen_web ~]<span class="comment"># pidof vsftpd</span></span><br><span class="line">2297</span><br><span class="line">[root@cPen_web ~]<span class="comment"># ps -ef |grep vsftpd</span></span><br><span class="line">root        2297       1  0 14:50 ?        00:00:00 vsftpd</span><br><span class="line">root        2300    2186  0 14:51 pts/1    00:00:00 grep --color=auto vsftpd</span><br><span class="line">[root@cPen_web ~]<span class="comment"># netstat -auplt |grep vsftpd</span></span><br><span class="line">tcp6       0      0 [::]:ftp                [::]:*                  LISTEN      2297/vsftpd         </span><br><span class="line">[root@cPen_web ~]<span class="comment"># lsof -i:21</span></span><br><span class="line">COMMAND  PID USER   FD   TYPE DEVICE SIZE/OFF NODE NAME</span><br><span class="line">vsftpd  2297 root    3u  IPv6  52524      0t0  TCP *:ftp (LISTEN)</span><br></pre></td></tr></table></figure><hr><h2 id="十一-SSH服务端配置文件">十一. SSH服务端配置文件</h2><p><strong>/etc/ssh/sshd_config</strong></p><ul><li>重启sshd服务生效</li></ul><p>修改了配置文件端口号，启动不起来，原因是selinux是enforcing状态需要修改</p><p>.--------------------------------------------------------------------------------------------------------------------------</p><p>-#注：一般配置文件都是以#开头的注释行<br>-#注：只有root用户有权限修改它</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line">示例1：过滤出有效行</span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">[root@cPen_web ~]<span class="comment"># grep -v -E &quot;^#|^$&quot; /etc/ssh/sshd_config # 注：-E支持扩展正则 ； -v不显示</span></span><br><span class="line">HostKey /etc/ssh/ssh_host_rsa_key</span><br><span class="line">HostKey /etc/ssh/ssh_host_ecdsa_key</span><br><span class="line">HostKey /etc/ssh/ssh_host_ed25519_key</span><br><span class="line">……………………</span><br><span class="line">Subsystemsftp/usr/libexec/openssh/sftp-server</span><br><span class="line">===============================================================================</span><br><span class="line"></span><br><span class="line">示例2：vim /etc/ssh/sshd_config</span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">[root@cPen_web ~]<span class="comment"># vim /etc/ssh/sshd_config </span></span><br><span class="line"><span class="comment">#Port 22# 注：默认端口号</span></span><br><span class="line"><span class="comment">#AddressFamily any# 注：ip地址 （ipv4\ipv6） any 任何</span></span><br><span class="line"><span class="comment">#ListenAddress 0.0.0.0# 注：本机上面的所有ip地址</span></span><br><span class="line"><span class="comment">#ListenAddress ::# 注：ipv6</span></span><br><span class="line">===============================================================================</span><br><span class="line"></span><br><span class="line">示例3：ipv6地址</span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">IPv6的地址长度为128位，是IPv4地址长度的4倍。于是IPv4点分十进制格式不再适用，采用十六进制表示。</span><br><span class="line"><span class="comment">#注：以: 冒号分隔</span></span><br><span class="line">===============================================================================</span><br><span class="line"></span><br><span class="line">示例4：网络连接失败 排错</span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">1、ping通 确保网络是联通的</span><br><span class="line">2、确保服务是起来的</span><br><span class="line">[C:\~]$ telnet 192.168.0.29 2233</span><br><span class="line">1端口没起，2防火墙</span><br><span class="line">[C:\~]$ telnet 192.168.0.29</span><br><span class="line">Connecting to 192.168.0.29:23...</span><br><span class="line">Connecting to 192.168.0.29:2233...</span><br><span class="line">Connection established.</span><br><span class="line">To escape to <span class="built_in">local</span> shell, press <span class="string">&#x27;Ctrl+Alt+]&#x27;</span>.</span><br><span class="line">SSH-2.0-OpenSSH_8.0</span><br><span class="line">===============================================================================</span><br><span class="line"></span><br><span class="line">示例5：配置文件常用配置详解</span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">[root@cPen_web ~]<span class="comment"># vim /etc/ssh/sshd_config </span></span><br><span class="line"><span class="comment">#Port 22</span></span><br><span class="line">Port 2233<span class="comment"># 注：修改默认监听端口（默认22端口）</span></span><br><span class="line"><span class="comment">#AddressFamily any</span></span><br><span class="line">ListenAddress 192.168.0.29<span class="comment"># 注：设置本机监听ip地址，默认为0.0.0.0（表示在本机任意ip地址上监听）</span></span><br><span class="line">PermitRootLogin no<span class="comment"># 注：禁止root用户登录（no 不予许root用户登录，默认为yes）</span></span><br><span class="line"><span class="comment">#PubkeyAuthentication yes# 注：是否开启公钥认证（默认开启）</span></span><br><span class="line">AuthorizedKeysFile      .ssh/authorized_keys<span class="comment"># 注：配置公钥认证的文件（这个文件可以改 没必要）</span></span><br><span class="line"><span class="comment"># 注：前面的家目录没有写</span></span><br><span class="line">PasswordAuthentication no<span class="comment"># 注：是否开启密码认证，默认为yes</span></span><br><span class="line"><span class="comment"># WARNING: &#x27;UsePAM no&#x27; is not supported in Red Hat Enterprise Linux and may cause several</span></span><br><span class="line">UsePAM <span class="built_in">yes</span><span class="comment"># 注：使用pam认证（一般为yes不用改它）(pam帮我们进行认证，而不是ssh)</span></span><br><span class="line"><span class="comment">#UseDNS yes# 注：是否将客户端主机名解析成ip，可以将其设置为no</span></span><br><span class="line"><span class="comment"># 注：此过程不顺利的话，会非常的慢，会影响登录认证的速度，可以将其设置为no</span></span><br><span class="line"><span class="comment">#注：一般来说不会开启密码认证</span></span><br><span class="line"><span class="comment">#注：一般来说一个机器不允许root用户登录，一般来说给用户加sudo权限，用超级用户登录</span></span><br><span class="line"><span class="comment">#注：pam是linux下面的pam模块，认证模块。我们登陆进来后，pam帮我们做的密码/密码认证，身份认证状态检验</span></span><br><span class="line"><span class="comment">#注：pam认证模块 --&gt; 配置路径 /etc/pam.d/这个目录下面存放的是每个需要认证的服务的配置，文件名就是服务名</span></span><br><span class="line"><span class="comment">#注：DNS --&gt; 域名解析服务。网络中使用ip地址通信。域名最终都要解析成ip的</span></span><br><span class="line"><span class="comment">#注：DNS域名解析服务。主机名也可以使用DNS解析 (比如cPen_centos8)</span></span><br><span class="line"><span class="comment">#注：如果在DNS范畴之内，可以通过主机名来访问这台主机，或者通过ip地址来访问</span></span><br><span class="line">-----------------------------------------------------------------------------------</span><br><span class="line">[root@cPen_centos8 ~]<span class="comment"># visudo</span></span><br><span class="line">sanchuang   ALL=(ALL)   NOPASSWD:ALL</span><br><span class="line">[root@cPen_python ~]<span class="comment"># service sshd restart# 注：重启服务后22号端口已有的连接还在</span></span><br><span class="line">-------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#注：主机B登录</span></span><br><span class="line">[root@cPen_web ~]<span class="comment"># ssh 192.168.0.29 -p 2233# 注：指定端口2233</span></span><br><span class="line"><span class="comment">#注：已经连接了的端口，即使改了端口，也不会有影响（只要不关闭窗口）</span></span><br><span class="line"><span class="comment">#注：修改配置文件只是在磁盘上进行修改，对于正在运行的程序，需要把配置加载到磁盘上（重启、reload、kill -1）</span></span><br><span class="line"><span class="comment">#注：修改完配置文件后，root用户 和 密码登录 登录不上去了（禁止使用密码登录）</span></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#注：修改配置文件并重启服务时 PermitRootLogin no</span></span><br><span class="line"><span class="comment">#注：B机器root用户登录不上了</span></span><br><span class="line">[root@cPen_web ~]<span class="comment"># ssh 192.168.0.29 -p 2233</span></span><br><span class="line">Permission denied (publickey,gssapi-keyex,gssapi-with-mic).</span><br><span class="line">===============================================================================</span><br><span class="line">PasswordAuthentication no<span class="comment"># 注：是否开启密码密码认证，默认为yes</span></span><br><span class="line"></span><br><span class="line">示例6：物理机上 公钥登录（sanchuang用户登录）</span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#注：ssh生成公钥：（xshell菜单栏）工具 --&gt; 新建用户密钥生成向导 --&gt; 下一步（一直） --&gt; 保存公钥pub key:id_rsa_2048.pub</span></span><br><span class="line"><span class="comment">#注：把pub key复制到sanchuang用户下面去</span></span><br><span class="line">[sanchuang@cPen_web .ssh]$ vim authorized_keys</span><br><span class="line">………………</span><br><span class="line">[sanchuang@cPen_web .ssh]$ <span class="built_in">chmod</span> 600 authorized_keys </span><br><span class="line">[sanchuang@cPen_web .ssh]$ <span class="built_in">chmod</span> 755 /home/sanchuang</span><br><span class="line"><span class="comment">#注：物理机（xshell）生产一对密钥对，放在虚拟机上</span></span><br><span class="line"><span class="comment">#注：物理机上生成的key，在物理机上登，对物理机进行验证</span></span><br><span class="line"><span class="comment">#注：属性 --&gt; 用户身份验证 --&gt; 方法：Public Key ; 用户名：sanchuang ； 用户密钥：id_rsa_2048（刚才生成的密钥）</span></span><br><span class="line"><span class="comment">#注：这个key是物理机上的key，key粘到哪个用户下，就以哪个用户登录。在物理机上生成密钥对，要登你的虚拟机，使用xshell生成和管理密钥对，需要登录虚拟机的sanchuang用户，把物理机的pub key赋给sanchuang用户家目录下~/.ssh/authorized_keys，使用物理机去登。在物理机上生成的key，在物理机上登，sanchuang保存的是物理机的key，只能对物理机进行验证</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#注：连接不成功的话，设置selinux 关掉（setenforce 0）。修改端口需要添加selinux的规则，一般来说不会去添加它的规则，而是把它关掉</span></span><br><span class="line"><span class="comment">#注：连不上的话，把iptables也关掉（iptables -F）</span></span><br><span class="line">===============================================================================</span><br><span class="line"></span><br><span class="line">示例7：ssh命令登陆</span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">ssh命令登陆</span><br><span class="line">-l指定登陆的用户名</span><br><span class="line">-p指定server的端口</span><br><span class="line">-i指定私钥文件，默认会在~/.ssh/去找私钥</span><br><span class="line">-o接特定设置选项</span><br><span class="line"><span class="comment">#无序输入yes，自动保存hostkey</span></span><br><span class="line">ssh -o StrictHostKeyChecking=no 192.168.0.132 -p 223</span><br><span class="line"><span class="comment">#注：脚本里这样写 无序输入yes</span></span><br><span class="line">===============================================================================</span><br><span class="line"></span><br><span class="line">示例8：修改完成之后重新加载配置的方法（sshd_config）</span><br><span class="line"><span class="comment">#注：ssh起来后(默认会读磁盘里ssh配置文件)放到内存去运行</span></span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#注：修改完成之后重新加载配置的方法（sshd_config）</span></span><br><span class="line">[root@cPen_web ~]<span class="comment"># kill -1 2282</span></span><br><span class="line">[root@cPen_web ~]<span class="comment"># kill -HUP 2282</span></span><br><span class="line">[root@cPen_web ~]<span class="comment"># service sshd restart# 注：重新启动服务</span></span><br><span class="line">[root@cPen_web ~]<span class="comment"># service sshd reload# 注：重新加载配置</span></span><br><span class="line">===============================================================================</span><br><span class="line"></span><br><span class="line">示例9：man 5 查看配置文件帮助文档</span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">man 1普通的命令</span><br><span class="line">man 5查看配置文件的帮助文档</span><br><span class="line">[root@cPen_web .ssh]<span class="comment"># man 5 /etc/ssh/sshd_config # 注：man 5 查看配置文件帮助文档</span></span><br><span class="line">===============================================================================</span><br><span class="line"></span><br><span class="line">示例10：UsePAM <span class="built_in">yes</span></span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">UsePAM <span class="built_in">yes</span><span class="comment"># 注：使用pam认证（一般为yes不用改它）</span></span><br><span class="line"><span class="comment">#注：pam是linux下面的pam模块，认证模块。我们登陆进来后，pam帮我们做的密码/密码认证，身份认证状态检验</span></span><br><span class="line">模块文件：/etc/pam.d/ <span class="comment"># 注：存放路径；用于认证的模块，linux可插入认证模块</span></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@cPen_python ~]<span class="comment"># cd /etc/pam.d/# 注：里面是pam的配置</span></span><br><span class="line">[root@cPen_python pam.d]<span class="comment"># ls# 注：里面全是认证的模块；每一个服务一个文件</span></span><br><span class="line">chfn         fingerprint-auth     passwd            postlogin     runuser-l          smtp.postfix  sudo-i          systemd-user</span><br><span class="line">chsh         fingerprint-auth-ac  password-auth     postlogin-ac  smartcard-auth     sshd          su-l            vlock</span><br><span class="line">config-util  login                password-auth-ac  remote        smartcard-auth-ac  su            system-auth     vmtoolsd</span><br><span class="line">crond        other                polkit-1          runuser       smtp               sudo          system-auth-ac  vsftpd</span><br><span class="line">===============================================================================</span><br><span class="line"></span><br><span class="line">示例11：hostname -f 查看主机名全称</span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">[root@cPen_centos8 pam.d]<span class="comment"># hostname -f</span></span><br><span class="line">cPen_centos8</span><br><span class="line">===============================================================================</span><br><span class="line"></span><br><span class="line">示例12：解析出百度的ip</span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">[root@cPen_centos8 pam.d]<span class="comment"># host www.baidu.com</span></span><br><span class="line">[root@cPen_centos8 pam.d]<span class="comment"># ping www.baidu.com</span></span><br></pre></td></tr></table></figure><hr><h2 id="十二-练习">十二. 练习</h2><p><strong>修改端口为2233</strong><br><strong>禁止root用户登录</strong><br><strong>禁止密码登录</strong><br><strong>创建管理员用户sanchuang,给sanchuang所有sudo权限</strong><br><strong>在Windows机器上生成密钥对，后续A,B两台虚拟机器都使用公钥认证进行登陆</strong><br><strong>*注意关闭防火墙和selinx</strong><br>iptables -F<br>getenforce 0 --&gt; 或者修改配置文件 /etc/selinux/config   --disabled，永久修改需要重启机器</p><p>.--------------------------------------------------------------------------------------------------------------------------</p><p>-#注：<strong>不是错误，使用service sshd restart命令实际上是执行/bin/systemctl restart sshd.service命令</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@cPen_python ~]<span class="comment"># service sshd restart</span></span><br><span class="line">Redirecting to /bin/systemctl restart sshd.service<span class="comment"># 注：使用这个命令去执行</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#注：练习 具体操作如上</span></span><br></pre></td></tr></table></figure><hr><h2 id="十三-ssh-agent管理密钥">十三. ssh-agent管理密钥</h2><blockquote><p><img src="https://image.cpen.top/image/202208241344042.png" alt="image-20220824134452001"></p><p>ssh-agent管理密钥  一个代理程序，帮助我们管理私钥<br>配置: xshell–&gt; 主机属性–》ssh --》勾选 使用xagent进行身份验证 ;勾选 使用代理转发</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[sanchuang@mysql-binary .ssh]$ ssh-add id_rsa<span class="comment"># 注：添加主机密钥给agent管理</span></span><br><span class="line"><span class="comment">#注：把虚拟机上面的key也交给给ssh-agent去管理</span></span><br><span class="line"></span><br><span class="line">[sanchuang@mysql-binary .ssh]$ ssh-add -l<span class="comment"># 注：查看agent管理了哪些密钥</span></span><br><span class="line">2048 SHA256:eJz1xcOJnntAP/R0w1if7oEaukIbiwh0vmtp9Q605ls  (RSA)</span><br></pre></td></tr></table></figure><p>.--------------------------------------------------------------------------------------------------------------------------</p><p>-#注：ssh-agent的概念：帮你管理密钥的，默认情况下ssh-agent开在物理机上的。ssh-agent就是一个中间商，保存管理密钥的。在xshell里面开启了ssh-agent之后，从A机器登录到B机器，它会先取看一下A机器root家目录下面有没有公私钥，没有的话 会从ssh-agent里面捞取它的公私钥<br>-#注：B机器没有A机器的公钥，它会去找ssh-agent里面管理的那个公钥对（中间商），<code>最后认证是拿物理机的key去做认证的</code>，因为物理机里面跑了1个ssh-agent，管理了物理机的pubkey，物理机的pubkey可以登录A又可以登录B，满足的条件是物理机能够登录到B<br>-#注：再来一台主机C，想要从A调到C，先决条件是C要有物理机的pubkey，C对物理机授了权，然后物理机的key又由ssh-agent去管理，就可以从A主机跳到C主机。（家目录下面没有私钥生成，就去找ssh-agent管理的密钥对，只要C有物理机的公钥，就都可以登录了）</p><p>-#注：这个服务是xshell的，只能通过xshell里面才能进行这一系列操作（xshell管理ssh-agent）</p><p>.--------------------------------------------------------------------------------------------------------------------------</p><blockquote><p>-#注：（xshell菜单栏）文件 --&gt; 打开（下拉） --&gt; 属性（右键） --&gt; SSH --&gt; 允许Xagent进行身份验证（勾上）；允许代理转发（勾上）</p><p><img src="https://image.cpen.top/image/202208241347670.png" alt="image-20220824134713614"></p><p>-#注：在B机器上勾上（现在要在A机器上登录B机器）</p></blockquote><p>.--------------------------------------------------------------------------------------------------------------------------</p><p>#注：物理机上面有2个虚拟机 A、B，物理机使用xshell去连接A和B。刚在在A、B上都创建了sanchuang用户，并且把物理机的pub key都给了A、B两台机器的sanchuang用户。现在，在A机器上想要连接B机器的sanchuang用户，应该怎么做？B机器上没有A机器的key</p><p>#注：答：把A的key给B（在A机器上生成自己的key，这样的话太麻烦了）</p><p>#注：用户加的是哪一台的pubkey，就是允许哪一台的主机登录，加的authorized_keys是为哪一台机器授权</p><p>#注：A、B机器2台主机之间进行通讯的话，有1个本地的概念，它会在本地用户的家目录下面去找key；物理机没有这个概念，因为它是通过xshell(ssh的客户端，图形界面的ssh命令)去连接的，它通过xshell去管理它的key</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">示例：A机器上登录到B机器</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#注：前提确保 Windows可以免密码登录到A、B机器</span></span><br><span class="line">[sanchuang@cPen_python ~]$ ssh 10.122.148.108 -p 2233</span><br><span class="line">Last login: Sun Nov 15 19:59:00 2020 from 10.122.38.250</span><br><span class="line">[sanchuang@cPen_centos8 ~]$ </span><br></pre></td></tr></table></figure><hr><h2 id="十四-其他总结">十四. 其他总结</h2><h3 id="14-1-SSH服务端配置文件">14.1 SSH服务端配置文件</h3><p><strong>SSH登录使用的用户名</strong></p><ul><li>服务器中的本地系统用户的帐号名</li></ul><p><strong>SSH登录的用户验证方式</strong></p><ul><li>密码验证：使用服务器中系统帐号对应的密码</li><li>密钥对验证：使用客户机中生成的公钥、私钥</li></ul><p><strong>SSH客户端文件通常无需修改</strong></p><h3 id="14-2-SSH客户端">14.2 SSH客户端</h3><p><strong>使用ssh命令远程登录</strong></p><ul><li>方式1： ssh 用户名<code>@</code>服务器地址</li><li>方式2： ssh <code>-l</code> 用户名 服务器地址</li><li>方式3： ssh服务器地址</li></ul><p><strong>客户机使用第一次连接服务器时</strong><br>[root@localhost ~]# <code>ssh root@10.10.10.1</code></p><h3 id="14-3-known-hosts文件">14.3 known_hosts文件</h3><p><strong>客户机使用ssh第一次连接服务器时</strong></p><ul><li>将服务器上sshd守护进程的公钥复制到本地</li><li>存放到本地~/.ssh/known_hosts文件中</li><li>每行存放一台服务器的公钥</li><li><code>用来验证服务器的身份</code></li></ul><p><strong>公钥验证服务器的具体细节</strong></p><blockquote><p><img src="https://image.cpen.top/image/202208241352942.png" alt="image-20220824135229894"></p><p><img src="https://image.cpen.top/image/202208241352022.png" alt="image-20220824135239974"></p></blockquote><h3 id="14-4-密钥方式">14.4 密钥方式</h3><p><strong>SSH的公钥认证流程</strong></p><blockquote><p><img src="https://image.cpen.top/image/202208241353236.png" alt="image-20220824135318183"></p></blockquote><p><strong>公钥验证客户端的具体细节</strong></p><blockquote><p><img src="https://image.cpen.top/image/202208241353669.png" alt="image-20220824135336623"></p><p><img src="https://image.cpen.top/image/202208241354706.png" alt="image-20220824135415658"></p></blockquote><p><strong>SSH公钥认证的基本实现步骤</strong></p><ul><li><p><strong>1、在客户机创建密钥对</strong></p><ul><li><code>ssh-keygen -t rsa</code>指定rsa算法</li><li>设置保护私钥文件的密码</li><li>在<code>~/.ssh</code>下生成两个文件</li><li><code>id_rsa</code>是用户的私钥</li><li><code>id_rsa.pub</code>是用户的公钥</li></ul></li><li><p><strong>2、将公钥文件上传至服务器</strong></p><ul><li><p>上传到服务器~/.ssh/authorized_keys文件</p></li><li><p>文件中每行保存一个用户的公钥</p></li><li><p><code>scp ~/.ssh/id_rsa.pub</code></p><p><code>root@10.10.10.1:~/.ssh/authorized_keys</code></p></li></ul></li></ul><h3 id="14-5-SSH客户端">14.5 SSH客户端</h3><p><strong>使用scp命令远程复制文件/目录</strong></p><ul><li>方式1： scp 用户名@服务器地址:源文件 目标路径</li><li>方式2： scp 本地文件 用户名@服务器地址:目标路径</li><li>若复制的是目录，则需添加“-r”选项</li></ul><p><strong>使用sftp命令从服务器下载文件</strong></p><ul><li>格式：sftp 用户名@服务器地址</li></ul><h3 id="14-6-通过SSH运行服务器中的窗口程序">14.6 通过SSH运行服务器中的窗口程序</h3><p><strong>运行服务器中的图形程序是SSH的重要应用</strong></p><ul><li>ssh命令需要在图形界面虚拟终端下运行</li><li>命令格式：<code>ssh -X username@sshserver</code></li></ul><blockquote><p><img src="https://image.cpen.top/image/202208241358685.png" alt="image-20220824135823639"></p></blockquote><p>xlock是运行在SSH服务器中，而显示在SSH客户机中的窗口程序</p><h3 id="14-7-SSH客户端应用">14.7 SSH客户端应用</h3><p><strong>使用图形客户端软件 SecureCRT</strong></p><ul><li>主要用途：基于SSH协议远程登录以便管理服务器</li><li>下载地址：<a href="http://www.vandyke.com/">http://www.vandyke.com/</a></li></ul><p><strong>使用图形客户端软件 WinSCP</strong></p><ul><li>主要用途：基于sftp、scp或ftp的方式下载/上传数据</li><li>下载地址：<a href="http://winscp.net/">http://winscp.net/</a></li></ul><h3 id="14-8-SSH访问控制">14.8 SSH访问控制</h3><p>**SSH使用TCP Wrappers实现访问控制 **</p><p><strong>主要配置文件</strong></p><ul><li>/etc/hosts.allow</li><li>/etc/hosts.deny</li></ul><blockquote><p><img src="https://image.cpen.top/image/202208241400235.png" alt="image-20220824140053190"></p></blockquote><p><strong>TCP Wrappers可以控制哪些服务</strong></p><ul><li>受super daemon（xinetd）管理的服务</li><li>支持libwrap.so模块的服务</li></ul><p><strong>TCP Wrappers的访问控制原则</strong></p><ul><li>首先检查 hosts.allow 文件，若找到相匹配的策略，则允许访问</li><li>否则继续检查 hosts.deny 文件，若找到相匹配的策略，则拒绝访问</li><li>如果两个文件中都没有相匹配的策略，则允许访问</li></ul><hr>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> SSH </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>19_Linux基础-ssh服务1</title>
      <link href="/blog/posts/33033.html"/>
      <url>/blog/posts/33033.html</url>
      
        <content type="html"><![CDATA[<p>摘要：博客迁移 <a href="https://blog.csdn.net/cpen_web"><code>https://blog.csdn.net/cpen_web</code></a> → 本站<span id="more"></span></p><h1 id="19-Linux基础-ssh服务1">19_Linux基础-ssh服务1</h1><p><a href="https://blog.csdn.net/cpen_web">博客🔗：https://blog.csdn.net/cpen_web</a></p><hr><h2 id="一-练习">一. 练习</h2><p>1、编写脚本，实现批量新增用户，用户名以user开头，具体新增用户数量随用户输入，并且为每个用户设置随机密码（密码长度为12位随机字符组成），记录创建的用户与密码，保存到/tmp/user文件中。</p><p>2、如何实现两个字符串的拼接，两个整数求和，以及5除以3，保留2位小数</p><p>3、如何计算本机有多少个用户以及多少个普通用户？</p><p>4、如何去除字符串中所有空格？</p><p>5、备份/var/log/nginx/access.log日志，每五分钟备份一次,并且以2020-11-15_10_05-access.log.tar.gz方式命名。将日志文件备份文件放到/nginx/目录下。</p><p>6、查找/etc/目录下10天以内3天以前修改过的文件，并将这些文件记录到/tmp/etc_log文件中</p><h3 id="1-1-编写脚本，实现批量新增用户，用户名以user开头，具体新增用户数量随用户输入，并且为每个用户设置随机密码（密码长度为12位随机字符组成），记录创建的用户与密码，保存到-tmp-user文件中">1.1 编写脚本，实现批量新增用户，用户名以user开头，具体新增用户数量随用户输入，并且为每个用户设置随机密码（密码长度为12位随机字符组成），记录创建的用户与密码，保存到/tmp/user文件中</h3><p><strong>题目1：编写脚本，实现批量新增用户，用户名以user开头，具体新增用户数量随用户输入，并且为每个用户设置随机密码（密码长度为12位随机字符组成），记录创建的用户与密码，保存到/tmp/user文件中。</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">示例1</span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;请输入你要添加的用户个数：&quot;</span> num1</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `<span class="built_in">seq</span> <span class="variable">$num1</span>`    <span class="comment"># 注：循环多少次</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">        <span class="built_in">id</span> user<span class="variable">$i</span> &amp;&gt;/dev/null</span><br><span class="line">        a=`<span class="built_in">echo</span> $?`     <span class="comment"># 注：上条命令返回值 0 成功 非0 失败</span></span><br><span class="line">        str1=`<span class="built_in">date</span> +%s+%N | <span class="built_in">md5sum</span>|<span class="built_in">head</span> -c 4`     <span class="comment"># 注：%s时间戳</span></span><br><span class="line">        <span class="keyword">if</span> [ <span class="variable">$a</span> -eq 0 ] ;<span class="keyword">then</span></span><br><span class="line">                <span class="built_in">echo</span> <span class="string">&quot;该用户已存在，不进行新建操作&quot;</span></span><br><span class="line">                <span class="built_in">break</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">                useradd user$str1<span class="variable">$i</span>  &amp;&gt;/dev/null</span><br><span class="line">                b=`<span class="built_in">echo</span> $?`</span><br><span class="line">                <span class="keyword">if</span> [ <span class="variable">$b</span> -eq 0 ];<span class="keyword">then</span></span><br><span class="line">                        <span class="built_in">echo</span> <span class="string">&quot;创建成功&quot;</span></span><br><span class="line">                        passwd1=`mkpasswd -l 12`  <span class="comment"># 注：mkpasswd 生成随机12位密码串</span></span><br><span class="line">                        <span class="built_in">echo</span> <span class="variable">$passwd1</span> |passwd user$str1<span class="variable">$i</span> --stdin  &amp;&gt;/dev/null  <span class="comment"># 注：--stdin 密码从标准输入里面来</span></span><br><span class="line">                        <span class="built_in">echo</span> <span class="string">&quot;user$str1<span class="variable">$i</span>:<span class="variable">$passwd1</span>&quot;</span> &gt;&gt;/tmp/user</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                        <span class="built_in">echo</span> <span class="string">&quot;创建失败&quot;</span></span><br><span class="line">                <span class="keyword">fi</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">[root@cPen_web lianxi]<span class="comment"># date +%s+%N# 注：引用纳秒的概念，防止用户名 重复</span></span><br><span class="line">1605251515+012657467</span><br><span class="line">[root@cPen_web lianxi]<span class="comment"># man date</span></span><br><span class="line">       %%     a literal %</span><br><span class="line">       %a     locale<span class="string">&#x27;s abbreviated weekday name (e.g., Sun)# 注：Sun</span></span><br><span class="line"><span class="string">       %A     locale&#x27;</span>s full weekday name (e.g., Sunday)<span class="comment"># 注：Sunday</span></span><br><span class="line">       %s     seconds since 1970-01-01 00:00:00 UTC<span class="comment"># 注：时间戳 从1970年1月1号到现在的秒数</span></span><br><span class="line">       %N     nanoseconds (000000000..999999999)<span class="comment"># 注：纳秒  1纳秒=十亿分之一秒</span></span><br><span class="line">[root@cPen_web ~]<span class="comment"># date +%s+N | md5sum|head -c 4</span></span><br><span class="line">2b13[root@cPen_web ~]<span class="comment"># </span></span><br><span class="line"></span><br><span class="line">示例2</span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;输入新增用户数:&quot;</span> num</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `<span class="built_in">seq</span> <span class="variable">$num</span>`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    useradd user<span class="variable">$i</span> &amp;&gt;/dev/null</span><br><span class="line">    passwd=`mkpasswd -l 12`</span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$passwd</span> |passwd user<span class="variable">$i</span> --stdin &amp;&gt;/dev/null</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;用户名:user<span class="variable">$i</span>&quot;</span> <span class="string">&quot;密码:<span class="variable">$passwd</span>&quot;</span> &amp;&gt;&gt;/tmp/user</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><h3 id="1-2-如何实现两个字符串的拼接，两个整数求和，以及5除以3，保留2位小数">1.2 如何实现两个字符串的拼接，两个整数求和，以及5除以3，保留2位小数</h3><p><strong>题目2：如何实现两个字符串的拼接，两个整数求和，以及5除以3，保留2位小数</strong></p><p>数值运算：<a href="https://blog.csdn.net/weixin_34408624/article/details/92598137">https://blog.csdn.net/weixin_34408624/article/details/92598137</a><br>#注：挨在一起写实现2个字符串拼接</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">示例</span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">[root@cPen_web ~]<span class="comment"># a=abc</span></span><br><span class="line">[root@cPen_web ~]<span class="comment"># b=def</span></span><br><span class="line">[root@cPen_web ~]<span class="comment"># echo $a$b# 注：字符串拼接</span></span><br><span class="line">abcdef</span><br><span class="line">[root@cPen_web ~]<span class="comment"># echo abc$a</span></span><br><span class="line">abcabc</span><br><span class="line">[root@cPen_web ~]<span class="comment"># a=3</span></span><br><span class="line">[root@cPen_web ~]<span class="comment"># b=4</span></span><br><span class="line">[root@cPen_web ~]<span class="comment"># echo $(($a+$b))</span></span><br><span class="line">7</span><br><span class="line"><span class="comment">#注：1个括号默认是字符串拼接  不会进行数值运算</span></span><br><span class="line">[root@cPen_web ~]<span class="comment"># a=123# 注：默认都是str类型</span></span><br><span class="line">[root@cPen_web ~]<span class="comment"># a=&quot;123&quot;</span></span><br><span class="line">[root@cPen_web ~]<span class="comment"># a=&#x27;123&#x27;</span></span><br><span class="line">------------------------------------------------------------</span><br><span class="line">[root@cPen_web ~]<span class="comment"># a=123</span></span><br><span class="line">[root@cPen_web ~]<span class="comment"># b=4</span></span><br><span class="line">[root@cPen_web ~]<span class="comment"># echo $(( $a &gt; $b ))</span></span><br><span class="line">1<span class="comment"># 注：正确返回1</span></span><br><span class="line">[root@cPen_web ~]<span class="comment"># echo $(( $a &lt; $b ))</span></span><br><span class="line">0<span class="comment"># 注：错误返回0</span></span><br><span class="line">[root@cPen_web ~]<span class="comment"># expr $a + $b# 注：expr命令 进行数值运算</span></span><br><span class="line">127</span><br><span class="line">[root@cPen_web ~]<span class="comment"># echo $(( $a + $b ))# 注：2个圆括号实现整数运算</span></span><br><span class="line">127</span><br><span class="line">[root@cPen_web ~]<span class="comment"># echo $[ $a + $b ]# 注：中括号实现整数运算</span></span><br><span class="line">127</span><br><span class="line">[root@cPen_web ~]<span class="comment"># let c=$a+$b# 注：let 也可以实现整数运算</span></span><br><span class="line">[root@cPen_web ~]<span class="comment"># echo $c# 注：let只能复制 不能直接赋值</span></span><br><span class="line">127</span><br><span class="line"><span class="comment">#注：整数运算：4种方法</span></span><br><span class="line">[root@cPen_web ~]<span class="comment"># expr $a + $b</span></span><br><span class="line">[root@cPen_web ~]<span class="comment"># echo $(( $a + $b ))</span></span><br><span class="line">[root@cPen_web ~]<span class="comment"># echo $[ $a + $b ]</span></span><br><span class="line">[root@cPen_web ~]<span class="comment"># let c=$a+$b# 注：let只能复制 不能直接赋值</span></span><br><span class="line">数值运算：https://blog.csdn.net/weixin_34408624/article/details/92598137</span><br><span class="line">------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#注：小数运算</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;scale=3;5/3&quot;</span>|bc<span class="comment"># 注：3表示保留3位小数  5/3</span></span><br><span class="line">[root@cPen_web ~]<span class="comment"># echo &quot;scale=3;5/3&quot;|bc# 注：确保主机上装了bc</span></span><br><span class="line">1.666</span><br><span class="line">[root@cPen_web lianxi]<span class="comment"># echo $((5/3))</span></span><br><span class="line">1</span><br><span class="line">[root@cPen_web lianxi]<span class="comment"># echo |awk &#x27;&#123;printf 5/3&#125;&#x27;# 注：awk默认保留5位小数</span></span><br><span class="line">1.66667[root@cPen_web lianxi]<span class="comment"># </span></span><br><span class="line">[root@cPen_web lianxi]<span class="comment"># echo |awk &#x27;&#123;printf &quot;%.2f&quot;,5/3&#125;&#x27;# 注：保留2位小数</span></span><br><span class="line">1.67[root@cPen_web lianxi]<span class="comment"># </span></span><br><span class="line">数值运算：https://blog.csdn.net/weixin_34408624/article/details/92598137</span><br></pre></td></tr></table></figure><h3 id="1-3-如何计算本机有多少个用户以及多少个普通用户？">1.3 如何计算本机有多少个用户以及多少个普通用户？</h3><p><strong>题目3：如何计算本机有多少个用户以及多少个普通用户？</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">示例</span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line"><span class="comment">#3、如何计算本机有多少个用户以及多少个普通用户？</span></span><br><span class="line"><span class="built_in">wc</span> -l /etc/passwd<span class="comment"># 注：本机有多少用户</span></span><br><span class="line">awk -F<span class="string">&quot;:&quot;</span> <span class="string">&#x27;$3&gt;=1000&#123;print $1&#125;&#x27;</span> /etc/passwd |<span class="built_in">wc</span> -l<span class="comment"># 注：本机有多少普通用户</span></span><br><span class="line"><span class="comment">#注：普通用户uid&gt;1000</span></span><br></pre></td></tr></table></figure><h3 id="1-4-如何去除字符串中所有空格？">1.4 如何去除字符串中所有空格？</h3><p><strong>题目4：如何去除字符串中所有空格？</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">示例</span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">str=<span class="string">&quot;s t r i n g&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$str</span> |<span class="built_in">tr</span> -d <span class="string">&quot; &quot;</span><span class="comment"># 注：-d删除指定字符</span></span><br></pre></td></tr></table></figure><h3 id="1-5-备份-var-log-nginx-access-log日志，每五分钟备份一次-并且以2020-11-15-10-05-access-log-tar-gz方式命名。将日志文件备份文件放到-nginx-目录下">1.5 备份/var/log/nginx/access.log日志，每五分钟备份一次,并且以2020-11-15_10_05-access.log.tar.gz方式命名。将日志文件备份文件放到/nginx/目录下</h3><p><strong>题目5：备份/var/log/nginx/access.log日志，每五分钟备份一次,并且以2020-11-15_10_05-access.log.tar.gz方式命名。将日志文件备份文件放到/nginx/目录下。</strong></p><p>#注：确保crontab打开</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">示例</span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">[root@cPen_web ~]<span class="comment"># crontab -e# 注：计划任务里命令最好写绝对路径</span></span><br><span class="line">*/5 * * * * tar czf /nginx/$(<span class="built_in">date</span> +%Y-%m-%d_%H_%M-access.log.tar.gz) /var/log/nginx/access.log </span><br></pre></td></tr></table></figure><h3 id="1-6-查找-etc-目录下10天以内3天以前修改过的文件，并将这些文件记录到-tmp-etc-log文件中">1.6 查找/etc/目录下10天以内3天以前修改过的文件，并将这些文件记录到/tmp/etc_log文件中</h3><p><strong>题目6：查找/etc/目录下10天以内3天以前修改过的文件，并将这些文件记录到/tmp/etc_log文件中</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">示例</span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">[root@cPen_web ~]<span class="comment"># find /etc -type f -mtime -10 -mtime +3 # 注：注意 是查找的文件</span></span><br><span class="line">/etc/dnf/modules.d/python27.module</span><br><span class="line">/etc/selinux/config</span><br><span class="line">/etc/vsftpd/vsftpd.conf</span><br><span class="line">/etc/dconf/db/site</span><br><span class="line">/etc/dconf/db/local</span><br><span class="line">/etc/dconf/db/distro</span><br><span class="line">[root@cPen_web ~]<span class="comment"># stat /etc/selinux/config # 注：stat看文件的原信息</span></span><br><span class="line">………………</span><br><span class="line">最近访问：2020-11-13 10:14:37.388001468 +0800</span><br><span class="line">最近更改：2020-11-05 15:12:05.484883965 +0800</span><br><span class="line">最近改动：2020-11-05 15:12:05.485883965 +0800</span><br><span class="line">[root@cPen_web lianxi]<span class="comment"># find /etc -type f -mtime -10 -mtime +3 &amp;&gt;/tmp/etc_log </span></span><br></pre></td></tr></table></figure><hr><h2 id="二-练习">二. 练习</h2><p><strong>请用shell写出一个简单的猜拳游戏，枚举值（0石头、1剪刀、2布），有两位选手分别是rob1、rob2，他们的出拳方式由系统自动枚举，并连续猜十盘，最后给出十盘的结果</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line">示例1：判定各种情况 <span class="keyword">if</span>语句</span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;猜拳游戏开始啦！！！&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;今天我们的两位对手是rob1和rob2&quot;</span></span><br><span class="line">pingju=0</span><br><span class="line">rob1_win=0</span><br><span class="line">rob2_win=0</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `<span class="built_in">seq</span> 10`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">        a=`<span class="built_in">echo</span> $[RANDOM%3]`</span><br><span class="line">        b=`<span class="built_in">echo</span> $[RANDOM%3]`</span><br><span class="line">        <span class="keyword">case</span> <span class="variable">$a</span> <span class="keyword">in</span></span><br><span class="line">        0)</span><br><span class="line">                c=bor1出的是石头</span><br><span class="line">                ;;</span><br><span class="line">        1)</span><br><span class="line">                c=bor1出的是剪刀</span><br><span class="line">                ;;</span><br><span class="line">        2)</span><br><span class="line">                c=bor1出的是布</span><br><span class="line">                ;;</span><br><span class="line">        <span class="keyword">esac</span></span><br><span class="line">        <span class="keyword">case</span> <span class="variable">$b</span> <span class="keyword">in</span></span><br><span class="line">        0)</span><br><span class="line">                d=bor2出的是石头</span><br><span class="line">                ;;</span><br><span class="line">        1)</span><br><span class="line">                d=bor2出的是剪刀</span><br><span class="line">                ;;</span><br><span class="line">        2)</span><br><span class="line">                d=bor2出的是布</span><br><span class="line">                ;;</span><br><span class="line">        <span class="keyword">esac</span></span><br><span class="line">        <span class="keyword">if</span> ((<span class="variable">$a</span>==<span class="variable">$b</span>));<span class="keyword">then</span></span><br><span class="line">                <span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$c</span>\n<span class="variable">$d</span> \n他们战平了&quot;</span></span><br><span class="line">                pingju=$[<span class="variable">$pingju</span>+1]</span><br><span class="line">                <span class="built_in">continue</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">        <span class="keyword">if</span> [[ <span class="variable">$a</span> -eq 1 || <span class="variable">$b</span> -eq 1 ]];<span class="keyword">then</span>      <span class="comment"># 注：如果1方出布</span></span><br><span class="line">                <span class="keyword">if</span> [[ <span class="variable">$a</span> -eq 0 || <span class="variable">$b</span> -eq 0 ]];<span class="keyword">then</span> <span class="comment"># 注：如果1方出拳头</span></span><br><span class="line">                                <span class="keyword">if</span>  ((<span class="variable">$a</span>&gt;<span class="variable">$b</span>));<span class="keyword">then</span></span><br><span class="line">                                        <span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$c</span>\n<span class="variable">$d</span>,rob2获胜&quot;</span></span><br><span class="line">                                        rob2_win=$[<span class="variable">$rob2_win</span>+1]</span><br><span class="line">                                        <span class="built_in">continue</span></span><br><span class="line">                                <span class="keyword">else</span></span><br><span class="line">                                        <span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$c</span>\n<span class="variable">$d</span>,rob1获胜&quot;</span></span><br><span class="line">                                        rob1_win=$[<span class="variable">$rob1_win</span>+1]</span><br><span class="line">                                        <span class="built_in">continue</span></span><br><span class="line">                                <span class="keyword">fi</span></span><br><span class="line">                <span class="keyword">fi</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">        <span class="keyword">if</span> ((<span class="variable">$a</span>&gt;<span class="variable">$b</span>));<span class="keyword">then</span></span><br><span class="line">                <span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$c</span>\n<span class="variable">$d</span>,rob1获胜&quot;</span></span><br><span class="line">                rob1_win=$[<span class="variable">$rob1_win</span>+1]</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">                <span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$c</span>\n<span class="variable">$d</span>,rob2获胜&quot;</span></span><br><span class="line">                rob2_win=$[<span class="variable">$rob2_win</span>+1]</span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;rob1获胜次数<span class="variable">$rob1_win</span>,rob2获胜次数<span class="variable">$rob2_win</span>,平局次数<span class="variable">$pingju</span></span></span><br><span class="line"><span class="string">============================================================================================</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">示例2：使用减法</span></span><br><span class="line"><span class="string">#注：if语句的使用</span></span><br><span class="line"><span class="string">---------------------------------------------------------------------</span></span><br><span class="line"><span class="string">for i in `seq 10`</span></span><br><span class="line"><span class="string">do</span></span><br><span class="line"><span class="string">        rob1=<span class="subst">$(($RANDOM%3)</span>)</span></span><br><span class="line"><span class="string">        echo rob1=<span class="variable">$rob1</span></span></span><br><span class="line"><span class="string">        rob2=<span class="subst">$(($RANDOM%3)</span>)</span></span><br><span class="line"><span class="string">        echo rob2=<span class="variable">$rob2</span></span></span><br><span class="line"><span class="string">        if [ <span class="variable">$rob1</span> -eq <span class="variable">$rob2</span> ]</span></span><br><span class="line"><span class="string">        then</span></span><br><span class="line"><span class="string">                echo &quot;</span>平局<span class="string">&quot;</span></span><br><span class="line"><span class="string">        elif [ <span class="subst">$(($rob1-$rob2)</span>) -eq -1 ] || [ <span class="subst">$(($rob1-$rob2)</span>) -eq 2 ]  # 注：rob1赢的情况</span></span><br><span class="line"><span class="string">        then</span></span><br><span class="line"><span class="string">                echo &quot;</span>rob1 win<span class="string">&quot;</span></span><br><span class="line"><span class="string">        else</span></span><br><span class="line"><span class="string">                echo &quot;</span>rob2 win<span class="string">&quot;</span></span><br><span class="line"><span class="string">        fi</span></span><br><span class="line"><span class="string">done</span></span><br><span class="line"><span class="string">============================================================================================</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">示例3</span></span><br><span class="line"><span class="string">---------------------------------------------------------------------</span></span><br><span class="line"><span class="string">r1_win=0</span></span><br><span class="line"><span class="string">r2_win=0</span></span><br><span class="line"><span class="string">equal=0</span></span><br><span class="line"><span class="string">for i in `seq 10`</span></span><br><span class="line"><span class="string">do</span></span><br><span class="line"><span class="string">    echo -ne &quot;</span>第<span class="variable">$i</span>盘\t<span class="string">&quot;</span></span><br><span class="line"><span class="string">    rob1_res=<span class="subst">$(($RANDOM%3)</span>)</span></span><br><span class="line"><span class="string">    rob2_res=<span class="subst">$(($RANDOM%3)</span>)</span></span><br><span class="line"><span class="string">    if [[ <span class="subst">$(($rob1_res - $rob2_res)</span>) = -1 ]]; then echo -ne &quot;</span>rob1胜\t<span class="string">&quot; &amp;&amp;r1_win=<span class="subst">$(($r1_win + 1)</span>); fi</span></span><br><span class="line"><span class="string">    if [[ <span class="subst">$(($rob1_res - $rob2_res)</span>) =  2 ]]; then echo -ne &quot;</span>rob1胜\t<span class="string">&quot; &amp;&amp;r1_win=<span class="subst">$(($r1_win + 1)</span>); fi</span></span><br><span class="line"><span class="string">    if [[ <span class="subst">$(($rob2_res - $rob1_res)</span>) = -1 ]]; then echo -ne &quot;</span>rob2胜\t<span class="string">&quot; &amp;&amp;r2_win=<span class="subst">$(($r2_win + 1)</span>); fi</span></span><br><span class="line"><span class="string">    if [[ <span class="subst">$(($rob2_res - $rob1_res)</span>) =  2 ]]; then echo -ne &quot;</span>rob2胜\t<span class="string">&quot; &amp;&amp;r2_win=<span class="subst">$(($r2_win + 1)</span>); fi</span></span><br><span class="line"><span class="string">    if [[ <span class="subst">$(($rob1_res - $rob2_res)</span>) =  0 ]]; then echo -ne &quot;</span>平局\t<span class="string">&quot; &amp;&amp; equal=<span class="subst">$(($equal + 1)</span>); fi</span></span><br><span class="line"><span class="string">    [[ <span class="variable">$rob1_res</span> = 0 ]] &amp;&amp; echo -ne &quot;</span>rob1:石头\t<span class="string">&quot;</span></span><br><span class="line"><span class="string">    [[ <span class="variable">$rob1_res</span> = 1 ]] &amp;&amp; echo -ne &quot;</span>rob1:剪刀\t<span class="string">&quot;</span></span><br><span class="line"><span class="string">    [[ <span class="variable">$rob1_res</span> = 2 ]] &amp;&amp; echo -ne &quot;</span>rob1:布\t\t<span class="string">&quot;</span></span><br><span class="line"><span class="string">    [[ <span class="variable">$rob2_res</span> = 0 ]] &amp;&amp; echo  &quot;</span>rob2:石头<span class="string">&quot;</span></span><br><span class="line"><span class="string">    [[ <span class="variable">$rob2_res</span> = 1 ]] &amp;&amp; echo  &quot;</span>rob2:剪刀<span class="string">&quot;</span></span><br><span class="line"><span class="string">    [[ <span class="variable">$rob2_res</span> = 2 ]] &amp;&amp; echo  &quot;</span>rob2:布<span class="string">&quot;</span></span><br><span class="line"><span class="string">done</span></span><br><span class="line"><span class="string">echo &quot;</span>rob1胜场:<span class="variable">$r1_win</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">echo &quot;</span>rob2胜场:<span class="variable">$r2_win</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">echo &quot;</span>平局场数:<span class="variable">$equal</span><span class="string">&quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">示例4：生成1个随机数 3以内 不包括3</span></span><br><span class="line"><span class="string">---------------------------------------------------------------------</span></span><br><span class="line"><span class="string">#注：生成1个随机数 3以内 不包括3</span></span><br><span class="line"><span class="string">[root@cPen_web lianxi]# echo $[RANDOM%3]</span></span><br><span class="line"><span class="string">2</span></span><br><span class="line"><span class="string">[root@cPen_web lianxi]# echo $[RANDOM%3]</span></span><br><span class="line"><span class="string">1</span></span><br><span class="line"><span class="string">[root@cPen_web lianxi]# echo $[RANDOM%3]</span></span><br><span class="line"><span class="string">0</span></span><br></pre></td></tr></table></figure><hr><p><strong>SSH服务</strong></p><h2 id="三-SSH服务介绍">三. SSH服务介绍</h2><p><strong>远程Shell应用程序</strong></p><ul><li>允许用户在远程机器上执行任意命令</li><li>让标准输出在本地</li><li>早期明文远程协议：telnet</li></ul><p><strong>SSH（Secure Shell，安全的外壳）</strong></p><ul><li>为客户机提供安全的Shell环境，用于远程管理</li><li>默认端口：TCP <code>22</code></li></ul><p><strong>SSH基于公钥加密（非对称加密）技术</strong></p><ul><li>数据加密传输</li><li>客户端和服务器的身份验证</li></ul><p>#注：23号端口是明文的，已经淘汰了</p><p>.--------------------------------------------------------------------------------------------------------------</p><p><strong>ssh是什么？</strong></p><p>​ssh --&gt; secure shell</p><p>​remote login program – 远程登陆模式</p><p>​对数据进行加密传输的服务，主要用在远程登陆</p><p>#注：把数据放到加密好了的壳里面，是安全的协议</p><p>.--------------------------------------------------------------------------------------------------------------</p><p>ssh协议是应用层协议，根据ssh协议实现的服务叫ssh服务</p><p>ssh服务主要在HP-UX,LINUX,AIX,UNIX系统上都有（类UNIX系统上），Windows上没有</p><p>#注：ftp协议也是应用层的协议，根据协议实现的服务叫ftp服务</p><p>.--------------------------------------------------------------------------------------------------------------</p><p><strong>ssh常见的2种登陆方式：</strong></p><p>1、密码登陆</p><p>2、密钥登陆（免密码登录）# 注：不需要密码</p><p>#注：想要登录到那台主机，1、需要知道那台主机ip，2、允许登录，3、网络跟它联通，可以访问到那台主机上</p><p>#注：ssh服务默认端口 22号端口  可以去更改</p><p>.--------------------------------------------------------------------------------------------------------------</p><p>#注：<code>/etc/services</code> <strong>可以查看常用服务的默认端口号</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@cPen_web lianxi]<span class="comment"># less /etc/services </span></span><br><span class="line">ssh             22/tcp                          <span class="comment"># The Secure Shell (SSH) Protocol</span></span><br><span class="line">ssh             22/udp                          <span class="comment"># The Secure Shell (SSH) Protocol</span></span><br><span class="line"><span class="comment">#注：一般来说ssh都是使用tcp去传输的</span></span><br></pre></td></tr></table></figure><p>.--------------------------------------------------------------------------------------------------------------</p><p>#注：因为它所有的数据都是进行加密的，所以说它是安全的shell</p><p>#注：2台主机之间进行数据交互 都会牵扯到 <strong>数据包的传输</strong></p><p>#注：对别的服务发起一个请求，其实就是相当于发送了1个包给它，这里包里面带有请求</p><p>#注：普通情况下不给它加密的话，信息是明文的，是不安全的；ssh服务<strong>对数据进行加密</strong>，只有a主机和b主机知道解密的方式，其他人不知道</p><p>#注：安装好系统后（最小安装），一般来说自带ssh服务，一般来说启动系统它会自动起来</p><p>.--------------------------------------------------------------------------------------------------------------</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">示例：查看ssh服务是否启动</span><br><span class="line">---------------------------------------------------------------------------------</span><br><span class="line">1、查看进程</span><br><span class="line">[root@cPen_web lianxi]<span class="comment"># ps ef |grep ssh# 注：进程名叫sshd</span></span><br><span class="line">2、pidof sshd<span class="comment"># 注：判定某个服务是否存在pid</span></span><br><span class="line">[root@cPen_web lianxi]<span class="comment"># pidof sshd# 注：服务起来的话必定会有1个pid</span></span><br><span class="line">2545 2543 2542 2538 2537 2536 909</span><br><span class="line"><span class="comment">#服务起来后必定会有1个pid</span></span><br><span class="line">3、查看网络连接监听状态 netstat</span><br><span class="line"><span class="comment">#注：yum install net-tools</span></span><br><span class="line">[root@cPen_web lianxi]<span class="comment"># netstat -atpl |grep ssh# 注：a 所有 ;t tcp ;p 端口</span></span><br><span class="line">[root@cPen_web lianxi]<span class="comment"># netstat -atpln |grep ssh</span></span><br><span class="line">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      909/sshd            </span><br><span class="line"><span class="comment">#注：listen状态 在监听中，表示别人可以里来连接我了</span></span><br><span class="line">tcp        0      0 192.168.0.21:22         192.168.0.42:58697      ESTABLISHED 2536/sshd: root [<span class="built_in">pr</span> </span><br><span class="line"><span class="comment">#注：ESTABLISHED表示已经建立连接了，可以进行数据交换了；</span></span><br><span class="line">tcp        0     36 192.168.0.21:22         192.168.0.42:58698      ESTABLISHED 2537/sshd: root [<span class="built_in">pr</span> </span><br><span class="line">tcp6       0      0 :::22                   :::*                    LISTEN      909/sshd       </span><br><span class="line"></span><br><span class="line"><span class="comment">#注：0.0.0.0:22表示在本机所有ip上监听22端口（别人可以通过所有的ip来访问）。如果把它监听到192.168.0.135/24上，那别人只能通过135这个地址来访问我</span></span><br><span class="line"><span class="comment">#注：listen状态 在监听中；表示服务起来了 在监听状态，表示别人可以来连接我了</span></span><br><span class="line"><span class="comment">#注：establish表示有1个客户端连接我了（已经建立连接的状态）</span></span><br><span class="line"><span class="comment">#注：0.0.0.0:*表示允许任意ip，任意端口客户端来连接（*代表任意端口客户端）</span></span><br><span class="line"><span class="comment">#注：0.0.0.0:22第1种表示本机上所有的ip（本机上的）</span></span><br><span class="line"><span class="comment">#注：0.0.0.0:* 表示允许任意ip，任意端口客户端来连接（外部客户端的任意端口）（*代表任意端口客户端）</span></span><br><span class="line">------------------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#注：本地回环地址代表本地，测试网卡是否ok 127.0.0.1/8 本地回环地址</span></span><br><span class="line"><span class="comment">#注：网卡实际地址192.168.0.21/24</span></span><br><span class="line"><span class="comment">#注：别人不可以通过127.0.0.1来访问，因为127.0.0.1代表本地，每一台机器都有一个127.0.0.1本地回环地址，别人通过127.0.0.1来访问，仅仅只是访问的自己</span></span><br><span class="line"></span><br><span class="line">4、lsof -i:22<span class="comment">#注：查看有没有listen状态的监听 ； establish表示连接建立了</span></span><br><span class="line"><span class="comment">#注：知道端口后可以查看端口</span></span><br><span class="line"><span class="comment">#注：lsof --&gt;list open file 列出打开的文件（全称）</span></span><br><span class="line">[root@cPen_web ~]<span class="comment"># lsof -i:22</span></span><br><span class="line">COMMAND  PID USER   FD   TYPE DEVICE SIZE/OFF NODE NAME</span><br><span class="line">sshd     908 root    4u  IPv4  27707      0t0  TCP *:ssh (LISTEN)<span class="comment"># 注：listen 监听状态</span></span><br><span class="line">sshd     908 root    6u  IPv6  27721      0t0  TCP *:ssh (LISTEN)<span class="comment"># 注：ESTABLISHED 建立连接</span></span><br><span class="line">sshd    1419 root    5u  IPv4  29943      0t0  TCP cPen_web:ssh-&gt;10.112.68.22:49959 (ESTABLISHED)</span><br><span class="line">sshd    1421 root    5u  IPv4  29943      0t0  TCP cPen_web:ssh-&gt;10.112.68.22:49959 (ESTABLISHED)</span><br><span class="line">============================================================================================</span><br><span class="line">示例：增加ip地址</span><br><span class="line">[root@cPen_web lianxi]<span class="comment"># ip a add 192.168.0.144/24 dev ens33# 注：增加ip地址</span></span><br><span class="line">[root@cPen_web lianxi]<span class="comment"># ip add# 注：最好跟它同网段</span></span><br><span class="line">    inet 127.0.0.1/8 scope host lo<span class="comment"># 注：dev ens3 设备 ens33</span></span><br><span class="line">    inet 192.168.0.21/24 brd 192.168.0.255 scope global dynamic noprefixroute ens33</span><br><span class="line">    inet 192.168.0.144/24 scope global secondary ens33</span><br><span class="line">============================================================================================</span><br><span class="line">示例：查看命令属于哪个包</span><br><span class="line">[root@cPen_web lianxi]<span class="comment"># which netstat# 注：找到命令的绝对路径</span></span><br><span class="line">/usr/bin/netstat</span><br><span class="line">[root@cPen_web lianxi]<span class="comment"># rpm -qf /usr/bin/netstat# 注：查看这个绝对路径执行文件属于哪个包</span></span><br><span class="line">net-tools-2.0-0.51.20160912git.el8.x86_64</span><br></pre></td></tr></table></figure><hr><h2 id="四-密钥登陆">四. 密钥登陆</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@cPen_web ~]<span class="comment"># ssh-keygen# 注：创建密钥对</span></span><br><span class="line">Generating public/private rsa key pair.<span class="comment"># 注：rsa算法生成公钥和私钥的钥匙对（钥匙有2把不是同一把）</span></span><br><span class="line">Enter file <span class="keyword">in</span> <span class="built_in">which</span> to save the key (/root/.ssh/id_rsa): </span><br><span class="line">Enter passphrase (empty <span class="keyword">for</span> no passphrase): </span><br><span class="line">Enter same passphrase again: </span><br><span class="line">Your identification has been saved <span class="keyword">in</span> /root/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved <span class="keyword">in</span> /root/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is:</span><br><span class="line">SHA256:JZh0IhlTUDkIvuXuv7Iw7zYsoucwfLjpPWrHYN7P63g root@cPen_web</span><br><span class="line">The key<span class="string">&#x27;s randomart image is:</span></span><br><span class="line"><span class="string">+---[RSA 2048]----+</span></span><br><span class="line"><span class="string">|  ..=B=..        |</span></span><br><span class="line"><span class="string">| .  o+o=         |</span></span><br><span class="line"><span class="string">|  . . o.. .      |</span></span><br><span class="line"><span class="string">|   +     o       |</span></span><br><span class="line"><span class="string">|  . .   S        |</span></span><br><span class="line"><span class="string">|.o..             |</span></span><br><span class="line"><span class="string">|=o*o.            |</span></span><br><span class="line"><span class="string">|.=BXBE           |</span></span><br><span class="line"><span class="string">|=O+*XX+.         |</span></span><br><span class="line"><span class="string">+----[SHA256]-----+</span></span><br><span class="line"><span class="string">[root@cPen_web ~]# </span></span><br></pre></td></tr></table></figure><p><strong>加密</strong></p><ol><li><p><strong>对称加密</strong></p><p>​加解密的钥匙都是同一把</p><p>​怎么样安全的保存这个密码，这个密钥在需要加密的机器之间都是共享的</p><p>​很难保证这个密钥不被泄漏</p></li><li><p><strong>非对称加密</strong>                                                                          # 注：加密和解密的钥匙不一样</p><p>​    生成一对公私钥，私钥自己保管，公钥可以给其他人</p><p>​    公私钥对是成对存在的，一个用于加密，一个用于解密。具体哪个为私钥，哪个为公钥就看使用者自己管理。</p></li></ol><p>注意：</p><p>​使用公钥进行加密，私钥解密，基本用于数据加密</p><p>​使用私钥加密公钥解密，用于认证</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">[root@cPen_web ~]<span class="comment"># ssh-keygen# 注：创建密钥对</span></span><br><span class="line">Generating public/private rsa key pair.<span class="comment"># 注：rsa算法生成公钥和私钥的钥匙对（钥匙有2把不是同一把）</span></span><br><span class="line">Enter file <span class="keyword">in</span> <span class="built_in">which</span> to save the key (/root/.ssh/id_rsa):  <span class="comment"># 注：存放公私钥的路径，root用户的</span></span><br><span class="line">Enter passphrase (empty <span class="keyword">for</span> no passphrase): <span class="comment"># 注：设置密钥密码# 注：非全局</span></span><br><span class="line">Enter same passphrase again: </span><br><span class="line">Your identification has been saved <span class="keyword">in</span> /root/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved <span class="keyword">in</span> /root/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is:</span><br><span class="line">SHA256:JZh0IhlTUDkIvuXuv7Iw7zYsoucwfLjpPWrHYN7P63g root@cPen_web<span class="comment"># 注：算法hash算法</span></span><br><span class="line">The key<span class="string">&#x27;s randomart image is:# 注：信息摘要 用的 SHA256 hash算法</span></span><br><span class="line"><span class="string">+---[RSA 2048]----+</span></span><br><span class="line"><span class="string">|  ..=B=..        |</span></span><br><span class="line"><span class="string">| .  o+o=         |</span></span><br><span class="line"><span class="string">|  . . o.. .      |</span></span><br><span class="line"><span class="string">|   +     o       |</span></span><br><span class="line"><span class="string">|  . .   S        |</span></span><br><span class="line"><span class="string">|.o..             |</span></span><br><span class="line"><span class="string">|=o*o.            |</span></span><br><span class="line"><span class="string">|.=BXBE           |</span></span><br><span class="line"><span class="string">|=O+*XX+.         |</span></span><br><span class="line"><span class="string">+----[SHA256]-----+</span></span><br><span class="line"><span class="string">[root@cPen_web ~]# </span></span><br><span class="line"><span class="string">#注：hash算法  任意长度的输入，映射成固定长度的输出</span></span><br><span class="line"><span class="string">--------------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">#注：加密分为2种方式：1、对称加密；2、非对称加密</span></span><br><span class="line"><span class="string">#注：对称加密 a机器给b机器传输东西，a机器知道1串密码叫做aa，b机器也知道这个密码叫做aa；a机器对date用aa加密，b机器用aa解密。2个加密解密都用同一个密钥（加密的钥匙A和B都知道）。形式的条件是a和b都知道密钥是什么，且都一样</span></span><br><span class="line"><span class="string">#注：问题 不能保证密钥不被被人知道</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#注：非对称加密  a机器和b机器进行数据加密传输（进行通讯）。a机器在本地生成1个public和private的钥匙对，a机器生成公钥和私钥都放在a机器上，发送数据时，a机器先把公钥给b（也可以把公钥给c,公钥可以给任何人），但是私钥只有自己a机器才知道。b机器用a机器给的公钥加密，a机器收到后用私钥解密</span></span><br><span class="line"><span class="string">唯一能够解密的钥匙 私钥 只有机器a才有，只有机器a才能解密</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#注：对于数据信息加密而言，用公钥加密，用私钥解密，只有机器a才能解密</span></span><br><span class="line"><span class="string">#注：非对称加密  用于数据加密时，用公钥加密，私钥解密</span></span><br></pre></td></tr></table></figure><hr><h2 id="五-ssh配置">五. ssh配置</h2><p><strong>ssh配置</strong></p><p>目录：<strong>/etc/ssh</strong><strong># 注：这下面放的都是ssh的配置文件</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@cPen_web ~]<span class="comment"># cd /etc/ssh/  </span></span><br><span class="line">[root@cPen_web ssh]<span class="comment"># ls</span></span><br><span class="line">moduli      sshd_config         ssh_host_ecdsa_key.pub  ssh_host_ed25519_key.pub  ssh_host_rsa_key.pub</span><br><span class="line">ssh_config  ssh_host_ecdsa_key  ssh_host_ed25519_key    ssh_host_rsa_key</span><br><span class="line"><span class="comment">#注：sshd_config 客户端的配置文件</span></span><br><span class="line"><span class="comment">#注：ssh_config  服务的配置文件</span></span><br><span class="line"><span class="comment">#注：ssh_host_ecdsa_key  ssh_host_ecdsa_key.pub  一对公私钥</span></span><br><span class="line"><span class="comment">#注：ssh_host_ecdsa_key.pub 公钥  ssh_host_ecdsa_key私钥</span></span><br><span class="line"><span class="comment">#注：ssh服务起来的时候，它会自动创建1对公私钥</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">示例：创建的公私钥默认放在/root/.ssh/目录下</span><br><span class="line">[root@cPen_web ~]<span class="comment"># cd .ssh</span></span><br><span class="line">[root@cPen_web .ssh]<span class="comment"># ls</span></span><br><span class="line">id_rsa  id_rsa.pub  known_hosts</span><br><span class="line"><span class="comment">#注：id_rsa私钥</span></span><br><span class="line"><span class="comment">#注：id_rsa.pub公钥</span></span><br></pre></td></tr></table></figure><hr><h2 id="六-实现公钥认证-免密码登录">六. 实现公钥认证(免密码登录)</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#注：a机器下(生成公钥后)</span></span><br><span class="line">[root@cPen_web ~]<span class="comment"># cd .ssh</span></span><br><span class="line">[root@cPen_web .ssh]<span class="comment"># ls</span></span><br><span class="line">id_rsa  id_rsa.pub  known_hosts</span><br><span class="line">[root@cPen_web .ssh]<span class="comment"># cat id_rsa.pub </span></span><br><span class="line">ssh-rsa</span><br><span class="line">AAAAB3NhQX......jXDv87iERv/z9XepKCeYqCfF2Dvv0n/g+IeFmzhW0iOppExskimMPGGWcN+7rXWlwaLNTiknmSTl+mFvZV8uIY5DnQXv root@cPen_web</span><br><span class="line"><span class="comment">#注：b机器下</span></span><br><span class="line">[root@cPen_web ~]<span class="comment"># mkdir .ssh# 注：没有的话 创建 .ssh文件夹</span></span><br><span class="line">[root@cPen_web ~]<span class="comment"># cd .ssh/</span></span><br><span class="line">[root@cPen_web .ssh]<span class="comment"># ls</span></span><br><span class="line">known_hosts</span><br><span class="line">[root@cPen_web .ssh]<span class="comment"># vim authorized_keys# 注：创建文件authorized_keys</span></span><br><span class="line">ssh-rsa<span class="comment"># 注：把a机器的公钥粘过去</span></span><br><span class="line">AAAAB3NhQX......jXDv87iERv/z9XepKCeYqCfF2Dvv0n/g+IeFmzhW0iOppExskimMPGGWcN+7rXWlwaLNTiknmSTl+mFvZV8uIY5DnQXv root@cPen_web</span><br><span class="line">[root@cPen_web .ssh]<span class="comment"># chmod 600 authorized_keys </span></span><br><span class="line"><span class="comment">#注：给它的权限为600，不要让其他人或者其他组有任何权限</span></span><br><span class="line"><span class="comment">#注：a机器下</span></span><br><span class="line">[root@cPen_web .ssh]<span class="comment"># ssh root@10.122.148.108# 注：使用客户端 以root用户登录</span></span><br><span class="line">………………………</span><br><span class="line">Are you sure you want to <span class="built_in">continue</span> connecting (<span class="built_in">yes</span>/no)? <span class="built_in">yes</span></span><br><span class="line">………………………</span><br><span class="line">[root@cPen_web ~]<span class="comment"># # 注：不需要输入密码，就是免密码登录成功</span></span><br></pre></td></tr></table></figure><p>实现公钥认证,免密码登录</p><p>A --&gt; BA机器要登录到B机器上</p><p>1、在A机器上生成公钥对（如果有公钥对，则不需要重新生成），默认会放在当前用户家目录下的.ssh/文件下</p><p>生成一个id_rsa（私钥），id_rsa.pub（公钥）</p><p>#注：如果有了，就不需要重新生成公钥对了，因为会覆盖。默认路径不要改它，改它的意义不大，因为默认在默认路径查找</p><p>[root@cPen_web ~]# ssh-keygen# 注：生成，中间一直敲回车，选择默认</p><p>2、在B机器上目标用户的家目录下面~/.ssh/authorized_keys文件里将A机器的公钥复制粘贴过来，</p><p>没有此文件就创建，并且确保这个文件的权限设为600</p><p>3、查看公钥认证是否成功</p><p>​在A机器上执行  ssh root@B机器的ip</p><p>​不需要输入密码就可以登录到B机器，则表示免密码登录成功</p><p>​公钥放在B机器的哪个用户下面，就通过哪个用户登录</p><p>​以哪个用户登录，需要看公钥放到B机器的哪个用户下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@cPen_web ~]<span class="comment"># useradd wy</span></span><br><span class="line">[root@cPen_web ~]<span class="comment"># su - wy# 注：su切换不会经过ssh服务</span></span><br><span class="line">[wy@cPen_web ~]$ </span><br><span class="line"></span><br><span class="line"><span class="comment">#注：su切换用户，是不会经过ssh</span></span><br><span class="line"><span class="comment">#注：ssh是远程登录</span></span><br><span class="line">su 和 su -su切换不会切换bash环境（还是原用户的bash环境）</span><br><span class="line"> su - 去切换 会切换到wy的bash环境</span><br></pre></td></tr></table></figure><p><strong>公钥认证排错</strong></p><ol><li><p>确保公钥正确</p></li><li><p>确保~/.ssh/authorized_keys文件权限为600</p></li><li><p>确保家目录以及.ssh目录权限为755以下权限，即属组和其他人没有7的权限</p></li></ol><hr>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> SSH </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>18_Linux基础-用户权限3</title>
      <link href="/blog/posts/57976.html"/>
      <url>/blog/posts/57976.html</url>
      
        <content type="html"><![CDATA[<p>摘要：博客迁移 <a href="https://blog.csdn.net/cpen_web"><code>https://blog.csdn.net/cpen_web</code></a> → 本站<span id="more"></span></p><h1 id="18-Linux基础-用户权限3">18_Linux基础-用户权限3</h1><p><a href="https://blog.csdn.net/cpen_web">博客🔗：https://blog.csdn.net/cpen_web</a></p><hr><h2 id="一-回顾：-根目录下的-etc-一般放配置文件">一. 回顾：/根目录下的 /etc 一般放配置文件</h2><p>/根目录下的 /etc 一般放配置文件</p><p>一个用户的基本组只能有一个，附属组可以有多个；享受的权限是一样的，都是有那个组的权限</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">示例</span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># useradd sanle10</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># id sanle10</span></span><br><span class="line">uid=2224(sanle10) gid=2224(sanle10) 组=2224(sanle10)</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># less /etc/group</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># useradd sanle11 -g sanchuang05 -G sanchuang06# 指定基本组、附属组</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># id sanle11</span></span><br><span class="line">uid=2225(sanle11) gid=1043(sanchuang05) 组=1043(sanchuang05),1044(sanchuang06)</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># less /etc/passwd# 注：存放用户信息</span></span><br><span class="line">hello:x:1007:1007::/home/hello:/bin/bash</span><br><span class="line"><span class="comment"># 注：字段2仅仅只是密码占位符，真正的密码放在/etc/shadow</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># ls -al /etc/passwd</span></span><br><span class="line">-rw-r--r-- 1 root root 4539 11月 12 09:50 /etc/passwd<span class="comment"># 注：任何人都可以访问/etc/passwd</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># ls -al /etc/shadow</span></span><br><span class="line">---------- 1 root root 4588 11月 12 09:50 /etc/shadow<span class="comment"># 注：权限都为0</span></span><br><span class="line"></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># useradd sanle13 -c &quot;create sanle13&quot;# 注：指定用户描述信息</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># less /etc/passwd</span></span><br><span class="line">sanle13:x:2227:2227:create sanle13:/home/sanle13:/bin/bash <span class="comment"># 注：字段5用户描述信息</span></span><br><span class="line"></span><br><span class="line">[root@sanchuang-linux tmp]<span class="comment"># ls -ld /lianxi# 注：查看/lianxi 目录属于哪个用户哪个组</span></span><br><span class="line">drwxr-xr-x. 9 root root 4096 11月  9 09:47 /lianxi</span><br><span class="line"></span><br><span class="line"><span class="comment"># 普通用户默认只能在自己的家目录下 或 /tmp目录下创建</span></span><br><span class="line"></span><br><span class="line">对个人环境信息做设置</span><br><span class="line">~/.bash_profile</span><br><span class="line">~/.bashrc</span><br><span class="line"></span><br><span class="line">[root@sanchuang-linux tmp]<span class="comment"># id sanle11</span></span><br><span class="line">uid=2225(sanle11) gid=1043(sanchuang05) 组=1043(sanchuang05),1044(sanchuang06)<span class="comment"># 注：基本组sanchuang05</span></span><br><span class="line">[root@sanchuang-linux tmp]<span class="comment"># su - sanle11</span></span><br><span class="line">[sanle11@sanchuang-linux ~]$ <span class="built_in">touch</span> cc</span><br><span class="line">[sanle11@sanchuang-linux ~]$ <span class="built_in">ls</span> -al</span><br><span class="line">总用量 16</span><br><span class="line">……………………</span><br><span class="line">-rw-r--r--   1 sanle11 sanchuang05    0 11月 12 10:21 cc<span class="comment"># 注：有效组sanchuang05</span></span><br><span class="line"><span class="comment"># 注：有效组默认是用户基本组</span></span><br><span class="line">[sanle11@sanchuang-linux ~]$ newgrp sanchuang06 <span class="comment"># 注：修改有效组；临时修改</span></span><br><span class="line">[sanle11@sanchuang-linux ~]$ <span class="built_in">touch</span> <span class="built_in">dd</span></span><br><span class="line">[sanle11@sanchuang-linux ~]$ <span class="built_in">ls</span> -al</span><br><span class="line">……………………</span><br><span class="line">-rw-r--r--   1 sanle11 sanchuang06    0 11月 12 10:23 <span class="built_in">dd</span><span class="comment"># 注：有效组sanchuang06</span></span><br></pre></td></tr></table></figure><hr><h2 id="二-练习">二. 练习</h2><h3 id="2-1">2.1</h3><p><strong>题目1</strong></p><p>创建三个用户sx1,sx2,sx3，这三个用户的附属组都是sanle组，创建名为/home/sanle的目录，在该目录中，三个用户可以合作&gt;处理文件。要求恰当修改该目录的权限，以便只允许用户和组能在这个目录中访问、删除、创建文件，其他用户没有任何权限，&gt;三个用户新建的文件只能自己有权限删除，彼此无法删除，而且新建的文件应该被自动分配到sanle的组所有权。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">示例</span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line"><span class="comment">#创建三个用户sx1,sx2,sx3，这三个用户的附属组都是sanle组，创建名为/home/sanle的目录，在该目录中，三个用户可以合作&gt;处理文件。要求恰当修改该目录的权限，以便只允许用户和组能在这个目录中访问、删除、创建文件，其他用户没有任何权限，&gt;三个用户新建的文件只能自己有权限删除，彼此无法删除，而且新建的文件应该被自动分配到sanle的组所有权。</span></span><br><span class="line">useradd -G sanle sx1</span><br><span class="line">useradd -G sanle sx2</span><br><span class="line">useradd -G sanle sx3</span><br><span class="line"><span class="built_in">mkdir</span> /home/sanle</span><br><span class="line">newgrp sanle</span><br><span class="line"><span class="built_in">mkdir</span> /home/sanle</span><br><span class="line"><span class="built_in">chmod</span> 1770 /home/sanle -R</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;newgrp sanle&quot;</span> &gt;&gt; ~/.bashrc</span><br></pre></td></tr></table></figure><h3 id="2-2">2.2</h3><p><strong>题目2</strong> <strong>脚本</strong></p><p>---------------------------------------------------------------------<br>1、创建用户<br>2、删除指定用户<br>3、修改指定用户（用户id，用户属组，用户家目录）<br>4、删除指定用户</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br></pre></td><td class="code"><pre><span class="line">示例1</span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="function"><span class="title">menu</span></span>()&#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;1、创建用户&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;2、删除指定用户&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;3、修改指定用户（用户id，用户属组，用户家目录）&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;4、删除指定用户&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">add</span></span>()&#123;</span><br><span class="line">    <span class="built_in">read</span> -p <span class="string">&quot;输入用户名:&quot;</span> username  <span class="comment"># 注：接收从键盘的输入</span></span><br><span class="line">    useradd <span class="variable">$username</span> &amp;&gt;/dev/null &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;创建成功&quot;</span> || <span class="built_in">echo</span> <span class="string">&quot;创建失败&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">del</span></span>()&#123;</span><br><span class="line">    <span class="built_in">read</span> -p <span class="string">&quot;输入用户名:&quot;</span> username</span><br><span class="line">    userdel -r <span class="variable">$username</span> &amp;&gt;/dev/null &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;删除成功&quot;</span> || <span class="built_in">echo</span> <span class="string">&quot;用户不存在&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">modify</span></span>()&#123;</span><br><span class="line">    <span class="built_in">read</span> -p <span class="string">&quot;输入用户名:&quot;</span> username</span><br><span class="line">    <span class="built_in">id</span> <span class="variable">$username</span> &amp;&gt;/dev/null</span><br><span class="line">    <span class="keyword">if</span> [[ $? = 0 ]]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">read</span> -p <span class="string">&quot;输入uid:&quot;</span> uid<span class="comment"># 注：可以再加3个case 更精细</span></span><br><span class="line">        <span class="built_in">read</span> -p <span class="string">&quot;输入gid:&quot;</span> gid</span><br><span class="line">        <span class="built_in">read</span> -p <span class="string">&quot;输入家目录:&quot;</span> home</span><br><span class="line">        usermod -u <span class="variable">$uid</span> -g <span class="variable">$gid</span> -d <span class="variable">$home</span> <span class="variable">$username</span> 2&gt;/dev/null &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;修改成功&quot;</span> || <span class="string">&quot;修改失败&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;用户不存在&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> :</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    menu</span><br><span class="line">    <span class="built_in">read</span> -p <span class="string">&quot;请输入1-4：&quot;</span> option</span><br><span class="line">    <span class="keyword">case</span> <span class="variable">$option</span> <span class="keyword">in</span></span><br><span class="line">    1)</span><br><span class="line">        add</span><br><span class="line">        ;;</span><br><span class="line">    2)</span><br><span class="line">        del</span><br><span class="line">        ;;</span><br><span class="line">    3)</span><br><span class="line">        modify</span><br><span class="line">        ;;</span><br><span class="line">    4)</span><br><span class="line">        del</span><br><span class="line">        ;;</span><br><span class="line">    *)</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;输入不合法&quot;</span></span><br><span class="line">    <span class="keyword">esac</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">示例2：一次性添加多个变量</span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line"><span class="function"><span class="title">mod</span></span>()&#123;</span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;请输入(用户id，用户属组，用户家目录):&quot;</span> userid usergroup userhome username</span><br><span class="line">       usermod -u <span class="variable">$userid</span> -g <span class="variable">$usergroup</span> -d <span class="variable">$userhome</span> <span class="variable">$username</span> &amp;&gt; /dev/null &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;修改成功&quot;</span> || <span class="built_in">echo</span> <span class="string">&quot;修改失败&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">示例3：精密选择（推荐）</span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">menu</span></span>()&#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;1、创建用户&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;2、删除指定用户&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;3、修改指定用户（用户id，用户属组，用户家目录）&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">menu2</span></span>()&#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;1、修改用户id&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;2、修改用户属组&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;3、修改用户家目录&quot;</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">add</span></span>()&#123;</span><br><span class="line">    <span class="built_in">read</span> -p <span class="string">&quot;输入用户名:&quot;</span> username</span><br><span class="line">    <span class="built_in">id</span> <span class="variable">$username</span> &amp;&gt;/dev/null &amp;&amp;<span class="built_in">echo</span> <span class="string">&quot;用户已存在&quot;</span> || useradd <span class="variable">$username</span> &amp;&gt;/dev/null &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;创建成功&quot;</span> || <span class="built_in">echo</span> <span class="string">&quot;创建失败&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">del</span></span>()&#123;</span><br><span class="line">    <span class="built_in">read</span> -p <span class="string">&quot;输入用户名:&quot;</span> username</span><br><span class="line">    <span class="built_in">id</span> <span class="variable">$username</span> &amp;&gt;/dev/null || <span class="built_in">echo</span> <span class="string">&quot;用户不存在&quot;</span> &amp;&amp; userdel -r <span class="variable">$username</span> &amp;&gt;/dev/null &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;删除成功&quot;</span> || <span class="built_in">echo</span> <span class="string">&quot;删除失败&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">modify</span></span>()&#123;</span><br><span class="line">    <span class="built_in">read</span> -p <span class="string">&quot;输入用户名:&quot;</span> username</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">id</span> <span class="variable">$username</span> &amp;&gt;/dev/null</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">menu2</span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;请输入:&quot;</span> choice2</span><br><span class="line"><span class="keyword">case</span> <span class="variable">$choice2</span> <span class="keyword">in</span></span><br><span class="line">1)</span><br><span class="line">    <span class="built_in">read</span> -p <span class="string">&quot;输入uid:&quot;</span> uid</span><br><span class="line">    usermod -u <span class="variable">$uid</span> <span class="variable">$username</span> &amp;&gt;/dev/null &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;修改成功&quot;</span> || <span class="built_in">echo</span> <span class="string">&quot;修改失败&quot;</span></span><br><span class="line">;;</span><br><span class="line">2)</span><br><span class="line">    <span class="built_in">read</span> -p <span class="string">&quot;输入gid:&quot;</span> gid</span><br><span class="line">    usermod -g <span class="variable">$gid</span> &amp;&gt;/dev/null &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;修改成功&quot;</span> || <span class="built_in">echo</span> <span class="string">&quot;修改失败&quot;</span></span><br><span class="line">;;</span><br><span class="line">3)</span><br><span class="line">    <span class="built_in">read</span> -p <span class="string">&quot;输入家目录:&quot;</span> home</span><br><span class="line">    usermod -d <span class="variable">$home</span> <span class="variable">$username</span> &amp;&gt;/dev/null &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;修改成功&quot;</span> || <span class="built_in">echo</span> <span class="string">&quot;修改失败&quot;</span></span><br><span class="line">;;</span><br><span class="line">*)</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;输入不合法&quot;</span></span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;用户不存在&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    menu</span><br><span class="line">    <span class="built_in">read</span> -p <span class="string">&quot;请输入(按q退出)：&quot;</span> choice</span><br><span class="line">    <span class="keyword">case</span> <span class="variable">$choice</span> <span class="keyword">in</span></span><br><span class="line">    1)</span><br><span class="line">        add</span><br><span class="line">        ;;</span><br><span class="line">    2)</span><br><span class="line">        del</span><br><span class="line">        ;;</span><br><span class="line">    3)</span><br><span class="line">        modify</span><br><span class="line">        ;;</span><br><span class="line">    q)</span><br><span class="line"><span class="built_in">break</span></span><br><span class="line">;;</span><br><span class="line">    *)</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;输入不合法&quot;</span></span><br><span class="line">    <span class="keyword">esac</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><hr><h2 id="三-ACL的使用">三. ACL的使用</h2><p><strong>ACL(Access Control List)</strong># 注：<strong>访问控制列表（允许哪些人可以/不可以访问）</strong></p><ul><li>一个文件/目录的访问控制列表，可以针对任意指定的 用户/组使用权限字符分配rwx权限</li></ul><p><strong>设置ACL：setfacl指令</strong></p><ul><li>格式： <code>setfacl 选项 规则 文件</code></li></ul><p><strong>常用选项</strong></p><ul><li><code>-m</code>：新增或修改ACL中的规则</li><li><code>-b</code>： 删除所有ACL规则</li><li>-x： 删除指定的ACL规则</li></ul><p><strong>查看ACL：getfacl指令</strong></p><ul><li>格式：<code>getfacl  文件</code></li></ul><p><strong>设置ACL：setfacl指令</strong></p><ul><li>格式： <code>setfacl 选项 规则 文件</code></li></ul><p><strong>常用规则</strong></p><ul><li>格式：<code>类型</code>:<code>特定的用户或组</code>:<code>权限</code></li><li><code>user:(uid/name):(perms)</code>     指定某位使用者的权限</li><li><code>group:(gid/name):(perms)</code>  指定某一群组的权限</li><li><code>other::(perms)</code>            指定其它使用者的权限</li><li><code>mask::(perms)</code>            设定有效的最大权限</li></ul><p><strong>注意</strong></p><ul><li>user、group、other、mask简写为：u , g , o , m</li><li>perms使用rwx</li></ul><p>#注：acl访问控制列表，工作中和云计算都比较常见</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">示例1：查看文件acl</span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#注：对权限精准把控</span></span><br><span class="line">[root@localhost ~]<span class="comment"># getfacl win-utf-2.txt # 注：查看文件acl规则</span></span><br><span class="line"><span class="comment"># file: win-utf-2.txt# 注：get file acl</span></span><br><span class="line"><span class="comment"># owner: root# 注：初始的规则</span></span><br><span class="line"><span class="comment"># group: root</span></span><br><span class="line">user::rw-</span><br><span class="line">group::r--</span><br><span class="line">other::r--</span><br><span class="line">[root@localhost ~]<span class="comment"># ls -la win-utf-2.txt </span></span><br><span class="line">-rw-r--r--. 1 root root 0 10月 27 11:42 win-utf-2.txt</span><br><span class="line">[root@localhost ~]<span class="comment"># </span></span><br><span class="line">===============================================================================</span><br><span class="line"></span><br><span class="line">示例2：对sanchuang用户有读写执行权限</span><br><span class="line"><span class="comment">#注：针对特殊用户</span></span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">[root@localhost ~]<span class="comment"># setfacl -m u:sanchuang:rwx win-utf-2.txt # 注：对sanchuang用户有rwx权限</span></span><br><span class="line">[root@localhost ~]<span class="comment"># getfacl win-utf-2.txt # 注：u也可以写成 user  一般简写</span></span><br><span class="line"><span class="comment"># file: win-utf-2.txt# 注：注意普通用户对/root目录没有操作权限</span></span><br><span class="line"><span class="comment"># owner: root</span></span><br><span class="line"><span class="comment"># group: root</span></span><br><span class="line">user::rw-</span><br><span class="line">user:sanchuang:rwx<span class="comment"># 注：对sanchuang用户有rwx权限</span></span><br><span class="line">group::r--</span><br><span class="line">mask::rwx</span><br><span class="line">other::r--</span><br><span class="line">[root@localhost ~]<span class="comment"># ls -la win-utf-2.txt # 注：权限多了个+</span></span><br><span class="line">-rw-rwxr--+ 1 root root 0 10月 27 11:42 win-utf-2.txt</span><br><span class="line">===============================================================================</span><br><span class="line"></span><br><span class="line">示例3：对组有读写执行的权利</span><br><span class="line"><span class="comment">#注：针对特定组</span></span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">[root@localhost ~]<span class="comment"># setfacl -m g:sanchuang5:rw win-utf-2.txt </span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls -la win-utf-2.txt # 注：set file acl</span></span><br><span class="line">-rw-rwxr--+ 1 root root 0 10月 27 11:42 win-utf-2.txt</span><br><span class="line">[root@localhost ~]<span class="comment"># getfacl win-utf-2.txt </span></span><br><span class="line"><span class="comment"># file: win-utf-2.txt</span></span><br><span class="line"><span class="comment"># owner: root</span></span><br><span class="line"><span class="comment"># group: root</span></span><br><span class="line">user::rw-</span><br><span class="line">user:sanchuang:rwx</span><br><span class="line">group::r--</span><br><span class="line">group:sanchuang5:rw-<span class="comment"># 注：对组有读写执行的权利</span></span><br><span class="line">mask::rwx</span><br><span class="line">other::r--</span><br><span class="line">===============================================================================</span><br><span class="line"></span><br><span class="line">示例4：设置有效的最大权限</span><br><span class="line"><span class="comment">#注：针对mask设置有效权限</span></span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#注：设定有效的最大权限为r</span></span><br><span class="line"><span class="comment">#注：设置的权限在mask之下（天花板）</span></span><br><span class="line">[root@localhost ~]<span class="comment"># setfacl -m m::r win-utf-2.txt# 注：设置有效的最大权限</span></span><br><span class="line">[root@localhost ~]<span class="comment"># getfacl win-utf-2.txt </span></span><br><span class="line"><span class="comment"># file: win-utf-2.txt</span></span><br><span class="line"><span class="comment"># owner: root</span></span><br><span class="line"><span class="comment"># group: root</span></span><br><span class="line">user::rw-</span><br><span class="line">user:sanchuang:rwx<span class="comment">#effective:r--# 注：即使sanchuang的权限是rw，但是有效最大权限是r</span></span><br><span class="line">group::r--</span><br><span class="line">group:sanchuang5:rw-<span class="comment">#effective:r--</span></span><br><span class="line">mask::r--</span><br><span class="line">other::r--</span><br><span class="line"><span class="comment">#注：指明了有效最大权限后；用户sanchuang即使有读写的权限，用户sanchuang5最大权限仅仅指为读</span></span><br><span class="line"><span class="comment">#注：即使设置了用户sanchuang rw权限，但是mask设置为r，也只有r的权限</span></span><br></pre></td></tr></table></figure><hr><h2 id="四-ACL类型">四. ACL类型</h2><p><strong>ACL类型</strong></p><ul><li>存取型ACL(Access ACL)：文件或目录</li><li><code>预设型ACL(Default ACL)：只能对目录</code></li></ul><p><strong>预设型ACL(Default ACL)</strong></p><ul><li>格式：<code>setfacl –m default</code>:类型:特定的用户或组:权限<br><code>setfacl –m d</code>:类型:特定的用户或组:权限</li><li>设置了预设型ACL的目录，<strong>其下的所有文件或者子目录就都具有了主目录的ACL权限，并且子目录也同样有预设的ACl权限</strong></li></ul><p>#注：只能对目录设置预设型</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">示例 设置预设ACL</span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux lianxi]<span class="comment"># mkdir cc_test</span></span><br><span class="line">[root@sanchuang-linux lianxi]<span class="comment"># getfacl cc_test/</span></span><br><span class="line"><span class="comment"># file: cc_test/</span></span><br><span class="line"><span class="comment"># owner: root</span></span><br><span class="line"><span class="comment"># group: root</span></span><br><span class="line">user::rwx</span><br><span class="line">group::r-x</span><br><span class="line">other::r-x</span><br><span class="line">[root@sanchuang-linux lianxi]<span class="comment"># setfacl -m d:u:sanle10:rw cc_test/ # 注：对文件进行预设型acl设置</span></span><br><span class="line">[root@sanchuang-linux lianxi]<span class="comment"># getfacl cc_test/</span></span><br><span class="line"><span class="comment"># file: cc_test/</span></span><br><span class="line"><span class="comment"># owner: root</span></span><br><span class="line"><span class="comment"># group: root</span></span><br><span class="line">user::rwx</span><br><span class="line">group::r-x</span><br><span class="line">other::r-x</span><br><span class="line">default:user::rwx<span class="comment"># 注：新增的参数</span></span><br><span class="line">default:user:sanle10:rw-</span><br><span class="line">default:group::r-x</span><br><span class="line">default:mask::rwx</span><br><span class="line">default:other::r-x</span><br><span class="line">[root@sanchuang-linux lianxi]<span class="comment"># cd cc_test/</span></span><br><span class="line">[root@sanchuang-linux cc_test]<span class="comment"># touch aa# 注：新建的文件会继承预设的acl设置</span></span><br><span class="line">[root@sanchuang-linux cc_test]<span class="comment"># getfacl aa</span></span><br><span class="line"><span class="comment"># file: aa</span></span><br><span class="line"><span class="comment"># owner: root</span></span><br><span class="line"><span class="comment"># group: root</span></span><br><span class="line">user::rw-</span><br><span class="line">user:sanle10:rw-<span class="comment"># 注：新建的文件会继承预设的acl设置</span></span><br><span class="line">group::r-x<span class="comment">#effective:r--</span></span><br><span class="line">mask::rw-</span><br><span class="line">other::r--</span><br><span class="line"><span class="comment">#注：预设之前已经创建的文件 不会继承预设的acl设置</span></span><br></pre></td></tr></table></figure><hr><h2 id="五-练习">五. 练习</h2><p>1、新建三个组 shuiguo,  mifeng,  shaokao</p><p>2、新建3个用户，pingguo属于shuiguo组，jingshi属于mifen组，yueyang属于shaokao组</p><p>3、在根目录下新建目录food，将/etc/passwd文件复制到food目录下</p><p>4、设置权限，passwd文件能被shuiguo组读写，jingshi这个用户读写执行，yueyang这个用户不能进行任何操作</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">示例</span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#1</span></span><br><span class="line">[root@sanchuang-linux lianxi]<span class="comment"># groupadd shuiguo</span></span><br><span class="line">[root@sanchuang-linux lianxi]<span class="comment"># groupadd mifen</span></span><br><span class="line">[root@sanchuang-linux lianxi]<span class="comment"># groupadd shaokao</span></span><br><span class="line"><span class="comment">#2</span></span><br><span class="line">[root@sanchuang-linux lianxi]<span class="comment"># useradd -g shuiguo pingguo</span></span><br><span class="line">[root@sanchuang-linux lianxi]<span class="comment"># useradd -g mifen jingshi</span></span><br><span class="line">[root@sanchuang-linux lianxi]<span class="comment"># useradd -g shaokao yueyang</span></span><br><span class="line"><span class="comment">#3</span></span><br><span class="line">[root@sanchuang-linux lianxi]<span class="comment"># mkdir /food</span></span><br><span class="line">[root@sanchuang-linux lianxi]<span class="comment"># cp /etc/passwd /food</span></span><br><span class="line">[root@sanchuang-linux lianxi]<span class="comment"># cd /food</span></span><br><span class="line"><span class="comment">#4</span></span><br><span class="line">[root@sanchuang-linux food]<span class="comment"># setfacl -m g:shuiguo:rw passwd </span></span><br><span class="line">[root@sanchuang-linux food]<span class="comment"># setfacl -m u:jingshi:rwx passwd </span></span><br><span class="line">[root@sanchuang-linux food]<span class="comment"># setfacl -m u:yueyang:--- passwd# 注：没有任何权限</span></span><br><span class="line">[root@sanchuang-linux food]<span class="comment"># getfacl passwd </span></span><br><span class="line"><span class="comment"># file: passwd</span></span><br><span class="line"><span class="comment"># owner: root</span></span><br><span class="line"><span class="comment"># group: root</span></span><br><span class="line">user::rw-</span><br><span class="line">user:jingshi:rwx</span><br><span class="line">user:yueyang:---</span><br><span class="line">group::r--</span><br><span class="line">group:shuiguo:rw-</span><br><span class="line">mask::rwx</span><br><span class="line">other::r--</span><br></pre></td></tr></table></figure><hr><h2 id="六-权限的继承和拒绝">六. 权限的继承和拒绝</h2><p>一个用户属于某个组会继承这个组的权限。</p><p>​1.主要组<br>​2.次要组</p><p>用户的主要组（有效组）属于某个组，会继承这个组的权限，如果是附属组属于某个组，也会继承。</p><ul><li>newgrp</li></ul><p>拒绝权限高于一切 —》针对用户</p><p>一个组允许，一个组拒绝 —》允许</p><hr><h2 id="七-sudo授权">七. sudo授权</h2><p><strong>sudo授权</strong></p><ul><li><strong>Linux里root用户权限最大</strong></li></ul><p>​关机、重启系统、配置IP地址、格式化磁盘、mount等</p><ul><li><strong>普通用户权限非常小</strong></li><li><strong>如何让普通用户也具有一定的权限？</strong></li></ul><p>​给root用户分忧</p><ul><li><strong>如果能授权，那么是授权给用户还是组？</strong></li></ul><p>#注：sudo授权给部分普通用户使用root用户的权限<br>#注：<strong>sudo --&gt; 授权给普通用户取执行命令的</strong><br>#注：sudo配置文件 /etc/sudoers<br><code>#注：有一个日志文件会记录下被授权者执行的所有命令/var/log/secure</code></p><p>#注：<strong>第一个ALL表示允许任何终端、机器访问sudo，一般就表示本机</strong><br>#注：<strong>第二个ALL表示sudo命令可以允许以任何用户身份去执行</strong><br>#注：<strong>第三个ALL表示可以执行任何命令</strong></p><p><strong>授权日志：有一个日志文件会记录下被授权者执行的所有命令/var/log/secure</strong><br><strong>查看日志，知道授权命令的执行情况</strong><br>[root@cali ~]# tailf /var/log/secure</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line">示例1：生成随机密码</span><br><span class="line"><span class="comment">#注：生成随机密码的工具mkpasswd</span></span><br><span class="line">https://www.cnblogs.com/shijunxian/archive/2020/05/26/12961543.html</span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux food]<span class="comment"># yum install expect -y</span></span><br><span class="line">[root@sanchuang-linux bin]<span class="comment"># mkpasswd -l 15 -d 3 -c 4 -C 4 -s 2</span></span><br><span class="line">wjp4[HC]hx6mSO6</span><br><span class="line">===============================================================================</span><br><span class="line"></span><br><span class="line">示例2：sudo配置文件 /etc/sudoers</span><br><span class="line"><span class="comment">#注：授权给某些用户执行某些命令</span></span><br><span class="line"><span class="comment">#注：编辑/etc/sudoers授权并验证</span></span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux bin]<span class="comment"># less /etc/sudoers</span></span><br><span class="line">………………</span><br><span class="line"><span class="comment">## Syntax:</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">##      user    MACHINE=COMMANDS………………</span></span><br><span class="line"><span class="comment">## Allow root to run any commands anywhere </span></span><br><span class="line">root    ALL=(ALL)       ALL<span class="comment"># 注：ALL表示当前这个机器</span></span><br><span class="line"><span class="comment">#注：1、允许root用户执行这条命令 ； 2、ALL表示当前这个主机，(ALL)表示允许用户以哪个用户的权限设置 ； 3、ALL表示所有命令（在这个机器上面可以有任何用户的命令）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#注：第一个ALL表示允许任何终端、机器访问sudo，一般就表示本机</span></span><br><span class="line"><span class="comment">#注：第二个ALL表示sudo命令可以允许以任何用户身份去执行</span></span><br><span class="line"><span class="comment">#注：第三个ALL表示可以执行任何命令</span></span><br><span class="line">===============================================================================</span><br><span class="line"></span><br><span class="line">示例3：编辑配置文件/etc/sudoers 给用户颁布权限</span><br><span class="line"><span class="comment">#注：编辑配置文件 可以使用vim  也可以使用visudo  使用visudo不需要接文件名</span></span><br><span class="line"><span class="comment">#注：推荐使用visodu去编辑/etc/sudoers，它会检测语法；vim去编辑不会检测</span></span><br><span class="line"><span class="comment">#注：对于用户sanle有本地host所有权限</span></span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux bin]<span class="comment"># visudo# 注：使用visudo不需要接文件名</span></span><br><span class="line"><span class="comment">## Allow root to run any commands anywhere</span></span><br><span class="line">root    ALL=(ALL)       ALL</span><br><span class="line">sanle   ALL=(ALL)       ALL</span><br><span class="line"><span class="comment">#注：表示sanle用户，可以在这台主机上执行任何用户的任何命令，但是使用sudo执行时需要输入sanle用户的密码</span></span><br><span class="line"><span class="comment">#注：不设置NOPASSWD  第1次输入密码后  密码有时效性</span></span><br><span class="line">[root@sanchuang-linux bin]<span class="comment"># su - sanle# 注：切换到sanle用户</span></span><br><span class="line">[sanle@sanchuang-linux ~]$ sudo passwd wy<span class="comment"># 注：前面+sudo  能进行任何操作</span></span><br><span class="line">我们信任您已经从系统管理员那里了解了日常注意事项。</span><br><span class="line">总结起来无外乎这三点：</span><br><span class="line">    <span class="comment">#1) 尊重别人的隐私。</span></span><br><span class="line">    <span class="comment">#2) 输入前要先考虑(后果和风险)。</span></span><br><span class="line">    <span class="comment">#3) 权力越大，责任越大。</span></span><br><span class="line">[sudo] sanle 的密码：<span class="comment"># 注：需要输入sanle用户 密码</span></span><br><span class="line">[root@sanchuang-linux bin]<span class="comment"># visudo </span></span><br><span class="line"><span class="comment">## Allow root to run any commands anywhere</span></span><br><span class="line">root    ALL=(ALL)       ALL</span><br><span class="line">sanle   ALL=(ALL)       NOPASSWD:ALL</span><br><span class="line"><span class="comment">#注：表示sanle用户，可以在这台主机上执行任何用户的任何命令，无需输入sanle的密码</span></span><br><span class="line">[sanle@sanchuang-linux ~]$ sudo passwd wy</span><br><span class="line">更改用户 wy 的密码 。</span><br><span class="line">新的 密码：<span class="comment"># 注：不需要验证原密码</span></span><br><span class="line">===============================================================================</span><br><span class="line"></span><br><span class="line">示例4：给用户/组颁布权限</span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux bin]<span class="comment"># visudo </span></span><br><span class="line"><span class="comment">## Allow root to run any commands anywhere</span></span><br><span class="line">root    ALL=(ALL)       ALL</span><br><span class="line">sanle   ALL=(ALL)       NOPASSWD:ALL</span><br><span class="line"><span class="comment">#注：表示sanle用户，可以在这台主机上执行任何用户的任何命令，无需输入sanle的密码</span></span><br><span class="line">%sanchuang5 ALL=(ALL)   NOPASSWD:ALL</span><br><span class="line"><span class="comment">#注：表示sanchuang5这个组的用户，在这台主机上可以执行任何用户的任何命令，无需输入密码</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#注：对于sanchuang5这个组赋予以任何用户执行任何权限</span></span><br><span class="line"><span class="comment">#注：组里的所有成员也会拥有这个权限</span></span><br><span class="line">===============================================================================</span><br><span class="line"></span><br><span class="line">示例5 对于指定的命令去授权</span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">[sanle@sanchuang-linux ~]$ <span class="built_in">which</span> <span class="built_in">chown</span></span><br><span class="line">/usr/bin/chown</span><br><span class="line">[sanle@sanchuang-linux ~]$ <span class="built_in">which</span> passwd</span><br><span class="line">/usr/bin/passwd</span><br><span class="line">[root@sanchuang-linux cc_test]<span class="comment"># visudo</span></span><br><span class="line">root    ALL=(ALL)       ALL</span><br><span class="line">sanle   ALL=(ALL)       NOPASSWD:ALL</span><br><span class="line">%sanchuang5 ALL=(ALL)   NOPASSWD:ALL</span><br><span class="line">wy      ALL=(ALL)       /usr/bin/chown,/usr/bin/passwd<span class="comment"># 注：接命令的绝对路径</span></span><br><span class="line"><span class="comment">#注：表示wy用户在这台主机上，拥有chown,passwd命令执行授权，命令路径写命令的绝对路径</span></span><br><span class="line">[wy@sanchuang-linux ~]$ sudo <span class="built_in">chmod</span> 777 aa</span><br><span class="line">我们信任您已经从系统管理员那里了解了日常注意事项。</span><br><span class="line">总结起来无外乎这三点：</span><br><span class="line">    <span class="comment">#1) 尊重别人的隐私。</span></span><br><span class="line">    <span class="comment">#2) 输入前要先考虑(后果和风险)。</span></span><br><span class="line">    <span class="comment">#3) 权力越大，责任越大。</span></span><br><span class="line">[sudo] wy 的密码： <span class="comment"># 注：验证密码后可以修改</span></span><br><span class="line">[wy@sanchuang-linux ~]$ sudo passwd wy2</span><br><span class="line">更改用户 wy2 的密码 。</span><br><span class="line">新的 密码：</span><br><span class="line">===============================================================================</span><br><span class="line"></span><br><span class="line">示例6：授权日志 /var/log/目录下  secure文件</span><br><span class="line"><span class="comment">#注：有一个日志文件会记录下被授权者执行的所有命令/var/log/secure</span></span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux cc_test]<span class="comment"># cd /var/log/</span></span><br><span class="line">[root@sanchuang-linux <span class="built_in">log</span>]<span class="comment"># less secure</span></span><br><span class="line">uid=0 <span class="built_in">tty</span>=/dev/pts/2 ruser=wy rhost=  user=wy</span><br><span class="line">Nov 12 16:43:26 sanchuang-linux sudo[2424]: pam_unix(sudo:auth): conversation failed</span><br><span class="line">Nov 12 16:43:26 sanchuang-linux sudo[2424]: pam_unix(sudo:auth): auth could not identify password <span class="keyword">for</span> [wy]</span><br><span class="line">Nov 12 16:43:26 sanchuang-linux sudo[2424]: wy : <span class="built_in">command</span> not allowed ; TTY=pts/2 ; PWD=/home/wy ; USER=root</span><br><span class="line"> ; COMMAND=/bin/chmod 777 aa</span><br><span class="line">===============================================================================</span><br><span class="line"></span><br><span class="line">示例7</span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux bin]<span class="comment"># ls -ld /bin/passwd</span></span><br><span class="line">-rwsr-xr-x. 1 root root 33600 4月   7 2020 /bin/passwd</span><br><span class="line"><span class="comment">#注：s位  普通用户有设置密码的权限，但是没有为他人设置密码的权限，且密码需要满足密码复杂度</span></span><br></pre></td></tr></table></figure><hr><h2 id="八-练习">八. 练习</h2><p>yum install net-tools -y<br>授予bailongma用户：useradd、userdel、passwd<br>授予baigujing用户：ip、ping、ifconfig、route<br>授权yutujing用户：poweroff、reboot</p><p>#注：授权不会检测系统里有该用户</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">示例1</span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">[wy@sanchuang-linux ~]$ <span class="built_in">which</span> useradd<span class="comment"># 注：查找命令的绝对路径</span></span><br><span class="line">/usr/sbin/useradd</span><br><span class="line">………………………………</span><br><span class="line">[wy@sanchuang-linux ~]<span class="comment"># visudo</span></span><br><span class="line">root    ALL=(ALL)       ALL</span><br><span class="line">bailongma ALL=(ALL)     /usr/sbin/useradd,/usr/sbin/userdel,/usr/bin/passwd</span><br><span class="line">baigujing ALL=(ALL)     /usr/sbin/ip,/usr/bin/ping,/usr/sbin/ifconfig,/usr/sbin/route</span><br><span class="line">yutujing  ALL=(ALL)     /usr/sbin/poweroff,/usr/sbin/reboot</span><br><span class="line">===============================================================================</span><br><span class="line"></span><br><span class="line">示例2：(ALL) 可以不写</span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">[wy@sanchuang-linux ~]<span class="comment"># visudo</span></span><br><span class="line">root    ALL=(ALL)       ALL</span><br><span class="line">bailongma ALL=/usr/sbin/useradd,/usr/sbin/userdel,/usr/bin/passwd<span class="comment"># 注：(ALL) 可以不写</span></span><br><span class="line">baigujing ALL=/usr/sbin/ip,/usr/bin/ping,/usr/sbin/ifconfig,/usr/sbin/route</span><br><span class="line">yutujing  ALL=/usr/sbin/poweroff,/usr/sbin/reboot</span><br><span class="line">===============================================================================</span><br><span class="line"></span><br><span class="line">示例3：定义别名</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[wy@sanchuang-linux ~]<span class="comment"># visudo</span></span><br><span class="line"><span class="comment">#定义命令别名</span></span><br><span class="line">Cmnd_Alias  NETWORK = /usr/sbin/ip,/usr/bin/ping,/usr/sbin/ifconfig,/usr/sbin/route</span><br><span class="line">Cmnd_Alias  SHUT = /usr/sbin/poweroff,/usr/sbin/reboot</span><br><span class="line">Cmnd_Alias  USER = /usr/sbin/useradd,/usr/sbin/userdel,/usr/bin/passwd</span><br><span class="line"></span><br><span class="line">bailongma ALL=USER,NETWORK</span><br><span class="line">baigujing ALL=NETWORK</span><br><span class="line">yutujing  ALL=SHUT</span><br><span class="line">------------------------------------------------------------------------</span><br><span class="line">[baigujing@sanchuang-linux ~]$ sudo ip a add 192.168.0.144/24 dev ens33  <span class="comment">#注：为网卡增加ip地址</span></span><br><span class="line">[sudo] baigujing 的密码：<span class="comment"># 注：ip命令权限的使用</span></span><br><span class="line">[baigujing@sanchuang-linux ~]$ ip add</span><br><span class="line">………………</span><br><span class="line">    inet 192.168.0.26/24 brd 192.168.0.255 scope global dynamic noprefixroute ens33</span><br><span class="line">    inet 192.168.0.144/24 scope global secondary ens33</span><br><span class="line">………………</span><br><span class="line">------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#注：为网卡增加ip地址（1个网卡可以有多个ip地址）</span></span><br><span class="line">[wy@sanchuang-linux ~]$ ip a add 192.168.0.144/24 dev ens33</span><br></pre></td></tr></table></figure><hr><h2 id="九-SELinux介绍">九. SELinux介绍</h2><ul><li>**SELinux是什么？有什么用？ **</li><li><strong>如何查看SELinux是否开启？</strong></li></ul><p>​getenforce</p><ul><li><strong>如何关闭和开启SELinux？</strong></li></ul><p>​临时<br>​setenforce<br>​永久<br>​修改配置文件<br>​vim /etc/selinux/config<br>​vim /etc/sysconfig/selinux<br>​重新启动系统</p><ul><li><strong>SELinux在企业里使用多吗？</strong></li></ul><p>.---------------------------------------------------------------------------------------------------------------------------------------------------------------------</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">SELinux是什么？</span><br><span class="line">·SELinux是一个linux系统里的一个安全方面的子系统，用来提升linux的整体的安全级别。是一种访问控制体系，进程只能访问那些在他的任务中所需要文件。（控制进程可以访问哪些允许访问的资源）</span><br><span class="line"></span><br><span class="line">·操作系统有两类访问控制：自主访问控制（DAC）和强制访问控制（MAC）。</span><br><span class="line"></span><br><span class="line">·标准Linux安全是一种DAC，SELinux为Linux增加了一个灵活的和可配置的的MAC。</span><br><span class="line"></span><br><span class="line">·DAC(Discretionary Access Control）自主访问控制</span><br><span class="line"></span><br><span class="line">·工作原理：</span><br><span class="line"></span><br><span class="line">·MAC(Mandatory Access Control）―――强制访问控制 ---》selinux</span><br><span class="line"></span><br><span class="line">·工作原理：</span><br><span class="line"></span><br><span class="line">·哪些进程能访问哪些类型的文件，都有安全策略</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">永久修改</span><br><span class="line"><span class="comment">#注：这是链接文件/etc/sysconfig/selinux -&gt; /etc/selinux/config</span></span><br><span class="line">[root@cali <span class="built_in">log</span>]<span class="comment"># vim /etc/sysconfig/selinux</span></span><br><span class="line">SELINUX=disabled</span><br><span class="line"></span><br><span class="line">临时配置</span><br><span class="line">临时配置，重新启动系统会失效</span><br><span class="line">0--》Permissive 宽容模式</span><br><span class="line">1--》Enforcing  强制执行模式 </span><br><span class="line">[root@cali selinux]<span class="comment"># setenforce 0  </span></span><br><span class="line">[root@cali selinux]<span class="comment"># getenforce  </span></span><br><span class="line">Permissive</span><br><span class="line">[root@cali selinux]<span class="comment">#</span></span><br><span class="line">[root@cali selinux]<span class="comment"># setenforce 1  </span></span><br><span class="line">[root@cali selinux]<span class="comment"># getenforce  </span></span><br><span class="line">Enforcing</span><br><span class="line">[root@cali selinux]<span class="comment">#</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">·进程控制 ：控制哪些进程能访问哪些文件，因为它对进程和文件进行了分类，制定了策略，策略里规定了哪些类型的进程能操作哪些类型的文件。</span><br><span class="line"></span><br><span class="line">·服务异常不能访问--》通过网络不能访问</span><br><span class="line">·1.考虑iptables防火墙是否开启 </span><br><span class="line">·2.考虑selinux安全机制是否开启</span><br><span class="line"></span><br><span class="line">·iptables 是外层的安全策略防火墙</span><br><span class="line">·selinux是linux内部的安全策略机制防火墙</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">博客链接：https://blog.csdn.net/yanjun821126/article/details/80828908</span><br><span class="line"></span><br><span class="line">SELinux</span><br><span class="line">是内核集成的一个安全相关的子系统，可以让系统更加的安全</span><br><span class="line">内核版本2.6以上支持</span><br><span class="line"></span><br><span class="line"><span class="comment">#注：查看内核版本 uname -r</span></span><br><span class="line">[root@sanchuang-linux bin]<span class="comment"># uname -r</span></span><br><span class="line">4.18.0-193.el8.x86_64</span><br><span class="line"></span><br><span class="line">安全增强型 Linux（Security-Enhanced Linux）简称 SELinux，它是一个 Linux 内核模块，也是 Linux 的一个安全子系统。</span><br><span class="line"></span><br><span class="line">SELinux 的作用</span><br><span class="line">SELinux 主要作用就是最大限度地减小系统中服务进程可访问的资源（最小权限原则）。</span><br><span class="line"></span><br><span class="line">DAC:</span><br><span class="line">在没有使用 SELinux 的操作系统中，决定一个资源是否能被访问的因素是：某个资源是否拥有对应用户的权限（读、写、执行）</span><br><span class="line">这种权限管理机制的主体是用户，也称为自主访问控制（DAC）</span><br><span class="line"></span><br><span class="line">MAC:</span><br><span class="line">在使用了 SELinux 的操作系统中，决定一个资源是否能被访问的因素除了上述因素之外，还需要判断每一类进程是否拥有对某一类资源的访问权限。</span><br><span class="line">这种权限管理机制的主体是进程，也称为强制访问控制（MAC）</span><br><span class="line"></span><br><span class="line">默认情况下SElinux属于关闭状态（<span class="built_in">disable</span>）服务访问不了基本是设置了SElinux</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">示例：临时修改</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#注：临时修改 关机重启后失效</span></span><br><span class="line"><span class="comment">#注：临时配置，重新启动系统会失效</span></span><br><span class="line"><span class="comment">#注：0  --》Permissive 宽容模式</span></span><br><span class="line"><span class="comment">#注：1  --》Enforcing  强制执行模式</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># getenforce # 注：获取当前selinux的模式</span></span><br><span class="line">Disabled</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># setenforce 0# 注：0宽容模式临时生效</span></span><br><span class="line">setenforce: SELinux is disabled</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># setenforce 1# 注：1强制模式（一定要遵循SELinux规则）</span></span><br><span class="line">setenforce: SELinux is disabled</span><br><span class="line"><span class="comment">#注：0|1  Permissive|Enforcing  宽容模式|强制执行模式</span></span><br><span class="line"></span><br><span class="line">============================================================================================</span><br><span class="line">示例：永久生效 修改配置文件</span><br><span class="line"><span class="comment">#注：配置文件：/etc/selinux/config</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># vim /etc/selinux/config</span></span><br><span class="line"><span class="comment">#     enforcing - SELinux security policy is enforced.</span></span><br><span class="line"><span class="comment">#     permissive - SELinux prints warnings instead of enforcing.</span></span><br><span class="line"><span class="comment">#     disabled - No SELinux policy is loaded.</span></span><br><span class="line">SELINUX=disabled<span class="comment"># 注：指定工作模式</span></span><br><span class="line"><span class="comment">#注：修改之后生效，需要重启电脑</span></span><br></pre></td></tr></table></figure><hr>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> 权限 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>17_Linux基础-用户权限2</title>
      <link href="/blog/posts/14777.html"/>
      <url>/blog/posts/14777.html</url>
      
        <content type="html"><![CDATA[<p>摘要：博客迁移 <a href="https://blog.csdn.net/cpen_web"><code>https://blog.csdn.net/cpen_web</code></a> → 本站<span id="more"></span></p><h1 id="17-Linux基础-用户权限2">17_Linux基础-用户权限2</h1><p><a href="https://blog.csdn.net/cpen_web">博客🔗：https://blog.csdn.net/cpen_web</a></p><hr><h2 id="一-练习：批量创建n个用户">一. 练习：批量创建n个用户</h2><p>批量创建n个用户</p><p>用户名以sanchuang开头,sanchuang</p><p>指定家目录/lianxi/user</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">示例</span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">[root@localhost ~]<span class="comment"># seq -w 10# 注：-w 同等长度输出</span></span><br><span class="line">01</span><br><span class="line">02</span><br><span class="line">………………</span><br><span class="line">09</span><br><span class="line">10</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># vim create_user2.sh</span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line">num=<span class="variable">$1</span>          <span class="comment"># 注：$1外面 接收参数，改名字 见名知义</span></span><br><span class="line">[ -d /lianxi/user ] || <span class="built_in">mkdir</span> /lianxi/user      <span class="comment"># 注：-d判断目录是否存在，-f判断普通文件是否存在</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `<span class="built_in">seq</span> -w <span class="variable">$num</span>`   <span class="comment"># 注：mkdir /lianxi/user 就可以了，不要加上用户名目录</span></span><br><span class="line"><span class="keyword">do</span><span class="comment"># 注：判断是否存在，如果前面为真不做任何事情，如果为假就执行mkdir…</span></span><br><span class="line">    useradd -d /lianxi/user/sanchuang<span class="variable">$i</span> sanchuang<span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># bash create_user2.sh 12</span></span><br><span class="line">useradd：用户“sanchuang01”已存在</span><br><span class="line">useradd：用户“sanchuang02”已存在</span><br><span class="line">………………</span><br><span class="line">useradd：用户“sanchuang10”已存在</span><br><span class="line">useradd：用户“sanchuang12”已存在</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cd /lianxi/user</span></span><br><span class="line">[root@sanchuang-linux user]<span class="comment"># ls</span></span><br><span class="line">sanchuang01  …………  sanchuang10  sanchuang12</span><br><span class="line">[root@sanchuang-linux user]<span class="comment"># cd</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># bash create_user2.sh 20</span></span><br><span class="line">useradd：用户“sanchuang01”已存在</span><br><span class="line">useradd：用户“sanchuang02”已存在</span><br><span class="line">………………</span><br><span class="line">useradd：用户“sanchuang12”已存在</span><br><span class="line">useradd：用户“sanchuang13”已存在</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cd /lianxi/user</span></span><br><span class="line">[root@sanchuang-linux user]<span class="comment"># ls</span></span><br><span class="line">sanchuang01  …………  sanchuang18  sanchuang20</span><br></pre></td></tr></table></figure><hr><h2 id="二-一般情况下普通用户只能在家目录下或者-tmp目录下创建文件或者文件夹">二. 一般情况下普通用户只能在家目录下或者/tmp目录下创建文件或者文件夹</h2><p><strong>一般情况下普通用户只能在家目录下或者/tmp目录下创建文件或者文件夹</strong></p><p>#注：/tmp目录是一个临时目录，一般存放临时性的东西</p><p>#注：（如：程序运行中需要记录的一些东西，程序结束后把/tmp目录下的东西删掉）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@sanchuang-linux ~]<span class="comment"># su - sanchuang</span></span><br><span class="line">上一次登录：五 11月  6 17:09:41 CST 2020pts/2 上</span><br><span class="line">[sanchuang@sanchuang-linux ~]$ <span class="built_in">ls</span> -ld /</span><br><span class="line">dr-xr-xr-x. 38 root root 4096 11月  5 15:12 /</span><br><span class="line">[sanchuang@sanchuang-linux ~]$ <span class="built_in">ls</span> -ld /etc</span><br><span class="line">drwxr-xr-x. 90 root root 8192 11月  7 15:00 /etc</span><br><span class="line">[sanchuang@sanchuang-linux ~]$ <span class="built_in">ls</span> -ld ./<span class="comment"># 注：家目录下 创建文件或者文件夹</span></span><br><span class="line">drwxrwxrwx. 4 sanchuang sanchuang 122 11月  6 17:10 ./</span><br><span class="line">[sanchuang@sanchuang-linux ~]$ <span class="built_in">ls</span> -ld /tmp<span class="comment"># 注：/tmp目录下 创建文件或者文件夹</span></span><br><span class="line">drwxrwxrwt. 12 root root 264 11月  7 10:36 /tmp</span><br><span class="line"></span><br><span class="line"><span class="comment">#注：chmod  自己是属主的时候，才可以修改权限</span></span><br></pre></td></tr></table></figure><hr><h2 id="三-chmod">三. chmod</h2><p><strong>chmod使用，必须是文件的属主，才能改动文件的读写执行权限（root除外）</strong></p><p>#注：chmod使用 用户必须是文件的属主才能修改（即使是文件属组里的成员也没有权限去修改文件）</p><p>#注：root用户除外</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">示例：su切换用户时 加- 不加- 区别</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># su - sanchuang11# 注：加 - 会自动切换到到家目录下</span></span><br><span class="line">上一次登录：六 11月  7 15:10:51 CST 2020pts/0 上</span><br><span class="line">[sanchuang11@sanchuang-linux ~]$ <span class="built_in">exit</span></span><br><span class="line">注销</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># su sanchuang11# 注：不加 - 会在当前目录下</span></span><br><span class="line">[sanchuang11@sanchuang-linux chenpeng]$ </span><br></pre></td></tr></table></figure><hr><h2 id="四-设置文件-目录的归属">四. 设置文件/目录的归属</h2><p><strong>设置文件/目录的归属</strong></p><h3 id="4-1-chown命令">4.1 chown命令</h3><p><strong>chown命令</strong>      # 注：用来改变文件的属主和属组</p><ul><li>必须是<strong>root</strong># 注：chown 只能root去更改</li><li>用户和组必须存在</li><li>格式：<code>chown  属主  文件</code><br><code>chown :属组  文件 </code><br><code>chown  属主:属组 文件</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">示例：<span class="built_in">chown</span> 修改文件的属主和属组</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux tmp]<span class="comment"># ls -al sanchuang_log # 注：属主 sanchuang ; 属组 sanchuang</span></span><br><span class="line">-rw-rw-r-- 1 sanchuang sanchuang 673 11月  7 15:19 sanchuang_log</span><br><span class="line">[root@sanchuang-linux tmp]<span class="comment"># chown sanchuang10 sanchuang_log # 注：修改属主 sanchuang10</span></span><br><span class="line">[root@sanchuang-linux tmp]<span class="comment"># ls -al sanchuang_log </span></span><br><span class="line">-rw-rw-r-- 1 sanchuang10 sanchuang 673 11月  7 15:19 sanchuang_log</span><br><span class="line">[root@sanchuang-linux tmp]<span class="comment"># chown :sanchuang9 sanchuang_log # 注：修改属组 sanchuang9</span></span><br><span class="line">[root@sanchuang-linux tmp]<span class="comment"># ls -al sanchuang_log </span></span><br><span class="line">-rw-rw-r-- 1 sanchuang10 sanchuang9 673 11月  7 15:19 sanchuang_log</span><br><span class="line">[root@sanchuang-linux tmp]<span class="comment"># chown sanchuang2:sanchuang sanchuang_log # 注：即改属主又改属组</span></span><br><span class="line">[root@sanchuang-linux tmp]<span class="comment"># ls -al sanchuang_log </span></span><br><span class="line">-rw-rw-r-- 1 sanchuang2 sanchuang 673 11月  7 15:19 sanchuang_log</span><br><span class="line"></span><br><span class="line"><span class="comment">#注：属主和属组不可以随便更改</span></span><br><span class="line"><span class="comment">#注：数字随便改，没有限制 没有强制性的检查</span></span><br><span class="line"><span class="comment">#注：改字符串形式的名字 会检查一下</span></span><br><span class="line">[root@sanchuang-linux tmp]<span class="comment"># chown xixi:haha sanchuang_log # 注：修改 字符串会检查</span></span><br><span class="line"><span class="built_in">chown</span>: 无效的用户: “xixi:haha”</span><br><span class="line">[root@sanchuang-linux tmp]<span class="comment"># chown 6666:6666 sanchuang_log # 注：数字没有限制</span></span><br><span class="line">[root@sanchuang-linux tmp]<span class="comment"># ls -al sanchuang_log </span></span><br><span class="line">-rw-rw-r-- 1 6666 6666 673 11月  7 15:19 sanchuang_log</span><br></pre></td></tr></table></figure><h3 id="4-2-chgrp命令">4.2 chgrp命令</h3><p><strong>chgrp命令</strong><strong># 注：修改属组（不常用）</strong></p><ul><li>格式：<code>chgrp  属组  文件</code></li><li>必须是root或者是文件的所有者</li><li>必须是新组的成员</li></ul><p><strong>常用命令选项</strong></p><ul><li><code>-R</code>：递归修改指定目录下所有文件、子目录的归属</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">示例：<span class="built_in">chgrp</span>命令 修改属组</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux tmp]<span class="comment"># chgrp sanchuang5 sanchuang_log # 注:只修改属组</span></span><br><span class="line">[root@sanchuang-linux tmp]<span class="comment"># ls -al sanchuang_log </span></span><br><span class="line">-rw-rw-r-- 1 6666 sanchuang5 673 11月  7 15:19 sanchuang_log</span><br></pre></td></tr></table></figure><h3 id="4-3-可以执行的用户">4.3 可以执行的用户</h3><p><strong>可以执行的用户</strong></p><blockquote><p><img src="https://image.cpen.top/image/202208170358168.png" alt="image-20220817035817124"></p></blockquote><p>操作   可以执行的用户</p><p>chmod  root和文件所有者</p><p>chgrp    root和文件所有者（必须是组成员）</p><p>chown   只有root</p><p>#注：chgrp修改属组  文件所有者 必须是想要<strong>修改的组</strong>里的<strong>组成员</strong></p><hr><h2 id="五-默认权限">五. 默认权限</h2><ul><li>在内核级别，文件的初始权限666</li><li>在内核级别，文件夹的初始权限777</li><li>用umask命令控制默认权限，临时有效</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># umask  0022</span></span><br><span class="line">[root@localhost ~]<span class="comment"># umask -S  u=rwx,g=rx,o=rx  </span></span><br><span class="line">[root@localhost ~]<span class="comment"># umask 077  </span></span><br><span class="line">[root@localhost ~]<span class="comment"># umask  0077</span></span><br><span class="line">不推荐修改系统默认<span class="built_in">umask</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 注：umask规定默认创建文件或者文件夹的权限有多大</span></span><br><span class="line">============================================================================================</span><br><span class="line">[sanchuang9@sanchuang-linux ~]$ <span class="built_in">ls</span> -ld <span class="built_in">dd</span> <span class="comment"># 注：新建的文件dd</span></span><br><span class="line">-rw-rw-r-- 1 sanchuang9 sanchuang9 0 11月  7 15:48 <span class="built_in">dd</span><span class="comment"># 注：权限644</span></span><br><span class="line">============================================================================================</span><br></pre></td></tr></table></figure><h3 id="5-1-etc-profile下面有umask的设置">5.1 /etc/profile下面有umask的设置</h3><p><strong>/etc/profile下面有<code>umask</code>的设置</strong></p><p><strong>系统环境设置 /etc/profile</strong># 注：<strong>/etc/profile下面有umask的设置</strong></p><p>#注：判断uid是否大于199，并且当前用户的 用户名和组名 相等的时候 umask 是 002</p><p>#注：用户名和组名不一样时 umask 是022</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line">[sanchuang9@sanchuang-linux ~]$ less /etc/profile<span class="comment"># 注：/etc/profile下面有umask的设置</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$UID</span> -gt 199 ] &amp;&amp; [ <span class="string">&quot;`/usr/bin/id -gn`&quot;</span> = <span class="string">&quot;`/usr/bin/id -un`&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">umask</span> 002<span class="comment"># 注：如果uid大于199 执行 id -gn 命令  group_name  ;id -un user_name</span></span><br><span class="line"><span class="keyword">else</span><span class="comment"># 注：判定uid是否大于199，并且group_name=user_name</span></span><br><span class="line">    <span class="built_in">umask</span> 022<span class="comment"># 注：用户名和组名一样时 umask 是002 ； 用户名和组名不一样时 是 002</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#注：新建文件的权限是666-umask，新建目录的权限是777-umask</span></span><br><span class="line"><span class="comment">#注：使用umask设置文件的权限，因为每次登陆shell都会加载系统的环境，会运行/etc/profile，所以会设置它的umask</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#注：id -gn 获取当前用户组名</span></span><br><span class="line"><span class="comment">#注：id -un 获取当前用户名</span></span><br><span class="line"><span class="comment">#uid大于199，并且当前用户的group_name和user_name名字相同的时候 umask是002</span></span><br><span class="line"><span class="comment">#剩下的时候 umask是022</span></span><br><span class="line"></span><br><span class="line">·在内核级别，文件的初始权限666  </span><br><span class="line">·在内核级别，文件夹的初始权限777</span><br><span class="line">·用<span class="built_in">umask</span>命令控制默认权限，临时有效</span><br><span class="line"></span><br><span class="line"><span class="built_in">umask</span>为002 则表示新建文件的默认权限为664，新建文件的文件夹权限为775</span><br><span class="line"><span class="built_in">umask</span>为022 则表示新建文件的默认权限为644，新建文件的文件夹权限为755</span><br><span class="line"></span><br><span class="line"><span class="comment"># 注：666 - umask</span></span><br><span class="line"> 777 - <span class="built_in">umask</span></span><br><span class="line">============================================================================================</span><br><span class="line">示例：<span class="built_in">id</span> -gn 获取当前用户组名; <span class="built_in">id</span> -un 获取当前用户名</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux tmp]<span class="comment"># /usr/bin/id -gn</span></span><br><span class="line">root</span><br><span class="line">[root@sanchuang-linux tmp]<span class="comment"># /usr/bin/id -un</span></span><br><span class="line">root</span><br><span class="line">[root@sanchuang-linux tmp]<span class="comment"># id -gn# 注：当前所在用户组名</span></span><br><span class="line">root</span><br><span class="line">[root@sanchuang-linux tmp]<span class="comment"># id -un# 注：当前所在用户名</span></span><br><span class="line">root</span><br><span class="line">============================================================================================</span><br><span class="line">示例：判断2个字符串是否相等 可以用1个等号</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux tmp]<span class="comment"># [ &quot;a&quot; = &quot;b&quot; ] || echo &quot;ok&quot;# 注：判断字符串相同 可以用一个等于号</span></span><br><span class="line">ok<span class="comment"># 注：条件为假 输出ok</span></span><br><span class="line">[root@sanchuang-linux tmp]<span class="comment"># [ &quot;a&quot; = &quot;b&quot; ] &amp;&amp; echo &quot;ok&quot;# 注：条件为真 输出ok</span></span><br><span class="line">[root@sanchuang-linux tmp]<span class="comment"># [ &quot;a&quot; = &quot;a&quot; ] &amp;&amp; echo &quot;ok&quot;</span></span><br><span class="line">ok</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux tmp]<span class="comment"># su - sanchuang# 注：用户名和组名一样时</span></span><br><span class="line">[sanchuang@sanchuang-linux ~]$ <span class="built_in">umask</span> </span><br><span class="line">0002<span class="comment"># 注：用户名和组名一样时 umask 是002</span></span><br><span class="line">[sanchuang@sanchuang-linux ~]$ <span class="built_in">id</span> -gn<span class="comment"># 注：第一位0是粘滞位  002是umask</span></span><br><span class="line">sanchuang</span><br><span class="line">[sanchuang@sanchuang-linux ~]$ <span class="built_in">id</span> -un</span><br><span class="line">sanchuang</span><br><span class="line"></span><br><span class="line">[root@localhost ~]<span class="comment"># su - b1# 注：用户名 和 组名不一样时</span></span><br><span class="line">[b1@localhost ~]$ <span class="built_in">id</span></span><br><span class="line">uid=1204(b1) gid=1001(cali) 组=1001(cali),200(tech)</span><br><span class="line">[b1@localhost ~]$ <span class="built_in">id</span> -un</span><br><span class="line">b1</span><br><span class="line">[b1@localhost ~]$ <span class="built_in">id</span> -gn</span><br><span class="line">cali</span><br><span class="line">[b1@localhost ~]$ <span class="built_in">umask</span> <span class="comment"># 注：用户名和组名不一样时 umask是022</span></span><br><span class="line">0022</span><br><span class="line">[b1@localhost ~]$ <span class="built_in">touch</span> gg</span><br><span class="line">[b1@localhost ~]$ <span class="built_in">ls</span> -ld gg<span class="comment"># 注：新建文件的权限是644权限</span></span><br><span class="line">-rw-r--r--. 1 b1 cali 0 11月  8 16:27 gg</span><br><span class="line">[b1@localhost ~]$ <span class="built_in">umask</span> 422<span class="comment"># 注：临时设置umask为422（临时修改）</span></span><br><span class="line">[b1@localhost ~]$ <span class="built_in">mkdir</span> <span class="built_in">test</span><span class="comment"># 注：新建文件夹的权限是 355（777-umask）</span></span><br><span class="line">[b1@localhost ~]$ <span class="built_in">ls</span> -ld <span class="built_in">test</span>/</span><br><span class="line">d-wxr-xr-x. 2 b1 cali 6 11月  8 16:49 <span class="built_in">test</span>/<span class="comment"># 注：目录权限355 写执行 读执行 读执行</span></span><br><span class="line">============================================================================================</span><br><span class="line">示例：临时设置<span class="built_in">umask</span></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux tmp]<span class="comment"># umask 422# 注：临时更改umask</span></span><br><span class="line">[root@sanchuang-linux tmp]<span class="comment"># touch hh</span></span><br><span class="line">[root@sanchuang-linux tmp]<span class="comment"># ls -ld hh</span></span><br><span class="line">--w-r--r-- 1 root root 0 11月  7 16:02 hh   <span class="comment"># 注：文件 权限是244 写读读</span></span><br><span class="line">============================================================================================</span><br><span class="line">示例：<span class="built_in">umask</span> -S 查看文件目前默认权限是多少</span><br><span class="line">[sanchuang9@sanchuang-linux ~]$ <span class="built_in">umask</span> -S<span class="comment"># 注：查看文件目前默认权限是多少</span></span><br><span class="line">u=rwx,g=rwx,o=rx</span><br><span class="line">============================================================================================</span><br><span class="line">示例：想要修改某个用户的<span class="built_in">umask</span>，永久修改</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#注：在家目录下的.bashrc下添加umask设置永久修改</span></span><br><span class="line"><span class="comment">#注：/etc/profile,/etc/bashrc系统配置 基本上不要更改（不要想着改全局配置）</span></span><br><span class="line">[sanchuang9@sanchuang-linux ~]$ vim /home/sanchuang9/.bashrc</span><br><span class="line"><span class="built_in">umask</span>=002</span><br><span class="line">[sanchuang9@sanchuang-linux ~]$ <span class="built_in">exit</span></span><br><span class="line">注销</span><br><span class="line">[root@sanchuang-linux tmp]<span class="comment"># su - sanchuang9</span></span><br><span class="line">上一次登录：六 11月  7 16:07:40 CST 2020pts/0 上</span><br><span class="line">[sanchuang9@sanchuang-linux ~]$ <span class="built_in">umask</span><span class="comment"># 注：umask变成002了</span></span><br><span class="line">0002</span><br><span class="line">[sanchuang9@sanchuang-linux ~]$ bash<span class="comment"># 注：执行到新bash里面去 umask也是002</span></span><br><span class="line">[sanchuang9@sanchuang-linux ~]$ <span class="built_in">umask</span></span><br><span class="line">0002</span><br></pre></td></tr></table></figure><hr><h2 id="六-练习">六. 练习</h2><h3 id="6-1-新建文件夹-pem，复制-etc-hosts文件到pem目录下">6.1 新建文件夹/pem，复制/etc/hosts文件到pem目录下</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1、新建文件夹/pem，复制/etc/hosts文件到pem目录下</span><br><span class="line">[root@sanchuang-linux pem]<span class="comment"># mkdir /pem</span></span><br><span class="line">[root@sanchuang-linux pem]<span class="comment"># cp /etc/hosts /pem</span></span><br></pre></td></tr></table></figure><h3 id="6-2-修改hosts文件的权限为，属主有读写执行，组有读写执行，其他人没有任何权限">6.2 修改hosts文件的权限为，属主有读写执行，组有读写执行，其他人没有任何权限</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">2、修改hosts文件的权限为，属主有读写执行，组有读写执行，其他人没有任何权限</span><br><span class="line">[root@sanchuang-linux pem]<span class="comment"># chmod 750 /pem/hosts </span></span><br><span class="line">[root@sanchuang-linux pem]<span class="comment"># ls -al /pem/hosts </span></span><br><span class="line">-rwxr-x--- 1 root root 158 11月  7 16:20 /pem/hosts</span><br></pre></td></tr></table></figure><h3 id="6-3-新建-pem2目录，修改权限为任何人都有读写执行的权限">6.3 新建/pem2目录，修改权限为任何人都有读写执行的权限</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">3、新建/pem2目录，修改权限为任何人都有读写执行的权限</span><br><span class="line">[root@sanchuang-linux pem]<span class="comment"># mkdir /pem2</span></span><br><span class="line">[root@sanchuang-linux pem]<span class="comment"># chmod 777 /pem2</span></span><br><span class="line">[root@sanchuang-linux pem]<span class="comment"># chmod 777 /pem2 -R# 注：连带下面所有的子文件</span></span><br></pre></td></tr></table></figure><h3 id="6-4-修改-pem2目录权限为属主有读写执行的权限，其他任何人都没有权限">6.4 修改/pem2目录权限为属主有读写执行的权限，其他任何人都没有权限</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">4、修改/pem2目录权限为属主有读写执行的权限，其他任何人都没有权限</span><br><span class="line">[root@sanchuang-linux pem]<span class="comment"># chmod 700 /pem2 </span></span><br></pre></td></tr></table></figure><h3 id="6-5-修改-pem2任何人都没有任何权限">6.5 修改/pem2任何人都没有任何权限</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">5、修改/pem2任何人都没有任何权限</span><br><span class="line">[root@sanchuang-linux pem]<span class="comment"># chmod 000 /pem2 </span></span><br></pre></td></tr></table></figure><h3 id="6-6-复制-etc-passwd和-etc-shadow文件到-pem目录下，查看复制之后的权限是否一致，如何保持权限一致">6.6 复制/etc/passwd和/etc/shadow文件到/pem目录下，查看复制之后的权限是否一致，如何保持权限一致</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">6、复制/etc/passwd和/etc/shadow文件到/pem目录下，查看复制之后的权限是否一致，如何保持权限一致</span><br><span class="line">[root@sanchuang-linux pem]<span class="comment"># cp /etc/&#123;passwd,shadow&#125; /pem</span></span><br><span class="line">[root@sanchuang-linux pem]<span class="comment"># ls -al /pem</span></span><br><span class="line">--w-r--r--   1 root root 3964 11月  7 16:23 passwd</span><br><span class="line">----------   1 root root 4201 11月  7 16:23 shadow</span><br></pre></td></tr></table></figure><h3 id="6-7-cp-a-保留文件的属性（包括权限、时间、用户、组）">6.7 cp -a 保留文件的属性（包括权限、时间、用户、组）</h3><p><strong><code>cp -a</code> 保留文件的属性（包括权限、时间、用户、组）</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@sanchuang-linux pem]<span class="comment"># cp /home/sanchuang9/.viminfo /tmp/viminfo# 注：cp过来 属主、属组发生改变</span></span><br><span class="line">[root@sanchuang-linux pem]<span class="comment"># ls -al /tmp/viminfo </span></span><br><span class="line">--w------- 1 root root 1622 11月  7 16:30 /tmp/viminfo</span><br><span class="line">[root@sanchuang-linux pem]<span class="comment"># ls -al /tmp/viminfo # 注：cp-a选项 属主、属组、权限、创建时间都没变</span></span><br><span class="line">-rw------- 1 sanchuang9 sanchuang9 1622 11月  7 16:11 /tmp/viminfo</span><br></pre></td></tr></table></figure><hr><h2 id="七-文件或目录的隐藏属性">七. 文件或目录的隐藏属性</h2><p><strong>chattr命令：设置文件的隐藏属性</strong></p><ul><li>格式：<code>chattr  [+-=] [ai] 文件或目录</code># 注：+、-、= 分别表示 增加、去除、设置参数</li></ul><p><strong>常用命令选项</strong></p><ul><li><code>-R</code>：递归修改</li><li><code>-a</code>：可以增加文件内容，但不能修改和删除</li><li><code>-i</code>：锁定保护文件</li></ul><p><strong>lsattr命令：查看文件的隐藏属性</strong></p><ul><li>格式：lsattr [Rda] 文件或目录</li></ul><p><strong>常用命令选项</strong></p><ul><li><code>-R</code>：递归修改</li><li><code>-d</code>：查看目录</li></ul><p>#注：<strong>普通用户设置不了文件的隐藏属性；root用户才能设置</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">示例1：chattr +i hosts 锁定保护文件</span><br><span class="line"><span class="comment"># 注：root用户也不能去修改它</span></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#注：不能更改文件（不能删 不能加 不能移动）</span></span><br><span class="line">[root@sanchuang-linux pem]<span class="comment"># chattr +i hosts# 注：设置锁定保护文件；将它不能更改</span></span><br><span class="line">[root@sanchuang-linux pem]<span class="comment"># mv hosts&#123;,.bak&#125;# 注：不能移动（即使是root用户）</span></span><br><span class="line"><span class="built_in">mv</span>: 无法将<span class="string">&#x27;hosts&#x27;</span> 移动至<span class="string">&#x27;hosts.bak&#x27;</span>: 不允许的操作</span><br><span class="line">[root@sanchuang-linux pem]<span class="comment"># ls -al hosts # 注：ls -al命令 无法查看隐藏属性</span></span><br><span class="line">-rwxr-x--- 1 root root 158 11月  7 16:20 hosts</span><br><span class="line">[root@sanchuang-linux pem]<span class="comment"># lsattr hosts# 注：lsattr 才能 查看文件隐藏属性 i</span></span><br><span class="line">----i--------------- hosts<span class="comment"># 注：多了1个i属性</span></span><br><span class="line">[root@sanchuang-linux pem]<span class="comment"># chattr -i hosts# 注：去除属性 去除锁定</span></span><br><span class="line">[root@sanchuang-linux pem]<span class="comment"># lsattr hosts</span></span><br><span class="line">-------------------- hosts<span class="comment"># 注：i隐藏属性没了</span></span><br><span class="line"><span class="comment">#注：不能删，加，移动（root用户也不能）</span></span><br><span class="line">============================================================================================</span><br><span class="line">示例2：chattr +a hosts 可以增加文件内容，但不能修改和删除</span><br><span class="line"><span class="comment"># 注：可以使用重定向去增加文件内容，但不能去修改和删除</span></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux pem]<span class="comment"># chattr +a hosts# 注：可以增加文件内容，但是无法修改和删除</span></span><br><span class="line">[root@sanchuang-linux pem]<span class="comment"># lsattr hosts</span></span><br><span class="line">-----a-------------- hosts<span class="comment"># 注：多了a属性</span></span><br><span class="line">[root@sanchuang-linux pem]<span class="comment"># vim hosts # 注：不可以修改</span></span><br><span class="line">[root@sanchuang-linux pem]<span class="comment"># echo &quot;aaaa&quot; &gt;&gt; hosts # 注：可以追加</span></span><br><span class="line">[root@sanchuang-linux pem]<span class="comment"># cat hosts </span></span><br><span class="line">127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4</span><br><span class="line">aaaa</span><br><span class="line">[root@sanchuang-linux pem]<span class="comment"># rm -rf hosts # 注：不可以删除</span></span><br><span class="line"><span class="built_in">rm</span>: 无法删除<span class="string">&#x27;hosts&#x27;</span>: 不允许的操作</span><br><span class="line"><span class="comment">#注：不能修改，只能追加，不能删除</span></span><br><span class="line"><span class="comment">#注：有时候无论什么情况都不想让它更改 +a属性</span></span><br><span class="line">============================================================================================</span><br><span class="line">示例3：chattr +i /etc/passwd</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux pem]<span class="comment"># chattr +i /etc/passwd# 注：设置以后就创建不了用户</span></span><br><span class="line">[root@sanchuang-linux pem]<span class="comment"># lsattr /etc/passwd# 注：查看隐藏属性</span></span><br><span class="line">----i--------------- /etc/passwd<span class="comment"># 注：隐藏属性i</span></span><br><span class="line">[root@sanchuang-linux pem]<span class="comment"># useradd sanchuang21# 注：无论什么用户，设置了隐藏属性，基本没戏了</span></span><br><span class="line">useradd：无法打开 /etc/passwd</span><br><span class="line">[root@sanchuang-linux pem]<span class="comment"># chattr -i /etc/passwd# 注：解锁</span></span><br><span class="line">============================================================================================</span><br><span class="line">示例4：普通用户设置不了文件的隐藏属性</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@localhost ~]<span class="comment"># su - sanchuang</span></span><br><span class="line">[sanchuang@localhost ~]$ <span class="built_in">touch</span> aa</span><br><span class="line">[sanchuang@localhost ~]$ chattr +i aa<span class="comment"># 注：普通用户设置不了文件的隐藏属性</span></span><br><span class="line">chattr: 不允许的操作 <span class="keyword">while</span> setting flags on aa</span><br></pre></td></tr></table></figure><hr><h2 id="八-文件的正常权限">八. 文件的正常权限</h2><blockquote><p><img src="https://image.cpen.top/image/202208170416487.png" alt="image-20220817041614445"></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#注：正常文件的权限是读写执行</span></span><br><span class="line">[root@sanchuang-linux pem]<span class="comment"># ls -ld /tmp</span></span><br><span class="line">drwxrwxrwt. 12 root root 4096 11月  7 16:30 /tmp<span class="comment"># 注：t 文件的特殊权限</span></span><br></pre></td></tr></table></figure><hr><h2 id="九-文件的特别权限">九. 文件的特别权限</h2><p>#注：<strong>set位权限设置</strong></p><blockquote><p><img src="https://image.cpen.top/image/202208170417672.png" alt="image-20220817041733623"></p></blockquote><p><strong>SET位权限</strong></p><p><strong>主要用途：</strong></p><ul><li>为<strong>可执行</strong>（有 x 权限的）文件设置，权限字符为“s”# 注：<strong>以前的x位变成s位</strong></li><li>其他用户执行该文件时，将拥有属主或属组用户的权限</li></ul><p><strong>SET位权限类型</strong>：</p><ul><li>SUID：表示对属主用户增加SET位权限</li><li>SGID：表示对属组内的用户增加SET位权限</li></ul><p># 注：用在可执行文件<br># 注：suid  sgid  对应文件而言</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">示例：/bin/passwd</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@localhost ~]<span class="comment"># which passwd</span></span><br><span class="line">/bin/passwd</span><br><span class="line">[root@localhost ~]<span class="comment"># ls -ld /bin/passwd </span></span><br><span class="line">-rwsr-xr-x. 1 root root 27856 4月   1 2020 /bin/passwd</span><br><span class="line"><span class="comment">#注：普通用户以root用户的身份，间接更新了shadow文件中自己的密码</span></span><br><span class="line">[root@localhost ~]<span class="comment"># su - sanchuang</span></span><br><span class="line">[sanchuang@localhost ~]$ passwd sanchuang<span class="comment"># 注：不能更改密码  其他权限没到位</span></span><br><span class="line">passwd：只有根用户才能指定用户名。</span><br><span class="line"></span><br><span class="line"><span class="comment">#注：s位 这个权限基本不会颁布，必须在有可执行文件下才能生效</span></span><br><span class="line"><span class="comment">#注：这个权限设置 所有人全部给，不能精确到某个用户</span></span><br><span class="line"></span><br><span class="line">示例：SET位权限设置</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux pem]<span class="comment"># ls -ld /pem</span></span><br><span class="line">d-wxr-xr-x 2 root root 47 11月  7 16:42 /pem<span class="comment"># 注：只有root用户有写的权限</span></span><br><span class="line"><span class="comment">#注：让/pem有普通用户创建、写入的权限？</span></span><br><span class="line">1.设置/pem的权限为777</span><br><span class="line">2.设置<span class="built_in">mkdir</span> SUID的权限</span><br><span class="line">[root@sanchuang-linux sbin]<span class="comment"># which mkdir</span></span><br><span class="line">/usr/bin/mkdir</span><br><span class="line">[root@sanchuang-linux sbin]<span class="comment"># ls -ld /usr/bin/mkdir </span></span><br><span class="line">-rwxr-xr-x. 1 root root 195192 4月  10 2020 /usr/bin/mkdir<span class="comment"># 注：没有设置s属性</span></span><br><span class="line">[root@sanchuang-linux sbin]<span class="comment"># chmod u+s /bin/mkdir # 注：让普通用户执行mkdir时以root（属主）权限去运行</span></span><br><span class="line">[root@sanchuang-linux sbin]<span class="comment"># ls -ld /usr/bin/mkdir # 注：变成s位了</span></span><br><span class="line">-rwsr-xr-x. 1 root root 195192 4月  10 2020 /usr/bin/mkdir</span><br><span class="line">[root@sanchuang-linux sbin]<span class="comment"># su - sanchuang9</span></span><br><span class="line">上一次登录：六 11月  7 16:09:48 CST 2020pts/0 上</span><br><span class="line">[sanchuang9@sanchuang-linux ~]$ <span class="built_in">cd</span> /pem</span><br><span class="line">[sanchuang9@sanchuang-linux pem]$ <span class="built_in">ls</span></span><br><span class="line">hosts  passwd  shadow</span><br><span class="line">[sanchuang9@sanchuang-linux pem]$ <span class="built_in">mkdir</span> aa <span class="comment"># 注：普通用户有写的权限了</span></span><br><span class="line">[sanchuang9@sanchuang-linux pem]$ <span class="built_in">ls</span> -ld /pem</span><br><span class="line">d-wxr-xr-x 3 root root 57 11月  7 16:59 /pem</span><br><span class="line">[sanchuang9@sanchuang-linux pem]$ <span class="built_in">touch</span> <span class="built_in">dd</span><span class="comment"># 注：touch没有这个权限</span></span><br><span class="line"><span class="built_in">touch</span>: 无法创建 <span class="string">&#x27;dd&#x27;</span>: 权限不够</span><br><span class="line">[sanchuang9@sanchuang-linux pem]$ <span class="built_in">exit</span></span><br><span class="line">注销</span><br><span class="line">[root@sanchuang-linux sbin]<span class="comment"># chmod u-s /bin/mkdir</span></span><br><span class="line">[root@sanchuang-linux sbin]<span class="comment"># ls -ld /bin/mkdir </span></span><br><span class="line">-rwxr-xr-x. 1 root root 195192 4月  10 2020 /bin/mkdir</span><br><span class="line"><span class="comment"># 注：s位基本不会给</span></span><br><span class="line"><span class="comment"># 注：s位不要轻易的颁布它，会对用户进行影响</span></span><br></pre></td></tr></table></figure><hr><h2 id="十-粘滞位权限（Sticky）">十. 粘滞位权限（Sticky）</h2><p><strong>粘滞位权限（Sticky）</strong></p><p><strong>主要用途：</strong></p><ul><li>为公共目录（例如，权限为777的）设置，权限字符为“<code>t</code>”# 注：<strong>t 粘滞位标记字符</strong></li><li>用户不能删除该目录中其他用户的文件</li></ul><p># 注：一般作用于文件夹<br># 注：粘滞位对于文件夹而言</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">示例1</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux sbin]<span class="comment"># ls -ld /tmp</span></span><br><span class="line">drwxrwxrwt. 12 root root 4096 11月  7 16:30 /tmp<span class="comment"># 注：/tmp目录 任何用户 都有读写执行权限</span></span><br><span class="line"><span class="comment">#注：因为粘滞位权限，用户在/tmp目录下只能创建自己的，删除自己的</span></span><br><span class="line"><span class="comment">#注：一般作用于文件夹</span></span><br><span class="line"><span class="comment">#注：sanchuang10用户不能删除sanchuang用户创建的文件</span></span><br><span class="line">==============================================================================================================</span><br><span class="line">示例2：<span class="built_in">chmod</span> 777 /pem 普通用户可以操作/pem这一层目录下的文件或者文件夹及子文件</span><br><span class="line"><span class="comment"># 注：777权限，不同用户可以相互删除文件</span></span><br><span class="line"><span class="comment"># 注：设置粘滞位后，只能删除自己创建的文件</span></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># chmod 777 /pem# 注：把/pem文件夹权限改为777</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># ls -ld /pem# 注：所有用户都有对/pem读写执行的权限 包括创建、删除</span></span><br><span class="line">drwxrwxrwx 3 root root 74 11月  7 17:10 /pem</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># su - sanchuang9# 注：普通用户有创建的权限</span></span><br><span class="line">上一次登录：六 11月  7 17:07:17 CST 2020pts/2 上</span><br><span class="line">[sanchuang9@sanchuang-linux ~]$ <span class="built_in">touch</span> /pem/sanchuang9<span class="comment"># 注：普通用户有创建的权限</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># su - sanchuang</span></span><br><span class="line">[sanchuang@sanchuang-linux ~]$ <span class="built_in">rm</span> -rf /pem/sanchuang9<span class="comment"># 注：普通用户有删除的权限</span></span><br><span class="line"><span class="comment">#注：用户可以删除其他用户创建的文件</span></span><br><span class="line">==============================================================================================================</span><br><span class="line">示例3：粘滞位 t</span><br><span class="line"><span class="comment"># 注：设置粘滞位后，只能删除自己创建的文件</span></span><br><span class="line">[sanchuang9@sanchuang-linux tmp]$ <span class="built_in">ls</span> -ld /tmp</span><br><span class="line">drwxrwxrwt. 13 root root 4096 11月  7 17:07 /tmp<span class="comment"># 注：/tmp目录设置了1个粘滞位</span></span><br><span class="line">[sanchuang9@sanchuang-linux ~]$ <span class="built_in">touch</span> /tmp/sanchuang9</span><br><span class="line">[sanchuang9@sanchuang-linux ~]$ <span class="built_in">exit</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># su - sanchuang</span></span><br><span class="line">上一次登录：日 11月  8 19:05:55 CST 2020pts/3 上</span><br><span class="line">[sanchuang@sanchuang-linux ~]$ <span class="built_in">rm</span> -rf /tmp/sanchuang9<span class="comment"># 注：因为设置了1个粘滞位</span></span><br><span class="line"><span class="built_in">rm</span>: 无法删除<span class="string">&#x27;/tmp/sanchuang9&#x27;</span>: 不允许的操作<span class="comment"># 注：用户只能在/tmp目录下创建 删除自己的</span></span><br><span class="line"><span class="comment">#注：粘滞位的作用</span></span><br><span class="line"><span class="comment">#注：·为公共目录（例如，权限为777的）设置，权限字符为“t”</span></span><br><span class="line"><span class="comment">#注：·用户不能删除该目录中其他用户的文件</span></span><br><span class="line"><span class="comment">#注：一般作用于文件夹</span></span><br></pre></td></tr></table></figure><hr><h2 id="十一-设置SET位、粘滞位权限">十一. 设置SET位、粘滞位权限</h2><p><strong>设置SET位、粘滞位权限</strong></p><p><strong>使用权限字符</strong></p><ul><li><code>chmod  ug±s  可执行文件...</code># 注：设置set位</li><li><code>chmod  o±t   目录名...</code>     # 注：设置粘滞位</li></ul><p><strong>使用权限数字</strong></p><ul><li><code>chmod  mnnn   可执行文件...</code></li><li><strong>m为4时，对应SUID，2对应SGID，1对应粘滞位，可叠加</strong># 注：m为4 为2 set位</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">示例</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># ls -ld /tmp</span></span><br><span class="line">drwxrwxrwt. 13 root root 4096 11月  7 17:07 /tmp<span class="comment"># 注：/tmp目录设置了粘滞位，权限为1777</span></span><br><span class="line"><span class="comment">#注：/tmp目录设置了粘滞位，第1位是1</span></span><br><span class="line">============================================================================================</span><br><span class="line">示例：设置粘滞位</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># chmod 1777 /pem</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># ls -ld /pem</span></span><br><span class="line">drwxrwxrwt 3 root root 74 11月  7 17:10 /pem<span class="comment"># 注：粘滞位 t 之前 x 的位置</span></span><br><span class="line"><span class="comment">#注：普通情况下不需要使用粘滞位、set位的时候，用3个数字就可以了</span></span><br><span class="line">-----------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># ls -ld /bin/mkdir </span></span><br><span class="line">-rwxr-xr-x. 1 root root 195192 4月  10 2020 /bin/mkdir</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># chmod 4755 /bin/mkdir# 注：设置为SET位SUID权限</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># ls -ld /bin/mkdir </span></span><br><span class="line">-rwsr-xr-x. 1 root root 195192 4月  10 2020 /bin/mkdir</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># chmod 755 /bin/mkdir# 注：改回来</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># ls -ld /bin/mkdir </span></span><br><span class="line">-rwxr-xr-x. 1 root root 195192 4月  10 2020 /bin/mkdir</span><br></pre></td></tr></table></figure><hr>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> 权限 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>16_Linux基础-文件&amp;目录权限及归属</title>
      <link href="/blog/posts/5637.html"/>
      <url>/blog/posts/5637.html</url>
      
        <content type="html"><![CDATA[<p>摘要：博客迁移 <a href="https://blog.csdn.net/cpen_web"><code>https://blog.csdn.net/cpen_web</code></a> → 本站<span id="more"></span></p><h1 id="16-Linux基础-文件-目录权限及归属">16_Linux基础-文件&amp;目录权限及归属</h1><p><a href="https://blog.csdn.net/cpen_web">博客🔗：https://blog.csdn.net/cpen_web</a></p><hr><h2 id="一-文件-目录的权限">一. 文件/目录的权限</h2><p><strong>文件/目录的权限</strong></p><p><strong>访问权限</strong></p><ul><li><code>可读(read)</code>：允许查看文件内容、显示目录列表r</li><li><code>可写(write)</code>：允许修改文件内容，允许在目录中新建、移动、删除文件或子目录w</li><li><code>可执行(execute)</code>：允许运行程序、切换目录x</li></ul><p><strong>归属（所有权）</strong></p><ul><li><code>文件拥有者(owner)</code>：拥有该文件或目录的<strong>用户帐号</strong># 注：<strong>属主</strong></li><li><code>属组(group)</code>：拥有该文件或目录的<strong>组帐号</strong>        # 注：<strong>属组</strong></li><li><code>其它人(others)</code>：除了属主和属组的<strong>其他人</strong>       # 注：<strong>其他</strong></li></ul><p>#注：区分是对于文件而言还是对于目录而言</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> -al 查看当前目录下面文件或者文件夹的详细信息，包括文件的权限</span><br><span class="line"><span class="built_in">ls</span> -ld 查看当前目录</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">示例1：查看文件权限 <span class="built_in">ls</span> -al</span><br><span class="line"><span class="comment"># 注：第三列属主 第四列属组</span></span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># ls -al#注：查看文件权限</span></span><br><span class="line">总用量 668</span><br><span class="line">-rw-r--r--.  1 root root    211 9月  18 10:31 <span class="string">&#x27;!&#x27;</span></span><br><span class="line">dr-xr-x---. 21 root root  12288 11月  6 15:16  .</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># ls -al zuoye.sh # 注：查看单个文件权限</span></span><br><span class="line">-rw-r--r--. 1 root root 1212 10月 29 20:20 zuoye.sh</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># ls -al /home# 注：查看/home目录下所有文件的权限</span></span><br><span class="line">总用量 18348</span><br><span class="line">drwxr-xr-x. 43 root         root            4096 11月  6 15:36 .</span><br><span class="line">dr-xr-xr-x. 38 root         root            4096 11月  5 15:12 ..</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># ls -al *.sh# 注：查看文件权限</span></span><br><span class="line">-rw-r--r--. 1 root root    0 9月  25 09:35 backup_log.sh</span><br><span class="line">-rw-r--r--. 1 root root   41 10月 28 20:27 file_test.sh</span><br><span class="line"></span><br><span class="line">示例2：查看目录权限 <span class="built_in">ls</span> -ld /home</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># ls -ld /home# 注：查看/home 目录的权限</span></span><br><span class="line">drwxr-xr-x. 43 root root 4096 11月  6 15:36 /home</span><br></pre></td></tr></table></figure><hr><h2 id="二-文件-目录的权限">二. 文件/目录的权限</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># ls -ld first.py </span></span><br><span class="line">-rw-r--r--. 1 root root 1097 10月 13 10:20 first.py</span><br><span class="line">文件类型 访问权限  所有者  属组</span><br></pre></td></tr></table></figure><blockquote><p><img src="https://image.cpen.top/image/202208162047554.png" alt="image-20220816204743513"></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">示例：drwxr-xr-x</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">第一列：表示文件类型与权限</span><br><span class="line">第一个字符</span><br><span class="line">        -普通文件 file</span><br><span class="line">        d表示目录</span><br><span class="line">        s表示socket文件<span class="comment"># 注：socket（套接字） 进程之间通信的一种方式。</span></span><br><span class="line">        p管道文件 pipe</span><br><span class="line">        c字符设备文件<span class="built_in">tty</span></span><br><span class="line">        b块设备文件 磁盘（disk）<span class="comment"># 注：跟硬件相关的块设备文件一般放在 /dev下面</span></span><br><span class="line">        l链接文件<span class="comment"># 注：/usr/bin/目录下 有大量 链接文件</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">#权限 r 可读  w 可写  x 可执行</span></span><br><span class="line">  ·第2-第4个字符</span><br><span class="line">    表示属主的权限</span><br><span class="line">  ·第5-第7个字符</span><br><span class="line">    表示属组的权限</span><br><span class="line">  ·后三个</span><br><span class="line">  表示其他人的权限</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">敲的所有命令都是在PATH环境变量路径下查找</span><br><span class="line"></span><br><span class="line">创建链接文件</span><br><span class="line"><span class="comment"># 注：ln -s 源文件 目标文件symbolic adj. 象征的；符号的；使用符号的</span></span><br><span class="line">[root@sanchuang-linux bin]<span class="comment"># ln -s python3.6 python# 注：-s创建软链接</span></span><br><span class="line">[root@sanchuang-linux bin]<span class="comment"># ln -s python3.6 /root/python# 注：可以在绝对路径下创建链接文件</span></span><br><span class="line"><span class="comment">#注：链接文件/root/python 放在了/root目录下</span></span><br><span class="line"><span class="built_in">which</span>查看命令的绝对路径</span><br><span class="line">[root@sanchuang-linux bin]<span class="comment"># which mkdir</span></span><br><span class="line">/usr/bin/mkdir</span><br><span class="line">[root@sanchuang-linux bin]<span class="comment"># mv /usr/bin/mkdir /usr/bin/mkdirbak# 注：修改名字后 命令找不到了</span></span><br><span class="line">[root@sanchuang-linux bin]<span class="comment"># mkdir</span></span><br><span class="line">-bash: <span class="built_in">mkdir</span>: 未找到命令</span><br><span class="line">[root@sanchuang-linux bin]<span class="comment"># mkdirbak /tmp/mkdir</span></span><br><span class="line">[root@sanchuang-linux bin]<span class="comment"># mv /usr/bin/mkdirbak /usr/bin/mkdir# 注：改回来</span></span><br><span class="line"></span><br><span class="line">/usr/bin/下有大量链接文件</span><br><span class="line">[root@sanchuang-linux tmp]<span class="comment"># cd /usr/bin/# 注：/usr/bin/下有大量链接文件</span></span><br><span class="line">[root@sanchuang-linux bin]<span class="comment"># ls -al python2# 注：链接文件</span></span><br><span class="line">lrwxrwxrwx. 1 root root 9 6月   5 11:38 python2 -&gt; python2.7</span><br><span class="line">[root@sanchuang-linux bin]<span class="comment"># ls -al python3# 注：链接文件</span></span><br><span class="line">lrwxrwxrwx. 1 root root 25 9月  18 15:47 python3 -&gt; /etc/alternatives/python3</span><br></pre></td></tr></table></figure><hr><h2 id="三-socket（套接字）">三. socket（套接字）</h2><blockquote><p>#注：socket（套接字） 进程之间通信的一种方式，通常用于不同主机不同进程之间的通信方式（网络编程）</p><p>ftp有vsftpd的服务，vsftpd服务端服务起来了开启21号端口。ftp客户端要想连接这个服务，ftp客户端需要开启一个随机端口去连接21号端口，进行网络传输。通过网络指定某种特定协议，进行网络连接。</p><p>开启一个vsftpd，会产生一个socket文件</p><p>开放了端口基本上都会有一个socket文件</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost mail]<span class="comment"># cd /data/mysql</span></span><br><span class="line">[root@localhost mysql]<span class="comment"># ls -al</span></span><br><span class="line">srwxrwxrwx  1 mysql mysql        0 10月  7 12:04 mysql.sock<span class="comment"># 注：s socket文件 （粉色）</span></span><br></pre></td></tr></table></figure><hr><h2 id="四-Linux内核五大子系统">四. Linux内核五大子系统</h2><p><strong>Linux内核五大子系统：</strong></p><ul><li>1、文件系统</li><li>2、内存管理</li><li>3、进程通信</li><li>4、进程调度</li><li>5、网络接口</li></ul><hr><h2 id="五-进程">五. 进程</h2><p><strong>进程是系统进行资源分配的基本单位，不同进程之间资源是互相隔离的</strong></p><p><strong>进程之间通信（常见的5种）：</strong></p><ol><li>管道</li><li>信号（kill -9）</li><li>共享内存</li><li>socket套接字</li><li>消息队列</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">示例1：管道<span class="comment">#注：管道是进程之间通信的一种方式</span></span><br><span class="line">示例</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cat /etc/passwd |grep sanchuang# 注：通过管道把前进程的输出赋给后进程的输入</span></span><br><span class="line">sanchuang:x:1005:1005::/home/sanchuang:/bin/bash</span><br><span class="line"><span class="comment">#注：适用于相同主机不同进程</span></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">示例2：信号</span><br><span class="line">示例：<span class="built_in">kill</span> -9 pid</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># kill -l</span></span><br><span class="line"> 1) SIGHUP 2) SIGINT 3) SIGQUIT 4) SIGILL 5) SIGTRAP</span><br><span class="line"> 6) SIGABRT 7) SIGBUS 8) SIGFPE 9) SIGKILL10) SIGUSR1………………</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># ps -ef |grep nginx</span></span><br><span class="line">root        5868    5691  0 16:29 pts/0    00:00:00 grep --color=auto nginx</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># kill -9 2868# 注：发送9这个信号给1209进程</span></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">示例3：共享内存</span><br><span class="line"><span class="comment">#注：A、B之间创建了一片新的内存空间，可以一起去拿</span></span><br><span class="line"><span class="comment">#注：适用于相同主机不同进程</span></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">示例4：socket套接字</span><br><span class="line"><span class="comment">#注：用于不同主机之间不同进程  网络通信</span></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">示例5：消息队列</span><br><span class="line"><span class="comment">#注：相当于排队的 1,2,3,4,5,6</span></span><br><span class="line"><span class="comment">#注：AB共享的内存空间里，A产生的B去获取。A产生1，B取出来，1从A里出去</span></span><br></pre></td></tr></table></figure><hr><h2 id="六-根目录下">六. /根目录下</h2><p><strong>/etc存放配置文件</strong><br><strong>/dev存放设备文件</strong># 注：<strong>硬件相关的  磁盘、网卡、socket</strong><br>/root  # 注：root用户家目录<br>/home   # 注：存放普通用户的家目录文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@sanchuang-linux ~]<span class="comment"># cd /dev</span></span><br><span class="line">[root@sanchuang-linux dev]<span class="comment"># ls -al</span></span><br><span class="line">crw-rw-rw-   1 root <span class="built_in">tty</span>       5,   0 11月  6 11:32 <span class="built_in">tty</span><span class="comment"># 注：字符设备文件tty</span></span><br><span class="line">crw--w----   1 root <span class="built_in">tty</span>       4,   0 11月  5 15:12 tty0</span><br><span class="line">crw--w----   1 root <span class="built_in">tty</span>       4,   1 11月  6 14:28 tty1</span><br><span class="line">brw-rw----   1 root disk      8,   0 11月  5 15:12 sda<span class="comment"># 注：块设备文件磁盘</span></span><br></pre></td></tr></table></figure><h2 id="七-可执行权限">七. 可执行权限</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">第一列第二到第十个字符</span><br><span class="line">  #权限 r 可取  w 可写  x 可执行</span><br><span class="line">  第2-第4个字符</span><br><span class="line">    表示属主的权限</span><br><span class="line">  第5-第7个字符</span><br><span class="line">    表示属组的权限</span><br><span class="line">  后三个</span><br><span class="line">  表示其他人的权限</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">示例</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># ls -al men_test.sh </span></span><br><span class="line">-rw-r--r--. 1 root root 0 10月 30 16:26 men_test.sh</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># bash men_test.sh # 注：使用bash解释器去执行（生成一个新的bash）</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># sh men_test.sh # 注：使用sh解释器去执行（生成一个新的sh）</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># . men_test.sh# 注：使用当前bash去执行，会继承当前环境变量</span></span><br><span class="line"><span class="comment">#注：相当于当前bash，当前环境</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># ./men_test.sh # 注：权限不够，本身没有可执行权限</span></span><br><span class="line">-bash: ./men_test.sh: 权限不够 <span class="comment"># 注：有可执行权限的文件 可以直接./men_test.sh执行</span></span><br></pre></td></tr></table></figure><hr><h2 id="八-Shell文件执行方式">八. Shell文件执行方式</h2><blockquote><p><strong>Shell文件执行方式（3种）</strong><br>#注：<strong>shell里面可执行文件后缀没有要求 不一定非要.sh结尾</strong></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[root@sanchuang-linux ~]<span class="comment"># vim test_aa.sh</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;testaa...&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$a</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$b</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># a=1</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># b=2</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># . test_aa.sh # 注：使用当前bash去执行test_aa.sh，会继承当前 shell 的 环境变量</span></span><br><span class="line">testaa...<span class="comment"># 注：用.会继承当前bash里的一切变量</span></span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># bash test_aa.sh # 注：创建一个新的bash环境去执行命令</span></span><br><span class="line">testaa...<span class="comment"># 注：新bash环境中没有定义a、b变量</span></span><br><span class="line"><span class="comment"># 注：没有输出父bash的a、b</span></span><br><span class="line"><span class="comment"># 注：没有获取到a、b</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># sh test_aa.sh # 注：创建一个新的sh环境去执行命令</span></span><br><span class="line">testaa...</span><br><span class="line"><span class="comment"># 注：没有输出</span></span><br><span class="line"></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># ./test_aa.sh # 注：执行文件本身，看文件本身有没有执行权限</span></span><br><span class="line">-bash: ./test_aa.sh: 权限不够 <span class="comment"># 注：直接执行当前目录下的这个文件 需要可执行权限</span></span><br><span class="line"><span class="comment"># 注：其他的方式不一定需要可执行权限</span></span><br><span class="line"></span><br><span class="line">总结</span><br><span class="line">. test_aa.sh不需要可执行权限当前bash进程执行</span><br><span class="line">bash test_aa.sh不需要可执行权限新的bash进程运行</span><br><span class="line">sh test_aa.sh不需要可执行权限新的bash进程运行</span><br><span class="line">./test_aa.sh需要可执行权限新的bash进程运行</span><br></pre></td></tr></table></figure><hr><h2 id="九-chmod命令">九. chmod命令</h2><p><strong>chmod命令</strong># 注：<strong>修改文件的访问权限</strong></p><p><strong>格式1</strong>：<code>chmod [ugoa] [+-=] [rwx] 文件或目录...</code></p><ul><li><p><strong>u、g、o、a 分别表示</strong><br>u属主、g属组、o其他用户、a所有用户</p></li><li><p><strong>+、-、= 分别表示</strong><br>+增加、-去除、=设置权限</p></li><li><p><strong>rwx</strong><br>对应的权限字符</p></li></ul><p><strong>常用命令选项</strong></p><ul><li><code>-R</code>：递归修改指定目录下所有文件、子目录的权限</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">示例</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># chmod u+x men_test.sh # 注：对属主+可执行权限</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># ls -al men_test.sh </span></span><br><span class="line">-rwxr--r--. 1 root root 0 10月 30 16:26 men_test.sh<span class="comment"># 注：可执行文件 都是绿的</span></span><br><span class="line"><span class="comment">#注：可执行文件都是绿的</span></span><br><span class="line"><span class="comment">#注：socket文件都是粉的</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># ./men_test.sh # 注：可以直接执行了</span></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux lianxi]<span class="comment"># chmod a-x sc -R# 注：-R递归，把该目录和该目录下的所有子文件都去除可执行权限</span></span><br><span class="line">[root@sanchuang-linux lianxi]<span class="comment"># chmod a+x sc -R# 注：所有用户增加可执行权限</span></span><br><span class="line">============================================================================================</span><br><span class="line"><span class="comment">#注：根目录只有root用户能用</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># ls -ld /</span></span><br><span class="line">dr-xr-xr-x. 38 root root 4096 11月  5 15:12 /</span><br><span class="line">============================================================================================</span><br><span class="line">[root@mysql-binary ~]<span class="comment"># chmod u+x group_member.sh </span></span><br><span class="line">[root@mysql-binary ~]<span class="comment"># ./group_member.sh sanchuang5# 注：添加了可执行权限后可以 ./运行</span></span><br><span class="line">sanchuang5,sanchuang11,sanchuang13,sanchuang10,sanchuang12</span><br></pre></td></tr></table></figure><hr><h2 id="十-chmod命令">十. chmod命令</h2><p><strong>chmod命令</strong># 注：<strong>修改文件的访问权限</strong></p><p><strong>格式2</strong>：<code>chmod nnn 文件或目录...</code>          # 注：nnn表示3位八进制数</p><p>权限项      读写执行读写执行读写执行</p><p>字符表示  rwx          rwx        rwx</p><p>数字表示  421          421        421</p><p>权限分配  文件所有者     文件所属组   其他用户</p><blockquote><p><img src="https://image.cpen.top/image/202208162102394.png" alt="image-20220816210259355"></p></blockquote><p><strong>常用命令选项</strong></p><ul><li><code>-R</code>：递归修改指定目录下所有文件、子目录的权限</li></ul><p>#注：root用户基本上无论有没有权限，它都可以使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">示例</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># chmod 777 sc # 注：都有读写执行的权限</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># chmod 700 sc # 注：属主有读写执行的权限</span></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux home]<span class="comment"># ls -ld sanchuang# 注：查看目录权限 ls -ld</span></span><br><span class="line">drwx------. 4 sanchuang sanchuang 122 11月  6 17:10 sanchuang</span><br><span class="line">[root@sanchuang-linux home]<span class="comment"># chmod 777 /home/sanchuang# 注：都有读写执行的权限</span></span><br><span class="line">[root@sanchuang-linux home]<span class="comment"># ls -ld sanchuang</span></span><br><span class="line">drwxrwxrwx. 4 sanchuang sanchuang 122 11月  6 17:10 sanchuang</span><br><span class="line">[root@sanchuang-linux home]<span class="comment"># chmod 777 /home/sanchuang -R# 注：-R：递归修改指定目录下所有文件、子目录的权限</span></span><br><span class="line">[root@sanchuang-linux home]<span class="comment"># ls -ld sanchuang</span></span><br><span class="line">drwxrwxrwx. 4 sanchuang sanchuang 122 11月  6 17:10 sanchuang</span><br><span class="line"><span class="comment">#注：用户的家目录下（如/home/sanchuang）授予所有对象读写执行权限，会造成普通用户sanchuang无法进行远程登录</span></span><br><span class="line"></span><br><span class="line">示例：root用户基本上无论有没有权限，它都可以使用</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># ls -ld /etc/shadow</span></span><br><span class="line">---------- 1 root root 4201 11月  7 12:04 /etc/shadow</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># vim /etc/shadow</span></span><br></pre></td></tr></table></figure><hr><h2 id="十一-一般情况下普通用户只能在家目录下或者-tmp目录下创建文件或者文件夹">十一. 一般情况下普通用户只能在家目录下或者/tmp目录下创建文件或者文件夹</h2><p><strong>一般情况下普通用户只能在家目录下或者/tmp目录下创建文件或者文件夹</strong></p><p>#注：/tmp目录是一个临时目录，一般存放临时性的东西（如：程序运行中需要记录的一些东西，程序结束后把/tmp目录下的东西删掉）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@sanchuang-linux ~]<span class="comment"># su - sanchuang</span></span><br><span class="line">上一次登录：五 11月  6 17:09:41 CST 2020pts/2 上</span><br><span class="line">[sanchuang@sanchuang-linux ~]$ <span class="built_in">ls</span> -ld /</span><br><span class="line">dr-xr-xr-x. 38 root root 4096 11月  5 15:12 /</span><br><span class="line">[sanchuang@sanchuang-linux ~]$ <span class="built_in">ls</span> -ld /etc</span><br><span class="line">drwxr-xr-x. 90 root root 8192 11月  7 15:00 /etc</span><br><span class="line">[sanchuang@sanchuang-linux ~]$ <span class="built_in">ls</span> -ld ./<span class="comment"># 注：家目录下 创建文件或者文件夹</span></span><br><span class="line">drwxrwxrwx. 4 sanchuang sanchuang 122 11月  6 17:10 ./</span><br><span class="line">[sanchuang@sanchuang-linux ~]$ <span class="built_in">ls</span> -ld /tmp<span class="comment"># 注：/tmp目录下 创建文件或者文件夹</span></span><br><span class="line">drwxrwxrwt. 12 root root 264 11月  7 10:36 /tmp</span><br><span class="line"></span><br><span class="line"><span class="comment">#注：chmod  自己是属主的时候，才可以修改权限</span></span><br></pre></td></tr></table></figure><hr><h2 id="十二-chmod">十二. chmod</h2><p><strong>chmod</strong># 注：<strong>修改文件的归属权限</strong></p><p><strong>chmod使用，必须是文件的属主，才能改动文件的读写执行权限（root除外）</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># su - sanchuang11# 注：加 - 会自动到家目录下</span></span><br><span class="line">上一次登录：六 11月  7 15:10:51 CST 2020pts/0 上</span><br><span class="line">[sanchuang11@sanchuang-linux ~]$ <span class="built_in">exit</span></span><br><span class="line">注销</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># su sanchuang11# 注：不加 - 会在当前路径下</span></span><br><span class="line">[sanchuang11@sanchuang-linux chenpeng]$ </span><br></pre></td></tr></table></figure><hr>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> 权限 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>15_Linux基础-用户与组2</title>
      <link href="/blog/posts/43746.html"/>
      <url>/blog/posts/43746.html</url>
      
        <content type="html"><![CDATA[<p>摘要：博客迁移 <a href="https://blog.csdn.net/cpen_web"><code>https://blog.csdn.net/cpen_web</code></a> → 本站<span id="more"></span></p><h1 id="15-Linux基础-用户与组2">15_Linux基础-用户与组2</h1><p><a href="https://blog.csdn.net/cpen_web">博客🔗：https://blog.csdn.net/cpen_web</a></p><hr><h2 id="一-练习">一. 练习</h2><h3 id="1-1-如何知道一个用户是否在linux系统里存在？">1.1 如何知道一个用户是否在linux系统里存在？</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1、如何知道一个用户是否在linux系统里存在？</span><br><span class="line"><span class="built_in">cat</span> /etc/passwd</span><br><span class="line">或者 <span class="built_in">id</span>命令</span><br></pre></td></tr></table></figure><h3 id="1-2-如何禁用一个用户登陆linux系统">1.2 如何禁用一个用户登陆linux系统</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2、如何禁用一个用户登陆linux系统</span><br><span class="line">使用usermod -L 锁定用户</span><br><span class="line">usermod -s /sbin/nologin root</span><br></pre></td></tr></table></figure><h3 id="1-3-如何知道一个用户属于哪些组">1.3 如何知道一个用户属于哪些组</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">3、如何知道一个用户属于哪些组</span><br><span class="line">使用<span class="built_in">id</span>命令查看</span><br><span class="line">使用<span class="built_in">groups</span>命令查看</span><br><span class="line">查看/etc/group里用户所属的组</span><br></pre></td></tr></table></figure><h3 id="1-4-如何知道哪些用户现在已经登录在linux里？-哪些用户曾经登陆过linux系统？">1.4 如何知道哪些用户现在已经登录在linux里？ 哪些用户曾经登陆过linux系统？</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">4、如何知道哪些用户现在已经登录在linux里？ 哪些用户曾经登陆过linux系统？</span><br><span class="line">使用w命令查看用户登录情况</span><br><span class="line">使用last命令查看曾经登录过的用户</span><br><span class="line">示例：w  <span class="built_in">who</span>  看当前登录的用户</span><br><span class="line"><span class="comment">#注：w看的更详细些</span></span><br><span class="line">[root@localhost ~]<span class="comment"># w</span></span><br><span class="line"> 09:37:40 up  8:32,  5 <span class="built_in">users</span>,  load average: 0.00, 0.01, 0.05</span><br><span class="line">USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT</span><br><span class="line">root     tty1                      四09    6:28   0.09s  0.09s -bash</span><br><span class="line">root     pts/3    192.168.136.1    09:29    4.00s  0.05s  0.03s w</span><br><span class="line">[root@localhost ~]<span class="comment"># who</span></span><br><span class="line">root     tty1         2020-11-05 09:31</span><br><span class="line">root     pts/3        2020-11-06 09:29 (192.168.136.1)</span><br></pre></td></tr></table></figure><h3 id="1-5-如何给用户重新设置密码">1.5 如何给用户重新设置密码</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">5、如何给用户重新设置密码</span><br><span class="line">passwd</span><br></pre></td></tr></table></figure><h3 id="1-6-linux的root密码忘记了怎么办">1.6 linux的root密码忘记了怎么办</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">6、linux的root密码忘记了怎么办</span><br><span class="line">  进入单用户模式</span><br><span class="line">      1、开机，按任意键停住启动界面，然后选择对应的内核，按 e 进行编辑</span><br><span class="line">      2、找到linux16这一行，在最后输入 rd.break</span><br><span class="line">      3、按 Ctrl-x 启动，然后按照以下操作破解 root 密码</span><br><span class="line">示例：忘记root用户密码怎么办？</span><br><span class="line">答：进入单用户模式</span><br></pre></td></tr></table></figure><p>​<a href="https://blog.csdn.net/qq_37960324/article/details/84589565">https://blog.csdn.net/qq_37960324/article/details/84589565</a><br>​<a href="https://www.cnblogs.com/jsjrj01/p/10301603.htm">https://www.cnblogs.com/jsjrj01/p/10301603.htm</a></p><h3 id="1-7-如何将已经登录在系统里的用户踢出去？并且防止它再次登陆？">1.7 如何将已经登录在系统里的用户踢出去？并且防止它再次登陆？</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">7、如何将已经登录在系统里的用户踢出去？并且防止它再次登陆？</span><br><span class="line">1.踢出可疑的root登录用户，马上修改密码 </span><br><span class="line">2.sshd---》/etc/hosts.deny hosts.allow --&gt;ip </span><br><span class="line">3./etc/ssh/sshd_config --&gt;DenyUsers --&gt;用户</span><br></pre></td></tr></table></figure><h3 id="1-8-怎么把普通用户变成root用户">1.8 怎么把普通用户变成root用户</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">8、怎么把普通用户变成root用户</span><br><span class="line">1.（不推荐）修改 /etc/passwd 文件，找到要修改的普通用户，把用户ID修改为 0</span><br><span class="line">2.sudo 权限</span><br></pre></td></tr></table></figure><h3 id="1-9">1.9</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">·  创建目录/tech/cali和/tech/sanle，分别用于保存个项目组中用户帐号的宿主目录；</span><br><span class="line">·  为两个项目组添加组帐号cali、sanle，GID号分别为1001、1002；为技术部添加组帐号tech，GID号为200；</span><br><span class="line">·  添加2个用户，分别为b1、b2，要求他们的基本组是cali，附加组是tech，宿主目录均使用/tech/cali目录中与帐号同名的文件夹（例如b1用户的宿主目录/tech/cali/b1）；其中b2用户帐号设置2012-12-31日后失效；</span><br><span class="line">·  添加2个用户，分别为a1、a2，要求他们的基本组是sanle，附加组是tech；宿主目录均使用/tech/sanle目录中与帐号同名的文件夹（例如a1用户的宿主目录/tech/cali/a1） ；其中a2用户帐号登录的shell为/bin/ksh</span><br><span class="line">所有新建用户密码都是123456；</span><br><span class="line"></span><br><span class="line">1、<span class="built_in">mkdir</span> -p  /tech/cali /tech/sanle</span><br><span class="line">2、groupadd -g 1001 cali  </span><br><span class="line">     groupadd -g 1002 sanle</span><br><span class="line">     groupadd -g 200 tech</span><br><span class="line">3、useradd -g cali -G tech -d /tech/cali/b1 b1</span><br><span class="line">     useradd -g cali -G tech -d /tech/cali/b2 -e 2020-11-6 b2</span><br><span class="line">4、useradd -g sanle -G tech -d /tech/sanle/a100 a1</span><br><span class="line">     useradd -g sable -G tech -d /tech/sanle/a200 -s /bin/ksh a2</span><br><span class="line">5、<span class="built_in">echo</span> 123456|passwd a1 --stdin</span><br><span class="line">     <span class="built_in">echo</span> 123456|passwd a2 --stdin</span><br><span class="line">----------------------------------------------------------------</span><br><span class="line">示例：过期账户不能登录</span><br><span class="line">-----------------------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># useradd -e &quot;2012-11-22&quot; sanle3# 注：过期账户不能登录</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># su - sanle3# 注：可以切换，不能登录</span></span><br><span class="line">[sanle3@sanchuang-linux ~]$ </span><br></pre></td></tr></table></figure><hr><h2 id="二-etc-group文件">二. /etc/group文件</h2><p><strong>/etc/group文件</strong></p><p>#注：/etc 存放配置文件的地方</p><p><strong>/etc/group文件</strong># 注：可以查看<strong>哪些账户的次要组是</strong></p><p>组帐号：</p><ul><li>主要组(私有组)</li><li>次要组(附属组)</li></ul><p>GID：（Group Identify，组标识号）</p><p><strong>Linux组帐号</strong></p><ul><li>主要组(私有组)</li></ul><p>与用户相关的默认组，在/etc/passwd文件的第四个字段定义</p><ul><li>次要组(附属组)</li></ul><p>用户可以同时属于其他的组，在/etc/group文件的第四个字段定义</p><p><code>用户的主要组的名称和GID相关</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><span class="line">示例</span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># useradd -g sanchuang4 -G sanchuang5 sanchuang10</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># useradd -g sanchuang4 -G sanchuang5 sanchuang12</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># useradd -g sanchuang5 -G sanchuang4 sanchuang13</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cat /etc/group</span></span><br><span class="line">sanchuang4:x:1100:sanchuang13<span class="comment"># 注：只显示次要组的组成员列表</span></span><br><span class="line">sanchuang5:x:1200:sanchuang10,sanchuang12<span class="comment"># 注：只显示次要组的组成员列表</span></span><br><span class="line"><span class="comment">#注：组账号名：sanchuang5；GID：1200；组成员列表sanchuang10,sanchuang12</span></span><br><span class="line"><span class="comment">#注：只显示次要组的组成员列表</span></span><br><span class="line">===========================================================================================================</span><br><span class="line">示例：怎样查看一个组里有哪些用户</span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#注：联系2个文件 /etc/passwd /etc/group</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># awk -F: &#x27;/sanchuang5/&#123;print $3,$4&#125;&#x27; /etc/group</span></span><br><span class="line">1200 sanchuang10,sanchuang12<span class="comment"># 注：模糊匹配，匹配包含sanchuang5的行</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># awk -F: &#x27;$1==&quot;sanchuang5&quot;&#123;print $3,$4&#125;&#x27; /etc/group# 注：加引号</span></span><br><span class="line">1200 sanchuang10,sanchuang12<span class="comment"># 注：精确匹配</span></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># vim group_member.sh</span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line">group_name=<span class="variable">$1</span>           <span class="comment">#注：组名作为参数</span></span><br><span class="line"><span class="comment">#/etc/group获取它的GID和成员列表</span></span><br><span class="line">group_msg=`awk -F: -v group_awk=<span class="variable">$group_name</span> <span class="string">&#x27;$1==group_awk&#123;print $3,$4&#125;&#x27;</span> /etc/group`</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$group_msg</span> <span class="comment">#注：-v选项 向awk传递shell变量 指定外部$group_name赋给awk内部变量 运行的时候用自定义的变量</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># sh group_member.sh sanchuang5</span></span><br><span class="line">1200 sanchuang10,sanchuang12</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># a=&#x27;1200 sanchuang10,sanchuang12&#x27;</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># s1=(a b c d e)</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># s2=($a)# 注：转化为数组</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $s2</span></span><br><span class="line">1200</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $s2[@]</span></span><br><span class="line">1200[@]</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $&#123;s2[@]&#125;# 注：获取数组里全部元素</span></span><br><span class="line">1200 sanchuang10,sanchuang12</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $&#123;#s2[@]&#125;# 注：获取数组长度</span></span><br><span class="line">2</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $&#123;#s2&#125;# 注：获取第一个元素 字符的长度</span></span><br><span class="line">4</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $&#123;s2[0]&#125;# 注：获取数组里第一个元素</span></span><br><span class="line">1200</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $&#123;s2[1]&#125;# 注：获取数组里第二个元素</span></span><br><span class="line">sanchuang10,sanchuang12</span><br><span class="line">-----------------------------------------</span><br><span class="line">group_name=<span class="variable">$1</span>           <span class="comment">#注：组名作为参数</span></span><br><span class="line"><span class="comment">#/etc/group获取它的GID和成员列表</span></span><br><span class="line">group_msg=`awk -F: -v group_awk=<span class="variable">$group_name</span> <span class="string">&#x27;$1==group_awk&#123;print $3,$4&#125;&#x27;</span> /etc/group`</span><br><span class="line"><span class="comment">#注：-v选项 向awk传递shell变量 指定外部$group_name赋给awk内部变量 运行的时候用自定义的变量</span></span><br><span class="line"><span class="comment">#注：获取数组里第一个元素</span></span><br><span class="line">group_lst=(<span class="variable">$group_msg</span>)  <span class="comment">#注：转变成数组</span></span><br><span class="line">group_id=<span class="variable">$&#123;group_lst[0]&#125;</span><span class="comment"># 注：gid</span></span><br><span class="line">group_user_1=<span class="variable">$&#123;group_lst[1]&#125;</span><span class="comment"># 注：该组（次要组）成员</span></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># vim group_member.sh</span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line">  </span><br><span class="line">group_name=<span class="variable">$1</span>           <span class="comment">#注：组名作为参数</span></span><br><span class="line"><span class="comment">#/etc/group获取它的GID和成员列表</span></span><br><span class="line">group_msg=`awk -F: -v group_awk=<span class="variable">$group_name</span> <span class="string">&#x27;$1==group_awk&#123;print $3,$4&#125;&#x27;</span> /etc/group`</span><br><span class="line"><span class="comment">#注：-v选项 向awk传递shell变量 指定外部$group_name赋给awk内部变量 运行的时候用自定义的变量</span></span><br><span class="line"><span class="comment">#注：获取数组里第一个元素</span></span><br><span class="line">group_lst=(<span class="variable">$group_msg</span>)  <span class="comment">#注：转变成数组</span></span><br><span class="line">group_id=<span class="variable">$&#123;group_lst[0]&#125;</span></span><br><span class="line">group_user_1=<span class="variable">$&#123;group_lst[1]&#125;</span></span><br><span class="line"><span class="comment">#注：获取/etc/passwd 主要组 成员；tr &quot;\n&quot; &quot;,&quot; 指定分隔符为,；过滤出 $4==group_id 的行</span></span><br><span class="line">group_user_2=`awk -F: -v group_id=<span class="variable">$group_id</span> <span class="string">&#x27;$4==group_id&#123;print $1&#125;&#x27;</span> /etc/passwd|<span class="built_in">tr</span> <span class="string">&quot;\n&quot;</span> <span class="string">&quot;,&quot;</span>`</span><br><span class="line"><span class="built_in">echo</span> $group_user_2<span class="variable">$group_user_1</span><span class="comment"># 注：直接拼接 不需要加“+”号</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># sh group_member.sh sanchuang5</span></span><br><span class="line">sanchuang13,sanchuang10,sanchuang12</span><br><span class="line">--------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cat /etc/passwd</span></span><br><span class="line">sanchuang13:x:1034:1200::/home/sanchuang13:/bin/bash<span class="comment"># 注：gid 位置 $4</span></span><br><span class="line">===========================================================================================================</span><br><span class="line">总结：查看组中有哪些成员</span><br><span class="line"><span class="comment">#shell与awk参数传递：</span></span><br><span class="line">https://blog.csdn.net/imzoer/article/details/8738581</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cat group_member2.sh</span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">group_name=<span class="variable">$1</span></span><br><span class="line">group_msg=`awk -F: -v group_awk=<span class="variable">$group_name</span> <span class="string">&#x27;$1==group_awk&#123;print $3,$4&#125;&#x27;</span> /etc/group`</span><br><span class="line">group_lst=(<span class="variable">$group_msg</span>)<span class="comment"># 注：awk -v 选项  定义参数，把变量传递给awk</span></span><br><span class="line">group_id=<span class="variable">$&#123;group_lst[0]&#125;</span><span class="comment"># 注：()括起来 把字符变成一个数组，默认以空格分割，获取1,2元素</span></span><br><span class="line">group_user_1=<span class="variable">$&#123;group_lst[1]&#125;</span></span><br><span class="line">group_user_2=`awk -F: -v group_id=<span class="variable">$group_id</span> <span class="string">&#x27;$4==group_id&#123;print $1&#125;&#x27;</span> /etc/passwd| <span class="built_in">tr</span> <span class="string">&quot;\n&quot;</span> <span class="string">&quot;,&quot;</span>`</span><br><span class="line"><span class="built_in">echo</span> $group_user_2<span class="variable">$group_user_1</span><span class="comment"># 注：把换行符换成逗号</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># sh group_member2.sh sanchuang5</span></span><br><span class="line">sanchuang13,sanchuang10,sanchuang12</span><br><span class="line"></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">命令行</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># less /etc/group</span></span><br><span class="line">sanchuang5:x:1200:sanchuang10,sanchuang12</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># awk -F: &#x27;$1==&quot;sanchuang5&quot;&#123;print $3&#125;&#x27; /etc/group</span></span><br><span class="line">1200<span class="comment"># 注：加引号，表示一个字符串</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># awk -F: &#x27;$1==&quot;sanchuang5&quot;&#123;print $3,$4&#125;&#x27; /etc/group</span></span><br><span class="line">1200 sanchuang10,sanchuang12<span class="comment"># 注：组id附属组的成员</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># awk -F: &#x27;$4==1200&#123;print $1&#125;&#x27; /etc/passwd</span></span><br><span class="line">sanchuang13<span class="comment"># 注：获取的是  为主要组时 成员的用户名（默认换行分割）</span></span><br><span class="line">group_user_2=`awk -F: -v group_id=<span class="variable">$group_id</span> <span class="string">&#x27;$4==group_id&#123;print $1&#125;&#x27;</span> /etc/passwd| <span class="built_in">tr</span> <span class="string">&quot;\n&quot;</span> <span class="string">&quot;,&quot;</span>`</span><br><span class="line"><span class="comment">#注：把换行符换成逗号</span></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">字符串截取<span class="comment"># 注：不准确，gid可能5位</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># result=`awk -F: &#x27;$1==&quot;sanchuang5&quot;&#123;print $3,$4&#125;&#x27; /etc/group`</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $&#123;result:0:4&#125;</span></span><br><span class="line">1200</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $&#123;result#* &#125;</span></span><br><span class="line">sanchuang10,sanchuang12</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $&#123;result:5&#125;</span></span><br><span class="line">sanchuang10,sanchuang12</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $&#123;result%% *&#125;</span></span><br><span class="line">1200</span><br><span class="line">---------------------------</span><br><span class="line">字符串截取：</span><br><span class="line"><span class="comment">#字符串操作</span></span><br><span class="line">line=`<span class="built_in">head</span> -n1 /etc/passwd`</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;字符串为：<span class="variable">$line</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;字符串为：$line&#x27;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;截取前4个字符:&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;line:0:4&#125;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;截取后9个字符:&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;line:0-9&#125;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;从倒数第九个字符开始截取4个字符&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;line:0-9:4&#125;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;从左向右截取最后一个:后的字符&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;line##*:&#125;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;从左向右截取第一个:后的字符&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;line#*:&#125;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;从右向左截取最后一个:后的字符&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;line%%:*&#125;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;从右向左截取第一个:后的字符&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;line%:*&#125;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;字符串长度&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;#line&#125;</span></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="keyword">for</span>循环获取</span><br><span class="line">[root@sanchuang-linux lianxi]<span class="comment"># vim user.sh</span></span><br><span class="line">result=`awk -F: <span class="string">&#x27;$1==&quot;sanchuang5&quot;&#123;print $3,$4&#125;&#x27;</span> /etc/group`</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="variable">$result</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">[root@sanchuang-linux lianxi]<span class="comment"># bash user.sh </span></span><br><span class="line">1200</span><br><span class="line">sanchuang10,sanchuang12</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># result=`awk -F: &#x27;$1==&quot;sanchuang5&quot;&#123;print $3,$4&#125;&#x27; /etc/group`</span></span><br><span class="line">------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># for i in $result; do echo $i; done</span></span><br><span class="line">1200</span><br><span class="line">sanchuang10,sanchuang12</span><br></pre></td></tr></table></figure><hr><h2 id="三-group操作">三. group操作</h2><h3 id="3-1-groupadd-groupdel">3.1 groupadd  groupdel</h3><p><strong>groupadd命令</strong></p><p>格式：<code>groupadd [-g GID]组帐号名</code></p><p><strong>groupdel命令</strong></p><p>格式：<code>groupdel 组帐号名</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">示例：groupadd  groupdel</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># groupadd -g 5000 sanle# 注：创建gid为5000的sanle组</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># less /etc/group#↑注：添加组账号sanle</span></span><br><span class="line">sanle:x:5000:</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># groupdel sanle# 注：删除组账号sanle</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># less /etc/group# 注：没有了</span></span><br></pre></td></tr></table></figure><h3 id="3-2-groupmod-newgrp">3.2 groupmod  newgrp</h3><p><strong>groupmod命令</strong></p><ul><li>用途：设置组名和组id</li><li>格式：<code>groupmod [选项]...组帐号名</code></li></ul><p><strong>常用命令选项</strong></p><ul><li>-n：修改组名</li><li>-g：修改组id</li></ul><p><strong>newgrp改变有效组</strong></p><ul><li>用户必须是要改变组的成员</li></ul><p><strong>有效组：（用的很少）</strong><br>新建文件或者文件夹的时候，使用的gid<br>gid使用哪个组，哪个就是有效组</p><p>当前用户新建文件或者文件夹的时候，默认使用的gid对应的组 就是有效组</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">示例：newgrp改变有效组</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux lianxi]<span class="comment"># ll# 注：ll查看目录详细信息</span></span><br><span class="line">-rw-r--r--. 1 root root      86 9月  25 14:23 abcd.txt</span><br><span class="line">-rw-r--r--. 1 root root     158 9月  25 09:47 backup_log.sh</span><br><span class="line"><span class="comment">#注：第一个root是文件的 属主</span></span><br><span class="line"><span class="comment">#注：第二个root是文件的 属组</span></span><br><span class="line">---------------------------------------------------</span><br><span class="line">[root@sanchuang-linux lianxi]<span class="comment"># newgrp sanchuang4</span></span><br><span class="line">[root@sanchuang-linux lianxi]<span class="comment"># touch aa</span></span><br><span class="line">[root@sanchuang-linux lianxi]<span class="comment"># ll</span></span><br><span class="line">-rw-r--r--  1 root sanchuang4       0 11月  6 11:25 bb<span class="comment"># 注：属组发生改变</span></span><br><span class="line">---------------------------------------------------</span><br><span class="line">[root@sanchuang-linux lianxi]<span class="comment"># su - sanchuang10</span></span><br><span class="line">[root@sanchuang-linux lianxi]<span class="comment"># touch cc</span></span><br><span class="line">[sanchuang10@sanchuang-linux ~]$ ll</span><br><span class="line">总用量 0</span><br><span class="line">-rw-r--r-- 1 sanchuang10 sanchuang4 0 11月  6 11:27 cc</span><br><span class="line">[sanchuang10@sanchuang-linux ~]$ newgrp sanchuang<span class="comment"># 注：普通用户想切换有效组，有效组里面必须有这个普通用户</span></span><br><span class="line">密码：</span><br><span class="line">newgrp: failed to crypt password with previous salt: 无效的参数</span><br><span class="line"><span class="comment">#注：普通用户想切换有效组，有效组里面必须有这个普通用户</span></span><br></pre></td></tr></table></figure><h3 id="3-3-Linux组帐号">3.3 Linux组帐号</h3><p><strong>Linux组帐号</strong></p><ul><li>主要组(私有组)</li></ul><p>与用户相关的默认组，在/etc/passwd文件的第四个字段定义</p><ul><li>次要组(附属组)</li></ul><p>用户可以同时属于其他的组，在/etc/group文件的第四个字段定义</p><p><code>用户的主要组的名称和GID相关</code></p><hr><h2 id="四-gpasswd命令">四. gpasswd命令</h2><p><strong>gpasswd命令</strong></p><ul><li>用途：设置组帐号密码（极少用）、添加/删除组成员</li><li>格式：<code>gpasswd [选项]... 组帐号名</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">示例：删除组成员root</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@localhost ~]<span class="comment"># gpasswd -d root market</span></span><br><span class="line">正在将用户“root”从“market”组中删除</span><br><span class="line"></span><br><span class="line">示例：设置组账号密码</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># gpasswd sanchuang</span></span><br><span class="line">正在修改 sanchuang 组的密码</span><br><span class="line">新密码：</span><br><span class="line">请重新输入新密码：</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># </span></span><br></pre></td></tr></table></figure><hr><h2 id="五-linux加密">五. linux加密</h2><p>Linux加密</p><p>默认采用sha512算法</p><p>采用哈希算法–》散列值求取</p><p>​把任意长度的输入，映射成固定长度的输出，该输出就是散列值</p><p>​是一种单向加密技术</p><p>hash算法：md5  sha1  sha2  sha256  sha512</p><p><strong>如何判定密码正确？</strong></p><p># 注：把输入的密码用同样的方式进行加密，再判定输入的密文和文件里的密文是否一致</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">示例：md5sum</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo &quot;123456&quot;|md5sum # 注：md5sum也是一种哈希算法</span></span><br><span class="line">f447b20a7fcbf53a5d5be013ea0b15af  -<span class="comment"># 注：无论给的是 都会返回特点长度的输出</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo &quot;123456xyzzzzz&quot;|md5sum # 注：单向加密的算法</span></span><br><span class="line">bcdd6694d1ece311bd7bd668da54b9b9  -</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo &quot;xxxxxxxxxxxxxxxxxxxxxxxx&quot;|md5sum</span></span><br><span class="line">7373d8394616d74ba2c42402266ae3aa  -</span><br><span class="line"></span><br><span class="line">[root@sanchuang-linux tmp]<span class="comment"># md5sum douban# 注：对文件进行加密</span></span><br><span class="line">816ba8dd29e68f3450d8748096227d42  douban<span class="comment"># 注：对任意文件的输入，都会有对应长度的输出</span></span><br><span class="line">[root@sanchuang-linux tmp]<span class="comment"># md5sum sucai8</span></span><br><span class="line">9a44802fc09e1b84dc94740c40aa6450  sucai8</span><br><span class="line"></span><br><span class="line">示例：撞库 加盐</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#注：撞库</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo &quot;123456&quot;|md5sum# 注：加密字符串相同，输出的散列值相同</span></span><br><span class="line">f447b20a7fcbf53a5d5be013ea0b15af  -</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo &quot;123456&quot;|md5sum</span></span><br><span class="line">f447b20a7fcbf53a5d5be013ea0b15af  -</span><br><span class="line"><span class="comment">#注：加盐# 注：提高密码安全性</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo &quot;123456xndfoaei242&quot;|md5sum# 注：xndfoaei242 盐值</span></span><br><span class="line">15465f7aa2929cca95ed7efb97ffeba0  -</span><br><span class="line"></span><br><span class="line">示例</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">root:$<span class="number">6</span>$i4J5vzOUIMpchLRj$nTCbYWgA5cpv34Set6R2ZmC1AYYHGHnQafNbA9fkFsTR0E9GG1BJP5o3OTMuC4kGUqsomCI/G8FdEVELI/aeq0::<span class="number">0</span>:<span class="number">99999</span>:<span class="number">7</span>:::</span><br><span class="line"></span><br><span class="line">密码字段：$加密算法<span class="built_in">id</span>$盐值$真正的密文</span><br><span class="line">加密底层使用内核的crypt函数实现</span><br><span class="line"></span><br><span class="line">python实现（sha512）</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> crypt</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>crypt.crypt(<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;$6$i4J5vzOUIMpchLRj&#x27;</span>)<span class="comment"># 注：$加密算法id$盐值，密文和上面相同</span></span><br><span class="line"><span class="string">&#x27;$6$i4J5vzOUIMpchLRj$nTCbYWgA5cpv34Set6R2ZmC1AYYHGHnQafNbA9fkFsTR0E9GG1BJP5o3OTMuC4kGUqsomCI/G8FdEVELI/aeq0&#x27;</span><span class="comment"># 注：与上面的密文一样</span></span><br><span class="line">-----------------------------------------</span><br><span class="line">$<span class="number">6</span> 代表sha512算法</span><br><span class="line">$i4J5vzOUIMpchLRj 盐值</span><br><span class="line">$nTCbYWgA5cpv……aeq0 真正的密文</span><br><span class="line"></span><br><span class="line">哈希算法用途：用来判定文件md5值是否改变</span><br></pre></td></tr></table></figure><hr><h2 id="六-etc-login-defs文件">六. /etc/login.defs文件</h2><p><strong>/etc/login.defs文件</strong></p><ul><li>对账户初始的属性设置</li><li>设置普通用户的UID和GID范围等</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">示例</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># vim /etc/login.defs </span></span><br><span class="line">MAIL_DIR        /var/spool/mail<span class="comment"># 注：设置默认地址</span></span><br><span class="line">PASS_MAX_DAYS   99999<span class="comment"># 注：密码的过期天数</span></span><br><span class="line">PASS_MIN_DAYS   0</span><br><span class="line">PASS_MIN_LEN    5</span><br><span class="line">PASS_WARN_AGE   7</span><br><span class="line">UID_MIN                  1000</span><br></pre></td></tr></table></figure><hr><h2 id="七-useradd命令在后台到底做了哪些工作">七. useradd命令在后台到底做了哪些工作?</h2><blockquote><p><strong>useradd命令在后台到底做了哪些工作?</strong></p><p><img src="https://image.cpen.top/image/202208130132822.png" alt="image-20220813013242770"></p></blockquote><hr><h2 id="八-etc-skel-文件">八. /etc/skel/*文件</h2><p>*<em>/etc/skel/<em>文件</em></em></p><ul><li>新建用户帐号时，复制到用户宿主目录中</li></ul><p><strong>主要控制用户初始配置文件</strong></p><ul><li><code>bash_profile</code>：用户<strong>每次登录</strong>时执行</li><li><code>bashrc</code>：   每次进入<strong>新的Bash</strong>环境时执行</li><li><code>bash_logout</code>：用户每次<strong>退出登录</strong>时执行</li><li><code>bash_history</code> ：   记录存放<strong>上次注销前</strong>使用的历史命令</li></ul><p><em>登陆的时候：</em><br>.bash_profile<br>~/.bash_profile --&gt; ~/.bashrc --&gt; <strong>/etc/bashrc</strong></p><p><strong>进入新bash环境</strong>：<br>~/.bashrc --&gt; <strong>/etc/bashrc</strong></p><p>--------------------------------------------------------------------------------------------</p><p>#注：<strong>登录的时候都会执行 .bash_profile</strong></p><p>#注：登录的时候都会执行 .bashrc# 注：<strong>.bash_profile里面调用了.bashrc</strong></p><p>#注：登录的时候 <strong>先执行.bash_profile，.bash_profile里面调用了.bashrc</strong></p><p>#注：进入了一个<strong>新的bash环境，执行.bashrc</strong></p><p>#注：到<strong>新bash环境下，执行了.bashrc，不执行.bash_profile。登录时执行.bash_profile</strong></p><p><strong>用户环境设置</strong></p><p>#注：/etc/bashrc  系统用户的环境设置，别名设置，其他的函数</p><p>/etc/bashrc  相当于全局配置，此文件只能root用户修改# 注：/etc/bashrc 只有root用户才能修改</p><p>~/.bashrc    个人配置，个性化配置，自己家目录下有权限修改# 注：家目录下的.bashrc文件</p><p><strong>/etc/profile</strong>系统全局用户环境配置</p><p><strong>~/.bash_profile</strong>个人配置</p><p>原因：</p><p>全局配置，影响所有用户。</p><p>家目录下配置，影响当前用户。</p><p><strong>/etc/目录下的环境配置修改，属于全局配置，家目录下属于个人用户配置</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">示例：家目录下配置</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># less .bash_profile </span></span><br><span class="line"><span class="comment"># .bash_profile</span></span><br><span class="line"><span class="keyword">if</span> [ -f /etc/bashrc ]; <span class="keyword">then</span><span class="comment"># 注：判断有没有 /etc/bashrc，有就在当前执行/etc/bashrc</span></span><br><span class="line">        . /etc/bashrc<span class="comment"># 注：/etc/bashrc 执行初始化的用户环境设置</span></span><br><span class="line"><span class="keyword">fi</span><span class="comment"># 注：用. 去执行，. 代表当前bash</span></span><br><span class="line">PATH=<span class="variable">$PATH</span>:<span class="variable">$HOME</span>/bin</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> PATH</span><br><span class="line"></span><br><span class="line">[root@localhost ~]<span class="comment"># less .bashrc </span></span><br><span class="line"><span class="comment"># .bashrc</span></span><br><span class="line"><span class="built_in">alias</span> <span class="built_in">rm</span>=<span class="string">&#x27;rm -i&#x27;</span></span><br><span class="line"><span class="built_in">alias</span> <span class="built_in">cp</span>=<span class="string">&#x27;cp -i&#x27;</span></span><br><span class="line"><span class="built_in">alias</span> <span class="built_in">mv</span>=<span class="string">&#x27;mv -i&#x27;</span></span><br><span class="line"><span class="keyword">if</span> [ -f /etc/bashrc ]; <span class="keyword">then</span></span><br><span class="line">        . /etc/bashrc<span class="comment"># 注：最终执行的是这个文件</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># which ls# 注：ls执行的是/usr/bin/ls，通过PATH环境变量从前往后找</span></span><br><span class="line"><span class="built_in">alias</span> <span class="built_in">ls</span>=<span class="string">&#x27;ls --color=auto&#x27;</span></span><br><span class="line">/usr/bin/ls</span><br><span class="line"></span><br><span class="line">============================================================================================</span><br><span class="line">示例：/etc/skel/*文件</span><br><span class="line"><span class="comment">#注：新建用户帐号时，复制到用户宿主目录中</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cd /etc/skel/</span></span><br><span class="line">[root@sanchuang-linux skel]<span class="comment"># ls -al</span></span><br><span class="line">总用量 24</span><br><span class="line">drwxr-xr-x.  2 root root   62 9月  16 13:23 .</span><br><span class="line">drwxr-xr-x. 90 root root 8192 11月  6 15:15 ..</span><br><span class="line">-rw-r--r--.  1 root root   18 11月  9 2019 .bash_logout</span><br><span class="line">-rw-r--r--.  1 root root  141 11月  9 2019 .bash_profile</span><br><span class="line">-rw-r--r--.  1 root root  312 11月  9 2019 .bashrc</span><br><span class="line"></span><br><span class="line">============================================================================================</span><br><span class="line">示例：.bash_history 记录存放上次注销前使用的历史命令</span><br><span class="line">.bash_history  存放当前用户的命令历史，第一次登录用户，操作命令的时候，不会生成此文件</span><br><span class="line">第一次登陆退出后会自动将内存里的历史记录写到.bash_history文件里</span><br><span class="line"></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># history#注：history只是查看当前用户的命令历史</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#注：用户退出时，命令历史才会写入.bash_history</span></span><br><span class="line"><span class="comment">#注：新建用户时，不会生成.bash_history文件，只有退出后 再次登录 才会生成.bash_history文件</span></span><br><span class="line"><span class="comment">#注：不是所有的命令都写入history，不是很准确</span></span><br><span class="line"></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cat .bash_history # 注：在当前用户的家目录下查看.bash_history文件</span></span><br></pre></td></tr></table></figure><hr><h2 id="九-每次登录或退出sanchuang的时候，打印日志到-tmp-sanchuang-log">九. 每次登录或退出sanchuang的时候，打印日志到/tmp/sanchuang_log</h2><p><strong>每次登录或退出sanchuang的时候，打印日志到/tmp/sanchuang_log</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">步骤</span><br><span class="line">1.在sanchuang用户下，修改.bash_profile文件，添加<span class="comment"># 注：因为每次登陆都会先执行这个文件</span></span><br><span class="line">now_date=`<span class="built_in">date</span>`</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$now_date</span><span class="string">&quot;login...&quot;</span> &gt;&gt; /tmp/sanchuang_log</span><br><span class="line">2.在sanchuang用户下，修改.bash_logout文件，添加<span class="comment"># 注：因为每次退出时都会执行这个文件</span></span><br><span class="line">now_date=`<span class="built_in">date</span>`</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$now_date</span><span class="string">&quot;logout...&quot;</span> &gt;&gt; /tmp/sanchuang_log</span><br><span class="line">3.监控文件变化，新增末尾行<span class="comment"># 注：经常用 tail -f 监控文件</span></span><br><span class="line">$ <span class="built_in">tail</span> -f /tmp/sanchuang_log<span class="comment"># 注：tail -f监控文件末尾的变化（新增的末尾行）</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">示例</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux <span class="built_in">log</span>]<span class="comment"># su - sanchuang# 注：普通用户  在自己的家目录下操作</span></span><br><span class="line">上一次登录：五 11月  6 14:59:23 CST 2020pts/1 上</span><br><span class="line">[sanchuang@sanchuang-linux ~]$ vim ~/.bash_profile <span class="comment"># 注：家目录下的.bash_profile操作</span></span><br><span class="line">now_date=`<span class="built_in">date</span>`</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$now_date</span><span class="string">&quot;login...&quot;</span> &gt;&gt; /tmp/sanchuang_log</span><br><span class="line">[sanchuang@sanchuang-linux ~]$ <span class="built_in">tail</span> -f /tmp/sanchuang_log<span class="comment"># 注：tail -f监控文件末尾的变化</span></span><br><span class="line">2020年 11月 06日 星期五 15:05:26 CSTlogin...</span><br><span class="line">[sanchuang@sanchuang-linux ~]$ vim ~/.bash_logout </span><br><span class="line">now_date=`<span class="built_in">date</span>`</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$now_date</span><span class="string">&quot;logout...&quot;</span> &gt;&gt; /tmp/sanchuang_log</span><br><span class="line">[sanchuang@sanchuang-linux ~]$ <span class="built_in">tail</span> -f /tmp/sanchuang_log<span class="comment"># 注：tail -f监控文件末尾的变化</span></span><br><span class="line">2020年 11月 06日 星期五 15:05:26 CSTlogin...</span><br><span class="line">2020年 11月 06日 星期五 15:07:33 CSTlogout...</span><br></pre></td></tr></table></figure><hr><h2 id="十-Shell启动配置文件的区别">十. Shell启动配置文件的区别</h2><p><strong>Shell启动配置文件的区别</strong></p><ul><li><strong>/etc/profile</strong>：     配置全局环境变量，影响所有用户</li><li><strong>~/.bash_profile</strong> ： 配置个人环境，影响一个用户</li><li><strong>/etc/bashrc</strong> ：        配置全局的别名或者shell选项，影响所有用户</li><li>**~/.bashrc **：        配置个人别名或者shell选项，影响一个用户</li></ul><hr><h2 id="十一-bash-history">十一. .bash_history</h2><p><strong>.bash_history</strong></p><p>存放当前用户的命令历史，第一次登录用户，操作命令的时候，不会生成此文件</p><p>第一次登陆退出后会自动将内存里的历史记录写到.bash_history文件里</p><hr><h2 id="十二-bash的启动脚本初始化">十二. bash的启动脚本初始化</h2><blockquote><p><strong>bash的启动脚本初始化</strong></p><p><img src="https://image.cpen.top/image/202208130144863.png" alt="image-20220813014441823"></p><p><img src="https://image.cpen.top/image/202208130144897.png" alt="image-20220813014453858"></p></blockquote><hr><h2 id="十三-用户和组账户查询">十三. 用户和组账户查询</h2><p><strong>用户和组账户查询</strong></p><p><strong>id命令</strong></p><ul><li>用途：查询用户身份标识</li><li>格式：id [用户名]</li></ul><p><strong>who、w、users命令</strong></p><ul><li>用途：查询已登录到主机的用户信息</li></ul><p><strong>groups命令</strong></p><ul><li>用途:查询用户所属的组# 注：返回用户所属的 基本组和附加组</li></ul><p><strong>last、lastlog命令使用</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">示例：w  <span class="built_in">who</span></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># w# 注：看的是你以哪个用户登录进来，而不是当前你切换到的用户</span></span><br><span class="line"> 15:26:24 up  6:11,  6 <span class="built_in">users</span>,  load average: 0.00, 0.01, 0.05</span><br><span class="line">USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT</span><br><span class="line">root     tty1     -                四15   58:07   0.07s  0.07s -bash<span class="comment"># 注：tty真实终端</span></span><br><span class="line">root     pts/0    192.168.0.42     14:28    0.00s  0.18s  0.01s w <span class="comment"># 注：远程登录pts虚拟终端</span></span><br><span class="line">root     pts/1    192.168.0.42     14:28   12:24   0.07s  0.01s -bash</span><br><span class="line"><span class="comment">#注：真实终端FORM为空</span></span><br><span class="line"><span class="comment">#注：虚拟终端显示的是物理机的ip地址</span></span><br><span class="line"><span class="comment">#注：WHAT当前环境做的事情</span></span><br><span class="line"><span class="comment">#注：15:26:24 当前时间</span></span><br><span class="line"><span class="comment">#注：6:11开机总时间</span></span><br><span class="line"><span class="comment">#注：6 users登录用户数量</span></span><br><span class="line"><span class="comment">#注：load average cpu平均负载，数值越大，机器越繁忙</span></span><br><span class="line">--------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># who# 注：看的没有w详细</span></span><br><span class="line">root     tty1         2020-11-05 15:13</span><br><span class="line">root     pts/0        2020-11-06 14:28 (192.168.0.42)</span><br><span class="line">root     pts/1        2020-11-06 14:28 (192.168.0.42)</span><br><span class="line">------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># users# 注：查看当前有哪些用户登录</span></span><br><span class="line">root root root root root root</span><br><span class="line">---------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># groups sanchuang10# 注：显示用户所属的基本组和附加组</span></span><br><span class="line">sanchuang10 : sanchuang4 sanchuang5</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># id sanchuang10</span></span><br><span class="line">uid=1032(sanchuang10) gid=1100(sanchuang4) 组=1100(sanchuang4),1200(sanchuang5)</span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># last# 注：查看之前有哪些用户登录过</span></span><br><span class="line">root     tty1                          Wed Sep 16 13:41 - 13:41  (00:00)</span><br><span class="line">root     pts/0        192.168.136.1    Wed Sep 16 13:29 - 13:40  (00:11)</span><br><span class="line">reboot   system boot  4.18.0-193.el8.x Wed Sep 16 13:26 - 13:42  (00:15)</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># lastlog # 注：查看每一个用户的最近登录状态</span></span><br><span class="line">用户名           端口     来自             最后登陆时间</span><br><span class="line">root             pts/0                     五 11月  6 15:18:46 +0800 2020</span><br><span class="line">bin                                        **从未登录过**</span><br><span class="line">shutdown                                   **从未登录过**</span><br></pre></td></tr></table></figure><hr><h2 id="十四-终端设备名称">十四. 终端设备名称</h2><p><strong>终端设备名称</strong></p><p>​名称  设备</p><p>​<strong>ttyn 虚拟控制台</strong></p><p>​<strong>pts/n   伪终端</strong></p><p>​<strong>:0      X服务器</strong></p><hr>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> 用户与组 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>14_Linux基础-用户与组1</title>
      <link href="/blog/posts/10588.html"/>
      <url>/blog/posts/10588.html</url>
      
        <content type="html"><![CDATA[<p>摘要：博客迁移 <a href="https://blog.csdn.net/cpen_web"><code>https://blog.csdn.net/cpen_web</code></a> → 本站<span id="more"></span></p><h1 id="14-Linux基础-用户与组1">14_Linux基础-用户与组1</h1><p><a href="https://blog.csdn.net/cpen_web">博客🔗：https://blog.csdn.net/cpen_web</a></p><hr><h2 id="一-练习">一. 练习</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line">示例1</span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line"><span class="function"><span class="title">menu</span></span>()&#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;1、监控内存使用情况,如果内存使用率大于百分之80，给予提醒&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;2、扫描局域网ip,检查哪些ip地址正在使用&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;3、监控文件/etc/passwd是否被修改，每隔5分钟监控一次&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;4、监控nginx进程是否存在，不存在就给予相应提醒&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">option_1</span></span>()&#123;</span><br><span class="line">    total=`free -m|grep -i mem|<span class="built_in">tr</span> -s <span class="string">&quot; &quot;</span>|<span class="built_in">cut</span> -d <span class="string">&quot; &quot;</span> -f2`</span><br><span class="line">    <span class="comment">#free=`free -m|grep -i mem|tr -s &quot; &quot;|cut -d &quot; &quot; -f4`</span></span><br><span class="line">    used=`free -m|grep -i mem|<span class="built_in">tr</span> -s <span class="string">&quot; &quot;</span>|<span class="built_in">cut</span> -d <span class="string">&quot; &quot;</span> -f3`</span><br><span class="line">    used_rate=`<span class="built_in">echo</span> <span class="string">&quot;scale=4;<span class="variable">$used</span>/<span class="variable">$total</span>&quot;</span> |bc`</span><br><span class="line">    <span class="comment">#used_1=`echo &quot;$total*0.8&quot;|bc `</span></span><br><span class="line">    result=` <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$used_rate</span>&gt;0.8&quot;</span>|bc `</span><br><span class="line">    <span class="comment">#echo $result</span></span><br><span class="line">    <span class="keyword">if</span> (( <span class="variable">$result</span>  == 1 ))</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">&quot;\e[31m使用率超过80%，请及时对内存扩容，以免不必要的损失\e[0m&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span>  <span class="string">&quot; nothing to do&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">option_2</span></span>()&#123;</span><br><span class="line">        <span class="keyword">for</span> ip <span class="keyword">in</span> `<span class="built_in">seq</span> 255`</span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">        ( ip_full=192.168.0.<span class="variable">$ip</span></span><br><span class="line">        ping -c 1 <span class="variable">$ip_full</span> &amp;&gt;/dev/null &amp;&amp; <span class="built_in">echo</span> <span class="variable">$ip_full</span> &gt;&gt;up.txt || <span class="built_in">echo</span> <span class="variable">$ip_full</span> &gt;&gt;down.txt</span><br><span class="line">        ) &amp;     <span class="comment"># 注：放到后台子进程执行</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line"><span class="built_in">wait</span> <span class="comment"># 父进程等待子进程执行完成之后再退出</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">option_3</span></span>()&#123;</span><br><span class="line">    check_num=`diff /etc/passwd /lianxi/passwd |<span class="built_in">wc</span> -l`</span><br><span class="line">    [[ check_num -eq 0 ]] &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;文件未被修改&quot;</span> || <span class="built_in">echo</span> <span class="string">&quot;文件已被修改&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">option_4</span></span>()&#123;</span><br><span class="line">    pidof nginx &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;nginx is running&quot;</span> || <span class="built_in">echo</span> <span class="string">&quot;nginx is down&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">menu</span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;请输入你的选择:&quot;</span> option</span><br><span class="line"><span class="keyword">case</span> <span class="variable">$option</span> <span class="keyword">in</span></span><br><span class="line">1)</span><br><span class="line">    option_1</span><br><span class="line">    ;;</span><br><span class="line">2)</span><br><span class="line">    option_2</span><br><span class="line">    ;;</span><br><span class="line">3)</span><br><span class="line">    option_3</span><br><span class="line">    ;;</span><br><span class="line">4)</span><br><span class="line">    option_4</span><br><span class="line">    ;;</span><br><span class="line">*)</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;请输入1-4&quot;</span></span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line">示例2：重复选择</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">重复选择</span><br><span class="line"><span class="keyword">while</span> : </span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;#########################&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;1.查看内存使用率&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;2.扫描局域网ip&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;3.查看文件是否被修改&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;4.查看nginx进程&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;5.退出&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;#########################&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> : </span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;请输入你的选择:&quot;</span> options</span><br><span class="line"><span class="keyword">case</span> <span class="variable">$options</span> <span class="keyword">in</span></span><br><span class="line">1)</span><br><span class="line">/root/shell/mem.sh</span><br><span class="line">;;</span><br><span class="line">2)</span><br><span class="line">/root/shell/scan_ip.sh</span><br><span class="line">;;</span><br><span class="line">3)</span><br><span class="line">/root/shell/passwd_test.sh</span><br><span class="line">;;</span><br><span class="line">4)</span><br><span class="line">/root/shell/ngnix_test.sh</span><br><span class="line">;;</span><br><span class="line">5)</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;退出&quot;</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">;;</span><br><span class="line">*)</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;1-4&quot;</span></span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">示例3：使用awk获取</span><br><span class="line"><span class="keyword">case</span> <span class="variable">$options</span> <span class="keyword">in</span></span><br><span class="line"></span><br><span class="line">1)</span><br><span class="line"><span class="function"><span class="title">memory_monitor</span></span>()&#123;</span><br><span class="line">total=`free -m |grep Mem |awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>`</span><br><span class="line">used=`free -m |grep Mem |awk <span class="string">&#x27;&#123;print $3&#125;&#x27;</span>`</span><br><span class="line">use_rate=`<span class="built_in">echo</span> <span class="string">&quot;scale=2;<span class="variable">$used</span>/<span class="variable">$total</span>&quot;</span> |bc`</span><br><span class="line">result=`<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$use_rate</span>&gt;0.8&quot;</span> |bc`</span><br><span class="line"><span class="keyword">if</span>(( <span class="variable">$result</span> == 1 ))</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;内存使用率大于80%！！！&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;内存使用状态良好！&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line">memory_monitor</span><br><span class="line">;;</span><br></pre></td></tr></table></figure><hr><h2 id="二-user-group-用户与组">二. user group 用户与组</h2><h3 id="2-1-常见命令">2.1 常见命令</h3><p>id 查看<br>useradd 创建<br>userdel 删除<br>passwd 创建用户密码<br>su 切换用户<br><strong>usermod 更改用户信息</strong></p><h3 id="2-2-为什么要引入这个用户和组？">2.2 为什么要引入这个用户和组？</h3><blockquote><p>1、安全性</p><p>2、权限管理</p><p>3、资源管控</p><p>对文件的访问，读写可以管控</p><p>对进程的管理 --&gt; 谁可以管理</p></blockquote><h3 id="2-3-用户和组">2.3 用户和组</h3><blockquote><p>每个用户有一个唯一的UID<br>每个组也有一个唯一的GID</p><p>一个用户可以属于不同组<br>一个组可以有不同用户# 注：多对多的关系</p><p>用户和组 --&gt; 权限资源管控<br>用户加入组，就可以有这个组的权限<br>默认情况下，创建用户，会添加一个和用户同名的组</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">[root@sanchuang-linux ~]<span class="comment"># id chenpeng# 注：id查看用户和组信息</span></span><br><span class="line">uid=1030(chenpeng) gid=1030(chenpeng) 组=1030(chenpeng)</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@localhost ~]<span class="comment"># useradd sanchuang</span></span><br><span class="line">[root@localhost ~]<span class="comment"># id sanchuang</span></span><br><span class="line">uid=1000(sanchuang) gid=1000(sanchuang) 组=1000(sanchuang)</span><br><span class="line">[root@localhost ~]<span class="comment"># less /etc/passwd</span></span><br><span class="line">[root@localhost ~]<span class="comment"># less /home/sanchuang/</span></span><br><span class="line">[root@localhost ~]<span class="comment"># passwd sanchuang</span></span><br><span class="line">更改用户 sanchuang 的密码 。</span><br><span class="line">新的 密码：</span><br><span class="line">无效的密码： 密码少于 8 个字符</span><br><span class="line">重新输入新的 密码：</span><br><span class="line">passwd：所有的身份验证令牌已经成功更新。</span><br><span class="line">[sanchuang@localhost ~]$ <span class="comment"># 注：登录后默认位置为用户家目录（使用用户sanchuang登录）</span></span><br><span class="line">[root@localhost ~]<span class="comment"># less /etc/shadow# 注：shadow存放的是用户的密码信息</span></span><br><span class="line">[root@localhost ~]<span class="comment"># less /etc/shadow</span></span><br><span class="line">shadow   shadow-  </span><br><span class="line">[root@localhost ~]<span class="comment"># less /etc/passwd</span></span><br><span class="line">passwd   passwd-  </span><br><span class="line">[root@localhost ~]<span class="comment"># diff /etc/passwd /etc/passwd-# 注：passwd-备份文件，每次都会少一个最新的操作</span></span><br><span class="line">21d20<span class="comment"># 注：可以回滚上一个版本</span></span><br><span class="line">&lt; sanchuang:x:1000:1000::/home/sanchuang:/bin/bash</span><br><span class="line">[root@localhost ~]<span class="comment"># diff /etc/shadow /etc/shadow-# 注：shadowd-备份文件，每次都会少一个最新的操作</span></span><br><span class="line">21d20<span class="comment"># 注：可以回滚上一个版本</span></span><br><span class="line">&lt; sanchuang:$6<span class="variable">$dKQsah</span>/D<span class="variable">$6sm6owwvDEnVs8BclDWQZ7meYSaMf5Y7AofxzxwxO0PPrvzqHHVCer1G656iY2gE</span>.sUOarUl9beKi2usYdATQ1:18571:0:99999:7:::</span><br><span class="line">[root@localhost ~]<span class="comment"># less /etc/group# 注：存放组信息</span></span><br><span class="line">[root@localhost ~]<span class="comment"># less /etc/gshadow# 注：存放组密码信息</span></span><br><span class="line"></span><br><span class="line">[root@localhost ~]<span class="comment"># cd /home/sanchuang/# 注：新建用户，有三个隐藏文件</span></span><br><span class="line">[root@localhost sanchuang]<span class="comment"># ls</span></span><br><span class="line">[root@localhost sanchuang]<span class="comment"># ls -al# 注：新建用户帐号时，从 /etc/skel 目录中复制而来</span></span><br><span class="line">总用量 12</span><br><span class="line">drwx------. 2 sanchuang sanchuang  62 11月  5 10:25 .</span><br><span class="line">drwxr-xr-x. 3 root      root       23 11月  5 10:25 ..</span><br><span class="line">-rw-r--r--. 1 sanchuang sanchuang  18 4月   1 2020 .bash_logout</span><br><span class="line">-rw-r--r--. 1 sanchuang sanchuang 193 4月   1 2020 .bash_profile</span><br><span class="line">-rw-r--r--. 1 sanchuang sanchuang 231 4月   1 2020 .bashrc</span><br><span class="line">[root@localhost sanchuang]<span class="comment"># cd /etc/skel/# 注：模板，拷贝一份过去</span></span><br><span class="line">[root@localhost skel]<span class="comment"># ls -al</span></span><br><span class="line">总用量 24</span><br><span class="line">drwxr-xr-x.  2 root root   62 10月  6 16:33 .</span><br><span class="line">drwxr-xr-x. 77 root root 8192 11月  5 10:27 ..</span><br><span class="line">-rw-r--r--.  1 root root   18 4月   1 2020 .bash_logout</span><br><span class="line">-rw-r--r--.  1 root root  193 4月   1 2020 .bash_profile</span><br><span class="line">-rw-r--r--.  1 root root  231 4月   1 2020 .bashrc</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@localhost skel]<span class="comment"># less /etc/login.defs# 注：关于账户的设置信息</span></span><br><span class="line"><span class="comment"># Min/max values for automatic uid selection in useradd</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">UID_MIN                  1000<span class="comment"># 注：最多可以创建59000个用户</span></span><br><span class="line">UID_MAX                 60000</span><br><span class="line"><span class="comment"># System accounts</span></span><br><span class="line">SYS_UID_MIN               201</span><br><span class="line">SYS_UID_MAX               999</span><br><span class="line">CREATE_HOME     <span class="built_in">yes</span><span class="comment"># 注：创建家目录</span></span><br><span class="line">ENCRYPT_METHOD SHA512<span class="comment"># 注：指定用什么方式加密用户密码</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@localhost skel]<span class="comment"># ls /etc/group# 注：组也有备份文件</span></span><br><span class="line">group   group-  </span><br><span class="line">[root@localhost skel]<span class="comment"># ls /etc/gshadow</span></span><br><span class="line">gshadow   gshadow-  </span><br><span class="line"></span><br><span class="line">[root@localhost spool]<span class="comment"># cd /var/spool/mail/# 注：邮件目录</span></span><br><span class="line">[root@localhost mail]<span class="comment"># ls# 注：/var/spool/mail/ 下创建一个同名的文件</span></span><br><span class="line">sanchuang</span><br><span class="line"></span><br><span class="line">[sanchuang@localhost ~]$ less /etc/shadow<span class="comment"># 注：普通用户没有权限查看 /etc/shadow存放密码信息</span></span><br><span class="line">/etc/shadow: 权限不够 <span class="comment"># 注：只有root用户可读</span></span><br></pre></td></tr></table></figure><h3 id="2-4-用户创建牵扯到哪些文件">2.4 用户创建牵扯到哪些文件</h3><p><strong>账户信息相关文件</strong></p><ul><li><p>/etc/passwd  --&gt; 存放用户相关信息的</p></li><li><p>/etc/shadow  --&gt; 存放用户密码</p></li><li><p>/etc/passwd- 和 /etc/shadow- 这是/etc/passwd 和 /etc/shadow的备份文件，总是比原文件少一次操作</p></li></ul><p><strong>组相关文件</strong></p><ul><li><p>/etc/group   --&gt; 存放组信息的</p></li><li><p>/etc/gshadow  --&gt; 存放组密码的</p></li><li><p>/etc/group- 和 /etc/gshadow- 备份文件</p></li></ul><p><strong>用户环境默认设置</strong></p><ul><li>创建用户时，会拷贝/etc/skel/下的文件到用户的家目录</li></ul><p><strong>用户的家目录</strong></p><ul><li>默认情况下会在/home目录下创建一个同名文件夹</li></ul><p><strong>用户默认属性设置文件</strong></p><ul><li>/etc/login.defs</li></ul><p><strong>邮件目录</strong></p><ul><li>/var/spool/mail/ 下创建一个同名的文件</li></ul><h3 id="2-5-etc-passwd-文件详解">2.5 /etc/passwd 文件详解</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost mail]<span class="comment"># cat /etc/passwd</span></span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">sanchuang:x:1000:1000::/home/sanchuang:/bin/bash</span><br><span class="line">·使用：分隔</span><br><span class="line">·字段1：用户名</span><br><span class="line">·字段2：密码占位符，通常为“x”或者“*”（因为这个文件谁都可读，所以真正的密码存放在/etc/shadow）</span><br><span class="line">·字段3：用户<span class="built_in">id</span><span class="comment"># 注：-u指定</span></span><br><span class="line">·字段4：用户所属基本组<span class="built_in">id</span> <span class="comment"># 注：-g指定基本组</span></span><br><span class="line">·字段5：用户描述信息  <span class="comment"># 注：新建用户没有 没有设置一般没有 （-c选项）</span></span><br><span class="line">·字段6：家目录<span class="comment"># 注：家目录的绝对路径（-d选项）</span></span><br><span class="line">·字段7：登录shell的信息</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">示例</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@localhost ~]<span class="comment"># ls -ld /etc/shadow</span></span><br><span class="line">----------. 1 root root 2330 11月  5 20:51 /etc/shadow<span class="comment"># 注：普通用户/组 无法读取执行</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls -ld /etc/passwd</span></span><br><span class="line">-rw-r--r--. 1 root root 2006 11月  5 20:51 /etc/passwd</span><br><span class="line"></span><br><span class="line"><span class="comment">#注：通过yum安装的  配置文件一般放在/etc 下</span></span><br></pre></td></tr></table></figure><h3 id="2-6-练习：找出系统中uid大于1000的用户，显示出它的名字，UID，家目录，shell">2.6 练习：找出系统中uid大于1000的用户，显示出它的名字，UID，家目录，shell</h3><p><strong>找出系统中uid大于1000的用户，显示出它的名字，UID，家目录，shell</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@sanchuang-linux ~]<span class="comment"># awk -F: &#x27;$3&gt;1000&#123;print $1,$3,$6,$7&#125;&#x27; /etc/passwd</span></span><br><span class="line">chenpeng 1030 /home/chenpeng /bin/bash</span><br><span class="line"></span><br><span class="line"><span class="comment">#注：使用cat和直接使用awk消耗内存差不多</span></span><br><span class="line"><span class="comment">#注：语法：awk 选项 ‘模式+动作’ 文件# 注：不接模式的话 全文截取</span></span><br></pre></td></tr></table></figure><h3 id="2-7-练习：找出-etc-passwd中有几种shell信息">2.7 练习：找出/etc/passwd中有几种shell信息</h3><p><strong>找出/etc/passwd中有几种shell信息</strong></p><h3 id="2-8-useradd详解">2.8 useradd详解</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Shell设置</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># awk -F: &#x27;&#123;print $7&#125;&#x27; /etc/passwd |sort|uniq# 注：排序去重</span></span><br><span class="line">/bin/bash<span class="comment"># 注：系统默认用户的shell环境信息 --&gt; 正常使用的shell</span></span><br><span class="line">/bin/sync<span class="comment"># 注：将内存里的缓存刷新到磁盘 --&gt; 类似于Python中fp.flush()</span></span><br><span class="line">/sbin/halt<span class="comment"># 注：登陆就关机</span></span><br><span class="line">/sbin/nologin<span class="comment"># 注：用户不能登录（不允许登录）</span></span><br><span class="line">/sbin/shutdown<span class="comment"># 注：登陆就关机</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#注：关机至强最会执行以下sync,将内存里的缓存刷新到磁盘</span></span><br><span class="line">[root@localhost ~]<span class="comment"># sync</span></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#注：使用which命令查看命令的绝对路径</span></span><br><span class="line">[root@localhost ~]<span class="comment"># which sync</span></span><br><span class="line">/usr/bin/sync</span><br><span class="line">敲<span class="built_in">sync</span>会按照PATH变量的路径下向下找下去</span><br><span class="line">执行一个/bin/bash 就会到我们现在的终端环境了</span><br></pre></td></tr></table></figure><hr><h2 id="三-用户和组的关系">三. 用户和组的关系</h2><ul><li><p>每个账户有一个唯一的UID</p></li><li><p>每个组也有一个唯一的GID</p></li><li><p>多个账户可以属于同一个组</p></li></ul><img src="https://image.cpen.top/image/image-20220812074315487.png" alt="image-20220812074315487" style="zoom:80%;" /><hr><h2 id="四-用户和组的相关文件">四. 用户和组的相关文件</h2><p><strong>和账户相关文件</strong></p><ul><li>/etc/passwd、/etc/shadow</li></ul><p><strong>和组相关文件</strong></p><ul><li>/etc/group、/etc/gshadow</li></ul><p><strong>账户宿主目录中文件来源</strong></p><ul><li>新建用户帐号时，从 <code>/etc/skel</code> 目录中复制而来# 注：<strong>初始化用户家目录</strong></li></ul><p><strong>默认账户的属性文件</strong></p><ul><li>/etc/login.defs</li></ul><p><strong>用于保存用户的帐号基本信息</strong></p><ul><li><p>文件位置：<code>/etc/passwd</code></p></li><li><p>每一行对应一个用户的帐号记录</p></li><li><p>字段1：用户帐号的名称</p></li><li><p>字段2：用户密码字串或者密码占位符“<code>x</code>”</p></li><li><p>字段3：用户帐号的UID号</p></li><li><p>字段4：所属基本组帐号的GID号</p></li><li><p>字段5：用户描述信息</p></li><li><p>字段6：家目录</p></li><li><p>字段7：登录Shell信息</p></li></ul><hr><h2 id="五-用户和组的相关文件">五. 用户和组的相关文件</h2><p><strong>用户账户：</strong></p><ul><li>超级用户<code>root</code></li><li>程序用户</li><li>普通用户</li></ul><p><strong>UID （User Identity，用户标识号）</strong></p><ul><li>超级用户root的UID为<code>0</code></li><li>程序用户的UID<code>1-999</code></li><li>普通用户的UID大于等于<code>1000</code></li></ul><hr><h2 id="六-添加与删除用户">六. 添加与删除用户</h2><p><strong>useradd命令</strong></p><ul><li>格式：<code>useradd[选项]...用户名</code></li></ul><p><strong>常用命令选项</strong></p><ul><li><code>-u：指定 UID 标记号</code></li><li><code>-d</code>：指定宿主目录，缺省为 <code>/home/用户名</code></li><li><code>-e</code>：指定帐号失效时间</li><li><code>-g</code>：指定用户的基本组名（或GID号）</li><li><code>-G</code>：指定用户的附加组名（或GID号）</li><li>-M：不为用户建立并初始化宿主目录</li><li><code>-s</code>：指定用户的登录Shell</li><li>-c：用户注释描述信息</li><li>-r:新建系统用户，不会有新建家目录</li></ul><p>#注：每次新建用户，uid都会在上一个用户uid基础上+1<br>#注：默认新建用户从1001开始</p><p><strong>Shell设置</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/bin/bash<span class="comment"># 注：系统默认用户的shell环境信息 --&gt; 正常使用的shell</span></span><br><span class="line">/bin/sync<span class="comment"># 注：将内存里的缓存刷新到磁盘 --&gt; 类似于Python中fp.flush()</span></span><br><span class="line">/sbin/halt<span class="comment"># 注：登陆就关机</span></span><br><span class="line">/sbin/nologin<span class="comment"># 注：用户不能登录，ssh和su都不能登陆</span></span><br><span class="line">/sbin/shutdown<span class="comment"># 注：登陆就关机</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">示例：-s /sbin/nologin</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#注：本机用来跑服务的，不能登录</span></span><br><span class="line">[root@localhost mail]<span class="comment"># useradd -s /sbin/nologin sanchuang2</span></span><br><span class="line">[root@localhost mail]<span class="comment"># echo 123456|passwd sanchuang2 --stdin</span></span><br><span class="line">更改用户 sanchuang2 的密码 。</span><br><span class="line">passwd：所有的身份验证令牌已经成功更新。</span><br><span class="line">[root@localhost mail]<span class="comment"># ssh sanchuang2@192.168.136.136#注：ssh 登录本机sanchuang2</span></span><br><span class="line">……………………………………</span><br><span class="line">Are you sure you want to <span class="built_in">continue</span> connecting (<span class="built_in">yes</span>/no)? <span class="built_in">yes</span></span><br><span class="line">Warning: Permanently added <span class="string">&#x27;192.168.136.136&#x27;</span> (ECDSA) to the list of known hosts.</span><br><span class="line">sanchuang2@192.168.136.136<span class="string">&#x27;s password: </span></span><br><span class="line"><span class="string">This account is currently not available.# 注：提示用户不可达，因为sanchuang2的Shell是nologin，不能直接登录</span></span><br><span class="line"><span class="string">Connection to 192.168.136.136 closed.</span></span><br><span class="line"><span class="string">[root@localhost ~]# su - sanchuang2# 注：不能切换</span></span><br><span class="line"><span class="string">上一次登录：四 11月  5 11:49:14 CST 2020从 192.168.136.136pts/2 上</span></span><br><span class="line"><span class="string">This account is currently not available.</span></span><br><span class="line"><span class="string">--------------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">[root@localhost ~]# usermod -s /bin/bash sanchuang2# 注：usermod -s 更改用户的shell信息</span></span><br><span class="line"><span class="string">[root@localhost ~]# cat /etc/passwd|grep sanchuang2</span></span><br><span class="line"><span class="string">sanchuang2:x:1001:1001::/home/sanchuang2:/bin/bash</span></span><br></pre></td></tr></table></figure><h3 id="练习：显示出系统中uid大于1000并且用户名包含sanchuang的用户信息（用户名，用户Id，用户家目录）">练习：显示出系统中uid大于1000并且用户名包含sanchuang的用户信息（用户名，用户Id，用户家目录）</h3><p><strong>显示出系统中uid大于1000并且用户名包含sanchuang的用户信息（用户名，用户Id，用户家目录）</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># awk -F: &#x27;$3&gt;1000&#123;print $1,$3,$6&#125;&#x27; /etc/passwd</span></span><br><span class="line">sanchuang2 1001 /home/sanchuang2</span><br><span class="line">方法1</span><br><span class="line">[root@localhost ~]<span class="comment"># awk -F: &#x27;$3&gt;1000&#123;print $1,$3,$6&#125;&#x27; /etc/passwd |grep sanchuang</span></span><br><span class="line">sanchuang2 1001 /home/sanchuang2</span><br><span class="line">方法2</span><br><span class="line">[root@localhost ~]<span class="comment"># awk -F: &#x27;$3&gt;1000 &amp;&amp; $1 ~ /sanchuang/&#123;print $1,$3,$6&#125;&#x27; /etc/passwd</span></span><br><span class="line">sanchuang2 1001 /home/sanchuang2<span class="comment"># 注：$1 ~ /sanchuang/ 匹配sanchuang</span></span><br></pre></td></tr></table></figure><hr><h2 id="七-进程">七. 进程</h2><blockquote><p>进程：正在运行中的程序</p><p>程序：代码集合，放在磁盘上的</p><p>进程是计算机进行资源分配的基本单位</p><p>进程的组成核心：进程控制块（PCB）</p><p>PCB一般包括</p><p>1、pid进程唯一标识符</p><p>2、有效用户信息  -euid,egid(通常情况下就是uid,gid)# 注：就是进程属于哪个用户</p><p>3、程序的状态</p><p>4、程序的优先级</p><p>5、程序的上下文</p></blockquote><hr><h2 id="八-Python中使用os模块查看当前进程的用户信息">八. Python中使用os模块查看当前进程的用户信息</h2><p><strong>Python中使用os模块查看当前进程的用户信息</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> os</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.geteuid()<span class="comment"># 注：获取当前进程用户的用户uid信息</span></span><br><span class="line"><span class="number">0</span><span class="comment"># 注：为0的都是root用户  root用户的uid</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.getuid()<span class="comment"># 注：通常情况下，uid和euid都是一样的</span></span><br><span class="line"><span class="number">0</span></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">普通用户导入 os模块</span><br><span class="line">[sanchuang2@localhost ~]$ python3</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> os</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.geteuid()</span><br><span class="line"><span class="number">1001</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.getuid()</span><br><span class="line"><span class="number">1001</span></span><br><span class="line">[sanchuang2@localhost ~]$ <span class="built_in">id</span> sanchuang2</span><br><span class="line">uid=<span class="number">1001</span>(sanchuang2) gid=<span class="number">1001</span>(sanchuang2) 组=<span class="number">1001</span>(sanchuang2)</span><br></pre></td></tr></table></figure><hr><h2 id="九-ftp协议（文件传输协议）">九. ftp协议（文件传输协议）</h2><h3 id="9-1">9.1</h3><blockquote><p>vsftpd服务与本地用户</p><p>ftp的服务 做文件传输的，上传或下载一个文件到指定的地方</p><p>ftp是一个文件传输服务，主要用于上传和下载文件，实现文件共享</p><p>匿名用户和本地用户都可以登录ftp服务，它们登录进去之后只能操作家目录下的文件或者文件夹</p><p>三种用户：</p><p>1、匿名用户</p><p>2、本地用户# 注：ftp传输可以使用linux本地用户；ssh登录也可以用本地用户</p><p>3、虚拟用户</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line">============================================================================================</span><br><span class="line">1、服务安装</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># yum install vsftpd</span></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">2、启动服务</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># service vsftpd restart</span></span><br><span class="line">Redirecting to /bin/systemctl restart vsftpd.service</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># ps -ef |grep vsftp# 注：默认root用户启动</span></span><br><span class="line">root        3377       1  0 14:51 ?        00:00:00 /usr/sbin/vsftpd /etc/vsftpd/vsftpd.conf</span><br><span class="line">root        3379    3184  0 14:52 pts/1    00:00:00 grep --color=auto vsftp</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">3、安装客户端</span><br><span class="line"><span class="comment">#注：centos8里vsftpd服务默认不允许匿名用户登录</span></span><br><span class="line">使用匿名用户（ftp）登录的话，修改/etc/vsftpd/vsftpd.conf里的配置 anonymous_enable=YES</span><br><span class="line"><span class="comment">#注：修改完配置文件重启vsftpd服务</span></span><br><span class="line"></span><br><span class="line">登录上去之后，默认读取系统中ftp这个用户的家目录文件</span><br><span class="line">-----------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># yum install lftp -y# 注：lftp是vsftpd的客户端</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># yum install ftp-y# 注：ftp也是vsftpd的客户端</span></span><br><span class="line"><span class="comment">#注：这两个都是ftp的客户端</span></span><br><span class="line">============================================================================================</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># lftp ftp@192.168.0.27# 注：以ftp用户去登录程序</span></span><br><span class="line">密码:    <span class="comment"># 注：ftp是默认用户</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ftp 192.168.136.136# 注：登录ftp服务</span></span><br><span class="line">………………………………</span><br><span class="line">Name (192.168.136.136:root): ftp<span class="comment"># 注：匿名用户ftp登录</span></span><br><span class="line">331 Please specify the password.</span><br><span class="line">Password:<span class="comment"># 注：回车</span></span><br><span class="line">230 Login successful.</span><br><span class="line">………………………………</span><br><span class="line">ftp&gt; </span><br><span class="line">============================================================================================</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cat /etc/passwd</span></span><br><span class="line">ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin<span class="comment"># 注：vsftpd的匿名用户，公共用户</span></span><br><span class="line"><span class="comment">#注：/var/ftp  ftp这个用户的家目录文件</span></span><br><span class="line">============================================================================================</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># vim /etc/vsftpd/vsftpd.conf # 注：Centos8中开启匿名用户允许登录</span></span><br><span class="line">anonymous_enable=YES<span class="comment"># 注：centos7不用设置</span></span><br><span class="line"><span class="comment">#注：修改完配置文件重启vsftpd服务</span></span><br><span class="line">============================================================================================</span><br><span class="line">登录上去之后，默认读取系统中ftp这个用户的家目录文件</span><br><span class="line">/var/ftp</span><br><span class="line">-----------------------------------------------------</span><br><span class="line">[root@localhost ~]<span class="comment"># cd /var/ftp/</span></span><br><span class="line">[root@localhost ftp]<span class="comment"># ls</span></span><br><span class="line">pub</span><br><span class="line">[root@localhost ftp]<span class="comment"># cd pub</span></span><br><span class="line">[root@localhost pub]<span class="comment"># ls# 注：/var/ftp/pub/下为空</span></span><br><span class="line">[root@localhost pub]<span class="comment"># touch aa bb# 注：创建文件aa bb</span></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">ftp&gt; <span class="built_in">ls</span><span class="comment"># 注：当前路径 /var/ftp</span></span><br><span class="line">…………………………</span><br><span class="line">drwxr-xr-x    2 0        0              26 Nov 05 07:20 pub</span><br><span class="line">ftp&gt; <span class="built_in">cd</span> pub</span><br><span class="line">…………………………</span><br><span class="line">ftp&gt; <span class="built_in">ls</span><span class="comment"># 注：显示出文件aa bb</span></span><br><span class="line">…………………………</span><br><span class="line">-rw-r--r--    1 0        0               0 Nov 05 07:20 aa</span><br><span class="line">-rw-r--r--    1 0        0               0 Nov 05 07:20 bb</span><br><span class="line">226 Directory send OK.</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">ftp&gt; get aa<span class="comment"># 注：下载文件</span></span><br><span class="line"><span class="built_in">local</span>: aa remote: aa</span><br><span class="line">…………………………</span><br><span class="line">ftp&gt; !<span class="built_in">ls</span><span class="comment"># 注：查看当前所在系统命令有哪些文件</span></span><br><span class="line">aa addstr.py</span><br><span class="line">ftp&gt; !<span class="built_in">pwd</span><span class="comment"># 注：查看当前所在系统命令路径</span></span><br><span class="line">/root</span><br><span class="line"><span class="comment">#注：匿名用户不能上传</span></span><br><span class="line">============================================================================================</span><br><span class="line">[root@localhost ~]<span class="comment"># ftp 192.168.136.136</span></span><br><span class="line">Name (192.168.136.136:root): sanchuang<span class="comment"># 注：本地用户sanchuang登录</span></span><br><span class="line">Password:</span><br><span class="line">230 Login successful.<span class="comment"># 注：230 代表登录成功</span></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">ftp&gt; put first.py <span class="comment"># 注：上传文件</span></span><br><span class="line"><span class="built_in">local</span>: first.py remote: first.py<span class="comment"># 注：匿名用户不能上传</span></span><br><span class="line">…………………………</span><br><span class="line">1097 bytes sent <span class="keyword">in</span> 0.0157 secs (69.83 Kbytes/sec)</span><br><span class="line">ftp&gt; <span class="built_in">ls</span></span><br><span class="line">…………………………</span><br><span class="line">-rw-r--r--    1 1000     1000         1097 Nov 05 07:34 first.py</span><br><span class="line">226 Directory send OK.</span><br><span class="line">============================================================================================</span><br><span class="line">[root@localhost pub]<span class="comment"># less /etc/services # 注：# less /etc/services 查看默认端口号</span></span><br><span class="line">ftp             21/tcp<span class="comment"># 注：ftp服务默认是21号端口</span></span><br><span class="line">ftp             21/udp          fsp fspd</span><br></pre></td></tr></table></figure><h3 id="9-2-匿名用户和本地用户都可以登录ftp服务，它们登录进去之后只能操作家目录下的文件或者文件夹">9.2 匿名用户和本地用户都可以登录ftp服务，它们登录进去之后只能操作家目录下的文件或者文件夹</h3><p><strong>匿名用户和本地用户都可以登录ftp服务，它们登录进去之后只能操作家目录下的文件或者文件夹</strong></p><p><strong>三种用户：</strong><br>1、<strong>匿名用户</strong># 注：匿名用户  ftp ; 无需密码 ; 家目录 /var/ftp ； ftp也是系统的本地用户，系统自动创建ftp用户，nologin，可以通过ftp登录<br>2、<strong>本地用户</strong># 注：就是linux系统上的用户 ; ftp登录之后在本地用户家目录下<br>3、<strong>虚拟用户</strong># 注：建立出一个虚拟的用户，映射到本地用户</p><p>#注：/etc/passwd  第6个字段 是用户的家目录<br>#注：看用户的家目录 看/etc/passwd文件</p><h3 id="9-3-ftp常用命令">9.3 ftp常用命令</h3><p><strong>ftp常用命令</strong></p><blockquote><p>ftp常用命令：<br>上传文件：<strong>put</strong># 注：匿名用户不能上传<br>下载文件：<strong>get</strong><br>查看：<strong>ls</strong><br>切换路径：<strong>cd</strong></p></blockquote><h3 id="9-4-ftp的2种工作模式">9.4* ftp的2种工作模式</h3><p><strong>ftp的2种工作模式</strong>（面试）</p><p><strong>问的时候：总结（要提到端口号）</strong></p><p>主动模式和被动模式都会开启21号端口进行连接</p><p>区别是数据连接的方式</p><p>主动模式：服务器主动开启20号端口去和客户机主动建立数据连接，传输数据</p><p>被动模式：客户机拿到随机开放端口后向服务器进行一个数据传输，客户端向这个随机端口去建立连接，进行数据传输</p><blockquote><p><strong>一</strong>、<strong>主动模式</strong>（<strong>默认</strong>情况下是主动模式）</p><p>1、客户端登录时请求ftp服务器 命令连接端口（21号端口）</p><p>2、21号端口返回信息登录成功或者登录失败</p><p>3、登录成功后客户端请求传输数据（对21号端口发起一个请求），开启一个随机端口</p><p>4、服务器主动开启它的20号端口去把它的数据传递给客户端的随机端口</p><p>服务器主动开启20号端口，向客户机主动发送数据</p><p><strong>二</strong>、<strong>被动模式</strong></p><p>1、客户端登录时请求ftp服务器 开启 命令连接端口（21号端口）</p><p>#注：21号端口都是用来做命令连接的</p><p>2、21号端口返回信息登录成功或者登录失败</p><p>3、客户机请求数据传输（客户机向服务器请求数据传输时，向服务器发送一个pasv命令，告诉服务器端要以被动模式取接收命令。这时服务器端就开放一个端口，可以指定范围，返回给客户机，把这个端口号返回给客户端）</p><p>4、收到服务器开放端口号</p><p>5、开始连接服务器端口，进行数据传输（和5555号端口建立连接）</p><p>假设开放的是5555，服务器就会把5555端口起来，端口处于监听状态，别人就可以连接过来，就可以和这个主机建立连接，就可以通过5555号端口传递数据</p><p>#注：被动模式需要配置，默认主动模式</p><p>无论主动模式，还是被动模式，21号端口都必须起来</p><p>主动模式20号端口起来，被动模式20号端口不一定起来</p><p>#注：数据请求和命令请求不是同一个端口的</p><p><img src="https://image.cpen.top/image/image-20220812080812262.png" alt="image-20220812080812262"></p></blockquote><hr><h2 id="十-usermod-userdel">十. usermod userdel</h2><h3 id="usermod">usermod</h3><p><strong>usermod命令</strong></p><p>格式：<code>usermod[选项]...用户名</code></p><p><strong>常用命令选项</strong></p><ul><li>-l：更改用户帐号的登录名称</li><li>-L：锁定用户账户</li><li>-U：解锁用户账户</li><li>以下选项与useradd命令中的含义相同</li></ul><p>​-u、-d、-e、-g、-G、-s</p><h3 id="userdel">userdel</h3><p><strong>userdel命令</strong></p><ul><li>格式：<code>userdel [-r] 用户名 </code></li><li><strong>添加 -r 选项时，表示连用户的宿主目录一并删除</strong># 注：<strong>建议接上</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">示例</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@localhost ~]<span class="comment"># useradd stu01  </span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls -ld /home/stu01/</span></span><br><span class="line">drwx------ 2 stu01 stu01 4096 09-09 12:38 /home/stu01/  </span><br><span class="line">[root@localhost ~]<span class="comment"># userdel -r stu01# 注：删除用户帐号stu01</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls -ld /home/stu01/  </span></span><br><span class="line"><span class="built_in">ls</span>: /home/stu01/: 没有那个文件或目录</span><br></pre></td></tr></table></figure><hr><h2 id="十一-useradd">十一. useradd</h2><p><strong>useradd命令</strong></p><ul><li>格式：<code>useradd[选项]...用户名</code></li></ul><p><strong>常用命令选项</strong></p><ul><li><code>-u：指定 UID 标记号</code></li><li><code>-d</code>：指定宿主目录，缺省为 <code>/home/用户名</code></li><li><code>-e</code>：指定帐号失效时间</li><li><code>-g</code>：指定用户的基本组名（或GID号）# 注：基本组只能有一个</li><li><code>-G</code>：指定用户的附加组名（或GID号）# 注：附加组可以用很多个 无论基本组/附加组 用户都可以获得所有权限</li><li>-M：不为用户建立并初始化宿主目录</li><li><code>-s</code>：指定用户的登录Shell</li><li>-c：用户注释描述信息</li><li>-r: 新建系统用户，不会有新建家目录</li></ul><hr><h2 id="十二-用户">十二. 用户</h2><h3 id="12-1">12.1</h3><p><strong>用户账户：</strong></p><ul><li>超级用户<code>root</code># 注：拥有最高权限</li><li>程序用户    # 注：程序运行过程中需要使用的用户</li><li>普通用户    # 注：手动创建的用户</li></ul><p><strong>UID （User Identity，用户标识号）</strong></p><ul><li>超级用户root的UID为<code>0</code></li><li>程序用户的UID <code>1-999</code></li><li>普通用户的UID大于等于<code>1000</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">示例：mysql uid</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@localhost ~]<span class="comment"># id mysql</span></span><br><span class="line">uid=1000(mysql) gid=1000(mysql) 组=1000(mysql)</span><br><span class="line">[root@localhost ~]<span class="comment"># id sanchuang2</span></span><br><span class="line">uid=1001(sanchuang2) gid=1001(sanchuang2) 组=1001(sanchuang2)</span><br><span class="line"></span><br><span class="line">示例</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#注：默认情况不指定uid 在上一个用户前+1</span></span><br><span class="line">[root@localhost ~]<span class="comment"># useradd -u 1100 chenpeng1# 注：指定用户id</span></span><br><span class="line">[root@localhost ~]<span class="comment"># id chenpeng1</span></span><br><span class="line">uid=1100(chenpeng1) gid=1100(chenpeng1) 组=1100(chenpeng1)</span><br><span class="line">[root@localhost ~]<span class="comment"># useradd -u 1101 -g 1100 chenpeng2# 注：指定用户id、基本组</span></span><br><span class="line">[root@localhost ~]<span class="comment"># id chenpeng2# 注：在chenpeng1这个组里面</span></span><br><span class="line">uid=1101(chenpeng2) gid=1100(chenpeng1) 组=1100(chenpeng1)</span><br><span class="line"></span><br><span class="line">示例</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@localhost ~]<span class="comment"># usermod -u 1200 chenpeng2# 注：修改用户id</span></span><br><span class="line">[root@localhost ~]<span class="comment"># id chenpeng2</span></span><br><span class="line">uid=1200(chenpeng2) gid=1100(chenpeng1) 组=1100(chenpeng1)</span><br><span class="line"></span><br><span class="line">示例</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@localhost ~]<span class="comment"># useradd -d /var/log/sanchuang6 sanchuang6# 注：指定用户家目录</span></span><br><span class="line">[root@localhost ~]<span class="comment"># cd /var/log/sanchuang6/</span></span><br><span class="line">[root@localhost sanchuang6]<span class="comment"># ls</span></span><br><span class="line">[root@localhost sanchuang6]<span class="comment"># less /etc/passwd</span></span><br><span class="line">sanchuang6:x:1201:1201::/var/log/sanchuang6:/bin/bash<span class="comment"># 注：第6列 用户家目录</span></span><br><span class="line"></span><br><span class="line">示例：指定附加组</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@localhost sanchuang6]<span class="comment"># useradd -g chenpeng1 -G sanchuang,sanchuang2 sanchuang7</span></span><br><span class="line">[root@localhost sanchuang6]<span class="comment"># id sanchuang7</span></span><br><span class="line">uid=1202(sanchuang7) gid=1100(chenpeng1) 组=1100(chenpeng1),1000(sanchuang),1001(sanchuang2)</span><br><span class="line"><span class="comment">#注：基本组chenpeng1  附属组 sanchuang  sanchuang2</span></span><br><span class="line"><span class="comment">#注：-g指定基本组  -G指定附加组</span></span><br><span class="line">============================================================================================</span><br><span class="line">·-c：用户注释描述信息</span><br><span class="line">/etc/passwd  第5列可以查看描述信息</span><br></pre></td></tr></table></figure><h3 id="12-2-userdel-删除用户">12.2 userdel 删除用户</h3><p><strong>userdel命令</strong></p><p>格式：<code>userdel [-r] 用户名 </code></p><p>添加 -r 选项时，表示连用户的宿主目录一并删除</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">示例1</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@localhost ~]<span class="comment"># useradd stu01  </span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls -ld /home/stu01/</span></span><br><span class="line">drwx------ 2 stu01 stu01 4096 09-09 12:38 /home/stu01/  </span><br><span class="line">[root@localhost ~]<span class="comment"># userdel -r stu01# 注：删除用户帐号stu01</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls -ld /home/stu01/  </span></span><br><span class="line"><span class="built_in">ls</span>: /home/stu01/: 没有那个文件或目录</span><br><span class="line"></span><br><span class="line">示例2</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@localhost sanchuang6]<span class="comment"># userdel sanchuang7</span></span><br><span class="line">[root@localhost sanchuang6]<span class="comment"># less /etc/passwd# 注：删除了</span></span><br><span class="line">[root@localhost sanchuang6]<span class="comment"># cd /home/sanchuang7# 注：没删</span></span><br><span class="line">[root@localhost sanchuang7]<span class="comment"># ls /var/spool/mail/sanchuang7# 注：没删</span></span><br><span class="line">/var/spool/mail/sanchuang7</span><br></pre></td></tr></table></figure><hr><h2 id="十三-usermod-用户修改">十三. usermod 用户修改</h2><p>usermod命令</p><p>格式：<code>usermod[选项]...用户名</code></p><p>常用命令选项</p><ul><li>-l：更改用户帐号的登录名称</li><li>-L：锁定用户账户</li><li>-U：解锁用户账户</li><li>以下选项与useradd命令中的含义相同<br>-u、-d、-e、-g、-G、-s</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">示例：-L：锁定用户账户</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#注：锁上之后不能密码登录</span></span><br><span class="line"><span class="comment">#注：本质就是在shadow密码前面加一个！号，使得登录的时候密码验证失败</span></span><br><span class="line">[root@localhost sanchuang7]<span class="comment"># id sanchuang6</span></span><br><span class="line">uid=1201(sanchuang6) gid=1201(sanchuang6) 组=1201(sanchuang6)</span><br><span class="line">[root@localhost sanchuang7]<span class="comment"># usermod -L sanchuang6# 注：锁定用户账户</span></span><br><span class="line">[root@localhost sanchuang7]<span class="comment"># less /etc/shadow# 注：密码密文前面加了1个感叹号</span></span><br><span class="line">chenpeng2:!$6<span class="variable">$P3yFUy</span>.H<span class="variable">$UOfUIbl8V3h1ng4J</span>/OdVV1aWc3Cx3s5bldkysl33aDyrigsgK0VQ3nzrC4mojDNotpE9w61NbVQmZFqDDRfpl.:18571:0:99999:7:::</span><br><span class="line">[root@localhost sanchuang7]<span class="comment"># diff /etc/shadow /etc/shadow-</span></span><br><span class="line">25c25</span><br><span class="line">&lt; chenpeng2:!$6<span class="variable">$P3yFUy</span>.H<span class="variable">$UOfUIbl8V3h1ng4J</span>/OdVV1aWc3Cx3s5bldkysl33aDyrigsgK0VQ3nzrC4mojDNotpE9w61NbVQmZFqDDRfpl.:18571:0:99999:7:::</span><br><span class="line">---</span><br><span class="line">&gt; chenpeng2:$6<span class="variable">$P3yFUy</span>.H<span class="variable">$UOfUIbl8V3h1ng4J</span>/OdVV1aWc3Cx3s5bldkysl33aDyrigsgK0VQ3nzrC4mojDNotpE9w61NbVQmZFqDDRfpl.:18571:0:99999:7:::</span><br><span class="line"><span class="comment">#注：sha512加密技术  密文 明文</span></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@localhost ~]<span class="comment"># ssh chenpeng2@192.168.0.188</span></span><br><span class="line">chenpeng2@192.168.0.188<span class="string">&#x27;s password: # 注：锁上之后不能密码登录</span></span><br><span class="line"><span class="string">Permission denied, please try again.</span></span><br><span class="line"><span class="string">…………………………</span></span><br><span class="line"><span class="string">Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password).</span></span><br></pre></td></tr></table></figure><hr><h2 id="十四-etc-shadow">十四. /etc/shadow</h2><p><strong>用于保存密码字串、密码有效期等信息</strong></p><ul><li><p>文件位置：<code>/etc/shadow</code>   # 注：存放用户密码的文件，只能root用户查看</p></li><li><p>每一行对应一个用户的密码记录</p></li><li><p>字段1：用户帐号的名称</p></li><li><p><code>字段2：加密的密码字串信息</code> # 注：字段2就是存放密码的字段存放的密码是加密的 密文，sha512算法加密</p></li><li><p>字段3：上次修改密码的时间</p></li><li><p>字段4：密码的最短有效天数，默认值为0</p></li><li><p>字段5：密码的最长有效天数，默认值为99999</p></li><li><p>字段6：提前多少天警告用户口令将过期，默认值为7</p></li><li><p>字段7：在密码过期之后多少天禁用此用户</p></li><li><p>字段8：帐号失效时间，默认值为空</p></li><li><p>字段9：保留字段（未使用）</p></li></ul><hr><h2 id="十五-passwd">十五. passwd</h2><p><strong>passwd命令</strong></p><ul><li>格式：<code>passwd [选项]... 用户名</code></li></ul><p><strong>常用命令选项</strong></p><ul><li>-d：清空用户的密码，使之无需密码即可登录</li><li>-l：锁定用户帐号</li><li>-S：查看用户帐号的状态（是否被锁定）</li><li>-u：解锁用户帐号</li><li>–stdin：接收别的命令stdout做为stdin标准输入设置密码</li></ul><p><code>root用户可以修改所有用户密码，不要求复杂性</code></p><p><code>普通用户只能改自己的密码，要求复杂性</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">示例</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@localhost sanchuang7]<span class="comment"># passwd -d sanchuang6# 注：清空用户密码</span></span><br><span class="line">清除用户的密码 sanchuang6。</span><br><span class="line">passwd: 操作成功</span><br><span class="line">[root@localhost sanchuang7]<span class="comment"># useradd sanchuang5# 注：注册 未给密码</span></span><br><span class="line">[root@localhost mail]<span class="comment"># less /etc/shadow</span></span><br><span class="line">sanchuang6::18571:0:99999:7:::<span class="comment"># 注：清除用户密码，密码字段为空</span></span><br><span class="line">sanchuang5:!!:18571:0:99999:7:::<span class="comment"># 注：未给密码 密码字段默认2个感叹号</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#usermod和passwd锁定账户都是修改账户的shadow加密字段信息，使他们登录的时候密码匹配不上，达到一个锁定状态</span></span><br><span class="line"><span class="comment">#usermod -L   加一个!号# 注：锁定用户在shadow密码字段前加一个！号</span></span><br><span class="line"><span class="comment">#passwd -l 加两个!号# 注：锁定用户在shadow密码字段前加两个！号</span></span><br><span class="line"><span class="comment">#注：查看用户有没有设置密码  看/etc/shadow信息</span></span><br><span class="line"></span><br><span class="line">示例：usermod -L 和 passwd -l锁定用户</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@localhost mail]<span class="comment"># useradd chen001</span></span><br><span class="line">[root@localhost mail]<span class="comment"># useradd chen002</span></span><br><span class="line">[root@localhost mail]<span class="comment"># useradd chen003</span></span><br><span class="line">[root@localhost mail]<span class="comment"># echo 123456|passwd chen001 --stdin</span></span><br><span class="line">[root@localhost mail]<span class="comment"># echo 123456|passwd chen002 --stdin</span></span><br><span class="line">[root@localhost mail]<span class="comment"># echo 123456|passwd chen003 --stdin</span></span><br><span class="line">[root@localhost mail]<span class="comment"># usermod -L chen002# 注：chen002做 usermod -L 操作</span></span><br><span class="line">[root@localhost mail]<span class="comment"># passwd -d chen003# 注：chen003做 passwd -d  操作</span></span><br><span class="line">清除用户的密码 chen003。</span><br><span class="line">passwd: 操作成功</span><br><span class="line">[root@localhost mail]<span class="comment"># less /etc/shadow</span></span><br><span class="line">chen001:$6<span class="variable">$y</span>……k1q.yk8U1gOGp/:18571:0:99999:7:::</span><br><span class="line">chen002:!$6<span class="variable">$u</span>……YF0.:18571:0:99999:7:::</span><br><span class="line">chen003::18571:0:99999:7:::</span><br><span class="line">-------------------------------------------------------------------------</span><br><span class="line">[root@localhost ~]<span class="comment"># ssh chen003@192.168.136.136# 注：登录不上去</span></span><br><span class="line">chen003@192.168.136.136<span class="string">&#x27;s password: </span></span><br><span class="line"><span class="string">…………</span></span><br><span class="line"><span class="string">Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password).</span></span><br><span class="line"><span class="string">[root@localhost ~]# ssh chen002@192.168.136.136# 注：登录不上去</span></span><br><span class="line"><span class="string">chen002@192.168.136.136&#x27;</span>s password: </span><br><span class="line">…………</span><br><span class="line">Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password).</span><br><span class="line">[root@localhost ~]<span class="comment"># ssh chen001@192.168.136.136# 注：没做操作的 远程登录成功</span></span><br><span class="line">chen001@192.168.136.136<span class="string">&#x27;s password: </span></span><br><span class="line"><span class="string">[chen001@localhost ~]$ </span></span><br></pre></td></tr></table></figure><hr><h2 id="十六-etc-group">十六. /etc/group</h2><p><strong>/etc/group</strong></p><p>​字段一：组名</p><p>​字段二：密码字段</p><p>​字段三：组id</p><p>​字段四：存放是当前组为附属组时，有哪些用户</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">示例</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@localhost ~]<span class="comment"># less /etc/group</span></span><br><span class="line">tech:x:200:b1,b2,a1,a2</span><br></pre></td></tr></table></figure><hr>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> 用户与组 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>13_Linux基础-SHELL命令-wc-diff-patch-bc-awk</title>
      <link href="/blog/posts/9132.html"/>
      <url>/blog/posts/9132.html</url>
      
        <content type="html"><![CDATA[<p>摘要：博客迁移 <a href="https://blog.csdn.net/cpen_web"><code>https://blog.csdn.net/cpen_web</code></a> → 本站<span id="more"></span></p><h1 id="13-Linux基础-SHELL命令-wc-diff-patch-bc-awk">13_Linux基础-SHELL命令-wc-diff-patch-bc-awk</h1><p><a href="https://blog.csdn.net/cpen_web">博客🔗：https://blog.csdn.net/cpen_web</a></p><hr><h2 id="一-回顾">一. 回顾</h2><h3 id="sort">sort</h3><p><strong>sort</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">格式：sort 选项 文件</span><br><span class="line">-n按数值进行排序</span><br><span class="line">-r降序排序</span><br><span class="line">-k指定排序的列</span><br><span class="line">-t指定分隔符</span><br><span class="line">-u去重</span><br></pre></td></tr></table></figure><h3 id="uniq">uniq</h3><p><strong>uniq</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">格式：uniq 选项 文件</span><br><span class="line">-c统计每列在文本中出现的次数</span><br><span class="line">-u仅显示出现一次的行</span><br><span class="line">-d仅显示重复出现的行</span><br></pre></td></tr></table></figure><h3 id="cut">cut</h3><p><strong>cut</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">格式：cut 选项 提取范围 文件</span><br><span class="line">-d指定分隔符</span><br><span class="line">-f指定显示的特定字段</span><br><span class="line">-c指定特定字符</span><br></pre></td></tr></table></figure><h3 id="文本三剑客">文本三剑客</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">grep 过滤 通用的正则表达式分析程序</span><br><span class="line">grep [选项]... 模式 目标文件</span><br><span class="line">-i不区分大小写</span><br><span class="line">-v反转查找，不显示包含指定字符的行</span><br><span class="line">-o显示匹配的内容，并且换行显示</span><br><span class="line">-n显示出过滤出来的行的行号</span><br><span class="line">-r递归查找指定目录下所有的文件（包括其子目录）</span><br><span class="line">-E支持更多的正则扩展表达式</span><br></pre></td></tr></table></figure><h3 id="正则表达式">正则表达式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">^aa以aa开头的行</span><br><span class="line">Aa$以aa结尾的行</span><br></pre></td></tr></table></figure><h3 id="通配符">通配符</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">*表示匹配前一项任意次</span><br><span class="line">?表示匹配前一次0次或1次</span><br><span class="line">+表示匹配前一项一次到多次</span><br><span class="line">.（占位符）表示除换行符之外的任意字符</span><br><span class="line">&#123;n,m&#125;匹配n到m次</span><br><span class="line">&#123;,n&#125;匹配0次到n次</span><br><span class="line">&#123;m,&#125;匹配m次以上</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[]集合表示</span><br><span class="line">[a-zA-Z]</span><br><span class="line">[0-9]</span><br><span class="line">[^a]表示不取a</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">示例</span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment"># grep -E &quot;a.*c&quot; grep_test.txt # 注：.* 匹配前一项 . 0次或任意次</span></span><br><span class="line"><span class="comment"># grep -E &quot;a*c&quot; abc.txt --color=auto# 注：*  匹配前一项 a 0次或任意次</span></span><br><span class="line"><span class="comment"># grep -E &quot;a+c&quot; abc.txt --color=auto# 注：+  匹配前一项 a 1次或多次</span></span><br></pre></td></tr></table></figure><hr><h2 id="二-wc">二. wc</h2><p>wc（字数统计）命令</p><p>格式：<code>wc[选项]...目标文件...</code></p><ul><li><strong>-l：统计行数</strong></li><li><strong>-w：统计字数 （前后都是空白的一组字符）</strong></li><li><strong>-c：统计字符数（可见和不可见的字符）</strong></li></ul><p>注：wc文本操作命令，可以直接接文本，不需要用cat</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@sanchuang-linux ~]<span class="comment"># cat wc_test.txt </span></span><br><span class="line">a b c</span><br><span class="line">aa bb cc</span><br><span class="line">xyz</span><br><span class="line">1234</span><br><span class="line">aa-bb</span><br><span class="line"></span><br><span class="line">示例</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># wc -l wc_test.txt # 注：统计行数</span></span><br><span class="line">5 wc_test.txt</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># wc -w wc_test.txt # 注：统计字数</span></span><br><span class="line">9 wc_test.txt</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># wc -c wc_test.txt # 注：统计字符数</span></span><br><span class="line">30 wc_test.txt</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cat wc_test.txt|wc -c# 写法2：cat</span></span><br><span class="line">30</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># wc -c &lt; wc_test.txt # 写法3：重定向</span></span><br><span class="line">30</span><br></pre></td></tr></table></figure><hr><h2 id="三-diff">三. diff</h2><p>diff命令</p><ul><li>比较两个文件之间的差异</li><li>输出结果为两个文件的不同之处</li></ul><p>diff命令的输出格式</p><ul><li>标准diff</li><li><code>-u</code>：会将不同的地方放在一起，紧凑易读</li><li>-r： 递归比较目录下的所有文件</li></ul><p>利用diff命令生成补丁</p><ul><li><code>diff -u test1 test2 &gt; test.patch</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">[root@sanchuang-linux ~]<span class="comment"># cat diff_1_test.txt</span></span><br><span class="line">aa</span><br><span class="line">bb</span><br><span class="line">cc</span><br><span class="line">xx</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cat diff_2_test.txt</span></span><br><span class="line">aa</span><br><span class="line">bb</span><br><span class="line">xx</span><br><span class="line"></span><br><span class="line">示例1</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># diff diff_1_test.txt diff_2_test.txt </span></span><br><span class="line">3d2<span class="comment"># 注：3d2  文件1个第3行 需要删除 就会和 文件2相同</span></span><br><span class="line">&lt; cc<span class="comment"># 注：文件1 中的cc</span></span><br><span class="line">============================================================================================</span><br><span class="line"></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cat diff_1_test.txt</span></span><br><span class="line">aa</span><br><span class="line">bb</span><br><span class="line">cc</span><br><span class="line">xx</span><br><span class="line">gg</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cat diff_2_test.txt</span></span><br><span class="line">aa</span><br><span class="line">bb</span><br><span class="line"><span class="built_in">dd</span></span><br><span class="line">xx</span><br><span class="line">ee</span><br><span class="line"></span><br><span class="line">示例2</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># diff diff_1_test.txt diff_2_test.txt </span></span><br><span class="line">3c3<span class="comment"># 注：第3行</span></span><br><span class="line">&lt; cc<span class="comment"># 注：文件1 中的cc</span></span><br><span class="line">---</span><br><span class="line">&gt; <span class="built_in">dd</span><span class="comment"># 注：文件2 中的dd</span></span><br><span class="line">5c5<span class="comment"># 注：第5行</span></span><br><span class="line">&lt; gg<span class="comment"># 注：文件1 中的gg</span></span><br><span class="line">---</span><br><span class="line">&gt; ee<span class="comment"># 注：文件2 中的ee</span></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">============================================================================================</span><br><span class="line"></span><br><span class="line">示例3：-u：会将不同的地方放在一起，紧凑易读</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># diff -u diff_1_test.txt diff_2_test.txt </span></span><br><span class="line">--- diff_1_test.txt2020-10-30 11:50:45.784010843 +0800</span><br><span class="line">+++ diff_2_test.txt2020-10-30 11:51:11.475010836 +0800</span><br><span class="line">@@ -1,5 +1,5 @@</span><br><span class="line"> aa</span><br><span class="line"> bb</span><br><span class="line">-cc<span class="comment"># 注：理解为 左 - 右 +</span></span><br><span class="line">+<span class="built_in">dd</span><span class="comment"># 注：或者理解为 左边 -cc +dd 就和右边相同</span></span><br><span class="line"> xx</span><br><span class="line">-gg</span><br><span class="line">+ee</span><br></pre></td></tr></table></figure><hr><h2 id="四-patch">四. patch</h2><p>patch命令：</p><ul><li>用途：用来打补丁修补文件</li><li>格式：<code>patch[选项]原始文件 &lt; 补丁文件</code></li><li><code>-p</code>N： N表示忽略N层路径</li><li><code>-R</code>：  还原到老版本</li></ul><p>注意事项</p><ul><li>如果打多个补丁，注意先后顺序</li><li>打补丁前不要修改源文件</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">示例</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># yum install patch</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># diff diff_1_test.txt diff_2_test.txt </span></span><br><span class="line">3c3<span class="comment"># 注：差异内容</span></span><br><span class="line">&lt; cc</span><br><span class="line">---</span><br><span class="line">&gt; <span class="built_in">dd</span></span><br><span class="line">5c5</span><br><span class="line">&lt; gg</span><br><span class="line">---</span><br><span class="line">&gt; ee</span><br><span class="line"></span><br><span class="line"><span class="comment">#注：差异文件又叫补丁文件</span></span><br><span class="line"><span class="comment">#注：生成的是文件1的补丁文件</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># diff -u diff_1_test.txt diff_2_test.txt &gt; diff_test.patch # 注：1的补丁</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cat diff_test.patch #注：补丁文件</span></span><br><span class="line">--- diff_1_test.txt2020-10-30 11:50:45.784010843 +0800</span><br><span class="line">+++ diff_2_test.txt2020-10-30 11:51:11.475010836 +0800</span><br><span class="line">@@ -1,5 +1,5 @@</span><br><span class="line"> aa</span><br><span class="line"> bb</span><br><span class="line">-cc</span><br><span class="line">+<span class="built_in">dd</span></span><br><span class="line"> xx</span><br><span class="line">-gg</span><br><span class="line">+ee</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># patch diff_1_test.txt &lt; diff_test.patch # 注：打补丁</span></span><br><span class="line">patching file diff_1_test.txt</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cat diff_1_test.txt # 注：打补丁</span></span><br><span class="line">aa</span><br><span class="line">bb</span><br><span class="line"><span class="built_in">dd</span></span><br><span class="line">xx</span><br><span class="line">ee</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cat diff_2_test.txt # 注：文件1、2内容相同</span></span><br><span class="line">aa</span><br><span class="line">bb</span><br><span class="line"><span class="built_in">dd</span></span><br><span class="line">xx</span><br><span class="line">ee</span><br></pre></td></tr></table></figure><hr><h2 id="五-grep-A-B">五. grep -A\-B</h2><p>-A：找到匹配行以及后几行</p><p>-B：输出匹配行以及前几行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">示例</span><br><span class="line">[root@localhost ~]<span class="comment"># grep -A 3 quit /etc/passwd# 注：找到匹配行以及后几行</span></span><br><span class="line">[root@localhost ~]<span class="comment"># grep -B 3 quit /etc/passwd# 注：输出匹配行以及前几行</span></span><br></pre></td></tr></table></figure><hr><h2 id="六-free-g">六. free -g</h2><p><strong>看内存使用率 free -g</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@sanchuang-linux ~]<span class="comment"># free -g# 注：看内存使用率 ，-g单位G ， -m单位M</span></span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:              1           0           1           0           0           1</span><br><span class="line">Swap:             1           0           1</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># free -m</span></span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:           1800         272        1101           8         426        1363</span><br><span class="line">Swap:          2047           0        2047</span><br></pre></td></tr></table></figure><hr><h2 id="七-编写脚本">七. 编写脚本</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">实现以下功能</span><br><span class="line">1、监控内存使用情况,如果内存使用率大于百分之80，给予提醒</span><br><span class="line">total free 使用率</span><br><span class="line">2、扫描局域网ip,检查哪些ip地址正在使用</span><br><span class="line">ping -c 1<span class="comment"># 注：发送1个包</span></span><br><span class="line">3、监控文件/etc/passwd是否被修改，每隔5分钟监控一次</span><br><span class="line">diff</span><br><span class="line"><span class="built_in">md5sum</span><span class="comment"># md5值，文件的唯一标识</span></span><br><span class="line">4、监控nginx进程是否存在，不存在就给予相应提醒</span><br><span class="line">pidof nginx</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># md5sum abc.txt # 注：md5值</span></span><br><span class="line">2416b02c3d9d753f48cf49dbb5f1de94  abc.txt</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># pidof nginx# 注：显示指定程序的进程号</span></span><br><span class="line">12767 12766 12765</span><br></pre></td></tr></table></figure><h3 id="7-1-监控内存使用情况-如果内存使用率大于百分之80，给予提醒">7.1 监控内存使用情况,如果内存使用率大于百分之80，给予提醒</h3><p>​total free 使用率</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line">示例</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">mem</span></span>()&#123;</span><br><span class="line">    total=`free -m|grep -i mem|<span class="built_in">tr</span> -s <span class="string">&quot; &quot;</span>|<span class="built_in">cut</span> -d <span class="string">&quot; &quot;</span> -f2`</span><br><span class="line">    <span class="comment">#free=`free -m|grep -i mem|tr -s &quot; &quot;|cut -d &quot; &quot; -f4`</span></span><br><span class="line">    used=`free -m|grep -i mem|<span class="built_in">tr</span> -s <span class="string">&quot; &quot;</span>|<span class="built_in">cut</span> -d <span class="string">&quot; &quot;</span> -f3`</span><br><span class="line">    used_rate=`<span class="built_in">echo</span> <span class="string">&quot;scale=4;<span class="variable">$used</span>/<span class="variable">$total</span>&quot;</span> |bc`</span><br><span class="line">    <span class="comment">#used_1=`echo &quot;$total*0.8&quot;|bc `</span></span><br><span class="line">    result=` <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$used_rate</span>&gt;0.8&quot;</span>|bc `</span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$result</span></span><br><span class="line">    <span class="keyword">if</span> (( <span class="variable">$result</span>  == 1 ))</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">&quot;\e[31m使用率超过80%，请及时对内存扩容，以免不必要的损失\e[0m&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span>  <span class="string">&quot; nothing to do&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line">mem</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># bash mem_test.sh</span></span><br><span class="line">0</span><br><span class="line"> nothing to <span class="keyword">do</span></span><br><span class="line">============================================================================================</span><br><span class="line">知识点7.1.1 bc 命令</span><br><span class="line">菜鸟教程：https://www.runoob.com/linux/linux-comm-bc.html</span><br><span class="line">bc 命令是任意精度计算器语言，通常在linux下当计算器用</span><br><span class="line">[root@localhost ~]<span class="comment"># yum install bc -y</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># used=`free -m|grep -i mem|tr -s &quot; &quot;|cut -d &quot; &quot; -f3`</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># total=`free -m|grep -i mem|tr -s &quot; &quot;|cut -d &quot; &quot; -f2`</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo &quot;scale=2;$used/$total&quot; |bc# 注：保留2位小数</span></span><br><span class="line">.16</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo &quot;scale=3;$used/$total&quot; |bc# 注：保留3位小数</span></span><br><span class="line">.165</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># free -m|grep -i mem|tr -s &quot; &quot;|cut -d &quot; &quot; -f2 # 注：-i 不区分大小写</span></span><br><span class="line">1800</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># use_rate=`echo &quot;scale=4;$used/$total&quot; |bc`</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo &quot;$use_rate&gt;0.8&quot;|bc# 注：为假返回0</span></span><br><span class="line">0</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo &quot;0.7&gt;0.8&quot;|bc# 注：为假返回0</span></span><br><span class="line">0</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo &quot;0.9&gt;0.8&quot;|bc# 注：为真返回1</span></span><br><span class="line">1<span class="comment"># 注：这返回的应该是布尔值0假1真，而不是命令执行失败的值。$?都为0 ，命令执行成功</span></span><br><span class="line"><span class="comment">############################################################################################</span></span><br><span class="line">知识点7.1.2 小数的运算</span><br><span class="line">小数的运算：</span><br><span class="line">1、可以使用bc</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo &quot;scale=3;1/3&quot;|bc# 注：保留3位小数</span></span><br><span class="line">.333</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo &quot;0.7&gt;0.8&quot;|bc# 注：不成立返回0</span></span><br><span class="line">0</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo &quot;0.9&gt;0.8&quot;|bc# 注：成立返回1</span></span><br><span class="line">1</span><br><span class="line"></span><br><span class="line">2、awk 选项</span><br><span class="line">语法：awk 选项 ‘模式+动作’ 文件</span><br><span class="line">常用选项：</span><br><span class="line">-F指定分隔符</span><br><span class="line"></span><br><span class="line">内置变量</span><br><span class="line">NRawk里表示每一行的行号</span><br><span class="line">NFawk的列号</span><br><span class="line"></span><br><span class="line">模式</span><br><span class="line"></span><br><span class="line">示例</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@localhost ~]<span class="comment"># free -m</span></span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:           3770         195        3274          11         300        3348</span><br><span class="line">Swap:          2047           0        2047</span><br><span class="line">[root@localhost ~]<span class="comment"># free -m|awk &#x27;NR==2&#123;print $2&#125;&#x27;# 注：打印第二行 第2个变量</span></span><br><span class="line">3770<span class="comment"># 注：NR 行号 ， $2 第2个变量</span></span><br><span class="line">[root@localhost ~]<span class="comment"># free -m|awk &#x27;NR==2&#123;print $3&#125;&#x27;# 注：打印第二行 第3个变量</span></span><br><span class="line">194</span><br><span class="line">============================================================================================</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># free -m|awk &#x27;/Mem/&#123;print $3/$2&#125;&#x27;# 注：计算小数，过滤出Mem</span></span><br><span class="line">0.156111<span class="comment"># 注：过滤出Mem 这1行</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># free -m|awk &#x27;/Mem/&#123;printf &quot;%.2f\n&quot;, $3/$2&#125;&#x27;# 注：保留2位的浮点数</span></span><br><span class="line">0.16<span class="comment"># 注：\n换行输出</span></span><br></pre></td></tr></table></figure><h3 id="7-2-扫描局域网ip-检查哪些ip地址正在使用">7.2 扫描局域网ip,检查哪些ip地址正在使用</h3><p>​ping -c 1# 注：发送1个包</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">方法1</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="function"><span class="title">scan_ip</span></span>()&#123;</span><br><span class="line">    <span class="keyword">for</span> ip <span class="keyword">in</span> `<span class="built_in">seq</span> 255`</span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">        ( ip_full=192.168.0.<span class="variable">$ip</span></span><br><span class="line">        ping -c 1 <span class="variable">$ip_full</span> &amp;&gt;/dev/null &amp;&amp; <span class="built_in">echo</span> <span class="variable">$ip_full</span> &gt;&gt;up.txt || <span class="built_in">echo</span> <span class="variable">$ip_full</span> &gt;&gt;down.txt</span><br><span class="line">        ) &amp;<span class="comment"># 注：放到后台子进程执行</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line"><span class="built_in">wait</span> <span class="comment"># 父进程等待子进程执行完成之后再退出</span></span><br><span class="line">&#125;</span><br><span class="line">scan_ip</span><br><span class="line"></span><br><span class="line">方法2</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="function"><span class="title">scan_ip</span></span>()&#123;</span><br><span class="line">    <span class="keyword">for</span> ip <span class="keyword">in</span> 192.168.0.&#123;1..255&#125;<span class="comment"># 注：1-255可以这么写</span></span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">        ( </span><br><span class="line">        ping -c 1 <span class="variable">$ip</span> &amp;&gt;/dev/null &amp;&amp; <span class="built_in">echo</span> <span class="variable">$ip</span> &gt;&gt;up.txt || <span class="built_in">echo</span> <span class="variable">$ip</span> &gt;&gt;down.txt</span><br><span class="line">        ) &amp; </span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line"><span class="built_in">wait</span> <span class="comment">#注：作用：父进程等待子进程执行完成之后再退出</span></span><br><span class="line">&#125;</span><br><span class="line">scan_ip</span><br><span class="line">注：后台进程</span><br><span class="line">命令 &amp;   产生子bash进程去执行命令的任务</span><br><span class="line"><span class="built_in">wait</span>父进程等待子进程结束之后再退出</span><br><span class="line">============================================================================================</span><br><span class="line"></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># ip=45</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># ip_full=192.168.0.$ip# 注：shell 字符串的拼接</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $ip_full </span></span><br><span class="line">192.168.0.45</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># top# 注：查看cpu</span></span><br></pre></td></tr></table></figure><h3 id="7-3-监控nginx进程是否存在，不存在就给予相应提醒">7.3 监控nginx进程是否存在，不存在就给予相应提醒</h3><p>​pidof nginx</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">示例</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="function"><span class="title">check_nginx</span></span>()&#123;</span><br><span class="line">    pidof nginx &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;nginx is running&quot;</span> || <span class="built_in">echo</span> <span class="string">&quot;nginx is down&quot;</span></span><br><span class="line">    <span class="comment">#if [[ $? -eq 0 ]]</span></span><br><span class="line">    <span class="comment">#then</span></span><br><span class="line">    <span class="comment">#    echo &quot;nginx is running&quot;</span></span><br><span class="line">    <span class="comment">#fi</span></span><br><span class="line">&#125;</span><br><span class="line">check_nginx</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># pidof nginx</span></span><br><span class="line">12767 12766 12765</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $?# 注：返回值为0表示成功</span></span><br><span class="line">0</span><br></pre></td></tr></table></figure><h3 id="7-4-监控文件-etc-passwd是否被修改，每隔5分钟监控一次">7.4 监控文件/etc/passwd是否被修改，每隔5分钟监控一次</h3><p>​diff</p><p>​md5sum# md5值，文件的唯一标识</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">示例</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="function"><span class="title">check_monitor</span></span>()&#123;</span><br><span class="line">    check_num=`differ /etc/passwd /lianxi/passwd |<span class="built_in">wc</span> -l`</span><br><span class="line">    [[ check_num -eq 0 ]] &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;文件未被修改&quot;</span> || <span class="built_in">echo</span> <span class="string">&quot;文件已被修改&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">check_monitor</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cp /etc/passwd /lianxi/passwd</span></span><br><span class="line"><span class="built_in">cp</span>：是否覆盖<span class="string">&#x27;/lianxi/passwd&#x27;</span>？ y</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># diff /etc/passwd /lianxi/passwd</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $?# 注：即使文件不被修改，返回也为0 （理解为命令执行成功）</span></span><br><span class="line">0<span class="comment"># 注：所以不能直接用类三元运算 去判断</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># diff /etc/passwd /lianxi/passwd</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># diff /etc/passwd /lianxi/passwd|wc</span></span><br><span class="line">      0       0       0</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># diff /etc/passwd /lianxi/passwd|wc -l</span></span><br><span class="line">0</span><br><span class="line"><span class="comment">#注：判定依据 diff 是否输出内容</span></span><br><span class="line">没有输出内容，<span class="built_in">wc</span> -l 行数为0，说明文件未被修改</span><br><span class="line"><span class="comment">#注：文件是否被修改，想到diff命令</span></span><br></pre></td></tr></table></figure><hr>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>12_Linux基础-SHELL命令-sort-uniq-cut-grep-正则表达式-通配符</title>
      <link href="/blog/posts/61496.html"/>
      <url>/blog/posts/61496.html</url>
      
        <content type="html"><![CDATA[<p>摘要：博客迁移 <a href="https://blog.csdn.net/cpen_web"><code>https://blog.csdn.net/cpen_web</code></a> → 本站<span id="more"></span></p><h1 id="12-Linux基础-SHELL命令-sort-uniq-cut-grep-正则表达式-通配符">12_Linux基础-SHELL命令-sort-uniq-cut-grep-正则表达式-通配符</h1><p><a href="https://blog.csdn.net/cpen_web">博客🔗：https://blog.csdn.net/cpen_web</a></p><hr><h2 id="一-回顾">一. 回顾</h2><p><strong>回顾1 shell常用命令</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">获取命令的返回输出结果</span><br><span class="line">1.` `，反引号 line=`ls`</span><br><span class="line">2.$()line=$(ls)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">seq 类似于python里的range</span><br><span class="line">主要生产一组有序数字序列</span><br><span class="line">-s 指定分隔符</span><br><span class="line">-w 指定同等宽度输出</span><br></pre></td></tr></table></figure><hr><h2 id="二-sort">二. sort</h2><p><strong>sort命令</strong></p><ul><li>默认按每行的第一个字符排序</li><li>-n：按<strong>整数</strong>进行排序–&gt;默认是<strong>升序</strong></li><li>-r：<strong>递减</strong>排序（注：降序）</li><li>-u：去重</li></ul><p><code>指定排序键</code></p><ul><li>指定按哪一列数据进行排序</li><li>-k：指定哪一列为排序键</li><li><code>cat tt | sort -n -k4</code></li></ul><p><code>指定字段分隔符</code></p><ul><li>-t：指定字段分割符（默认是空白）</li><li><code>sort -t: -n -k3 /etc/passwd</code># 注：指定分隔符为 :</li></ul><p><strong>sort是一个排序命令</strong></p><ul><li><strong>默认按照每行第一个首字符进行排序</strong><ul><li><strong>英文根据a-z的顺序进行排序，如果第一个字母相同，就比较第二个字母，依次类推</strong></li><li><strong>中文根据首个字符的拼音的首字母进行排序</strong></li></ul></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">示例1：<span class="built_in">cat</span> sort_test.txt |<span class="built_in">sort</span></span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cat sort_test.txt # 注：显示文本内容</span></span><br><span class="line">中文 456 1xx  123</span><br><span class="line">abc bcd  3yy <span class="built_in">dd</span></span><br><span class="line">Aac XYZ  2zz</span><br><span class="line">三创 xixi</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cat sort_test.txt |sort# 注：对整个文本进行排序</span></span><br><span class="line">三创 xixi</span><br><span class="line">中文 456 1xx  123</span><br><span class="line">Aac XYZ  2zz</span><br><span class="line">abc bcd  3yy <span class="built_in">dd</span></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">&gt;&gt;&gt; ord(<span class="string">&quot;三&quot;</span>)<span class="comment"># python中的ord()函数查看万国码编码</span></span><br><span class="line">19977<span class="comment"># 注：sort不是按编码排序</span></span><br><span class="line">&gt;&gt;&gt; ord(<span class="string">&quot;中&quot;</span>)</span><br><span class="line">20013</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># locale# 注：查看编码格式</span></span><br><span class="line">LANG=zh_CN.UTF-8</span><br><span class="line">LC_CTYPE=<span class="string">&quot;zh_CN.UTF-8&quot;</span></span><br><span class="line">LC_NUMERIC=<span class="string">&quot;zh_CN.UTF-8&quot;</span></span><br><span class="line">LC_TIME=<span class="string">&quot;zh_CN.UTF-8&quot;</span></span><br><span class="line">LC_COLLATE=<span class="string">&quot;zh_CN.UTF-8&quot;</span></span><br><span class="line">LC_MONETARY=<span class="string">&quot;zh_CN.UTF-8&quot;</span></span><br><span class="line">LC_MESSAGES=<span class="string">&quot;zh_CN.UTF-8&quot;</span></span><br><span class="line">LC_PAPER=<span class="string">&quot;zh_CN.UTF-8&quot;</span></span><br><span class="line">LC_NAME=<span class="string">&quot;zh_CN.UTF-8&quot;</span></span><br><span class="line">LC_ADDRESS=<span class="string">&quot;zh_CN.UTF-8&quot;</span></span><br><span class="line">LC_TELEPHONE=<span class="string">&quot;zh_CN.UTF-8&quot;</span></span><br><span class="line">LC_MEASUREMENT=<span class="string">&quot;zh_CN.UTF-8&quot;</span></span><br><span class="line">LC_IDENTIFICATION=<span class="string">&quot;zh_CN.UTF-8&quot;</span></span><br><span class="line">LC_ALL=</span><br><span class="line">============================================================================================</span><br><span class="line">示例2：<span class="built_in">cat</span> sort_test.txt |<span class="built_in">sort</span> -k 2指定哪一列为排序键</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cat sort_test.txt |sort -k2# 注：指定第二列进行排序</span></span><br><span class="line">中文 456 1xx  123</span><br><span class="line">abc bcd  3yy <span class="built_in">dd</span></span><br><span class="line">三创 xixi</span><br><span class="line">Aac XYZ  2zz</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cat sort_test.txt |sort -k 3  # 注：指定第三列进行排序</span></span><br><span class="line">三创 xixi<span class="comment"># 注：空白在前面</span></span><br><span class="line">中文 456 1xx  123<span class="comment"># 注：1</span></span><br><span class="line">Aac XYZ  2zz <span class="comment"># 注：2</span></span><br><span class="line">abc bcd  3yy <span class="built_in">dd</span> <span class="comment"># 注：3</span></span><br><span class="line">============================================================================================</span><br><span class="line">示例3：英文根据a-z的顺序进行排序，如果第一个字母相同，就比较第二个字母</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cat sort_test.txt </span></span><br><span class="line">中文 456 1xx  123</span><br><span class="line">aac bcd  3yy <span class="built_in">dd</span></span><br><span class="line">Aac XYZ  2zz</span><br><span class="line">三创 xixi</span><br><span class="line">Xyz  cde</span><br><span class="line">Bbc  Abc</span><br><span class="line">bbc xxx</span><br><span class="line">ABC</span><br><span class="line">abc</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cat sort_test.txt |sort# 注：不是按照编码排序</span></span><br><span class="line">三创 xixi</span><br><span class="line">中文 456 1xx  123</span><br><span class="line">aac bcd  3yy <span class="built_in">dd</span></span><br><span class="line">Aac XYZ  2zz</span><br><span class="line">abc</span><br><span class="line">ABC</span><br><span class="line">Bbc  Abc</span><br><span class="line">bbc xxx</span><br><span class="line">Xyz  cde</span><br></pre></td></tr></table></figure><h3 id="sort-n">sort -n</h3><p><strong>sort -n 按数字进行排序</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[root@sanchuang-linux ~]<span class="comment"># a=123# 注：a表示的是字符</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># b=234</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $a+$b# 注：字符串的拼接</span></span><br><span class="line">123+234</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $(($a+$b))# 注：需要用2个括号进行数字的相加</span></span><br><span class="line">357</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cat aa.txt </span></span><br><span class="line">123</span><br><span class="line">23</span><br><span class="line">4</span><br><span class="line">234</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cat aa.txt |sort# 注：默认情况按首个字母字符串进行排序</span></span><br><span class="line">123</span><br><span class="line">23</span><br><span class="line">234</span><br><span class="line">4</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cat aa.txt |sort -n# 注：sort -n 按数值大小进行排序</span></span><br><span class="line">4<span class="comment"># 注：默认升序</span></span><br><span class="line">23<span class="comment"># 注：-n 数字排序比较</span></span><br><span class="line">123</span><br><span class="line">234</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cat aa.txt |sort -n -r# 注：数字、倒序 排序，效果相同</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cat aa.txt |sort -nr# 注：数字、倒序 排序，效果相同</span></span><br><span class="line">234</span><br><span class="line">123</span><br><span class="line">23</span><br><span class="line">4</span><br></pre></td></tr></table></figure><h3 id="t-指定列数的分隔符">-t 指定列数的分隔符</h3><p><strong>指定列数的分隔符<code># head -n7 /etc/passwd |sort -k6 -t :</code></strong></p><p>​<strong>默认分隔符为空白字符</strong></p><p>​<strong>使用 -t 指定列数的分隔符</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@sanchuang-linux ~]<span class="comment"># head -n7 /etc/passwd |sort# 注：取前7行 排序</span></span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line"><span class="built_in">sync</span>:x:5:0:<span class="built_in">sync</span>:/sbin:/bin/sync</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># head -n7 /etc/passwd |sort -k2# 注：sort -k2指定第2列为排序键</span></span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line"><span class="built_in">sync</span>:x:5:0:<span class="built_in">sync</span>:/sbin:/bin/sync</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># head -n7 /etc/passwd |sort -k6 -t :# *注：-t : 指定分隔符为 :</span></span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line"><span class="built_in">sync</span>:x:5:0:<span class="built_in">sync</span>:/sbin:/bin/sync</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># head -n7 /etc/passwd |sort -k6 -t : -r# 注：-r 倒序</span></span><br></pre></td></tr></table></figure><hr><h2 id="三-练习：找出内存使用率最高的5个进程">三. 练习：找出内存使用率最高的5个进程</h2><p><strong>找出内存使用率最高的5个进程</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ps aux|<span class="built_in">sort</span> -n -k4 -r|<span class="built_in">head</span> -5注：推荐</span><br><span class="line">注：内存使用率 %MEM</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># ps aux|tail -n +2|sort -nr -k4 |head -5</span></span><br><span class="line">root         960  0.0  2.0 221572 38096 ?        S    08:31   0:00 /usr/libexec/sssd/sssd_nss --uid 0 --gid 0 --logger=files</span><br><span class="line">root         930  0.0  1.7 425416 31480 ?        Ssl  08:31   0:01 /usr/libexec/platform-python -Es /usr/sbin/tuned -l -P</span><br><span class="line">polkitd      890  0.0  1.2 1625936 23856 ?       Ssl  08:31   0:00 /usr/lib/polkit-1/polkitd --no-debug</span><br><span class="line">root         891  0.0  0.9 391216 18088 ?        Ssl  08:31   0:00 /usr/sbin/NetworkManager --no-daemon</span><br><span class="line">root         954  0.0  0.8 219700 15416 ?        S    08:31   0:00 /usr/libexec/sssd/sssd_be --domain implicit_files --uid 0 --gid 0 --logger=files</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#ps aux|tail -n +2|sort -nr -k4 |head -5</span></span><br><span class="line">注：<span class="built_in">tail</span> -n +2 显示从第2行到末尾（可加可不加）</span><br><span class="line">注：<span class="built_in">sort</span> -nr -k4   -n按数字排序，-r倒序，-k4指定第4列为排序键</span><br><span class="line">注：<span class="built_in">head</span> -5 取前5行</span><br></pre></td></tr></table></figure><hr><h2 id="四-uniq">四. uniq</h2><p><strong>uniq命令的使用（去重）</strong></p><p>uniq --&gt; unique唯一的<br>去重相邻的行<br><strong>先排序，再去重</strong><br><strong>-c 统计重复出现的次数</strong><br><strong>-u 显示只出现1次的行</strong><br><strong>-d 显示重复出现的行</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">============================================================================================</span><br><span class="line">示例1：去重相邻的行</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cat uniq_test.txt</span></span><br><span class="line">123 abc</span><br><span class="line">abc 123</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">45</span><br><span class="line">45</span><br><span class="line">47</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">47</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cat uniq_test.txt |uniq# 注：去重相邻的行</span></span><br><span class="line">123 abc</span><br><span class="line">abc 123</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">45</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">47</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cat uniq_test.txt |sort -n |uniq# 注：先排序，再去重</span></span><br><span class="line">abc 123<span class="comment"># 注：一般来说，先排序，再去重</span></span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">123 abc</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">示例1.1 <span class="comment"># cat uniq_test.txt |sort -nu</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cat uniq_test.txt |sort -n -u# 注：sort -u 也可以去重</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cat uniq_test.txt |sort -nu# 注：效果一样</span></span><br><span class="line">abc 123</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">123 abc</span><br><span class="line">============================================================================================</span><br><span class="line">示例2：-c 统计重复出现</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cat uniq_test.txt |sort -n |uniq -c    # 注： -c 统计重复出现的次数</span></span><br><span class="line">      1 abc 123</span><br><span class="line">      3 45</span><br><span class="line">      1 46</span><br><span class="line">      3 47</span><br><span class="line">      1 48</span><br><span class="line">      1 123 abc</span><br><span class="line">============================================================================================</span><br><span class="line">示例3：-u显示只出现1次的行</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cat uniq_test.txt |sort -n |uniq -u# 注：-u显示只出现1次的行</span></span><br><span class="line">abc 123</span><br><span class="line">46</span><br><span class="line">48</span><br><span class="line">123 abc</span><br><span class="line">============================================================================================</span><br><span class="line">示例4：-d 显示重复出现的行</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cat uniq_test.txt |sort -n |uniq -d# 注：-d 显示重复出现的行</span></span><br><span class="line">45</span><br><span class="line">47</span><br></pre></td></tr></table></figure><hr><h2 id="五-练习：统计120000行-频率前十的ip">五. 练习：统计120000行 频率前十的ip</h2><p><strong>统计120000行 频率前十的ip</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@sanchuang-linux ~]<span class="comment"># cat ips.txt |sort |uniq -c|sort -nr |head</span></span><br><span class="line"><span class="comment">#注1：第一个sort 把相同的ip段放在一起</span></span><br><span class="line"><span class="comment">#注2：uniq -c统计次数</span></span><br><span class="line"><span class="comment">#注：第二个sort -nr 对前面的次数+ip 进行逆序</span></span><br><span class="line"><span class="comment">#注：head 默认取前十个</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">注 :<span class="built_in">sort</span> -c 用于统计ip地址的访问</span><br><span class="line">[root@localhost ~]<span class="comment"># yum install nginx</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># nginx</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># lsof -i:80# 注：nginx起来了</span></span><br><span class="line">COMMAND   PID  USER   FD   TYPE DEVICE SIZE/OFF NODE NAME</span><br><span class="line">nginx   12765  root    9u  IPv4  60060      0t0  TCP *:http (LISTEN)</span><br><span class="line">nginx   12765  root   10u  IPv6  60061      0t0  TCP *:http (LISTEN)</span><br><span class="line">nginx   12766 nginx    9u  IPv4  60060      0t0  TCP *:http (LISTEN)</span><br><span class="line">nginx   12766 nginx   10u  IPv6  60061      0t0  TCP *:http (LISTEN)</span><br><span class="line">nginx   12767 nginx    9u  IPv4  60060      0t0  TCP *:http (LISTEN)</span><br><span class="line">nginx   12767 nginx   10u  IPv6  60061      0t0  TCP *:http (LISTEN)</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># iptables -F# 注：关闭防火墙</span></span><br><span class="line"></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cd /var/log# 注：/var/log放日志</span></span><br><span class="line">[root@sanchuang-linux <span class="built_in">log</span>]<span class="comment"># cd nginx</span></span><br><span class="line">[root@sanchuang-linux nginx]<span class="comment"># pwd</span></span><br><span class="line">/var/log/nginx</span><br><span class="line">[root@sanchuang-linux nginx]<span class="comment"># ls</span></span><br><span class="line">access.log  error.log<span class="comment"># 注：日志文件</span></span><br></pre></td></tr></table></figure><hr><h2 id="六-练习：统计web服务器访问前十的用户">六. 练习：统计web服务器访问前十的用户</h2><p><strong>统计web服务器访问前十的用户（注：通过ip判断）</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#注：nginx查看访问次数最多的3个ip(笔试题常见)</span></span><br><span class="line"><span class="comment">#cat access.log |awk &#x27;&#123;print $1&#125;&#x27;|sort|uniq -c|sort -nr|head -3</span></span><br><span class="line">[root@sanchuang-linux nginx]<span class="comment"># head access.log </span></span><br><span class="line">192.168.0.42 - - [29/Oct/2020:12:01:01 +0800] <span class="string">&quot;GET / HTTP/1.1&quot;</span> 200 4057 <span class="string">&quot;-&quot;</span> <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.25 Safari/537.36 Core/1.70.3823.400 QQBrowser/10.7.4307.400&quot;</span> <span class="string">&quot;-&quot;</span></span><br><span class="line">………………<span class="comment"># 注：awk命令 提取文本第一列数据 ip地址</span></span><br><span class="line">[root@sanchuang-linux nginx]<span class="comment"># cat access.log |awk &#x27;&#123;print $1&#125;&#x27;</span></span><br><span class="line">192.168.0.42<span class="comment"># 注：默认以空格为分隔符，打印第一列$1</span></span><br><span class="line">192.168.0.42</span><br><span class="line">192.168.0.42</span><br><span class="line">192.168.0.42</span><br><span class="line">192.168.0.42</span><br><span class="line">192.168.0.193</span><br><span class="line">192.168.0.193</span><br><span class="line">192.168.0.193</span><br><span class="line">192.168.0.193<span class="comment"># 注：awk命令 提取文本第一列数据 ip地址</span></span><br><span class="line">[root@sanchuang-linux nginx]<span class="comment"># cat access.log |awk &#x27;&#123;print $1&#125;&#x27;|sort|uniq -c|sort -nr|head -3</span></span><br><span class="line">      5 192.168.0.42<span class="comment"># 注：统计前3的访问量</span></span><br><span class="line">      4 192.168.0.193</span><br></pre></td></tr></table></figure><hr><h2 id="七-cut">七. cut</h2><p><strong>cut命令</strong></p><ul><li>从文本文件或者文本流中提取文本列</li><li><code>cut -选项 提取范围 文本文件</code></li></ul><p>-----------------------------------</p><p><strong>常见选项</strong></p><ul><li>-c：从指定提取范围中提取字符</li><li>-f：从指定提取范围中提取字段</li><li>-d：指定分隔符，默认分隔符为tab键</li></ul><p>-----------------------------------</p><p><strong>提取范围</strong></p><p><code>n：第n项</code></p><p><code>n-：第n项到行尾</code></p><p><code>-m：行首到第m项 </code></p><p><code>n,m：第n项和第m项 </code></p><p><code>n-m：第n项到第m项</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">示例</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># w# 注：w 当前用户登录情况</span></span><br><span class="line"> 14:45:33 up  4:12,  5 <span class="built_in">users</span>,  load average: 0.00, 0.00, 0.03</span><br><span class="line">USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT</span><br><span class="line">root     tty1     -                三22   15:49   0.08s  0.08s -bash</span><br><span class="line">root     pts/0    192.168.0.42     14:29    3.00s  0.02s  0.01s w</span><br><span class="line">root     pts/1    192.168.0.42     14:29   15:35   0.00s  0.00s -bash</span><br><span class="line">root     pts/3    192.168.0.42     09:48    4:56m  0.03s  0.03s -bash</span><br><span class="line">root     pts/4    192.168.0.42     09:50    2:37m  0.52s  0.52s -bash</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># who# 注：w 看到更详细点</span></span><br><span class="line">root     tty1         2020-10-28 22:15</span><br><span class="line">root     pts/0        2020-10-29 14:29 (192.168.0.42)</span><br><span class="line">root     pts/1        2020-10-29 14:29 (192.168.0.42)</span><br><span class="line">root     pts/3        2020-10-29 09:48 (192.168.0.42)</span><br><span class="line">root     pts/4        2020-10-29 09:50 (192.168.0.42)</span><br><span class="line">方法1</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># w |tr -s &quot; &quot;|cut -d&quot; &quot; -f 1,2,4</span></span><br><span class="line"> 14:50:31 4:17,<span class="comment"># 注：默认分隔符为tab键，所有要压缩 </span></span><br><span class="line">USER TTY LOGIN@<span class="comment"># 注：再指定分隔符为空格</span></span><br><span class="line">root tty1 三22   <span class="comment"># 注：加tr -s &quot; &quot;</span></span><br><span class="line">root pts/0 14:29</span><br><span class="line">root pts/1 14:29</span><br><span class="line">root pts/3 09:48</span><br><span class="line">root pts/4 09:50</span><br><span class="line">方法2</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># w |awk &#x27;&#123;print $1,$2,$4&#125;&#x27;# 注：awk 默认分隔符是空白字符</span></span><br><span class="line">14:51:28 up 5    <span class="comment"># 注：打印第1、2、4列</span></span><br><span class="line">USER TTY LOGIN@</span><br><span class="line">root tty1 三22</span><br><span class="line">root pts/0 14:29</span><br><span class="line">root pts/1 14:29</span><br><span class="line">root pts/3 09:48</span><br><span class="line">root pts/4 09:50</span><br></pre></td></tr></table></figure><h3 id="以冒号作为分隔符-截取用户名、用户Id、用户属组">以冒号作为分隔符  截取用户名、用户Id、用户属组</h3><p><strong>以冒号作为分隔符  截取用户名、用户Id、用户属组</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">写法1</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cat /etc/passwd|cut -d&quot;:&quot; -f 1,3,5</span></span><br><span class="line">写法2（推荐）</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cut -d &quot;:&quot; -f 1,3,5 /etc/passwd# 注：截取1,3,5列</span></span><br><span class="line"><span class="comment">#注：文本操作命令，可以直接操作文本，不需要用到cat</span></span><br></pre></td></tr></table></figure><h3 id="取值范围">取值范围</h3><p><strong>取值范围</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@sanchuang-linux ~]<span class="comment"># cut -d &quot;:&quot; -f 1,3,5 /etc/passwd# 注：截取1,3,5列</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cut -d &quot;:&quot; -f 1-5 /etc/passwd# 注：截取1-5列</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cut -d &quot;:&quot; -f 3- /etc/passwd# 注：截取第3列--列尾</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cut -d &quot;:&quot; -f -3 /etc/passwd# 注：截取前3列</span></span><br><span class="line">============================================================================================</span><br><span class="line">-c：从指定提取范围中提取字符</span><br><span class="line">示例</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo abcdefg |cut -c 2# 注：截取第2个字符</span></span><br><span class="line">b</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo abcdefg |cut -c 2-5# 注：截取2--5个字符</span></span><br><span class="line">bcde</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo abcdefg |cut -c 5-# 注：截取第5到末尾字符</span></span><br><span class="line">efg</span><br></pre></td></tr></table></figure><hr><h2 id="八-练习">八. 练习</h2><p><strong>练习</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1统计access.log中排名前三的ip</span><br><span class="line">2显示/boot目录下面所有的文件大小(包括子目录中的文件)，并且由小到大排序</span><br><span class="line">3统计/etc/passwd中每种shell使用的次数（降序排序）</span><br><span class="line">4统计一下/etc/passwd中sbin这个单词出现了多少次</span><br><span class="line">5只显示ens33的ip地址</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">============================================================================================</span><br><span class="line">示例1：1统计access.log中排名前三的ip</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cut -d &quot;-&quot; -f 1 access.log |sort|uniq -c|sort -nr|head -n3</span></span><br><span class="line">      7 192.168.0.42 </span><br><span class="line">      6 192.168.0.193 </span><br><span class="line">      5 192.168.0.38 </span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cut -d &quot; &quot; -f1 access.log |sort|uniq -c</span></span><br><span class="line">      6 192.168.0.193</span><br><span class="line">      5 192.168.0.21</span><br><span class="line">      5 192.168.0.32</span><br><span class="line">      5 192.168.0.37</span><br><span class="line">      5 192.168.0.38</span><br><span class="line">      7 192.168.0.42</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cut -d &quot; &quot; -f1 access.log |sort|uniq -c|sort -nr</span></span><br><span class="line">      7 192.168.0.42</span><br><span class="line">      6 192.168.0.193</span><br><span class="line">      5 192.168.0.38</span><br><span class="line">      5 192.168.0.37</span><br><span class="line">      5 192.168.0.32</span><br><span class="line">      5 192.168.0.21</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cut -d &quot; &quot; -f1 access.log |sort|uniq -c|sort -nr|head -3</span></span><br><span class="line">      7 192.168.0.42</span><br><span class="line">      6 192.168.0.193</span><br><span class="line">      5 192.168.0.38</span><br><span class="line">============================================================================================</span><br><span class="line">示例2：2显示/boot目录下面所有的文件大小(包括子目录中的文件)，并且由小到大排序</span><br><span class="line">方法1</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># du -ak /boot |sort -n  # 注：以k为字节</span></span><br><span class="line">4/boot/.bashrc</span><br><span class="line">4/boot/efi/EFI/centos</span><br><span class="line">4/boot/grub2/device.map</span><br><span class="line">4/boot/grub2/grubenv</span><br><span class="line">4/boot/grub2/i386-pc/adler32.mod</span><br><span class="line">4/boot/grub2/i386-pc/all_video.mod</span><br><span class="line">4/boot/grub2/i386-pc/aout.mod</span><br><span class="line"></span><br><span class="line">方法2</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># ll -R|grep root|tr -s &quot; &quot;|cut -d &quot; &quot; -f 5,9|sort -n</span></span><br><span class="line">0 1214.txt</span><br><span class="line">0 12244.txt</span><br><span class="line">0 1224.txt</span><br><span class="line">0 12456.txt</span><br><span class="line">0 20</span><br><span class="line">0 20</span><br><span class="line">0 2020-09-24-18_25_03.txt</span><br><span class="line"></span><br><span class="line">方法3</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># ll -R|grep root|awk &#x27;&#123;print $5,$9&#125;&#x27;|sort -n</span></span><br><span class="line">0 1214.txt</span><br><span class="line">0 12244.txt</span><br><span class="line">0 1224.txt</span><br><span class="line">0 12456.txt</span><br><span class="line">0 20</span><br><span class="line">0 20</span><br><span class="line">0 2020-09-24-18_25_03.txt</span><br><span class="line">0 abcd.txt</span><br><span class="line">============================================================================================</span><br><span class="line">示例3：3统计/etc/passwd中每种shell使用的次数（降序排序）</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cut -d : -f7 /etc/passwd |sort|uniq -c|sort -nr</span></span><br><span class="line">     31 /bin/bash</span><br><span class="line">     19 /sbin/nologin</span><br><span class="line">      1 /sbin/shutdown</span><br><span class="line">      1 /sbin/halt</span><br><span class="line">      1 /bin/sync</span><br><span class="line">============================================================================================</span><br><span class="line">示例4：4统计一下/etc/passwd中sbin这个单词出现了多少次</span><br><span class="line">方法1</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># grep -o sbin /etc/passwd</span></span><br><span class="line">sbin</span><br><span class="line">sbin</span><br><span class="line">………………</span><br><span class="line">sbin</span><br><span class="line">sbin</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># grep -o sbin /etc/passwd|wc -l</span></span><br><span class="line">25</span><br><span class="line"></span><br><span class="line">方法2</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cat /etc/passwd|tr &quot;:&quot; &quot;\n&quot;|grep sbin|wc -l</span></span><br><span class="line">25<span class="comment"># 注：将: 换成 换行符  同一行换到不同的行去</span></span><br><span class="line">============================================================================================</span><br><span class="line">示例5：5只显示ens33的ip地址</span><br><span class="line"><span class="comment">#ip a |grep ens33|grep inet|tr -s &quot; &quot;|cut -d &quot; &quot; -f3|cut -d&quot;/&quot; -f1</span></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># ip a |grep ens33</span></span><br><span class="line">2: ens33: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000</span><br><span class="line">    inet 192.168.0.34/24 brd 192.168.0.255 scope global dynamic noprefixroute ens33</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># ip a |grep ens33|grep inet|tr -s &quot; &quot;|cut -d &quot; &quot; -f3</span></span><br><span class="line">192.168.0.34/24</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># ip a |grep ens33|grep inet|tr -s &quot; &quot;|cut -d &quot; &quot; -f3|cut -d&quot;/&quot; -f1</span></span><br><span class="line">192.168.0.34</span><br></pre></td></tr></table></figure><hr><h2 id="九-awk指定分隔符-F">九. awk指定分隔符 -F</h2><p><strong>awk指定分隔符 -F</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@sanchuang-linux ~]<span class="comment"># awk -F&quot;:&quot; &#x27;&#123;print $1&#125;&#x27; /etc/passwd</span></span><br><span class="line">root</span><br><span class="line">bin</span><br><span class="line">daemon</span><br><span class="line">adm</span><br><span class="line">lp</span><br><span class="line"><span class="built_in">sync</span></span><br><span class="line">…………………………</span><br></pre></td></tr></table></figure><hr><h2 id="十-grep">十. grep</h2><p><strong>grep命令</strong></p><p>文本三剑客  ==&gt;  awk  grep  sed<br><a href="https://www.cnblogs.com/end/archive/2012/02/21/2360965.html">https://www.cnblogs.com/end/archive/2012/02/21/2360965.html</a><br>grep 过滤  通用的正则表达式分析程序<br><strong>grep、egrep、fgrep</strong><br><strong>做匹配来过滤的</strong></p><p>用途：在文件中查找并显示包含指定字符串的行 格式：<code>grep  [选项]... 模式  目标文件</code></p><p>#注：<strong>模式pattern --》模板</strong></p><p>​   <strong>可以接受一个正则表达式</strong></p><p><code>-i</code>：查找时忽略大小写</p><p><code>-v</code>：反转查找，输出与模式不相符的行</p><p>-n：显示符合模式要求的行号</p><p>-r：递归搜索所有文件</p><p><code>-o</code>：只显示匹配的内容</p><p><code>-E</code>：支持更多的元字符（支持扩展正则）</p><p>-A：找到匹配行以及后几行</p><p>-B：输出匹配行以及前几行</p><p>模式</p><p><code>^….  ：以什么开头，整行以什么开头</code></p><p><code>…..$ ：以什么结尾，整行以什么结尾</code></p><p>注：grep 是文本操作命令，可以直接操作文本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">=====================================================================</span><br><span class="line">示例1：-v：反转查找，输出与模式不相符的行</span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># grep -v “#” /etc/yum.repos.d/centos.repo   </span></span><br><span class="line"><span class="comment"># 注：不输出包含# 的行</span></span><br><span class="line">============================================================================================</span><br><span class="line"></span><br><span class="line">示例2：-i 查找时忽略大小写</span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cd /etc/ssh/</span></span><br><span class="line">[root@sanchuang-linux ssh]<span class="comment"># pwd</span></span><br><span class="line">/etc/ssh</span><br><span class="line">[root@sanchuang-linux ssh]<span class="comment"># grep -i &quot;port&quot; /etc/ssh/sshd_config # 注：查找时忽略大小写</span></span><br><span class="line"><span class="comment"># If you want to change the port on a SELinux system, you have to tell</span></span><br><span class="line"><span class="comment"># semanage port -a -t ssh_port_t -p tcp #PORTNUMBER</span></span><br><span class="line"><span class="comment">#Port 22</span></span><br><span class="line"><span class="comment"># WARNING: &#x27;UsePAM no&#x27; is not supported in Fedora and may cause several</span></span><br><span class="line"><span class="comment">#GatewayPorts no</span></span><br><span class="line">============================================================================================</span><br><span class="line"></span><br><span class="line">示例3：忽略大小写，并显示查找到的行号</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ssh]<span class="comment"># grep -i -n &quot;port&quot; /etc/ssh/sshd_config # 注：显示符合模式要求的行号</span></span><br><span class="line">13:<span class="comment"># If you want to change the port on a SELinux system, you have to tell</span></span><br><span class="line">15:<span class="comment"># semanage port -a -t ssh_port_t -p tcp #PORTNUMBER</span></span><br><span class="line">17:<span class="comment">#Port 22</span></span><br><span class="line">102:<span class="comment"># WARNING: &#x27;UsePAM no&#x27; is not supported in Fedora and may cause several</span></span><br><span class="line">108:<span class="comment">#GatewayPorts no</span></span><br><span class="line">============================================================================================</span><br><span class="line"></span><br><span class="line">示例4：-r 递归搜索所有文件</span><br><span class="line">注：子目录以及子子目录下面查找</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ssh]<span class="comment"># grep &quot;xxxxx&quot; * -r  # 注：当前目录所有目录及子目录文件下的 递归查找</span></span><br><span class="line">[root@sanchuang-linux ssh]<span class="comment"># grep &quot;GET&quot; /var/log/nginx -r  # 注：nginx目录下面 递归查找</span></span><br><span class="line">/var/log/nginx/error.log:2020/10/29 12:01:02 [error] 12767<span class="comment">#0: *2 open() &quot;/usr/share/nginx/html/favicon.ico&quot; failed (2: No such file or directory), client: 192.168.0.42, server: _, request: &quot;GET /favicon.ico HTTP/1.1&quot;, host: &quot;192.168.0.34&quot;, referrer: &quot;http://192.168.0.34/&quot;</span></span><br><span class="line">/var/log/nginx/error.log:2020/10/29 12:01:58 [error] 12767<span class="comment">#0: *2 open() &quot;/usr/share/nginx/html/favicon.ico&quot; failed (2: No such file or directory), client: 192.168.0.42, server: _, request: &quot;GET /favicon.ico HTTP/1.1&quot;, host: &quot;192.168.0.34&quot;</span></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#递归查找/var/log/nginx下的所有文件（包括其下面子目录里的文件）</span></span><br><span class="line">[root@mysql-binary nginx]<span class="comment"># grep &quot;GET&quot; /var/log/nginx -r</span></span><br></pre></td></tr></table></figure><hr><h2 id="十一-正则表达式">十一. 正则表达式</h2><p><strong>正则表达式</strong></p><p><code>^aa     表示以aa开头的行</code><br><code>aa$     表示以aa结尾的行</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[]      表示一个字符集</span><br><span class="line">[a-z]   从a - z 中取一个</span><br><span class="line">[^a-z]  不取a-z的字符</span><br><span class="line">grep ^[^a-zA-Z0-9_] grep_test.txt  显示不以字母、数字、下划线开头的行</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">示例1：不输出以<span class="comment">#开头的行</span></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux yum.repos.d]<span class="comment"># grep -v ^# centos.repo</span></span><br><span class="line">[root@sanchuang-linux yum.repos.d]<span class="comment"># grep -v ^# centos.repo|grep -v ^$   # 注：不输出空白行</span></span><br><span class="line">注：不输出空白行       grep -v ^$</span><br><span class="line">   不输出以<span class="comment">#开头的行  grep -v ^#</span></span><br><span class="line">============================================================================================</span><br><span class="line"></span><br><span class="line">示例2：过滤出grep_test.txt中，不以<span class="comment">#号开头的行 和 非空白行</span></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># cat grep_test.txt</span></span><br><span class="line"><span class="comment">#aaa</span></span><br><span class="line">aaa<span class="comment">#bbb</span></span><br><span class="line"></span><br><span class="line">456</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">789</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># grep -v ^# grep_test.txt  # 注：过滤出不以#号开头的行</span></span><br><span class="line">aaa<span class="comment">#bbb</span></span><br><span class="line"></span><br><span class="line">456</span><br><span class="line">789</span><br><span class="line"></span><br><span class="line"><span class="comment">#方法1</span></span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># grep -v ^# grep_test.txt |grep -v ^$# 注：过滤出空白行</span></span><br><span class="line">aaa<span class="comment">#bbb                                      # 注：如果是空白字符  不会被过滤</span></span><br><span class="line">456</span><br><span class="line">789</span><br><span class="line"></span><br><span class="line"><span class="comment">#方法2</span></span><br><span class="line">过滤出grep_test.txt中 不以<span class="comment">#开头的行和非空白行</span></span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># grep -v -E &quot;^#|^$&quot; grep_test.txt </span></span><br><span class="line">aaa<span class="comment">#bbb                         # 注：-E 正则表达式 ，| 或者 ， -v 不显示</span></span><br><span class="line">456                             <span class="comment"># 注：-E：支持更多的元字符（支持扩展正则）</span></span><br><span class="line">789</span><br></pre></td></tr></table></figure><hr><h2 id="十二-表示一个字符集（正则表达式）">十二. [] 表示一个字符集（正则表达式）</h2><p><strong>[] 表示一个字符集（正则表达式）</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost chenpeng]<span class="comment"># cat grep_test.txt </span></span><br><span class="line">abc</span><br><span class="line">adc</span><br><span class="line">Abdc</span><br><span class="line">ac</span><br><span class="line">a1c</span><br><span class="line">axy</span><br><span class="line">axc</span><br><span class="line">123</span><br><span class="line">777</span><br><span class="line">示例1：过滤出abc adc</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@localhost chenpeng]<span class="comment"># grep a[bd]c grep_test.txt        # 注：取字符集[bd]里面的其中1个</span></span><br><span class="line">abc</span><br><span class="line">adc</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># grep a[a-z]c grep_test.txt # 注：取出a-z中的1个字符</span></span><br><span class="line">abc                                        <span class="comment"># 注：ac    没有被过滤，必须有1个字符放在这里</span></span><br><span class="line">adc                                        <span class="comment"># 注：[a-z] 表示 从a - z 中取一个</span></span><br><span class="line">axc</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># grep a[0-9]c grep_test.txt     # 注：取出0-9中的1歌字符</span></span><br><span class="line">a1c</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">示例2：[^a-z] 不取a-z的字符</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># grep a[^a-z]c grep_test.txt    # 注：^取反，ac之间不取a-z的字符</span></span><br><span class="line">a1c</span><br><span class="line"></span><br><span class="line">示例3：取出不以字母开头的行</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># grep ^[^a-zA-Z] grep_test.txt  # 注：不以a-zA-Z开头的行</span></span><br><span class="line">11c</span><br><span class="line">123                                   <span class="comment"># 注：中间接空格  表示 包括空格</span></span><br><span class="line">777</span><br><span class="line">注：grep ^[a-zA-Z] grep_test.txt  以字母开头的行</span><br><span class="line">============================================================================================</span><br><span class="line">示例4：显示不以字母、数字、下划线开头的行</span><br><span class="line">写法1</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># grep ^[^a-zA-Z0-9_] grep_test.txt</span></span><br><span class="line">写法2</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># grep -v ^[a-zA-Z0-9_] grep_test.txt</span></span><br><span class="line"><span class="comment">#注：显示不以字母、数字、下划线开头的行</span></span><br></pre></td></tr></table></figure><hr><h2 id="十三-通配符（正则表达式）">十三. 通配符（正则表达式）</h2><p><strong>通配符（正则表达式）</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">*     代表匹配前一个项任意次</span><br><span class="line">？    代表匹配前一个项0次或者1次</span><br><span class="line">+     代表匹配前一个项一次到多次</span><br><span class="line">.     占位符 除\n之外的任意字符</span><br><span class="line">&#123;n,m&#125; 匹配前一项n到m次</span><br><span class="line">egrep 等同于 grep -E</span><br><span class="line">fgrep 不支持任何正则，普通文本过滤</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">示例1：* ? + .</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#注：匹配的都是前面这个字符</span></span><br><span class="line">[root@localhost ~]<span class="comment"># cat grep_test.txt </span></span><br><span class="line">alc</span><br><span class="line">axxc</span><br><span class="line">ac</span><br><span class="line">[root@localhost ~]<span class="comment"># grep -E a.?c grep_test.txt    # 注：-E 支持更多正则扩展</span></span><br><span class="line">alc                                               <span class="comment"># 注：.  占位符（注=一定要有1个字符）</span></span><br><span class="line">ac                                                <span class="comment"># 注：.? 表示a和c之间.可以出现0次到1次</span></span><br><span class="line">[root@localhost ~]<span class="comment"># grep -E a.*c grep_test.txt    # 注：.* 表示a和c之间可以有任意个.（任意个字符）</span></span><br><span class="line">alc               <span class="comment"># 注：egrep 等同于 grep -E</span></span><br><span class="line">axxc</span><br><span class="line">ac</span><br><span class="line">[root@localhost ~]<span class="comment"># grep -E a.c grep_test.txt     # 注：.  表示a和c之间只有1个字符</span></span><br><span class="line">alc</span><br><span class="line">[root@localhost ~]<span class="comment"># grep -E a.+c grep_test.txt    # 注：代表前一个字符.出现1个到多个</span></span><br><span class="line">alc</span><br><span class="line">axxc</span><br><span class="line"></span><br><span class="line">示例2：&#123; &#125;</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#注：匹配的都是前面这个字符</span></span><br><span class="line">[root@localhost ~]<span class="comment"># egrep &quot;a.&#123;1&#125;c&quot; grep_test.txt    # 注：指定 . 出现1次</span></span><br><span class="line">alc</span><br><span class="line">[root@localhost ~]<span class="comment"># egrep &quot;a.&#123;1,2&#125;c&quot; grep_test.txt  # 注：指定 . 出现1次到2次</span></span><br><span class="line">alc</span><br><span class="line">axxc</span><br><span class="line"></span><br><span class="line">示例3：&#123; &#125;</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@localhost ~]<span class="comment"># cat grep_test.txt </span></span><br><span class="line">alc</span><br><span class="line">axxc</span><br><span class="line">ac</span><br><span class="line">ayy1c</span><br><span class="line">addddddc</span><br><span class="line">[root@localhost ~]<span class="comment"># egrep &quot;a.&#123;1,5&#125;c&quot; grep_test.txt           # 注：前1项 . 出现1次到5次</span></span><br><span class="line">alc</span><br><span class="line">axxc</span><br><span class="line">ayy1c</span><br><span class="line"></span><br><span class="line">egrep 等同于 grep -E</span><br><span class="line">fgrep  不支持正则，普通文本过滤</span><br></pre></td></tr></table></figure><hr><h2 id="十四-练习：grep-正则表达式">十四. 练习：grep 正则表达式</h2><p><strong>grep 正则表达式</strong></p><p>1、进入/lianxi目录，复制/etc/passwd到当前目录下，然后对passwd进行操作</p><p>2、查找出当前passwd文件中以ftp或者mail开头的行，输出到屏幕</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">grep -E <span class="string">&quot;^ftp|^mail&quot;</span> passwd</span><br><span class="line">egrep <span class="string">&quot;^ftp|^mail&quot;</span> passwd</span><br></pre></td></tr></table></figure><p>3、查找出当前passwd文件中不以r、m、f开头的行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">grep -v -E <span class="string">&quot;^r|^m|^f&quot;</span> passwd</span><br><span class="line">grep ^[^rmp] passwd</span><br></pre></td></tr></table></figure><p>4、查找出当前passwd中以bash结尾的行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep bash$ passwd</span><br></pre></td></tr></table></figure><p>5、查找出/etc/login.defs文件中的有效行（不显示空行和注释行，以#号开头的行）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -v -E <span class="string">&quot;^#|^$&quot;</span> /etc/login.defs</span><br></pre></td></tr></table></figure><p>6、查找出/var/log/messages 文档中有15个字母的单词</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">grep -E <span class="string">&quot;[^a-zA-Z][a-zA-Z&#123;15&#125;][^a-zA-Z]&quot;</span> /var/log/message  <span class="comment"># 注：左右不是单词，中间15个字母</span></span><br><span class="line">grep -E <span class="string">&quot;\b[a-zA-Z&#123;15&#125;]\b&quot;</span> /var/log/message                <span class="comment"># 注：\b自动匹配单词的边界</span></span><br></pre></td></tr></table></figure><p>7、查找出/etc/passwd文件里用户名包含liu同时使用bash的用户</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep liu /etc/passwd|grep bash$|<span class="built_in">cut</span> -d<span class="string">&quot;:&quot;</span> -f1</span><br></pre></td></tr></table></figure><p>8、查找出/etc/ssh/sshd_config里的有效行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -v -E <span class="string">&quot;^#|^$&quot;</span> /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure><p>9、查找出/etc/ssh/sshd_config 文件里包含连续2个字符的行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">grep -E <span class="string">&quot;(.)\1&quot;</span> /etc/ssh/sshd_config </span><br><span class="line">grep -E <span class="string">&quot;(.)\1&quot;</span>  <span class="comment"># 注：.除了换行的任意一个字符  \1前面这个组在\1这里又出现一次（一模一样）  </span></span><br></pre></td></tr></table></figure><p>10、查找出包含特殊字符的行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -E <span class="string">&quot;[^0-Z]&quot;</span> grep_test.txt</span><br></pre></td></tr></table></figure><p>11、查找出不包含数字的行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -v <span class="string">&quot;[0-9]&quot;</span> abc.txt</span><br></pre></td></tr></table></figure><p>12、查找出/var/log/secure里的ip地址</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cut</span> -d <span class="string">&quot; &quot;</span> -f11 /var/log/secure|grep -E <span class="string">&quot;\..&quot;</span>|<span class="built_in">sort</span>|<span class="built_in">uniq</span>    注：\.转义  第二个. 表示任1字符</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">grep -E <span class="string">&quot;((([0-9])|([1-9][0-9])|(1[0-9][0-9])|(2[0-4][0-9])|(25[0-5]))\.)&#123;3&#125;(([0-9])|([1-9][0-9])|(1[0-9][0-9])|(2[0-4][0-9])|(25[0-5]))&quot;</span> ip_test.txt</span><br><span class="line">============================================================================================</span><br><span class="line">ip地址匹配：</span><br><span class="line">   Ipv4  0-255  4个    192.168.1.0</span><br><span class="line">注：匹配ip地址</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># grep -E &quot;((([0-9])|([1-9][0-9])|(1[0-9][0-9])|(2[0-4][0-9])|(25[0-5]))\.)&#123;3&#125;(([0-9])|([1-9][0-9])|(1[0-9][0-9])|(2[0-4][0-9])|(25[0-5]))&quot; ip_test.txt</span></span><br><span class="line">192.168.0.1</span><br><span class="line">192.168.1.255</span><br><span class="line">172.0.0.1</span><br><span class="line"></span><br><span class="line">((([0-9])|([1-9][0-9])|(1[0-9][0-9])|(2[0-4][0-9])|(25[0-5]))\.)&#123;3&#125;(([0-9])|([1-9][0-9])|(1[0-9][0-9])|(2[0-4][0-9])|(25[0-5]))</span><br><span class="line"><span class="comment">#括号括起来表示一个组</span></span><br><span class="line"></span><br><span class="line">分析</span><br><span class="line">0-255</span><br><span class="line">0-9                                     个位数</span><br><span class="line">[1-9][0-9]                              十位数</span><br><span class="line">(1[0-9][0-9])|(2[0-4][0-9])|(25[0-5])   百位数</span><br></pre></td></tr></table></figure><hr>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>11_Linux基础-SHELL入门2</title>
      <link href="/blog/posts/35184.html"/>
      <url>/blog/posts/35184.html</url>
      
        <content type="html"><![CDATA[<p>摘要：博客迁移 <a href="https://blog.csdn.net/cpen_web"><code>https://blog.csdn.net/cpen_web</code></a> → 本站<span id="more"></span></p><h1 id="11-Linux基础-SHELL入门2">11_Linux基础-SHELL入门2</h1><p><a href="https://blog.csdn.net/cpen_web">博客🔗：https://blog.csdn.net/cpen_web</a></p><hr><h2 id="一-练习：用户-增删改查">一. 练习：用户 增删改查</h2><p><strong>脚本 编写一个脚本，实现如下功能</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">====================</span><br><span class="line">1.增加用户并设置密码</span><br><span class="line">2.删除用户</span><br><span class="line">3.查看用户</span><br><span class="line">4.退出</span><br><span class="line">====================</span><br><span class="line">输入的指定不是1-4，给提示给予提醒，并且如果不输入退出的话，可以循环添加。</span><br><span class="line">按1  增加用户，并且设置密码 useradd  passwd</span><br><span class="line">按2  删除用户     userdel -r </span><br><span class="line">按3  查看用户    id </span><br><span class="line">按4  退出         exit</span><br><span class="line">=====================================================================</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">示例1：</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="function"><span class="title">menu</span></span>()&#123;<span class="comment">#（注：函数）</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;====================&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;1.增加用户并增加密码&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;2.删除用户&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;3.查看用户&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;4.退出&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;====================&quot;</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;请选择您所需要的服务:&quot;</span> ser</span><br><span class="line">&#125;</span><br><span class="line">-------------------------------------------------</span><br><span class="line"><span class="function"><span class="title">create_user</span></span>()&#123;<span class="comment">#（注：函数）</span></span><br><span class="line">    <span class="built_in">read</span> -p <span class="string">&quot;创建用户名:&quot;</span> user1</span><br><span class="line">    <span class="built_in">id</span> <span class="variable">$user1</span> &amp;&gt;/dev/null &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;用户已存在！&quot;</span> &amp;&amp; <span class="built_in">return</span><span class="comment">#（注：退出函数，接return）</span></span><br><span class="line">    useradd <span class="variable">$user1</span> &amp;&gt;/dev/null<span class="comment">#（注：导入黑洞文件）</span></span><br><span class="line">    <span class="built_in">id</span> <span class="variable">$user1</span> &amp;&gt;/dev/null || <span class="built_in">return</span> <span class="comment">#(注：用户已存在 用Id 判断比较好。返回值非0可能是命令执行错误)</span></span><br><span class="line">    <span class="built_in">read</span> -s -p <span class="string">&quot;设置密码:&quot;</span> passwd1<span class="comment">#（注：-s密码隐藏）</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$passwd1</span>|passwd <span class="variable">$user1</span> --stdin &amp;&gt;/dev/null</span><br><span class="line">&#125;</span><br><span class="line">-----------------------------------------------------------</span><br><span class="line"><span class="keyword">while</span> :</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">menu<span class="comment">#（注：调用函数）</span></span><br><span class="line"><span class="keyword">case</span> <span class="variable">$ser</span> <span class="keyword">in</span></span><br><span class="line">1)</span><br><span class="line">    clear<span class="comment">#（注：清空屏幕）</span></span><br><span class="line">    create_user</span><br><span class="line">    ;;</span><br><span class="line">2)</span><br><span class="line"><span class="comment"># ……………………………………</span></span><br><span class="line">4)</span><br><span class="line">    <span class="built_in">echo</span> “退出！”</span><br><span class="line">    <span class="built_in">exit</span></span><br><span class="line">    ;;</span><br><span class="line">*)<span class="comment">#（注：表示其他的所有选项，从上至下依次匹配）</span></span><br><span class="line">    <span class="built_in">echo</span> “请输入1-4！”</span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">-----------------------------------------------------------------------------------------------------------</span><br><span class="line">示例2：<span class="keyword">if</span> 语法</span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">    <span class="keyword">if</span> [<span class="string">&quot;<span class="variable">$options</span>&quot;</span>==1]||[<span class="string">&quot;<span class="variable">$options</span>&quot;</span>==2]||[<span class="string">&quot;<span class="variable">$options</span>&quot;</span>==3]||[<span class="string">&quot;<span class="variable">$options</span>&quot;</span>==4]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">case</span> <span class="variable">$options</span> <span class="keyword">in</span></span><br><span class="line">        1)</span><br><span class="line">            <span class="built_in">read</span> -p <span class="string">&quot;请输入用户名:&quot;</span> username</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">id</span> <span class="variable">$username</span> &amp;&gt;/dev/null</span><br><span class="line">            <span class="keyword">then</span></span><br><span class="line">                <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$username</span> is exist!&quot;</span></span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="built_in">read</span> -s -p <span class="string">&quot;请设置密码:&quot;</span> password</span><br><span class="line">                useradd <span class="variable">$username</span> &amp;&gt;/dev/null</span><br><span class="line">                <span class="built_in">echo</span> <span class="variable">$password</span> | <span class="variable">$username</span> --stdin &amp;&gt;/dev/null</span><br><span class="line">                <span class="built_in">echo</span> -e <span class="string">&quot;\n create <span class="variable">$username</span> ok!&quot;</span></span><br><span class="line">            <span class="keyword">fi</span> </span><br><span class="line">            ;;</span><br><span class="line">    <span class="comment"># ……………………………………………………</span></span><br><span class="line">        4)</span><br><span class="line">            <span class="built_in">echo</span> <span class="string">&quot;退出!&quot;</span></span><br><span class="line">            <span class="built_in">exit</span></span><br><span class="line">        <span class="keyword">esac</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;请输入数字1或2或3或4!&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">补充：&amp;&amp;可以连接2个命令</span><br><span class="line">--------------------------------------------------------------------</span><br><span class="line">&amp;&amp;可以连接2个命令</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># id chen222</span></span><br><span class="line">uid=1017(chen222) gid=1017(chen222) 组=1017(chen222)</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># id chen222 &amp;&amp; echo &quot;chen222存在&quot;</span></span><br><span class="line">uid=1017(chen222) gid=1017(chen222) 组=1017(chen222)</span><br><span class="line">chen222存在</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># id chen222 &amp;&gt;/dev/null &amp;&amp; echo &quot;chen222存在&quot;</span></span><br><span class="line">chen222存在</span><br><span class="line"></span><br><span class="line"><span class="comment">#注：用户已存在 用id 判断比较好。返回值非0可能是命令执行错误</span></span><br></pre></td></tr></table></figure><hr><h2 id="二-变量">二. 变量</h2><p><strong>变量 全局/局部</strong></p><h3 id="Shell">Shell</h3><p><code>Shell中定义的变量  默认全局变量</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">===========================================================================================</span><br><span class="line"><span class="built_in">local</span> a=10 局部变量</span><br><span class="line">示例1：<span class="built_in">local</span> 局部变量</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="function"><span class="title">func01</span></span>()&#123;</span><br><span class="line">    <span class="built_in">local</span> a=10</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func01<span class="comment">#（注：调用函数）</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$a</span></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># sh aaa.sh </span></span><br><span class="line"><span class="comment">#（注：为空。局部变量）</span></span><br><span class="line">============================================================================================</span><br><span class="line">示例2：默认全局变量</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="function"><span class="title">func01</span></span>()&#123;</span><br><span class="line">    a=10</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func01<span class="comment">#（注：调用函数）</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$a</span></span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># sh aaa.sh </span></span><br><span class="line">10<span class="comment">#（注：全局变量）</span></span><br></pre></td></tr></table></figure><h3 id="Python">Python</h3><p><code>Python定义的变量  默认局部变量</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">===========================================================================================</span><br><span class="line"><span class="keyword">global</span> a 全局变量</span><br><span class="line">示例<span class="number">1</span>：<span class="keyword">global</span> a 全局变量</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func01</span>():</span><br><span class="line">    <span class="keyword">global</span> a <span class="comment">#（注：全局变量）</span></span><br><span class="line">    a = <span class="number">10</span></span><br><span class="line"></span><br><span class="line">func01()</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># python3 python_hanshu.py </span></span><br><span class="line"><span class="number">10</span></span><br><span class="line">============================================================================================</span><br><span class="line">示例<span class="number">2</span>：默认局部变量  只能在函数体内使用的变量</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func01</span>():</span><br><span class="line">    a = <span class="number">10</span></span><br><span class="line"></span><br><span class="line">func01()</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># python3 python_hanshu.py </span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;python_hanshu.py&quot;</span>, line <span class="number">5</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    <span class="built_in">print</span>(a)</span><br><span class="line">NameError: name <span class="string">&#x27;a&#x27;</span> <span class="keyword">is</span> <span class="keyword">not</span> defined<span class="comment">#（注：局部变量）</span></span><br></pre></td></tr></table></figure><h3 id="Shell函数里传参（位置变量）">Shell函数里传参（位置变量）</h3><p>shell函数里传参（位置变量）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">示例：</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">Shell里传参</span><br><span class="line"><span class="function"><span class="title">func01</span></span>()&#123;</span><br><span class="line">    a=100</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$1</span> <span class="variable">$2</span> <span class="variable">$3</span>&quot;</span><span class="comment">#（注：函数的参数 [位置变量]）</span></span><br><span class="line">&#125;</span><br><span class="line">func01 第一个参数 第二个参数 第三个参数<span class="comment">#（注：调用参数）</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$a</span></span><br></pre></td></tr></table></figure><h3 id="Python里传参">Python里传参</h3><p>python里传参</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">示例：python里传参</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func01</span>(<span class="params">x,y</span>):</span><br><span class="line">    <span class="keyword">global</span> a</span><br><span class="line">    a = <span class="number">10</span></span><br><span class="line"></span><br><span class="line">func01(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(a)</span><br></pre></td></tr></table></figure><hr><h2 id="三-test">三. test</h2><p><strong>test判断  等同于[]</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">示例：<span class="built_in">test</span></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># a=123</span></span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># b=123</span></span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># test a==b</span></span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># test a==b &amp;&amp; echo ok</span></span><br><span class="line">ok</span><br></pre></td></tr></table></figure><hr><h2 id="四-判断方式-test">四. 判断方式 []  [[]]  (())  test</h2><p><strong>判断方式 []  [[]]  (())  test</strong></p><ul><li>(( ))判断数字 &gt; &lt; == !=</li><li>[[ ]]判断字符串 或者 -eq -ne -gt -lt 判断数字</li><li>有些语法 [ ] 是不支持的，建议使用[[ ]]</li><li><strong>test(测试)判断，等同于1个中括号</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">示例：<span class="built_in">test</span></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># a=123</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># b=123</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># test a==b &amp;&amp; echo ok</span></span><br><span class="line">ok</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># test a==b &amp;&amp; echo ok || echo error</span></span><br><span class="line">ok</span><br></pre></td></tr></table></figure><hr><h2 id="五-连接运算">五. 连接运算</h2><p><strong>连接运算</strong></p><p>使用分号(;)实现一行中写多条语句</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">示例：</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># echo &quot;abc&quot;;echo &quot;xyz&quot;</span></span><br><span class="line">abc</span><br><span class="line">xyz</span><br></pre></td></tr></table></figure><hr><h2 id="六-函数">六. 函数</h2><h3 id="函数的定义-使用">函数的定义/使用</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">示例</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="function"><span class="title">add</span></span>()&#123;</span><br><span class="line">    <span class="built_in">echo</span> “两数相加为:$(( <span class="variable">$num1</span> + <span class="variable">$num2</span> ))”</span><br><span class="line">&#125;</span><br><span class="line">add</span><br><span class="line">============================================================================================</span><br></pre></td></tr></table></figure><h3 id="函数的传参">函数的传参</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">示例：位置参数传参</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="function"><span class="title">func01</span></span>()&#123;</span><br><span class="line">    a=100</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$1</span> <span class="variable">$2</span> <span class="variable">$3</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func01 第一个参数 第二个参数 第三个参数</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$a</span></span><br><span class="line">============================================================================================</span><br><span class="line">·函数内的变量定义   默认为全局变量</span><br><span class="line">·使用<span class="built_in">local</span>关键字 可以转换为局部变量</span><br></pre></td></tr></table></figure><hr><h2 id="七-seq">七. seq</h2><p><strong>seq命令</strong></p><p>seq命令 类似于 python中的range函数</p><p>用途：**打印出一串有序的数字 **</p><p>格式：seq<code>[选项]数字范围</code></p><p><strong>-s：指定分隔符</strong></p><p><strong>-w：指定同等宽带输出</strong></p><p>----------------------------------------</p><p>数字范围的展示：</p><p>[start] [step] end</p><p>start 和 step 都是选填的</p><p>step 为正，表示从小到大输出</p><p>step 为负，表示从大到小输出</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">示例1：[start] [step] end</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># seq 3 -1 1# 注：中间是步长。左右是起始位置</span></span><br><span class="line">3</span><br><span class="line">2</span><br><span class="line">1</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># seq 1 2 6</span></span><br><span class="line">1</span><br><span class="line">3</span><br><span class="line">5</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># seq 1 -2 6# 注：步长为负数时，从1到6没有输出</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># seq 6 -2 1</span></span><br><span class="line">6</span><br><span class="line">4</span><br><span class="line">2</span><br><span class="line">示例2：<span class="comment"># seq 2 5 # seq -w 9 12</span></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># seq 2 5</span></span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">[root@localhost ~]<span class="comment"># seq -w 9 12# -w 指定同等宽度输出</span></span><br><span class="line">09</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">============================================================================================</span><br><span class="line">补充 获取命令的返回结果</span><br><span class="line">·使用反引号 ``</span><br><span class="line">·或者 $()</span><br><span class="line">示例3：获取/etc/passwd最后一行，赋给一个变量</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># tail -n1 /etc/passwd# 注：获取最后一行 # tail -n1</span></span><br><span class="line">wtc:x:1029:1029::/home/wtc:/bin/bash</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># line=`tail -n1 /etc/passwd`# 注：方法1</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $line</span></span><br><span class="line">wtc:x:1029:1029::/home/wtc:/bin/bash</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># line1=$(tail -n1 /etc/passwd)# 注：方法2</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $line1</span></span><br><span class="line">wtc:x:1029:1029::/home/wtc:/bin/bash</span><br><span class="line">============================================================================================</span><br><span class="line">示例4：<span class="built_in">seq</span>命令 类似于 python中的range函数</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># vim seq_test.sh</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `<span class="built_in">seq</span> 2 10`<span class="comment"># 注：反引号 执行这个命令，获取命令的返回值</span></span><br><span class="line"><span class="keyword">do</span><span class="comment"># 注：seq 2 10 包括2，包括10</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">-----------------------------------------------------------------------</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(<span class="built_in">seq</span> 2 10)<span class="comment"># 注：也表示执行这个命令，获取命令的返回值</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># bash seq_test.sh </span></span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">============================================================================================</span><br><span class="line">示例5：-s：指定分隔符</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># seq -s &quot;+&quot; 10# -s：指定分隔符</span></span><br><span class="line">1+2+3+4+5+6+7+8+9+10<span class="comment"># 注：不搞开头，默认情况下 从1开始，到10</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># seq 10#注：默认情况下 连接符是 换行符</span></span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td></tr></table></figure><hr><h2 id="八-练习：创建用户">八. 练习：创建用户</h2><p><strong>创建用户（3次重试机会）脚本</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">示例：<span class="built_in">seq</span>命令  创建失败 重试</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># vim user_add.sh</span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment"># 增加# 注：用户增加的部分</span></span><br><span class="line"><span class="function"><span class="title">add</span></span>()&#123;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> `<span class="built_in">seq</span> 3 -1 1`<span class="comment"># 注：seq 命令类似于pythonrange函数 3 2 1</span></span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;增加用户&quot;</span></span><br><span class="line">        <span class="built_in">read</span> -p <span class="string">&quot;请输入用户名：&quot;</span> username</span><br><span class="line">       <span class="built_in">id</span> <span class="variable">$username</span> &amp;&gt;/dev/null &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;用户已存在,还有<span class="subst">$(( $i - 1)</span>)次机会&quot;</span> &amp;&amp; <span class="built_in">continue</span></span><br><span class="line">       <span class="comment">#if id $username &amp;&gt;/dev/null </span></span><br><span class="line">       <span class="comment">#then</span></span><br><span class="line">       <span class="comment">#     echo &quot;用户已存在，还有$(( $i -1 ))次机会&quot;</span></span><br><span class="line">       <span class="comment">#     continue</span></span><br><span class="line">       <span class="comment">#fi  </span></span><br><span class="line">       <span class="comment">#useradd $username &amp;&gt;/dev/null &amp;&amp; echo &quot;创建成功！&quot; &amp;&amp; echo $password | passwd $username --stdin &amp;&gt;/dev/null &amp;&amp; break || echo -e &quot;\n创建失败！&quot;</span></span><br><span class="line">       <span class="keyword">if</span> useradd <span class="variable">$username</span> &amp;&gt;/dev/null</span><br><span class="line">       <span class="keyword">then</span></span><br><span class="line">           <span class="built_in">echo</span> <span class="string">&quot;创建<span class="variable">$&#123;username&#125;</span>成功！&quot;</span></span><br><span class="line">           <span class="built_in">read</span> -s -p <span class="string">&quot;请设置密码：&quot;</span> password</span><br><span class="line">           <span class="built_in">echo</span> <span class="variable">$password</span> | passwd <span class="variable">$username</span> --stdin &amp;&gt;/dev/null</span><br><span class="line">           <span class="built_in">break</span></span><br><span class="line">       <span class="keyword">else</span></span><br><span class="line">           <span class="built_in">echo</span> <span class="string">&quot;创建失败！,还有<span class="subst">$(($i-1)</span>)次机会！&quot;</span></span><br><span class="line">       <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># 删除</span></span><br><span class="line"><span class="function"><span class="title">del</span></span>()&#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;删除用户&quot;</span></span><br><span class="line">    <span class="built_in">read</span> -p <span class="string">&quot;请输入用户名：&quot;</span> username</span><br><span class="line">    userdel -r <span class="variable">$username</span> &amp;&gt;/dev/null &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;删除成功！&quot;</span> || <span class="built_in">echo</span> <span class="string">&quot;用户不存在，删除失败！&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># 查看</span></span><br><span class="line"><span class="function"><span class="title">seek</span></span>()&#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;查看用户&quot;</span></span><br><span class="line">    <span class="built_in">read</span> -p <span class="string">&quot;请输入用户名：&quot;</span> username</span><br><span class="line">    <span class="built_in">id</span> <span class="variable">$username</span> </span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;#############################&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;按1  增加用户，并且设置密码&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;按2  删除用户&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;按3  查看用户&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;按4  退出&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;#############################&quot;</span></span><br><span class="line"><span class="keyword">while</span> :</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">read</span> -p <span class="string">&quot;请输入你的选择：&quot;</span> options</span><br><span class="line">    <span class="keyword">case</span> <span class="variable">$options</span> <span class="keyword">in</span></span><br><span class="line">    1)</span><br><span class="line">        add</span><br><span class="line">        ;;</span><br><span class="line">    2)</span><br><span class="line">        del</span><br><span class="line">        ;;</span><br><span class="line">    3)</span><br><span class="line">        seek</span><br><span class="line">        ;;</span><br><span class="line">    4)</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;退出！&quot;</span></span><br><span class="line">        <span class="built_in">exit</span></span><br><span class="line">        ;;</span><br><span class="line">    *)</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;请输入指定内容 1-4！&quot;</span></span><br><span class="line">    <span class="keyword">esac</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><hr><h2 id="九-循环获取文件或者命令输出的内容-3种">九. 循环获取文件或者命令输出的内容(3种)</h2><h3 id="重定向">重定向</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">示例1：重定向  <span class="keyword">while</span> <span class="built_in">read</span> a b c； &lt; a.txt</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="keyword">while</span> <span class="built_in">read</span> a b c</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;name is <span class="variable">$a</span>, sex is <span class="variable">$b</span>, age is <span class="variable">$c</span> &quot;</span></span><br><span class="line"><span class="keyword">done</span> &lt; a.txt<span class="comment"># 注：当前路径下的文件。可以接绝对路径</span></span><br><span class="line">============================================================================================</span><br></pre></td></tr></table></figure><h3 id="管道符号">管道符号</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">示例2：管道符号<span class="built_in">cat</span> a.txt | <span class="keyword">while</span> <span class="built_in">read</span> a b c</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="built_in">cat</span> a.txt | <span class="keyword">while</span> <span class="built_in">read</span> a b c</span><br><span class="line"><span class="keyword">do</span> </span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;name is <span class="variable">$a</span>, sex is <span class="variable">$b</span>, age is <span class="variable">$c</span> &quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">============================================================================================</span><br></pre></td></tr></table></figure><h3 id="for循环">for循环</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">示例3：<span class="keyword">for</span> 循环实现（注：使用<span class="keyword">for</span>循环去做，不太好）</span><br><span class="line"><span class="comment">#for循环默认以空白(空格/回车 制表符)分割</span></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;for 循环实现...........&quot;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `<span class="built_in">ls</span>`<span class="comment"># i 代表空白输出的每个文件</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">示例3.2：i代表文件的每一项，以空白分割</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># vim file_test.sh</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `<span class="built_in">cat</span> a.txt`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># bash file_test.sh </span></span><br><span class="line">wenyao</span><br><span class="line">f</span><br><span class="line">18</span><br><span class="line">chenpeng</span><br><span class="line">m</span><br><span class="line">19</span><br><span class="line">wtc</span><br><span class="line">f</span><br><span class="line">17</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cat a.txt </span></span><br><span class="line">wenyao f 18</span><br><span class="line">chenpeng m 19</span><br><span class="line">wtc f 17</span><br><span class="line">示例3.3：<span class="keyword">for</span> i <span class="keyword">in</span> `<span class="built_in">ls</span> -al`<span class="comment"># i代表当前目录下详细信息，i代表以空白分割的每一项</span></span><br></pre></td></tr></table></figure><hr><h2 id="十-练习：找出list-xml中主机为ZF的行然后循环输出ip与区服对应的关系">十. 练习：找出list.xml中主机为ZF的行然后循环输出ip与区服对应的关系</h2><p><strong>找出list.xml中主机为ZF的行然后循环输出ip与区服对应的关系</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">示例</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cat list.xml </span></span><br><span class="line"><span class="comment">####IP    主机名    区服#########</span></span><br><span class="line">127.0.0.1 ZF-1      1 33 49 57</span><br><span class="line">127.0.0.1 ZF-11     65 67 69</span><br><span class="line">127.0.0.1 HF-1      22 34 6</span><br><span class="line">127.0.0.1 HF-11     6 17 36</span><br><span class="line">127.0.0.1 ZF-12     1 2</span><br><span class="line">127.0.0.1 HF-1      34 7</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">步骤1：首先过滤出ZF所在的行</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># vim test6.sh </span></span><br><span class="line"><span class="comment">#!/bin/bash# 管道| 把输出 作为下一条命令的输入</span></span><br><span class="line"><span class="built_in">cat</span> list.xml |grep ZF |<span class="keyword">while</span> <span class="built_in">read</span> ip host qufu<span class="comment"># 首先过滤出ZF所在的行</span></span><br><span class="line"><span class="keyword">do</span><span class="comment"># while read 获取内容</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;ip:<span class="variable">$ip</span>, qufu:<span class="variable">$qufu</span>&quot;</span><span class="comment"># 注：参数3整个赋给$qufu</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cat list.xml | grep ZF</span></span><br><span class="line">127.0.0.1 ZF-1      1 33 49 57</span><br><span class="line">127.0.0.1 ZF-11     65 67 69</span><br><span class="line">127.0.0.1 ZF-12     1 2</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># sh test6.sh # 注：$ip  $host  $qufu  不一定需要对应</span></span><br><span class="line">ip:127.0.0.1, qufu:1 33 49 57<span class="comment"># 前两个对应的，把前两个都取了</span></span><br><span class="line">ip:127.0.0.1, qufu:65 67 69<span class="comment"># 后面有的话，就全部是后面的内容</span></span><br><span class="line">ip:127.0.0.1, qufu:1 2<span class="comment"># 没有的话就为空（取不到的话就为空）</span></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">步骤2：套个循环</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="built_in">cat</span> list.xml |grep ZF |<span class="keyword">while</span> <span class="built_in">read</span> ip host qufu</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="variable">$qufu</span><span class="comment"># 注：套个循环。for循环以空格进行分割</span></span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;ip:<span class="variable">$ip</span>, qufu:<span class="variable">$i</span>&quot;</span><span class="comment"># 注：这里是i。对区服进行循环</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># sh test6.sh </span></span><br><span class="line">ip:127.0.0.1, qufu:1</span><br><span class="line">ip:127.0.0.1, qufu:33</span><br><span class="line">ip:127.0.0.1, qufu:49</span><br><span class="line">ip:127.0.0.1, qufu:57</span><br><span class="line">ip:127.0.0.1, qufu:65</span><br><span class="line">ip:127.0.0.1, qufu:67</span><br><span class="line">ip:127.0.0.1, qufu:69</span><br><span class="line">ip:127.0.0.1, qufu:1</span><br><span class="line">ip:127.0.0.1, qufu:2</span><br></pre></td></tr></table></figure><hr><h2 id="十一-循环获取文件或者命令输出的内容">十一. 循环获取文件或者命令输出的内容</h2><p><strong>循环获取文件或者命令输出的内容</strong></p><ul><li><p>for i in 默认 以空白分割 循环获取每个元素</p></li><li><p>while read 每次获取整行</p></li></ul><p>while read的参数 可以接任意个，默认还是以空白分割</p><p>如果参数没有对应获取的值，那参数就为空</p><p>如果文件中空白分割的参数大于read接受的参数，那多出的参数都会赋给最后一个read接受的参数</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">管道  进制之间通信的一种方式</span><br></pre></td></tr></table></figure><hr><h2 id="十二-shell中的一维数组">十二. shell中的一维数组</h2><p><strong>shell中的一维数组</strong></p><p>shell中的一维数组 使用<br>定义：使用<code>圆括号</code>，中间以 <code>空格</code> 作为分隔符<br>博客连接：<a href="https://www.cnblogs.com/tangshengwei/p/5446315.html">https://www.cnblogs.com/tangshengwei/p/5446315.html</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">示例14.1：定义、索取</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># a=(xx yy zz)# 注：a 是一个数组</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># a=(xx yy zz ff)# 注：a 是一个数组</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $&#123;a[0]&#125;# 注：通过索引查找，下标从0开始</span></span><br><span class="line">xx</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $&#123;a[1]&#125;# 注：通过索引查找</span></span><br><span class="line">yy</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $&#123;a[3]&#125;</span></span><br><span class="line">ff</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $&#123;a[@]&#125;# 注：$&#123;a[@]&#125; 表示它里面的每一个数，@ 取它里面的全部值</span></span><br><span class="line">xx yy zz ff<span class="comment"># 注：$@ 参数列表里面的全部内容</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $&#123;a[@]:1:4&#125;# 注：索取（切片）</span></span><br><span class="line">yy zz ff</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># a=(xx yy zz ff)</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $a# 注：echo $a  只取出一位数组里的第一个元素</span></span><br><span class="line">xx</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $&#123;a[*]&#125;# 注：$&#123;a[*]&#125; 取出一位数组里面的全部内容，效果一样</span></span><br><span class="line">xx yy zz ff</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $&#123;a[@]&#125;# 注：$&#123;a[@]&#125; 取出一位数组里面的全部内容</span></span><br><span class="line">xx yy zz ff</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $&#123;a:0:4&#125;# 注：对字符 xx 进行截取 从0开始</span></span><br><span class="line">xx</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $&#123;a:1:4&#125;# 注：对字符 xx 进行截取 从1开始</span></span><br><span class="line">x</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $&#123;a[*]:1:3&#125;# 注：索取，效果一样（切片）</span></span><br><span class="line">yy zz ff</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># a=(1 2 3 4)</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $&#123;a[*]:1:3&#125;# 注：索取，闭区间（切片）</span></span><br><span class="line">2 3 4</span><br><span class="line">============================================================================================</span><br><span class="line">获取长度（元素个数）</span><br><span class="line"><span class="comment">#注：$#获取参数列表长度</span></span><br><span class="line"><span class="comment"># echo $&#123;#a[*]&#125;</span></span><br><span class="line"><span class="comment"># echo $&#123;#a[@]&#125;</span></span><br><span class="line">示例14.2：获取一位数组长度（元素个数）</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $&#123;#a[*]&#125;# 注：不能用$a直接获取，因为 $a 代表 里面第一个元素</span></span><br><span class="line">4</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $&#123;#a[@]&#125;</span></span><br><span class="line">4</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $&#123;#a&#125;# 注：第一个元素长度</span></span><br><span class="line">2</span><br><span class="line"><span class="comment">###########################################################################################</span></span><br><span class="line">示例14.3：获取字符串长度 <span class="built_in">echo</span> <span class="variable">$&#123;#b&#125;</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># b=abc</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $&#123;#b&#125;</span></span><br><span class="line">3</span><br><span class="line">============================================================================================</span><br><span class="line">修改/删除 元素（shell里面一维数组的修改/删除）</span><br><span class="line">示例14.4：修改/删除 元素</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $&#123;a[*]&#125;</span></span><br><span class="line">xx yy zz ff</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># a[3]=&quot;hh&quot;# 注：修改元素</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $&#123;a[*]&#125;</span></span><br><span class="line">xx yy zz hh<span class="comment"># 注：清空数组 unset a</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># unset a[3]# 注：删除指定元素(下标为3)</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $&#123;a[*]&#125;</span></span><br><span class="line">xx yy zz</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $&#123;a[*]&#125;</span></span><br><span class="line">xx zz</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># unset a[1]# 注：删除不了</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $&#123;a[*]&#125;</span></span><br><span class="line">xx zz</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $&#123;!a[*]&#125;# 注：加！ 看元素的下标</span></span><br><span class="line">0 2<span class="comment"># 注：删除后，不会重新分配下标。一开始每个值的下标都一一对应了，不会改</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># unset a[2]# 注：删除zz元素，unset a[2]，下标为2</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $&#123;a[*]&#125;</span></span><br><span class="line">xx</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># </span></span><br></pre></td></tr></table></figure><hr><h2 id="十三-linux里-生成随机数">十三. linux里 生成随机数</h2><p><strong>linux里 生成随机数</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">示例</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $RANDOM # 注：自定义的环境变量</span></span><br><span class="line">15386</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $RANDOM </span></span><br><span class="line">24960</span><br><span class="line"><span class="comment">############################################################################################</span></span><br><span class="line">知识点15.2 生成指定范围内的随机数</span><br><span class="line">示例1：产生10以内的随机数（不含10）</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $(($RANDOM % 10)) </span></span><br><span class="line">1</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $(($RANDOM % 10)) </span></span><br><span class="line">8</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $(($RANDOM % 10)) </span></span><br><span class="line">2</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $(($RANDOM % 10)) </span></span><br><span class="line">3</span><br></pre></td></tr></table></figure><hr><h2 id="十四-练习：编写一个随机抽取同学唱歌的程序，如果唱过了，就不能再次被抽到了">十四. 练习：编写一个随机抽取同学唱歌的程序，如果唱过了，就不能再次被抽到了</h2><p><strong>编写一个随机抽取同学唱歌的程序，如果唱过了，就不能再次被抽到了</strong></p><p>1、编写一个文件，里面存放我们歌手的名字 name.txt</p><p>2、随机抽取歌手# 1.循环抽取  2.抽到了就丢掉</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">============================================================================================</span><br><span class="line"><span class="comment">#注：使用命令的输出  用``反引号</span></span><br><span class="line"><span class="comment">#注：把读到的人员名单变成一个数组</span></span><br><span class="line">示例</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># vim geshou_test.sh</span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment"># 将name.txt的内容读取出来   # 注：反引号` ` 把cat命令的输出放到数组里</span></span><br><span class="line">singers=(`<span class="built_in">cat</span> name.txt`)<span class="comment"># 注：把读取的内容放到数组里面（cat读取）</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;singers[@]&#125;</span><span class="comment"># 注：验证是否取出数据# 注：相对路径 指当前下的文件</span></span><br><span class="line"><span class="comment"># 有多少人</span></span><br><span class="line">total=<span class="variable">$&#123;#singers[@]&#125;</span><span class="comment"># 首先 获取人数（对singers长度进行统计）</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `<span class="built_in">seq</span> <span class="variable">$total</span>`<span class="comment"># 然后循环（for 循环次数，$total 人数进行循环）</span></span><br><span class="line"><span class="keyword">do</span><span class="comment"># 注：反引号` `  命令去执行它</span></span><br><span class="line">    <span class="built_in">read</span> -p <span class="string">&quot;请输入任意键进行抽取&quot;</span> <span class="comment"># 注：read 目的：敲一下键盘  才会接着循环</span></span><br><span class="line">    <span class="comment"># 随机抽取一个人演唱# 每次循环都是抽取 新的 列表里面的人数（因为下标问题）</span></span><br><span class="line">    random_num=$(( <span class="variable">$RANDOM</span> % <span class="variable">$&#123;#singers[*]&#125;</span> ))<span class="comment">#注：生成随机数，范围0 ~ 一维数组长度</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;随机数为：<span class="variable">$random_num</span>&quot;</span><span class="comment"># 注：随机抽取索引/下标</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;有请<span class="variable">$&#123;singers[$random_num]&#125;</span>献唱一首！大家热烈欢迎！&quot;</span></span><br><span class="line">    <span class="built_in">unset</span> singers[<span class="variable">$random_num</span>]<span class="comment"># 注：把选中的人删除（与python不同的是，删除以后下标不变）</span></span><br><span class="line">    singers=(`<span class="built_in">echo</span> <span class="variable">$&#123;singers[@]&#125;</span>`)<span class="comment"># 注：解决办法 重新赋值,赋值给一个新的一维数组</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;未献唱者具体名单为： <span class="variable">$&#123;singers[@]&#125;</span>&quot;</span> <span class="comment"># 注：↑也可以使用 singers=($&#123;singers[@]&#125;)</span></span><br><span class="line"><span class="keyword">done</span><span class="comment"># 注：↑也可以使用singers= `echo $&#123;singers[@]&#125;`</span></span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># cat name.txt # 注：↑重新赋值后  下标会变 从0~总长度</span></span><br><span class="line">fengcheng</span><br><span class="line">zhanghuayou</span><br><span class="line">pengyifan</span><br><span class="line">chenpeng</span><br><span class="line">xulilin</span><br><span class="line">tangliangfei</span><br><span class="line">wangtiancheng</span><br><span class="line">lixinhai</span><br><span class="line">liangluyao</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">演示</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># sh geshou_test.sh </span></span><br><span class="line">fengcheng zhanghuayou pengyifan chenpeng xulilin tangliangfei wangtiancheng lixinhai liangluyao</span><br><span class="line">请输入任意键进行抽取</span><br><span class="line">随机数为：2</span><br><span class="line">有请pengyifan献唱一首！大家热烈欢迎！</span><br><span class="line">未献唱者具体名单为： fengcheng zhanghuayou chenpeng xulilin tangliangfei wangtiancheng lixinhai liangluyao</span><br><span class="line">请输入任意键进行抽取</span><br><span class="line">随机数为：2</span><br><span class="line">有请chenpeng献唱一首！大家热烈欢迎！</span><br><span class="line">未献唱者具体名单为： fengcheng zhanghuayou xulilin tangliangfei wangtiancheng lixinhai liangluyao</span><br><span class="line"></span><br><span class="line"><span class="comment">#注：获取命令输出的时候  加``反引号</span></span><br></pre></td></tr></table></figure><hr><h2 id="十五-练习：产生5–10之间随机数">十五. 练习：产生5–10之间随机数</h2><p><strong>产生5–10之间随机数</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">产生5--10之间随机数</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># echo $(( $RANDOM % 10 ))# 注：产生10以内随机数</span></span><br><span class="line">3</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># echo $(( $RANDOM % 5 +5 ))# 注：取5以内的随机数 +5</span></span><br><span class="line">6</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># echo $(( $RANDOM % 5 +5 ))</span></span><br><span class="line">8</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">50--150之间随机数</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># echo $(( $RANDOM % 100 +50 ))</span></span><br><span class="line">79                                                    <span class="comment"># 注：100是区间绝对值，50是初始值</span></span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">150-200之间随机数                      <span class="comment"># 注：150初始值， 50 + 150 末尾值</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $(( $RANDOM % 50 + 150 ))# 注：150~200之间</span></span><br><span class="line">190</span><br></pre></td></tr></table></figure><hr><h2 id="十六-tr（替换命令）">十六. tr（替换命令）</h2><p><strong>tr命令（替换命令）</strong></p><p>tr命令（主要用来做字符的替换） # 注：对文本处理常用</p><ul><li>字符转换工具</li><li>只能对<code>stdin</code>操作，不能直接对文件操作# 注：<strong>只能对标准输入进行操作</strong></li></ul><p>----------------------------------------------------</p><p>使用tr转换字符</p><ul><li>tr  SET1  SET2</li><li>用SET2中的字符替换掉SET1中同一位置的字符</li></ul><p><strong>tr -d  删除指定字符</strong><br><strong>tr -s  压缩相同字符，将连续的指定字符压缩成一个字符</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">示例</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">示例1：替换</span><br><span class="line"><span class="comment">#注：替换同位置的</span></span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># echo 123456| tr 345 xyz# 注：把345替换成xyz</span></span><br><span class="line">12xyz6<span class="comment"># 注：只能对标准输入进行操作</span></span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># echo 123456| tr 3 xyz# 注：把3替换成xyz</span></span><br><span class="line">12x456<span class="comment"># 注：只替换了x，对应位置的</span></span><br><span class="line"><span class="comment"># 注：有几个位置，替换几个字符</span></span><br><span class="line"><span class="comment"># 注：替换同位置的</span></span><br><span class="line">============================================================================================</span><br><span class="line">示例2：删除 <span class="comment"># echo 123456| tr -d 34</span></span><br><span class="line"><span class="built_in">tr</span> -d  删除指定字符</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># echo 123456| tr 3 &quot;&quot;# 注：&quot;&quot; 不能为空，它要替换同位置的</span></span><br><span class="line"><span class="built_in">tr</span>: 当不截断设置1 时，字符串2 不能为空</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># echo 123456| tr -d 34# 注：删除接tr -d</span></span><br><span class="line">1256</span><br><span class="line">============================================================================================</span><br><span class="line"><span class="built_in">tr</span> -s  压缩相同字符，将连续的指定字符压缩成一个字符</span><br><span class="line">将连续的指定字符压缩成一个字符</span><br><span class="line">示例3：<span class="built_in">tr</span> -s  压缩相同字符</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># echo 111223333444445556666| tr -s 34</span></span><br><span class="line">11122345556666<span class="comment"># 注：当有连续的时候压缩成一个</span></span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># echo 11122333344444555666633377744| tr -s 34</span></span><br><span class="line">1112234555666637774<span class="comment"># 注：并不是去重</span></span><br><span class="line">============================================================================================</span><br><span class="line">练习4：把环境变量里 : 替换成空格   <span class="comment"># 注：关键点 tr不能替换文件内容</span></span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># echo $PATH |tr &quot;:&quot; &quot; &quot;# 注：关键点 tr接收的是标准输入</span></span><br><span class="line">/lianxi/sc /usr/local/sbin /usr/local/bin /usr/sbin /usr/bin /root/bin /usr/local/nginx/sbin /root/bin /usr/local/nginx5/sbin /root/bin</span><br><span class="line">============================================================================================</span><br><span class="line">扩展5：替换文件里的内容，生成一个新文件</span><br><span class="line"><span class="comment">#注：把文件导进来  进行标准输入</span></span><br><span class="line">示例：将/etc/passwd里的 ：替换成空格</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">写法1：<span class="built_in">cat</span>导入</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># cat /etc/passwd |tr &quot;:&quot; &quot; &quot; &gt;/tmp/passwd</span></span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># less /tmp/passwd # 注：：全变空格了</span></span><br><span class="line">写法2：<span class="built_in">tr</span>接收标准输入  重定向标准输入 <span class="built_in">tr</span> <span class="string">&quot;:&quot;</span> <span class="string">&quot; &quot;</span> &lt;/etc/passwd</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># tr &quot;:&quot; &quot; &quot; &lt;/etc/passwd  &gt;/tmp/passwd2 </span></span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># less /tmp/passwd2# 注：：全变空格了</span></span><br><span class="line"><span class="comment">#注：写法2把一个文件导进来，进行标准输入    tr &quot;:&quot; &quot; &quot; &lt;/etc/passwd</span></span><br><span class="line">============================================================================================</span><br><span class="line">扩展5.1 重定向标准输入</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># wc -l /etc/passwd# 注：wc -l 查看文件行数</span></span><br><span class="line">52 /etc/passwd</span><br><span class="line">示例：重定向标准输入</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># wc -l &lt; /etc/passwd</span></span><br><span class="line">52</span><br></pre></td></tr></table></figure><hr>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>10_Linux基础-SHELL入门1</title>
      <link href="/blog/posts/30664.html"/>
      <url>/blog/posts/30664.html</url>
      
        <content type="html"><![CDATA[<p>摘要：博客迁移 <a href="https://blog.csdn.net/cpen_web"><code>https://blog.csdn.net/cpen_web</code></a> → 本站<span id="more"></span></p><h1 id="10-Linux基础-SHELL入门1">10_Linux基础-SHELL入门1</h1><p><a href="https://blog.csdn.net/cpen_web">博客🔗：https://blog.csdn.net/cpen_web</a></p><hr><h2 id="一-输入输出重定向">一. 输入输出重定向</h2><p><strong>回顾1 输入输出重定向</strong></p><p>输入</p><p>read -p “请输入” a-p 提示  a 赋值给a</p><p>read -s 密码隐藏</p><p>---------------------------------------------------------------</p><p>输出</p><p>​echo</p><p>​# echo -e “abc\t abc”转义字符输出</p><p>​abcabc</p><p>​# echo “abc\t abc”</p><p>​abc\t abc</p><p><code>echo -n  不接换行</code></p><p><code>echo -e  转义字符输出</code></p><hr><h2 id="二-2个特殊文件">二. 2个特殊文件</h2><p><strong>知识点2  2个特殊文件</strong></p><p>两个特殊文件</p><p>·<code>/dev/null</code>：过滤标准错误信息</p><p>·<code>/dev/zero</code>：用来创建指定长度文件</p><p><code>/dev/null</code>：黑洞文件，不保存，不输出的信息，就丢到黑洞文件</p><p><code>/dev/zero</code>：用来生成指定大小的文件，生成一堆0</p><hr><p>示例：<code>/dev/zero</code>：用来生成指定大小的文件，生成一堆0</p><p><code>/dev/zero</code>一般用作生成指定大小的文件，做测试用</p><p>dd是一个备份命令，也可以产生一个指定大小的文件</p><p>if 输入文件 input file</p><p>of 输出文件 output file</p><p>bs 输出的数据的单位大小</p><p>count  输出的数据单位数量</p><p>示例：______<em>_____________________</em>____________________________</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@sanchuang-linux dev]<span class="comment"># dd if=/dev/zero of=/tmp/test.dd bs=1M count=5</span></span><br><span class="line">记录了5+0 的读入</span><br><span class="line">记录了5+0 的写出</span><br><span class="line">5242880 bytes (5.2 MB, 5.0 MiB) copied, 0.00196718 s, 2.7 GB/s</span><br><span class="line">[root@sanchuang-linux dev]<span class="comment"># du -sh /tmp/test.dd </span></span><br><span class="line">5.0M/tmp/test.dd</span><br><span class="line"><span class="keyword">if</span> 从哪里导进来 ， of 导出去这个文件 ， bs 数据单位大小  ， count数据单位数量</span><br></pre></td></tr></table></figure><hr><h2 id="三-here-document">三. here document</h2><p><strong>知识点3 here document</strong></p><p><code>here document文档就在这里</code></p><p>&lt;&lt;</p><p>生成一个指定内容的文档。</p><p>简单脚本中使用</p><p>示例：</p><p>-----------------------------------------------------------</p><p>[root@sanchuang-linux chenpeng]# <code>cat &gt;here_test.txt &lt;&lt;EOF</code><br>&gt; nihao<br>&gt; sanchuang<br>&gt; huanying<br>&gt; world…<br>&gt; x y z<br><code>\&gt; EOF</code><br>[root@sanchuang-linux chenpeng]# cat here_test.txt<br>nihao<br>sanchuang<br>huanying<br>world…<br>x y z</p><hr><p><strong>知识点3.2 EOF是文档结束标志 可以自行定义（end of file）</strong></p><p>示例：</p><p>------------------------------------------------------</p><p>[root@sanchuang-linux chenpeng]# cat &gt;here_test &lt;&lt;<code>XYZ</code><br>&gt; nihao<br>&gt; hello world<br><code>&gt; XYZ</code><br>[root@sanchuang-linux chenpeng]# cat here_test<br>nihao<br>hello world</p><hr><h2 id="四-tee命令">四. tee命令</h2><p><strong>知识点4 tee命令</strong></p><p><code>tee命令  输出到屏幕也重定向到文件</code></p><p>示例：</p><p>----------------------------------</p><p>[root@sanchuang-linux chenpeng]# echo “aa” &gt;test_aa.txt#（注：默认不输出到屏幕）<br>[root@sanchuang-linux chenpeng]# cat test_aa.txt<br>aa<br>[root@sanchuang-linux chenpeng]# <code>echo &quot;bb&quot; |tee test_bb.txt#</code>（注：屏幕+文件）<br>bb<br>[root@sanchuang-linux chenpeng]# cat test_bb.txt<br>bb</p><hr><h2 id="五-清空文件内容">五. 清空文件内容</h2><p><strong>知识点5 清空文件内容</strong></p><p>[root@sanchuang-linux chenpeng]# <code>&gt;test_bb.txt</code><br>[root@sanchuang-linux chenpeng]# <code>echo &gt; test_bb.txt</code> #（注：有换行）<br>[root@sanchuang-linux chenpeng]# cat test_bb.txt</p><p>[root@sanchuang-linux chenpeng]# <code>echo -n &gt; test_bb.txt </code><br>[root@sanchuang-linux chenpeng]# cat test_bb.txt<br>[root@sanchuang-linux chenpeng]# <code>:&gt;test_bb.txt </code><br>[root@sanchuang-linux chenpeng]# cat test_bb.txt</p><hr><p><strong>知识点6 echo</strong></p><p><code>echo</code></p><p>在屏幕上显示一段文字或指定内容</p><p>输出变量，输出指定内容</p><p><code>-e 选项转义字符输出</code></p><p><code>-n 选项不接换行</code></p><hr><h2 id="六-SHELL入门">六. SHELL入门</h2><p><code>shell入门</code></p><p>shell 是一个用C语言写的程序，它是用户使用linux的桥梁</p><p>shell 脚本 实现自动化  重复性的操作编写脚本完成，减少人工失误</p><hr><h3 id="SHELL的变量">SHELL的变量</h3><p><code>shell的变量</code></p><p>1、局部变量  定义在脚本或命令中</p><p>2、环境变量  shell启动的程序能访问到的环境变量 env、 echo $PATH</p><p>3、shell变量</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">示例：环境变量</span><br><span class="line">------------------------------------------</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># which ls</span></span><br><span class="line"><span class="built_in">alias</span> <span class="built_in">ls</span>=<span class="string">&#x27;ls --color=auto&#x27;</span></span><br><span class="line">/usr/bin/ls<span class="comment">#（注：环境变量）</span></span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># echo $PATH#（注：环境变量）</span></span><br><span class="line">/lianxi/sc:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin:/usr/local/nginx/sbin:/root/bin:/usr/local/nginx5/sbin:/root/bin</span><br><span class="line">示例2：局部变量</span><br><span class="line">-------------------------------------------</span><br><span class="line">a=1</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$a</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;a&#125;</span></span><br></pre></td></tr></table></figure><hr><p><strong>知识点8.2 变量名命名规则</strong></p><p><code>变量名命名规则：</code></p><p>由数字、字母、下划线组合，不能以数字开头</p><p>不能使用bash中的关键字</p><p><code>使用一个定义过的变量，需要在前面加上$符号</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">示例：</span><br><span class="line">--------------------------------------------</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># echo $PATH#（注：环境变量）</span></span><br><span class="line">/lianxi/sc:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin:/usr/local/nginx/sbin:/root/bin:/usr/local/nginx5/sbin:/root/bin</span><br></pre></td></tr></table></figure><hr><h3 id="SHELL接收参数">SHELL接收参数</h3><p><strong>知识点9 shell接收参数</strong></p><p>shell接收</p><p><code>位置变量 ：$1 - $9 ，分别代表参数列表中的 第1 - 9 个参数</code></p><p>可以重复使用（即脚本里可以出现两个$1）</p><hr><p><code>预定义变量，系统预留的一些变量：</code></p><p>$0 当前进程 或者 脚本名称</p><p>$! 后台运行的最后一个进程的pid号</p><p>$? 上一条命令程序返回值</p><p>$* 代表所有参数内容</p> 表示当前进程pid号$# 表示参数个数$@ 代表所有参数（逐个提取）---`# perror 1`查看命令的返回值，并且看返回值的**具体含义**$?  命令返回值为0 表示正常执行​不为0 都表示运行错误<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">示例如下：__________________________________</span><br><span class="line">[root@mysql-binary shell_test]<span class="comment"># echo $?</span></span><br><span class="line">1</span><br><span class="line">[root@mysql-binary shell_test]<span class="comment"># perror 1</span></span><br><span class="line">OS error code   1:  Operation not permitted</span><br></pre></td></tr></table></figure>---`#!/bin/bash脚本前最好加上这一行，默认使用什么解释器去执行``原因：类unix操作系统，unbuntu、debian、centos每个操作系统的默认bash可能不一样`---**示例1：`位置变量$1、$2` \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_**[root@sanchuang-linux shell_test]# cat canshu.sh \#!/bin/bashecho "########这是$1########"#（注：位置变量）echo "$1"#（注：位置变量）echo "########这是$2########"#（注：位置变量）echo "$2"#（注：位置变量）[root@sanchuang-linux shell_test]# sh canshu.sh `"hello" "world"#`（注：传了2个参数）\########这是hello#########（注：参数1）hello\########这是world#########（注：参数2）world---**示例2：`预定义变量 $0`\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_**<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@sanchuang-linux shell_test]<span class="comment"># echo $0#（注：$0 当前进程 或者 脚本名称）</span></span><br><span class="line">-bash</span><br><span class="line">[root@sanchuang-linux shell_test]<span class="comment"># sh canshu.sh &quot;hello&quot; &quot;world&quot;</span></span><br><span class="line"><span class="comment">########这是hello########</span></span><br><span class="line">hello</span><br><span class="line"><span class="comment">########这是world########</span></span><br><span class="line">world</span><br><span class="line">canshu.sh<span class="comment">#（注：$0 当前进程 或者 脚本名称）</span></span><br><span class="line">[root@sanchuang-linux shell_test]<span class="comment"># cat canshu.sh </span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;########这是<span class="variable">$1</span>########&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$1</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;########这是<span class="variable">$2</span>########&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$2</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$0</span>&quot;</span></span><br></pre></td></tr></table></figure>---**示例3：`预定义变量 $*  $#  $@`\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_**<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@sanchuang-linux shell_test]<span class="comment"># vim canshu.sh</span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;########这是<span class="variable">$1</span>########&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$1</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;########这是<span class="variable">$2</span>########&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$2</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$0</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;这是所有:$*&quot;</span><span class="comment">#（注：$* 代表所有参数内容）</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;参数#：<span class="variable">$#</span>&quot;</span><span class="comment">#（注：$# 表示参数个数）</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;这是@：<span class="variable">$@</span>&quot;</span><span class="comment">#（注：$@ 代表所有参数（逐个提取））</span></span><br><span class="line">──────────────────────────────────────────────</span><br><span class="line">[root@sanchuang-linux shell_test]<span class="comment"># sh canshu.sh hello world 2020  #（注：3个参数）</span></span><br><span class="line"><span class="comment">########这是hello########</span></span><br><span class="line">hello</span><br><span class="line"><span class="comment">########这是world########</span></span><br><span class="line">world</span><br><span class="line">canshu.sh</span><br><span class="line">这是所有:hello world 2020</span><br><span class="line">参数<span class="comment">#：3</span></span><br><span class="line">这是@：hello world 2020</span><br></pre></td></tr></table></figure>---**知识点10 python中接收参数 sys模块**python中sys模块里面的argv属性。python后面 传过来的参数是一个`列表`，然后获取第一个第二个<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@sanchuang-linux ~]<span class="comment"># vim canshu.py</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(sys.argv[<span class="number">1</span>],sys.argv[<span class="number">2</span>])<span class="comment">#（注：1接收参数1，2接收参数2）</span></span><br><span class="line"><span class="built_in">print</span>(sys.argv[<span class="number">0</span>])<span class="comment">#（注：0是文件名）</span></span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># python3 canshu.py &quot;hello&quot; &quot;world&quot;</span></span><br><span class="line">hello world</span><br><span class="line">canshu.py</span><br></pre></td></tr></table></figure>---### 数据类型**知识点11 数据类型**`shell常用数字、字符串、数组`字符串的定义，可以使用单引号，也可以使用双引号，也可以不用引号<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">示例：字符串的定义__________________</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo abc</span></span><br><span class="line">abc</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># a=b</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $a</span></span><br><span class="line">b</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># a=&quot;b&quot;</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $a</span></span><br><span class="line">b</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># a=&#x27;b&#x27;</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $a</span></span><br><span class="line">b</span><br><span class="line"></span><br><span class="line">示例：数字的定义_________________</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># a=1</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># a=2</span></span><br></pre></td></tr></table></figure>---### 引号区别**知识点12 引号区别：双引号可以识别变量，单引号不可以识别变量**引号区别：双引号可以识别变量，单引号不可以<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@sanchuang-linux ~]<span class="comment"># head -n1 /etc/passwd#（注：输出passwd第一条）</span></span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cat /etc/passwd |head -n1#（注：不建议用这个 2条命令）</span></span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 字符串操作</span></span><br><span class="line">line=`<span class="built_in">head</span> -n1 /etc/passwd`<span class="comment">#（注：使用反引号``）（注：把命令输出保存在line里面）</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$line</span></span><br><span class="line">---------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># bash test2.sh </span></span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br></pre></td></tr></table></figure>**示例：双引号可以识别变量，单引号不可以识别变量\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_**<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;字符串为：<span class="variable">$line</span>&quot;</span></span><br><span class="line">字符串为：root:x:0:0:root:/root:/bin/bash</span><br><span class="line">------------------------------------------</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;字符串为：$line&#x27;</span></span><br><span class="line">字符串为：<span class="variable">$line</span></span><br></pre></td></tr></table></figure>---### 字符串操作**知识点13 字符串操作**<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">截取</span><br><span class="line">截取前4个字符：<span class="built_in">echo</span> <span class="variable">$&#123;line:0:4&#125;</span></span><br><span class="line">截取后9个字符  <span class="built_in">echo</span> <span class="variable">$&#123;line:0-9&#125;</span></span><br><span class="line">从倒数第九个字符开始截取4个字符 <span class="built_in">echo</span> <span class="variable">$&#123;line:0-9:4&#125;</span></span><br><span class="line">从左向右截取最后一个：后的字符   <span class="built_in">echo</span> <span class="variable">$&#123;line##*:&#125;</span></span><br><span class="line">从左向右截取第一个：后的字符     <span class="built_in">echo</span> <span class="variable">$&#123;line#*:&#125;</span></span><br><span class="line">从右往左截取最后一个：后的字符<span class="built_in">echo</span> <span class="variable">$&#123;line%%:*&#125;</span></span><br><span class="line">从右向左截取第一个：后的字符<span class="built_in">echo</span> <span class="variable">$&#123;line%:*&#125;</span></span><br><span class="line">字符串长度<span class="built_in">echo</span> <span class="variable">$&#123;#line&#125;</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">示例：字符串操作_______________________________</span><br><span class="line"><span class="comment"># 字符串操作</span></span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># vim test2.sh</span></span><br><span class="line">line=`<span class="built_in">head</span> -n1 /etc/passwd`</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$line</span><span class="comment">#（注：root:x:0:0:root:/root:/bin/bash）</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;字符串为：<span class="variable">$line</span>&quot;</span><span class="comment">#（注：字符串为：root:x:0:0:root:/root:/bin/bash）</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;字符串为：$line&#x27;</span><span class="comment">#（注：字符串为：$line）</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;截取前4个字符：&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;line:0:4&#125;</span><span class="comment">#（注：root）</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;截取后9个字符&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;line:0-9&#125;</span><span class="comment">#（注：/bin/bash）</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;从倒数第九个字符开始截取4个字符&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;line:0-9:4&#125;</span><span class="comment">#（注：/bin）</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;从左向右截取最后一个：后的字符&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;line##*:&#125;</span><span class="comment">#（注：/bin/bash）</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;从左向右截取第一个：后的字符&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;line#*:&#125;</span><span class="comment">#（注：x:0:0:root:/root:/bin/bash）</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;从右往左截取最后一个：后的字符&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;line%%:*&#125;</span><span class="comment">#（注：root）</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;从右向左截取第一个：后的字符&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;line%:*&#125;</span><span class="comment">#（注：root:x:0:0:root:/root）</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;字符串长度&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;#line&#125;</span><span class="comment">#（注：31）</span></span><br><span class="line">-----------------------------------------------</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># bash test2.sh </span></span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">字符串为：root:x:0:0:root:/root:/bin/bash</span><br><span class="line">字符串为：<span class="variable">$line</span></span><br><span class="line">截取前4个字符：</span><br><span class="line">root</span><br><span class="line">截取后9个字符</span><br><span class="line">/bin/bash</span><br><span class="line">从倒数第九个字符开始截取4个字符</span><br><span class="line">/bin</span><br><span class="line">从左向右截取最后一个：后的字符</span><br><span class="line">/bin/bash</span><br><span class="line">从左向右截取第一个：后的字符</span><br><span class="line">x:0:0:root:/root:/bin/bash</span><br><span class="line">从右往左截取最后一个：后的字符</span><br><span class="line">root</span><br><span class="line">从右向左截取第一个：后的字符</span><br><span class="line">root:x:0:0:root:/root</span><br><span class="line">字符串长度</span><br><span class="line">31</span><br></pre></td></tr></table></figure>---**练习13 截取百度网址**<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">line=<span class="string">&quot;http://www.baidu.com/login&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 截取出：login</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;line:0-5&#125;</span><span class="comment">#（注：取最后5个字符）</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;line##*/&#125;</span><span class="comment">#（注：从左往右最后一个/后的内容）</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 截取出：www.baidu.com/login</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;line##*//&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 截取出：http://www.baidu.com</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;line%/*&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 截取出：http:</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;line%%/*&#125;</span></span><br></pre></td></tr></table></figure>---### 数值的运算与比较**知识点14 数值的运算与比较**数值的运算：第一种： `$(( 表达式 ))`第二种： `$[ 表达式 ]`第三种： `expr 表达式`注意表达式运算符`左右空格`<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">示例：↓↓↓↓↓↓↓↓↓↓↓↓↓↓</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># a=10</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># b=20</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># $(($a + $b))</span></span><br><span class="line">-bash: 30: 未找到命令</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $(($a + $b))</span></span><br><span class="line">30</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo $[ $a +$b ]</span></span><br><span class="line">30</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># expr $a + $b</span></span><br><span class="line">30</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># expr $a+$b</span></span><br><span class="line">10+20</span><br></pre></td></tr></table></figure>---### SHELL结构语句，循环和判断**知识点15 shell结构语句，循环和判断****知识点15.1 for循环****for循环**<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">语法1：↓↓↓↓↓↓↓↓</span><br><span class="line">-----------------------</span><br><span class="line"><span class="keyword">for</span> 变量 <span class="keyword">in</span> 值1 值2</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">循环执行语句</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">=======================================</span><br><span class="line">语法2：↓↓↓↓↓↓↓</span><br><span class="line">---------------------------------------</span><br><span class="line"><span class="comment"># for ((i=0;i&lt;3;i++))</span></span><br><span class="line"><span class="keyword">for</span> ((初始化变量; 结束循环的条件; 运算))</span><br><span class="line"><span class="keyword">do</span> </span><br><span class="line">循环执行的语句</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>---**知识点15.2 while循环****While循环**<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">语法1：↓↓↓↓↓</span><br><span class="line">---------------------------------------</span><br><span class="line"><span class="keyword">while</span> <span class="built_in">read</span> line</span><br><span class="line"><span class="keyword">do</span> </span><br><span class="line">循环执行语句</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">=======================================</span><br><span class="line">语法2↓↓↓↓↓↓↓↓↓</span><br><span class="line">---------------------------------------</span><br><span class="line"><span class="keyword">while</span> [条件(非必选)]:</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">循环执行语句</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">=======================================</span><br><span class="line">注：也支持<span class="built_in">break</span>，<span class="built_in">continue</span></span><br></pre></td></tr></table></figure>---**知识点15 判断****知识点15.3 if语句****if语句**<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">语法1：↓↓↓↓↓</span><br><span class="line">-------------------------</span><br><span class="line"><span class="keyword">if</span> 条件</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">执行语句</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">=========================</span><br><span class="line">语法2:↓↓↓↓↓</span><br><span class="line"><span class="keyword">if</span> 条件</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">执行语句</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">执行语句</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">==========================</span><br><span class="line">语法3：↓↓↓↓↓↓</span><br><span class="line">----------------------</span><br><span class="line"><span class="keyword">if</span> [ <span class="built_in">command</span> ];<span class="keyword">then</span></span><br><span class="line">符合该条件执行的语句</span><br><span class="line"><span class="keyword">elif</span> [ <span class="built_in">command</span> ];<span class="keyword">then</span></span><br><span class="line">符合该条件执行的语句</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">符合该条件执行的语句</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>---**知识点15.4 case语句****case语句**<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">语法：↓↓↓↓↓________________</span><br><span class="line"><span class="keyword">case</span> $变量名 <span class="keyword">in</span></span><br><span class="line">条件1)</span><br><span class="line">执行语句一</span><br><span class="line">;;</span><br><span class="line">条件2)</span><br><span class="line">执行语句二</span><br><span class="line">;;</span><br><span class="line">*）</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>---**练习16**编写一个shell脚本接收用户输入的两个数，然后选择要对着两个数进行什么计算，并且输出结果实现菜单选择\=\=\=\=\=\=\=\==\=\=\=\=\=\=\=1. add 加法2. sub 减法3. mul 乘法4. exit 退出\=\=\=\==\=\=\=\=\=\=\=\=\=\=\=注：菜单选择用case、服务重启脚本用case<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">示例：↓↓↓↓↓↓↓↓↓_________________________</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># vim num_test.sh</span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;请输入数字一：&quot;</span> num1</span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;请输入数字二：&quot;</span> num2</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;================&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;1.add 加法&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;2.sub 减法&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;3.mul 乘法&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;4.exit 退出&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;================&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;请输入你的选择：&quot;</span> options</span><br><span class="line"><span class="keyword">case</span> <span class="variable">$options</span> <span class="keyword">in</span></span><br><span class="line">1)</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;两数相加为：<span class="subst">$(($num1 + $num2)</span>)&quot;</span></span><br><span class="line">    ;;</span><br><span class="line">2)</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;两数相减为：<span class="subst">$(($num1 - $num2)</span>)&quot;</span></span><br><span class="line">    ;;</span><br><span class="line">3)</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;两数相乘为：<span class="subst">$(($num1 * $num2)</span>)&quot;</span></span><br><span class="line">    ;;</span><br><span class="line">4)</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;退出！&quot;</span></span><br><span class="line">    <span class="built_in">exit</span></span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line">-------------------------------------------------------------------------------------------</span><br><span class="line">整成函数形式</span><br><span class="line"><span class="function"><span class="title">add</span></span>()&#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;两数相加为：<span class="subst">$(($num1 + $num2)</span>)&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="variable">$options</span> <span class="keyword">in</span></span><br><span class="line">1)</span><br><span class="line">    add<span class="comment">#（注：需要使用的时候调用）</span></span><br><span class="line">    ;;</span><br><span class="line">2)…………………………</span><br></pre></td></tr></table></figure>---### /etc/init.d  服务的启动脚本**知识点17 /etc/init.d  服务的启动脚本****/etc/init.d/ 放着服务的启动脚本**<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># cd /etc/init.d/              </span></span><br><span class="line">[root@sanchuang-linux init.d]<span class="comment"># ls                             </span></span><br><span class="line"><span class="built_in">functions</span>  README           </span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">示例：服务重启脚本用<span class="keyword">case</span>↓↓↓↓↓__________________</span><br><span class="line"><span class="keyword">case</span> <span class="variable">$mode</span> <span class="keyword">in</span></span><br><span class="line">start)</span><br><span class="line">启动</span><br><span class="line">;;</span><br><span class="line">stop)</span><br><span class="line">关闭(使用<span class="built_in">kill</span>命令)</span><br><span class="line">;;</span><br><span class="line">restart)</span><br><span class="line">关闭</span><br><span class="line">启动</span><br><span class="line">;;</span><br><span class="line">reload)</span><br><span class="line">重新加载配置（使用<span class="built_in">kill</span> -HUP）</span><br><span class="line">;;</span><br><span class="line"><span class="keyword">esac</span>            </span><br></pre></td></tr></table></figure>---### kill**知识点18 kill**<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">kill</span> 用来删除正在执行中的程序或者工作</span><br><span class="line"><span class="built_in">kill</span> 可以将指定的信息发送给程序</span><br><span class="line"></span><br><span class="line"><span class="comment"># kill -l 可以查看kill信号量（kill -L(小写)）</span></span><br><span class="line"><span class="comment"># kill -0 用来检测进程是否存在，当进程不存在时,kill -0 会报错</span></span><br><span class="line"><span class="comment"># kill -1 pid 重新加载进程（常用）</span></span><br><span class="line"><span class="comment"># kill -HUP pid 和  kill -1 pid是一样的</span></span><br><span class="line"><span class="comment"># kill -1 pid  或者  kill -HUP pid  都表示重新加载这个文件</span></span><br><span class="line"><span class="comment"># kill -9 强制杀死</span></span><br><span class="line"><span class="comment"># kill -15 正常停止一个进程</span></span><br><span class="line"><span class="built_in">kill</span> 不接信号量的时候，默认为信号15</span><br><span class="line">除了9号信号，其他信号进程都有权利拒绝执行！</span><br></pre></td></tr></table></figure>---注：重新加载  相当于  加载最新的配置  服务还是正常运行的（连接不会断）​重启 服务会断<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">示例：↓↓↓↓↓↓↓↓↓____________</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># kill -l</span></span><br><span class="line"> 1) SIGHUP 2) SIGINT 3) SIGQUIT 4) SIGILL 5) SIGTRAP</span><br><span class="line"> 6) SIGABRT 7) SIGBUS 8) SIGFPE 9) SIGKILL10) SIGUSR1</span><br><span class="line">…………………………</span><br><span class="line">63) SIGRTMAX-164) SIGRTMAX</span><br></pre></td></tr></table></figure>---### SHELL编程  if判断**知识点19 shell编程  if判断****if 判断**<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">示例：↓↓↓↓↓↓____________________________________________________________</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># if id wenyao; then echo &quot;ok&quot;; else echo &quot;error&quot;; fi</span></span><br><span class="line"><span class="built_in">id</span>: “wenyao”：无此用户</span><br><span class="line">error</span><br><span class="line">--------------------------------------------------------</span><br><span class="line">等同于：↓↓↓↓↓________________________________________________</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">id</span> wenyao; </span><br><span class="line"><span class="keyword">then</span> </span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;ok&quot;</span>; </span><br><span class="line"><span class="keyword">else</span> </span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;error&quot;</span>; </span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>---### [ ]**知识点20 [ ]****[ ]表示条件测试**注意这里的空格很重要。要注意在'['后面和']'前面都必须要有空格。---<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">常用判断：</span><br><span class="line">[ -d FILE ] 如果 FILE 存在且是一个目录则返回为真。</span><br><span class="line">[ -f FILE ] 如果 FILE 存在且是一个普通文件则返回为真。</span><br><span class="line">[ -e **** ] 判断文件/文件夹是否存在</span><br><span class="line"></span><br><span class="line">字符串判断：</span><br><span class="line">[ -z STRING ] 如果STRING的长度为零则返回为真，即空是真</span><br><span class="line">[ -n STRING ] 如果STRING的长度非零则返回为真，即非空是真</span><br><span class="line">[ STRING1 ]　 如果字符串不为空则返回为真,与-n类似</span><br><span class="line">[ STRING1 == STRING2 ] 如果两个字符串相同则返回为真</span><br><span class="line">[ STRING1 != STRING2 ] 如果字符串不相同则返回为真</span><br><span class="line">[ STRING1 &lt; STRING2 ] 如果 “STRING1”字典排序在“STRING2”前面则返回为真。</span><br><span class="line">[ STRING1 &gt; STRING2 ] 如果 “STRING1”字典排序在“STRING2”后面则返回为真。</span><br><span class="line"></span><br><span class="line">数值判断</span><br><span class="line">[ INT1 -eq INT2 ] INT1和INT2两数相等返回为真 ,=</span><br><span class="line">[ INT1 -ne INT2 ] INT1和INT2两数不等返回为真 ,&lt;&gt;</span><br><span class="line">[ INT1 -gt INT2 ] INT1大于INT2返回为真 ,&gt;</span><br><span class="line">[ INT1 -ge INT2 ] INT1大于等于INT2返回为真,&gt;=</span><br><span class="line">[ INT1 -lt INT2 ] INT1小于INT2返回为真 ,&lt;</span><br><span class="line">[ INT1 -le INT2 ] INT1小于等于INT2返回为真,&lt;=</span><br><span class="line"></span><br><span class="line">逻辑判断</span><br><span class="line">[ ! EXPR ] 逻辑非，如果 EXPR 是<span class="literal">false</span>则返回为真。</span><br><span class="line">[ EXPR1 -a EXPR2 ] 逻辑与，如果 EXPR1 and EXPR2 全真则返回为真。</span><br><span class="line">[ EXPR1 -o EXPR2 ] 逻辑或，如果 EXPR1 或者 EXPR2 为真则返回为真。</span><br><span class="line">[ ] || [ ] 用OR来合并两个条件</span><br><span class="line">[ ] &amp;&amp; [ ] 用AND来合并两个条件</span><br></pre></td></tr></table></figure>---<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">示例：↓↓↓↓↓↓↓↓↓↓↓↓↓</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># a=10</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># b=20</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># if [ $a -gt $b ];then echo &quot;a&gt;b&quot;;else echo &quot;a&lt;b&quot;;fi#（注：正确）</span></span><br><span class="line">a&lt;b</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># if [ $a &gt; $b ];then echo &quot;a&gt;b&quot;;else echo &quot;a&lt;b&quot;;fi#（注：出错）</span></span><br><span class="line">a&gt;b（注：使用2个中括号不出错）</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># if [[ $a &gt; $b ]];then echo &quot;a&gt;b&quot;;else echo &quot;a&lt;b&quot;;fi#（注：正确）</span></span><br><span class="line">a&lt;b</span><br><span class="line"></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># if [ $a -gt $b ] &amp;&amp; [ $a -ne 20 ];then echo &quot;输出a&gt;b&quot;;else echo &quot;输出a&lt;b&quot;;fi</span></span><br><span class="line">输出a&lt;b</span><br></pre></td></tr></table></figure>---**练习21**判断当前目录下是否存在文件a，没有的话就创建有的话输出，输出文件已存在<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">示例：↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓</span><br><span class="line">写法1：</span><br><span class="line"><span class="keyword">if</span> [ -f a.txt ];</span><br><span class="line">    <span class="keyword">then</span> <span class="built_in">echo</span> <span class="string">&quot;文件存在&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">touch</span> a.txt</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">-------------------------------------------------</span><br><span class="line">写法2：推荐（类似python的<span class="keyword">if</span>三元运算符）</span><br><span class="line">[ -f a.txt ] &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;文件已存在&quot;</span> || <span class="built_in">touch</span> a.txt</span><br></pre></td></tr></table></figure>---示例2：编写一个脚本，实现如下功能\=\=\==\=\=\=\=\==\=\=\=\=1.增加用户并设置密码2.删除用户3.查看用户4.退出\=\=\=\==\=\=\=\=\=\==\=\=输入的指定不是1-4，给提示给予提醒，并且如果不输入退出的话，可以循环添加。按1  增加用户，并且设置密码 useradd  passwd按2  删除用户   userdel -r 按3  查看用户  id 按4  退出    exit---### && ||**知识点22 类似python的if三元运算符****使用&& || 来实现**·cmd1 && cmd2 如果cmd1执行成  功，或者为真，则执行cmd2·cmd1 || cmd2 如果cmd1执行不成功，或者为假，则执行cmd2·cmd1 && cmd2 || cmd3 如果cmd1执行成功，就执行cmd2，不成功就执行cmd3<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">示例：上个练习↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓</span><br><span class="line">[ -f a.txt ] &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;文件已存在&quot;</span> || <span class="built_in">touch</span> a.txt</span><br><span class="line">[[ -f a.txt ]] &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;文件已存在&quot;</span> || <span class="built_in">touch</span> a.txt<span class="comment">#（注：推荐使用两个中括号）</span></span><br><span class="line"></span><br><span class="line">示例：</span><br><span class="line">-------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># a=10</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># b=20</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># [ $a -gt $b ] &amp;&amp; echo &quot;输出 a&gt;b&quot;</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># [ $a -gt $b ] || echo &quot;输出 a&lt;b&quot;</span></span><br><span class="line">输出 a&lt;b</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># [ $a -gt $b ] &amp;&amp; echo &quot;输出 a&gt;b&quot; || echo &quot;输出 a&lt;b&quot;</span></span><br><span class="line">输出 a&lt;b</span><br></pre></td></tr></table></figure>---### [] 、[[]]、 (()) (判断方式)**知识点23 [] 、[[]]、 (()) (判断方式)**[ ] 会做单词拆分[ ] 很多表示都不是很支持，**建议使用[[ ]]判断（2个中括号）****总结：****`·建议使用`[[ ]]`来比较运算，进行判断`****`·字符串用`[[ ]]（推荐）****`·数字用比较用`(( ))**结论：建议使用[[ ]]来比较运算，进行判断<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">示例1：<span class="keyword">if</span>判断时</span><br><span class="line">-------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># name=&quot;wen yao&quot;</span></span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># [ $name == &quot;wen yao&quot; ] &amp;&amp; echo &quot;ok&quot; || echo &quot;error&quot;</span></span><br><span class="line">-bash: [: 参数太多<span class="comment">#（注：自动做单词拆分）</span></span><br><span class="line">error</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># [[ $name == &quot;wen yao&quot; ]] &amp;&amp; echo &quot;ok&quot; || echo &quot;error&quot;</span></span><br><span class="line">ok<span class="comment">#（注：推荐使用2个中括号）</span></span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># [ &quot;$name&quot; == &quot;wen yao&quot; ] &amp;&amp; echo &quot;ok&quot; || echo &quot;error&quot;</span></span><br><span class="line">ok<span class="comment">#（注：使用引号连接在一起，表示一个整体）</span></span><br><span class="line">============================================================================================</span><br><span class="line"></span><br><span class="line">示例2：数值比较</span><br><span class="line">-------------------------------------------------------------------------------------------</span><br><span class="line">[root@mysql-binary shell_test]<span class="comment"># echo $a</span></span><br><span class="line">10</span><br><span class="line">[root@mysql-binary shell_test]<span class="comment"># echo $b</span></span><br><span class="line">20</span><br><span class="line">[root@mysql-binary shell_test]<span class="comment"># [[ $a &gt; $b ]] &amp;&amp; echo &quot;ok&quot; || echo &quot;error&quot;</span></span><br><span class="line">error</span><br><span class="line">[root@mysql-binary shell_test]<span class="comment"># [ $a &gt; $b ] &amp;&amp; echo &quot;ok&quot; || echo &quot;error&quot;</span></span><br><span class="line">ok<span class="comment">#（注：出错）</span></span><br><span class="line">[root@mysql-binary shell_test]<span class="comment"># (( $a == $b )) &amp;&amp; echo &quot;ok&quot; || echo &quot;error&quot; </span></span><br><span class="line">error</span><br><span class="line"></span><br><span class="line">示例：</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@mysql-binary shell_test]<span class="comment"># a=10</span></span><br><span class="line">[root@mysql-binary shell_test]<span class="comment"># b=20</span></span><br><span class="line">[root@mysql-binary shell_test]<span class="comment"># [[ $a -eq $b ]] &amp;&amp; echo &quot;ok&quot; || echo &quot;eroor&quot;</span></span><br><span class="line">eroor</span><br><span class="line">[root@mysql-binary shell_test]<span class="comment"># (( $a -eq $b )) &amp;&amp; echo &quot;ok&quot; || echo &quot;eroor&quot;</span></span><br><span class="line">-bash: ((: 10 -eq 20 : 表达式中有语法错误 （错误符号是 <span class="string">&quot;20 &quot;</span>）</span><br><span class="line">Eroor</span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line">[root@mysql-binary shell_test]<span class="comment"># c=102</span></span><br><span class="line">[root@mysql-binary shell_test]<span class="comment"># b=20</span></span><br><span class="line">[root@mysql-binary shell_test]<span class="comment"># [[ $c &gt; $b ]] &amp;&amp; echo &quot;ok&quot; || echo &quot;eroor&quot;</span></span><br><span class="line">eroor</span><br><span class="line">[root@mysql-binary shell_test]<span class="comment"># (( $c &gt; $b )) &amp;&amp; echo &quot;ok&quot; || echo &quot;eroor&quot;</span></span><br><span class="line">ok</span><br><span class="line"></span><br><span class="line">示例3:<span class="keyword">if</span>条件判断的2种写法</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># a=10</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># b=20</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># if [[ $a &gt; $b ]]; then echo &quot;ok&quot;; else echo &quot;error&quot;; fi</span></span><br><span class="line">error</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># [[ $a &gt; $b ]] &amp;&amp; echo &quot;ok&quot; || echo &quot;error&quot;</span></span><br><span class="line">error</span><br><span class="line"></span><br><span class="line">示例：字符串比较(( ))  也可以</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># a=abc</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># b=abc1</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># (( $a &gt; $b )) &amp;&amp; echo &quot;ok&quot; || echo &quot;error&quot;</span></span><br><span class="line">error</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># a=abc</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># b=bac1</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># (( $a &gt; $b )) &amp;&amp; echo &quot;ok&quot; || echo &quot;error&quot;</span></span><br><span class="line">error</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># a=abc</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># b=abc</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># (( $a == $b )) &amp;&amp; echo &quot;ok&quot; || echo &quot;error&quot;</span></span><br><span class="line">ok</span><br><span class="line"></span><br><span class="line">结论：建议使用[[ ]]来比较运算，进行判断</span><br></pre></td></tr></table></figure>---### SHELL函数 定义**知识点24 Shell函数 定义**<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">示例：</span><br><span class="line"><span class="function"><span class="title">add</span></span>() &#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;两数相加为：<span class="subst">$(( $num1 + $num2 )</span>)&quot;</span><span class="comment">#（注：函数里面的操作内容）</span></span><br><span class="line">&#125;</span><br><span class="line">------------------------------------------------</span><br><span class="line">调用的时候 add</span><br><span class="line"><span class="keyword">case</span> <span class="variable">$options</span> <span class="keyword">in</span> </span><br><span class="line">1)</span><br><span class="line">add</span><br><span class="line">;;</span><br><span class="line">2)……………………</span><br><span class="line">--------------------------------------------------------------------------------------------</span><br><span class="line"><span class="function"><span class="title">add</span></span>()&#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;两数相加为：<span class="subst">$(($num1 + $num2)</span>)&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="variable">$options</span> <span class="keyword">in</span></span><br><span class="line">1)</span><br><span class="line">    add<span class="comment">#（注：需要使用的时候调用）</span></span><br><span class="line">    ;;</span><br><span class="line">2)…………………………</span><br></pre></td></tr></table></figure>---### 判断方式 []  [[]]  (())  test**知识点25 判断方式 []  [[]]  (())  test**- (( ))判断数字 > < == !=- [[ ]]判断字符串 或者 -eq -ne -gt -lt 判断数字- 有些语法 [ ] 是不支持的，建议使用[[ ]]- test(测试)判断，等同于1个中括号<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">示例：<span class="built_in">test</span></span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># a=123</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># b=123</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># test a==b &amp;&amp; echo ok</span></span><br><span class="line">ok</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># test a==b &amp;&amp; echo ok || echo error</span></span><br><span class="line">ok</span><br></pre></td></tr></table></figure>---]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>09_Linux基础-SHELL-标准输入与标准输出-重定向-管道</title>
      <link href="/blog/posts/5276.html"/>
      <url>/blog/posts/5276.html</url>
      
        <content type="html"><![CDATA[<p>摘要：博客迁移 <a href="https://blog.csdn.net/cpen_web"><code>https://blog.csdn.net/cpen_web</code></a> → 本站<span id="more"></span></p><h1 id="09-Linux基础-SHELL-标准输入与标准输出-重定向-管道">09_Linux基础-SHELL-标准输入与标准输出-重定向-管道</h1><p><a href="https://blog.csdn.net/cpen_web">博客🔗：https://blog.csdn.net/cpen_web</a></p><hr><blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">作业</span><br><span class="line">编辑文本文件/home/text/file1，分4行输入bbb bbb  bbb、 ddd ddd ddd、aaa aaa aaa、ccc ccc ccc。 保存不要退出；</span><br><span class="line">在末行模式下打开一个新文件/text/file2；</span><br><span class="line">在file2中输入内容为eee eee eee在这一行内容之后，  将file1的内容读入到file2中，接着在命令模式下按照 abcde的显示顺序调整每行的位置，最后保存退出；</span><br><span class="line">同时编辑file1和file2，接着从file1切换到file2，然后 再快速切换回来，接着将file2的内容读到file1内容的末尾，显示文件file1内容的行号，复制3到6行到file1 内容的末尾；</span><br><span class="line">利用替换命令将全文的每行第一个ccc都替换为333；</span><br><span class="line">将全文中所有aaa都替换为111，撤销行号，最后不保 存退出；</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># mkdir /home/text2</span></span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># cd /home/text2</span></span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># mkdir /text2</span></span><br><span class="line">[root@sanchuang-linux text2]<span class="comment"># vim file1</span></span><br><span class="line">:r /text2/file2</span><br><span class="line">aaa aaa aaa</span><br><span class="line">bbb bbb bbb</span><br><span class="line">ccc ccc ccc</span><br><span class="line">ddd ddd ddd</span><br><span class="line">eee eee eee</span><br><span class="line">[root@sanchuang-linux text2]<span class="comment"># vim file1 /text2/file2</span></span><br><span class="line">:n</span><br><span class="line">:N</span><br><span class="line">:<span class="built_in">set</span> nu</span><br><span class="line">:%s/ccc/333</span><br><span class="line">:%s/aaa/111/g</span><br><span class="line">:<span class="built_in">set</span> nonu</span><br><span class="line">:q!</span><br></pre></td></tr></table></figure></blockquote><hr><blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">练习1：</span><br><span class="line">1.进入/lianxi目录</span><br><span class="line"><span class="comment"># cd /lianxi</span></span><br><span class="line">2.复制/etc/passwd文件到当前目录下，然后使用vim编辑当前目录下的passwd</span><br><span class="line"><span class="comment"># cp /etc/passwd .  # vim passwd</span></span><br><span class="line">3.显示一下行号</span><br><span class="line">:<span class="built_in">set</span> nu</span><br><span class="line">4.复制第5到10行的内容，粘贴到末尾，删除最后一行的最后一个单词</span><br><span class="line">:5 ; 6yy ; G ; p ; dw</span><br><span class="line">5.删除第9行和第10行</span><br><span class="line">:9 ; 2dd</span><br><span class="line">6.将root改为gen</span><br><span class="line">:%s/root/gen/g</span><br><span class="line">7.删除部分bash字符串</span><br><span class="line">:%s/bash//gc</span><br><span class="line">8.快速到达第5行，然后再跳到第1行，再跳到最后一行</span><br><span class="line">:5 ; :1 ; G</span><br><span class="line">9.剪切第6-7行，粘贴到末尾</span><br><span class="line">:6 ; 2dd ; G ; p</span><br><span class="line">10.退出并且保存</span><br><span class="line">:wq</span><br><span class="line">11.复制/etc/hosts文件到当前目录下，将第1列的ip地址复制，然后粘贴到文件的末尾</span><br><span class="line"><span class="comment"># /etc/hosts . ; # vim hosts ; ctrl+v ; y ; G ;p</span></span><br></pre></td></tr></table></figure></blockquote><hr><h2 id="一-SHELL-标准输入与标准输出">一. SHELL-标准输入与标准输出</h2><blockquote><p><strong>学习内容：重定向和文件目录高级操作</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">知识要点</span><br><span class="line">输入输出重定向</span><br><span class="line">管道及相关配套命令 数据提取及过滤</span><br><span class="line">文件差异对比和补丁生成及打补丁</span><br></pre></td></tr></table></figure></blockquote><h3 id="标准输入和标准输出">标准输入和标准输出</h3><blockquote><p><strong>知识点1 标准输入和标准输出</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">---------------------------</span><br><span class="line">输入输出及重定向</span><br><span class="line">每个进程基本都会打开三个文件描述符</span><br><span class="line">0： 标准输入（从键盘）</span><br><span class="line">1： 标准输出 （输出到屏幕）</span><br><span class="line">2： 标准错误输出 （输出到屏幕）</span><br><span class="line"></span><br><span class="line">类型设备文件文件描述符（fd）默认设备</span><br><span class="line">标准输入  /dev/stdin  0      键盘</span><br><span class="line">标准正确输出 /dev/stdout 1显示器</span><br><span class="line">标准错误输出 /dev/stderr 2显示器</span><br><span class="line">-------------------------------------------------------</span><br><span class="line">标准输入（stdin）和标准输出（stdout）</span><br><span class="line">------------------------------------</span><br><span class="line">python中 &gt;&gt;&gt;help(print) file=sys.stdout 默认输出到屏幕（标准输出）</span><br><span class="line">------------------------------------------------------------------</span><br><span class="line">进程：正在进行的程序</span><br><span class="line">---------------------</span><br><span class="line">键盘 =》 标准输入 =》 终端程序 =》 标准输出     =》显示器</span><br><span class="line">标准错误输出 =》显示器</span><br><span class="line">----------------------------------------------------------</span><br><span class="line">https://blog.csdn.net/xiaofei0859/article/details/78448493?utm_source=blogxgwz9</span><br><span class="line">每个进程基本都会打开三个文件描述符</span><br><span class="line">0:标准输入（从键盘、语音、人脸识别……）</span><br><span class="line">1:标准输出（输出到屏幕）</span><br><span class="line">2:标准错误输入（输出到屏幕）</span><br><span class="line">---------------------------</span><br><span class="line">文件描述符：fd  就是每个进程打开的文件</span><br></pre></td></tr></table></figure></blockquote><h3 id="文件描述符">文件描述符</h3><blockquote><p><strong>知识点1.1 文件描述符</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">文件描述符：</span><br><span class="line">linux内核给每个进程都创造一个文件描述符，这个表里记载了这个进程所打开的所有文件，为了方便进程知道自己打开了哪些文件呢，就给每个文件都进行了标号，这个编号就是文件描述符。</span><br><span class="line">此后，所有对文件的操作，就是用该编号。</span><br></pre></td></tr></table></figure></blockquote><h3 id="linux下面一切皆文件">linux下面一切皆文件</h3><blockquote><p><strong>知识点1.2 linux下面一切皆文件</strong></p><p>linux下面一切皆文件</p><p>disk磁盘</p><p><code>/dev目录下面基本都是块设备文件</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">[root@sanchuang-linux ~]<span class="comment"># cd /dev</span></span><br><span class="line">[root@sanchuang-linux dev]<span class="comment"># cd disk</span></span><br><span class="line">[root@sanchuang-linux disk]<span class="comment"># ls</span></span><br><span class="line">by-id  by-label  by-partuuid  by-path  by-uuid</span><br><span class="line">[root@sanchuang-linux disk]<span class="comment"># cd ..</span></span><br><span class="line">[root@sanchuang-linux dev]<span class="comment"># ls -ld sda1</span></span><br><span class="line">brw-rw----. 1 root disk 8, 1 10月  6 17:16 sda1</span><br><span class="line">[root@sanchuang-linux dev]<span class="comment"># ls -ld sda2</span></span><br><span class="line">brw-rw----. 1 root disk 8, 2 10月  6 17:16 sda2</span><br><span class="line">------------------------------------------------</span><br><span class="line">[root@sanchuang-linux dev]<span class="comment"># cd net</span></span><br><span class="line">[root@sanchuang-linux net]<span class="comment"># ls</span></span><br><span class="line">tun</span><br><span class="line">[root@sanchuang-linux net]<span class="comment"># </span></span><br><span class="line">----------------------------</span><br><span class="line">对文件的操作就是对设备的操作</span><br><span class="line">----------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cd /dev</span></span><br><span class="line">[root@sanchuang-linux dev]<span class="comment"># ls</span></span><br><span class="line">stderr</span><br><span class="line">stdin</span><br><span class="line">Stdout</span><br><span class="line">fd</span><br><span class="line">……</span><br><span class="line">---------------------------------</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># cd /dev</span></span><br><span class="line">[root@sanchuang-linux dev]<span class="comment"># cd fd</span></span><br><span class="line">[root@sanchuang-linux fd]<span class="comment"># ls</span></span><br><span class="line">0  1  2  255 </span><br><span class="line">[root@sanchuang-linux fd]<span class="comment"># ls -al</span></span><br><span class="line">总用量 0</span><br><span class="line">dr-x------. 2 root root  0 10月 16 10:40 .</span><br><span class="line">dr-xr-xr-x. 9 root root  0 10月 16 10:40 ..</span><br><span class="line">lrwx------. 1 root root 64 10月 16 10:40 0 -&gt; /dev/pts/6<span class="comment">#（注：链接的意思，快捷方式 指向/dev/pts/6，标准输入到虚拟终端6）</span></span><br><span class="line">lrwx------. 1 root root 64 10月 16 10:40 1 -&gt; /dev/pts/6<span class="comment">#（注：标准输出到虚拟终端6）</span></span><br><span class="line">lrwx------. 1 root root 64 10月 16 10:40 2 -&gt; /dev/pts/6<span class="comment">#（注：标准错误输出到虚拟终端6）</span></span><br><span class="line">lrwx------. 1 root root 64 10月 16 11:24 255 -&gt; /dev/pts/6</span><br><span class="line">[root@sanchuang-linux fd]<span class="comment"># </span></span><br><span class="line">---------------------------------------</span><br></pre></td></tr></table></figure></blockquote><h3 id="虚拟终端pts-真实终端tty">虚拟终端pts  真实终端tty</h3><blockquote><p><strong>知识点1.3 虚拟终端pts  真实终端tty</strong></p><p>[root@sanchuang-linux dev]# cd /dev/<code>pts</code><br>[root@sanchuang-linux pts]# ls<br>0 1 2 3 4 5 6 ptmx<br>[root@sanchuang-linux pts]#</p><p><code>pts是别人连接到服务器的虚拟终端（远程控制）</code>。别人远程连接会创建虚拟终端</p><p>pts虚拟终端</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-----------------------------------------------------</span><br><span class="line">Linux centos登录——》本地的终端shell环境  真实终端</span><br><span class="line">xshell连接   ——》虚拟终端</span><br><span class="line">--------------------------------</span><br><span class="line"><span class="built_in">tty</span> 本地真实终端</span><br><span class="line">[root@sanchuang-linux dev]<span class="comment"># cd /dev</span></span><br><span class="line">[root@sanchuang-linux dev]<span class="comment"># ls</span></span><br><span class="line"><span class="built_in">tty</span></span><br></pre></td></tr></table></figure></blockquote><h3 id="查看当前linux登陆的用户情况">查看当前linux登陆的用户情况</h3><blockquote><p><strong>知识点1.4 查看当前linux登陆的用户情况</strong></p><p>查看当前linux登陆的用户情况 # <code>w</code></p><p>[root@sanchuang-linux dev]# <code>w</code><br>11:32:52 up 16:23,  4 users,  <code>load average</code>: 0.00, 0.00, 0.00<br>USER   TTY    FROM       LOGIN@  IDLE  JCPU  PCPU WHAT<br>root   <code>tty1</code>   -         0610月20  1:32m  0.60s  0.60s -bash<code>（注：bash环境）</code><br>root   <code>pts/1</code>   192.168.0.26   10:03  25:40  0.21s  0.21s -bash<code>（注：bash环境）</code><br>root   <code>pts/2</code>   10.122.155.164  08:52   2:29m  0.16s  0.13s vim -r a<code>（注：删除环境）</code><br>root   <code>pts/6</code>   192.168.0.26   10:40   4.00s  0.09s  0.01s w<code>（注：输入w命令环境）</code></p><p>----------↓解释----------------------------------------------------------------------------</p><p>USER：登录用户</p><p>TTY：终端类型  terminal type  面向用户使用的接口</p><p>​<code>tty1:真实终端</code></p><p>​tty1==&gt;<code>直接登录进去 操纵的第一个终端</code>（真实终端）</p><p>​Linux里最多允许<code>6个</code>可以直接登录的终端（即<code>真实终端tty</code>）</p><p>​tty2~tty6 需要的时候使用</p><p>​<code>Alt+F1</code> tty1 回到第一个终端</p><p>​<code>Alt+F2</code> tty2 回到第二个终端</p><p>​<code>pts/1:虚拟终端</code>，给别人用的。数量可以有很多个。有远程登录过来的时候，就会创建1个终端</p><p>FROM：从哪里来</p><p>WHAT：做什么事</p><p>load average机器的拼接负载</p><p>------------------------------</p><p>[root@sanchuang-linux dev]# w<br><code>11:39:04</code> up 16:29,  4 users,  <code>load average</code>: 0.00, 0.00, 0.00<br>USER   TTY    FROM       LOGIN@  IDLE  JCPU  PCPU WHAT<br>root   tty1   -         0610月20  1:38m  0.60s  0.60s -bash<br>root   pts/1   192.168.0.26   10:03  31:52  0.21s  0.21s -bash<br>root   pts/2   10.122.155.164  08:52   2:35m  0.16s  0.13s vim -r a<br>root   pts/6   192.168.0.26   10:40   0.00s  0.09s  0.00s w<br>[root@sanchuang-linux dev]# date<br>2020年 10月 16日 星期五 <code>11:39:06</code> CST</p><p>load average机器的平均负载</p><p>---------------------------</p></blockquote><h3 id="本地终端（真实终端）的创建、切换">本地终端（真实终端）的创建、切换</h3><blockquote><p><strong>知识点1.5 本地终端（真实终端）的创建、切换</strong></p><p>Alt+F2</p><p>本地最多能登录<code>6个终端</code></p><p><code>Alt+F1~F6</code>  切换本地登录的终端（真实终端）</p><p>-----------------------------------------</p><p>Alt+F2、Alt+F6</p><p>[root@sanchuang-linux dev]# <code>w</code><br>11:42:06 up 16:32,  6 users,  load average: 0.00, 0.00, 0.00<br>USER   TTY    FROM       LOGIN@  IDLE  JCPU  PCPU WHAT<br>root   <code>tty1</code>   -         0610月20  1:41m  0.60s  0.60s -bash<br>root   pts/1   192.168.0.26   10:03  34:54  0.21s  0.21s -bash<br>root   pts/2   10.122.155.164  08:52   2:38m  0.16s  0.13s vim -r a<br>root   pts/6   192.168.0.26   10:40   3.00s  0.09s  0.00s w<br>root   <code>tty2</code>   -         11:40   1:50  0.01s  0.01s -bash<br>root   <code>tty6</code>   -         11:41  13.00s  0.01s  0.01s -bash</p></blockquote><h3 id="如何拦截虚拟终端">如何拦截虚拟终端</h3><blockquote><p><strong>知识点1.6 如何拦截虚拟终端</strong></p><p>如何拦截虚拟终端# <code>kill -9 pid</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">-----------------------------------</span><br><span class="line">[root@sanchuang-linux dev]<span class="comment"># ps aux</span></span><br><span class="line">USER         PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</span><br><span class="line">root           1  0.0  0.7 179304 13536 ?        Ss   10月15   0:07 /usr/lib/systemd/systemd --switched-root --system --dese</span><br><span class="line">root        1450  0.0  0.2  25588  3996 tty1     Ss+  10月15   0:00 -bash</span><br><span class="line">root       12692  0.0  0.2  34480  4444 ?        Ss   04:49   0:00 tmux</span><br><span class="line">……………………………………………………</span><br><span class="line">root       13025  0.0  0.2  25588  4048 pts/14   Ss+  05:14   0:00 -bash</span><br><span class="line">root       13046  0.0  0.2  25588  4032 pts/15   Ss+  05:14   0:00 -bash</span><br><span class="line">root       13286  0.0  0.2  25588  3940 pts/0    Ss+  05:28   0:00 -bash</span><br><span class="line">root       13614  0.0  0.2  25588  4016 pts/3    Ss+  06:23   0:00 -bash</span><br><span class="line">root       13635  0.0  0.2  25588  3956 pts/4    Ss   06:23   0:00 -bash</span><br><span class="line">root       13657  0.0  0.4  48860  8596 pts/4    S+   06:24   0:00 vim /home/text/file2</span><br><span class="line">[root@sanchuang-linux dev]<span class="comment"># kill -9 13046（注：杀死pid号13046的进程）</span></span><br><span class="line">------------------------------------------------------------------------</span><br><span class="line">ssh服务  22号端口  有端口肯定有服务</span><br><span class="line">起服务一定要有端口</span><br><span class="line">端口跟服务挂钩</span><br><span class="line"></span><br><span class="line">Mysql默认端口3306</span><br></pre></td></tr></table></figure></blockquote><h3 id="查看服务的默认端口">查看服务的默认端口</h3><blockquote><p><strong>知识点1.7 查看服务的默认端口</strong></p><p>怎样查看服务的默认端口  # <code>less /etc/services</code></p><p>查看服务的默认端口</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># less /etc/services</span></span><br><span class="line">tcpmux          1/tcp                           <span class="comment"># TCP port service multiplexer</span></span><br><span class="line">tcpmux          1/udp                           <span class="comment"># TCP port service multiplexer</span></span><br><span class="line">rje             5/tcp                           <span class="comment"># Remote Job Entry</span></span><br><span class="line">rje             5/udp                           <span class="comment"># Remote Job Entry</span></span><br><span class="line">…………</span><br></pre></td></tr></table></figure></blockquote><hr><blockquote><p><strong>知识点1.8 传输层协议 TCP、UDP</strong></p><p>传输层协议 TCP、UDP</p></blockquote><h3 id="杀死连接-限制连接">杀死连接  限制连接</h3><blockquote><p><strong>知识点1.9 杀死连接  限制连接</strong></p><p>杀死连接：</p><p><code>ps aux</code> 查看pts的连接pid</p><p>然后使用： <code>kill -9 xxx</code></p><p>-------------------------</p><p>限制连接：</p><p><code>iptables</code> 防火墙</p><p>或使用其他ssh相关的限制</p><p>-------------------------</p></blockquote><h3 id="proc目录">/proc目录</h3><blockquote><p><strong>知识点2.0 /proc目录</strong></p><p>/Proc目录  放一些正在运行的程序</p><p># <code>ls /proc</code> 正在运行的程序</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@sanchuang-linux ssh]<span class="comment"># ls /proc</span></span><br><span class="line">………………………………………………（删了很多）</span><br><span class="line">11     13657  1450   158  171  186  29  508  632  906  999        fb           loadavg       self           zoneinfo</span><br><span class="line">13025  14438  15     168  182  23   40  6    859  982  diskstats  kmsg         partitions    <span class="built_in">tty</span></span><br><span class="line">………………………………………………（删了很多）</span><br></pre></td></tr></table></figure></blockquote><h3 id="查看进程打开了哪些文件描述符">查看进程打开了哪些文件描述符</h3><blockquote><p><strong>知识点2.1 查看进程打开了哪些文件描述符 proc/1450/fd</strong></p><p>查看进程打开了哪些文件描述符</p><p>[root@mysql-binary fd]# ls</p><p><code>0  1  2  255</code></p><p>[root@mysql-binary fd]# pwd</p><p><code>/proc/1680/fd</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-----------------------------------------</span><br><span class="line">[root@sanchuang-linux ssh]<span class="comment"># cd /proc/1450</span></span><br><span class="line">[root@sanchuang-linux 1450]<span class="comment"># ls</span></span><br><span class="line">attr        <span class="built_in">comm</span>             fd        map_files   net            pagemap      schedstat     </span><br><span class="line">………………………………（删了很多）</span><br><span class="line">[root@sanchuang-linux 1450]<span class="comment"># cd fd</span></span><br><span class="line">[root@sanchuang-linux fd]<span class="comment"># ls</span></span><br><span class="line">0  1  2  255  3  4</span><br><span class="line">[root@sanchuang-linux fd]<span class="comment"># pwd</span></span><br><span class="line">/proc/1450/fd</span><br></pre></td></tr></table></figure></blockquote><hr><h2 id="二-重定向">二. 重定向</h2><blockquote><p><code>重定向：改变标准输入、标准输出的方向就是重定向</code></p><p>--------------------------------------------------------------------------------------------</p><p>类型操作符用途</p><p>重定向标准<code>输出</code>&gt;将命令的执行结果<code>输出到指定的文件</code>中，而不是直接显示在屏幕上</p><p>​&gt;&gt;将命令执行的结果<code>追加输出到指定文件</code></p><p>重定向标准<code>输入</code>&lt;将命令中<code>接收输入的途径</code>由默认的键盘<code>更改 为指定的文件</code></p></blockquote><h3 id="echo">echo</h3><blockquote><p><strong>知识点3.1 echo</strong></p><p><code>echo -n  不接换行</code></p><p><code>echo -e  转义字符输出</code></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@sanchuang-linux redirect]<span class="comment"># echo &quot;xxx&quot;</span></span><br><span class="line">xxx</span><br><span class="line">[root@sanchuang-linux redirect]<span class="comment"># echo -n &quot;xxx&quot;</span></span><br><span class="line">xxx[root@sanchuang-linux redirect]<span class="comment">#</span></span><br><span class="line">[root@sanchuang-linux redirect]<span class="comment"># echo &quot;xx \n x1x1&quot;</span></span><br><span class="line">xx \n x1x1</span><br><span class="line">[root@sanchuang-linux redirect]<span class="comment"># echo -e &quot;xx \n x1x1&quot;</span></span><br><span class="line">xx </span><br><span class="line"> x1x1</span><br><span class="line">[root@sanchuang-linux redirect]<span class="comment"># </span></span><br><span class="line">---------------------------------</span><br><span class="line"><span class="built_in">echo</span> -n 不接换行</span><br><span class="line"><span class="built_in">echo</span> -e 转义字符输出</span><br></pre></td></tr></table></figure><h3 id="重定向（改变原来的输出方式）">重定向（改变原来的输出方式）</h3><blockquote><p><strong>知识点3.2 重定向（改变原来的输出方式）</strong></p><p>重定向（改变原来的输出方式）</p><p>[root@sanchuang-linux redirect]# <code>echo &quot;xxx&quot; &gt;file.txt</code><br>[root@sanchuang-linux redirect]# <code>cat file.txt</code><br><code>xxx</code></p></blockquote><h3 id="脚本运行-标准错误输出、标准正确输出-（显示）">脚本运行 标准错误输出、标准正确输出 （显示）</h3><blockquote><p><strong>知识点3.3 脚本运行 标准错误输出、标准正确输出 （显示）</strong></p><p>脚本一行一行 从上到下执行</p><p>[root@sanchuang-linux redirect]# vim <a href="http://test.sh">test.sh</a><br>[root@sanchuang-linux redirect]# cat <a href="http://test.sh">test.sh</a><br><code>t</code><br><code>date</code><br>[root@sanchuang-linux redirect]# sh <a href="http://test.sh">test.sh</a><br><code>test.sh:行1: t: 未找到命令</code><br><code>2020年 10月 16日 星期五 14:49:40 CST</code></p><p>--------------------------------------------</p><p>注↑：标注错误输出 、正常输出</p></blockquote><h3 id="重定向">重定向</h3><blockquote><p><strong>知识点3 重定向</strong></p><p><code>重定向：改变标准输入、标准输出的方向就是重定向</code></p><p>--------------------------------------------------------------------------------------------</p><p>类型操作符用途</p><p>重定向标准<code>输出</code>&gt;将命令的执行结果<code>输出到指定的文件</code>中，而不是直接显示在屏幕上</p><p>​&gt;&gt;将命令执行的结果<code>追加输出到指定文件</code></p><p>重定向标准<code>输入</code>&lt;将命令中<code>接收输入的途径</code>由默认的键盘<code>更改 为指定的文件</code></p><p>--------------------------------------------------------------------------------------------</p><p>操作如下</p><p><strong>知识点3.4 # sh <a href="http://test.sh">test.sh</a> &gt; test_result.txt</strong></p><p><code>标准错误输出不会重定向到文件，正确输出会重定向到文件</code></p><p>[root@sanchuang-linux redirect]# vim <a href="http://test.sh">test.sh</a><br>[root@sanchuang-linux redirect]# cat <a href="http://test.sh">test.sh</a><br><code>t</code><br><code>date</code><br>[root@sanchuang-linux redirect]# sh <a href="http://test.sh">test.sh</a><br><a href="http://test.sh">test.sh</a>:行1: t: 未找到命令<br>2020年 10月 16日 星期五 14:49:40 CST<br>[root@sanchuang-linux redirect]# sh <a href="http://test.sh">test.sh</a> <code>&gt;</code> test_result.txt<br><a href="http://test.sh">test.sh</a>:行1: t: 未找到命令<code>（注：标准错误输出显示在屏幕上，不重定向到文件）</code><br>[root@sanchuang-linux redirect]# cat test_result.txt<br>2020年 10月 16日 星期五 14:50:32 CST<code>（注：正确输出会重定向到文件）</code></p><p>=========================================================</p><p><code>重定向 &gt; 默认只会重定向标准输出</code></p></blockquote><h3 id="重定向-标准错误">重定向  标准错误</h3><blockquote><p><strong>知识点3 重定向  标准错误</strong></p><p><code>标准错误：通过该设备报告执行出错信息</code></p><p>--------------------------------------------------------------------------------------------</p><p>类型操作符</p><p>重定向标准错误 2&gt;</p><p>​2&gt;&gt;</p><p>重定向<code>标准输出和标准错误</code>到<code>同一个文件</code>2&gt;&amp;1 或者&gt;&amp;或者 &amp;&gt;</p><p>重定向<code>标准输出和标准错误</code>到<code>不同文件</code>&gt; 文件1 2 &gt;文件2（没教）</p><p>--------------------------------------------------------------------------------------------</p><p>操作如下</p><p><strong>知识点3.5.1 # sh <a href="http://test.sh">test.sh</a> 2&gt; test_result.txt</strong></p><p># sh <a href="http://test.sh">test.sh</a> <code>2&gt;</code> test_result.txt <code>重定向标准错误</code><code>（注：与&gt;效果相反）</code></p><p>正确输出显示在屏幕上，标准错误输出重定向到文件</p><p><code>只输出了错误的</code></p><p>[root@sanchuang-linux redirect]# sh <a href="http://test.sh">test.sh</a> <code>2&gt;</code> test_result.txt<br><code>2020年 10月 16日 星期五 14:52:33 CST</code>（注：正确输出显示在屏幕上）<br>[root@sanchuang-linux redirect]# cat test_result<code>.txt</code><br><code>test.sh:行1: t: 未找到命令</code>（注：标准错误输出重定向到文件）</p></blockquote><hr><blockquote><p><strong>知识点3.5.2 # sh <a href="http://test.sh">test.sh</a> &amp;&gt; test_result.txt</strong></p><p># sh <a href="http://test.sh">test.sh</a> <code>&amp;&gt;</code> test_result.txt</p><p><code>把正确的错误的都重定向到 文件</code></p><p>[root@sanchuang-linux redirect]# sh <a href="http://test.sh">test.sh</a> <code>&amp;&gt;</code> test_result.txt<br>[root@sanchuang-linux redirect]# cat test_result.txt<br><a href="http://test.sh">test.sh</a>:行1: t: 未找到命令<br>2020年 10月 16日 星期五 14:54:05 CST</p><p><code>与下面效果相同</code></p></blockquote><hr><blockquote><p><strong>知识点3.5.3 # sh <a href="http://test.sh">test.sh</a> &gt; test_result.txt 2&gt;&amp;1</strong></p><p># sh <a href="http://test.sh">test.sh</a> <code>&gt;</code> test_result.txt <code>2&gt;&amp;1</code></p><p><code>把错误输出重定向向到标准输出</code></p><p>[root@sanchuang-linux redirect]# sh <a href="http://test.sh">test.sh</a> &gt; test_result.txt <code>2&gt;&amp;1</code><br>[root@sanchuang-linux redirect]# cat test_result.txt<br><a href="http://test.sh">test.sh</a>:行1: t: 未找到命令<br>2020年 10月 16日 星期五 14:55:16 CST</p><p><code>两者效果等同</code></p></blockquote><hr><blockquote><p><strong>知识点3.5.4 # sh <a href="http://test.sh">test.sh</a> &gt; test_result.txt 1&gt;&amp;2</strong></p><p># sh <a href="http://test.sh">test.sh</a> <code>&gt;</code> test_result.txt <code>1&gt;&amp;2</code></p><p><code>把标准输出重定向错误输出</code></p><p><code>*输出到屏幕上 （*注：不重定向到文件）</code></p><p>[root@sanchuang-linux redirect]# sh <a href="http://test.sh">test.sh</a> &gt; test_result.txt <code>1&gt;&amp;2</code><br><a href="http://test.sh">test.sh</a>:行1: t: 未找到命令（注：输出到屏幕上）<br>2020年 10月 16日 星期五 14:56:19 CST（注：输出到屏幕上）</p><p>[root@sanchuang-linux redirect]# cat test_result.txt<br>[root@sanchuang-linux redirect]#</p></blockquote><h3 id="使用重定向清空文件的几种方式">使用重定向清空文件的几种方式</h3><blockquote><p><strong>知识点3.6 使用重定向清空文件的几种方式</strong></p><p>使用重定向清空文件的几种方式：</p><p># <code>&gt;</code>stdout_test.txt</p><p># <code>echo &gt;</code>stdout_test.txt （注：有空格）</p><p># <code>echo &quot;&quot;</code>&gt;stdout_test.txt （注：有空格）</p><p># <code>:&gt;</code>stdout_test.txt</p><p># <code>echo -n &quot;&quot; &gt;</code> stdout_test.txt</p><p>代码如下</p><p>--------------------------------------------------------------------------------------------</p><p>[root@sanchuang-linux redirect]# vim stdout_test.txt<br>[root@sanchuang-linux redirect]# <code>&gt;stdout_test.txt（注：清空）</code><br>[root@sanchuang-linux redirect]# cat stdout_test.txt<br>[root@sanchuang-linux redirect]# echo “aaa”&gt; stdout_test.txt<br>[root@sanchuang-linux redirect]# cat stdout_test.txt<br>aaa<br>[root@sanchuang-linux redirect]# <code>echo &gt;stdout_test.txt （注：有空格）</code><br>[root@sanchuang-linux redirect]# cat stdout_test.txt</p><p>[root@sanchuang-linux redirect]# echo “aaa”&gt;stdout_test.txt<br>[root@sanchuang-linux redirect]# <code>echo &quot;&quot;&gt;stdout_test.txt （注：有空格）</code><br>[root@sanchuang-linux redirect]# cat stdout_test.txt</p><p>[root@sanchuang-linux redirect]# echo “aaa”&gt;stdout_test.txt<br>[root@sanchuang-linux redirect]# <code>:&gt;stdout_test.txt （注：清空）</code><br>[root@sanchuang-linux redirect]# cat stdout_test.txt</p><p>[root@sanchuang-linux chenpeng]# <code>echo -n &quot;&quot; &gt; stdout_test.txt（注：清空）</code><br>[root@sanchuang-linux chenpeng]# cat stdout_test.txt<br>[root@sanchuang-linux chenpeng]#</p></blockquote><hr><blockquote><p>**知识点3.6.1 # <code>echo -n &quot;&quot;</code>&gt;stdout_test.txt **</p><p># <code>echo -n &quot;&quot;</code>&gt;stdout_test.txt</p><p><code>echo默认情况会接一个换行符  不想换行 接-n</code></p><p>[root@sanchuang-linux redirect]# echo “aaa”&gt;stdout_test.txt<br>[root@sanchuang-linux redirect]# cat stdout_test.txt<br>aaa<br>[root@sanchuang-linux redirect]# echo “”&gt;stdout_test.txt<br>[root@sanchuang-linux redirect]# cat stdout_test.txt <code>（注：有空格）</code></p><p>[root@sanchuang-linux redirect]# <code>echo -n &quot;&quot;&gt;</code>stdout_test.txt <code>（注：清空，没有空格）</code><br>[root@sanchuang-linux redirect]#</p></blockquote><h3 id="重定向-与">重定向 &gt; 与 &gt;&gt;</h3><blockquote><p><strong>知识点3.7 重定向 &gt; 与 &gt;&gt;</strong></p><p>重定向&gt; 与 &gt;&gt;</p><p><code>&gt;</code> 是以<code>覆盖</code>的方式写入</p><p><code>&gt;&gt;</code>   是以<code>追加</code>的方式写入</p><p>代码如下</p><p>--------------------------------------------------------------------------------------------</p><p>[root@sanchuang-linux redirect]# echo <code>&quot;aaa&quot; &gt;</code> stdout_test.txt</p><p>[root@sanchuang-linux redirect]# cat stdout_test.txt<br><code>aaa</code><br>[root@sanchuang-linux redirect]# echo <code>&quot;bb&quot; &gt;&gt;</code> stdout_test.txt<br>[root@sanchuang-linux redirect]# cat stdout_test.txt<br><code>aaa</code><br><code>bb</code><br>[root@sanchuang-linux redirect]#</p></blockquote><h3 id="重定向标准输入-read输入">重定向标准输入  read输入</h3><blockquote><p><strong>知识点3.8 重定向标准输入  read输入</strong></p><p><code>重定向标准输入  read输入</code></p><p>（注：用到了tmux）</p><p>While 循环</p><p>echo “<code>$a   $b   $c</code>”</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">脚本1 3个参数 3个参数</span><br><span class="line">[root@sanchuang-linux redirect]<span class="comment"># cat abc.sh</span></span><br><span class="line"><span class="keyword">while</span> <span class="built_in">read</span> a b c</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span>    <span class="variable">$b</span>    <span class="variable">$c</span>&quot;</span></span><br><span class="line"><span class="keyword">done</span> &lt; f1.txt</span><br><span class="line">[root@sanchuang-linux redirect]<span class="comment"># </span></span><br><span class="line"></span><br><span class="line">（注：窗口1）</span><br><span class="line">──────────────────────────────────────────────</span><br><span class="line">[root@sanchuang-linux redirect]<span class="comment"># vim f1.txt</span></span><br><span class="line">[root@sanchuang-linux redirect]<span class="comment"># cat f1.txt</span></span><br><span class="line">xx yy zz</span><br><span class="line">aa bb cc</span><br><span class="line"></span><br><span class="line">（注：窗口2）</span><br><span class="line">──────────────────────────────────────────────</span><br><span class="line">[root@sanchuang-linux redirect]<span class="comment"># sh abc.sh</span></span><br><span class="line">xx    yy    zz</span><br><span class="line">aa    bb    cc</span><br><span class="line"></span><br><span class="line">[root@sanchuang-linux redirect]<span class="comment"># </span></span><br><span class="line"></span><br><span class="line">（注：窗口3）</span><br></pre></td></tr></table></figure><blockquote><p>echo “<code>$a -- $b</code>”</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">脚本2 2个参数 3个参数</span><br><span class="line">[root@sanchuang-linux redirect]<span class="comment"># vim abc.sh</span></span><br><span class="line">[root@sanchuang-linux redirect]<span class="comment"># cat abc.sh</span></span><br><span class="line"><span class="keyword">while</span> <span class="built_in">read</span> a b</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> -- <span class="variable">$b</span>&quot;</span></span><br><span class="line"><span class="keyword">done</span> &lt; f1.txt</span><br><span class="line">[root@sanchuang-linux redirect]<span class="comment">#</span></span><br><span class="line"></span><br><span class="line">（注：窗口1）</span><br><span class="line">──────────────────────────────────────────────</span><br><span class="line">[root@sanchuang-linux redirect]<span class="comment"># vim f1.txt</span></span><br><span class="line">[root@sanchuang-linux redirect]<span class="comment"># cat f1.txt </span></span><br><span class="line">xx yy zz</span><br><span class="line">aa bb cc</span><br><span class="line">[root@sanchuang-linux redirect]<span class="comment"># </span></span><br><span class="line"></span><br><span class="line">（注：窗口2）</span><br><span class="line">──────────────────────────────────────────────</span><br><span class="line">（注：默认空格分割参数，xx 和yy zz）</span><br><span class="line">[root@sanchuang-linux redirect]<span class="comment"># sh abc.sh </span></span><br><span class="line">xx -- yy zz</span><br><span class="line">aa -- bb cc</span><br><span class="line">[root@sanchuang-linux redirect]<span class="comment"># </span></span><br><span class="line"></span><br><span class="line">（注：窗口3）</span><br></pre></td></tr></table></figure><blockquote><p>echo “line:<code>$line</code>”</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">脚本3 1个参数 3个参数</span><br><span class="line">[root@sanchuang-linux redirect]<span class="comment"># vim abc.sh</span></span><br><span class="line">[root@sanchuang-linux redirect]<span class="comment"># cat abc.sh </span></span><br><span class="line"><span class="keyword">while</span> <span class="built_in">read</span> line </span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;line:<span class="variable">$line</span>&quot;</span></span><br><span class="line"><span class="keyword">done</span> &lt; f1.txt</span><br><span class="line">[root@sanchuang-linux redirect]<span class="comment"># </span></span><br><span class="line"></span><br><span class="line">（注：窗口1）</span><br><span class="line">──────────────────────────────────────────────</span><br><span class="line">[root@sanchuang-linux redirect]<span class="comment"># vim f1.txt</span></span><br><span class="line">[root@sanchuang-linux redirect]<span class="comment"># cat f1.txt </span></span><br><span class="line">xx yy zz</span><br><span class="line">aa bb cc</span><br><span class="line">[root@sanchuang-linux redirect]<span class="comment"># </span></span><br><span class="line"></span><br><span class="line">（注：窗口2）</span><br><span class="line">──────────────────────────────────────────────</span><br><span class="line">[root@sanchuang-linux redirect]<span class="comment"># sh abc.sh </span></span><br><span class="line">line:xx yy zz</span><br><span class="line">line:aa bb cc</span><br><span class="line">[root@sanchuang-linux redirect]<span class="comment"># </span></span><br><span class="line"></span><br><span class="line">（注：窗口3）</span><br></pre></td></tr></table></figure><blockquote><p>echo “<code>$a -- $b -- $c -- $d -- $e</code>”</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">脚本4 5个参数 3个参数</span><br><span class="line">[root@sanchuang-linux redirect]<span class="comment"># vim abc.sh</span></span><br><span class="line">[root@sanchuang-linux redirect]<span class="comment"># cat abc.sh </span></span><br><span class="line"><span class="keyword">while</span> <span class="built_in">read</span> a b c d e </span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> -- <span class="variable">$b</span> -- <span class="variable">$c</span> -- <span class="variable">$d</span> -- <span class="variable">$e</span>&quot;</span></span><br><span class="line"><span class="keyword">done</span> &lt; f1.txt</span><br><span class="line">[root@sanchuang-linux redirect]<span class="comment"># </span></span><br><span class="line"></span><br><span class="line">（注：窗口1）</span><br><span class="line">──────────────────────────────────────────────</span><br><span class="line">[root@sanchuang-linux redirect]<span class="comment"># vim f1.txt</span></span><br><span class="line">[root@sanchuang-linux redirect]<span class="comment"># cat f1.txt </span></span><br><span class="line">xx yy zz</span><br><span class="line">aa bb cc</span><br><span class="line">[root@sanchuang-linux redirect]<span class="comment"># </span></span><br><span class="line"></span><br><span class="line">（注：窗口2）</span><br><span class="line">──────────────────────────────────────────────</span><br><span class="line">[root@sanchuang-linux redirect]<span class="comment"># sh abc.sh </span></span><br><span class="line">xx -- yy -- zz --  -- </span><br><span class="line">aa -- bb -- cc --  -- </span><br><span class="line">[root@sanchuang-linux redirect]<span class="comment"># </span></span><br><span class="line"></span><br><span class="line">（注：窗口3）</span><br><span class="line">=================================</span><br></pre></td></tr></table></figure><hr><blockquote><p><strong>知识点3.9 上课练习  重定向标准输入  read输入</strong></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[root@sanchuang-linux redirect]<span class="comment"># vim student_information.sh</span></span><br><span class="line">[root@sanchuang-linux redirect]<span class="comment"># cat student_information.sh </span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;========学生信息管理系统===============&quot;</span></span><br><span class="line"><span class="keyword">while</span> <span class="built_in">read</span> name sex age</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;==姓名：<span class="variable">$name</span>, 性别:<span class="variable">$sex</span>, 年龄:<span class="variable">$age</span>==&quot;</span></span><br><span class="line"><span class="keyword">done</span> &lt; stu_info.txt</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;========================================&quot;</span></span><br><span class="line">[root@sanchuang-linux redirect]<span class="comment"># </span></span><br><span class="line"></span><br><span class="line">（注：窗口1 tmux）</span><br><span class="line">──────────────────────────────────────────────</span><br><span class="line">[root@sanchuang-linux redirect]<span class="comment"># cat stu_info.txt</span></span><br><span class="line">wenyao 18 f</span><br><span class="line">fengcheng 78 m</span><br><span class="line">chenpeng 80 m</span><br><span class="line">[root@sanchuang-linux redirect]<span class="comment"># </span></span><br><span class="line"></span><br><span class="line">（注：窗口2 tmux）</span><br><span class="line">──────────────────────────────────────────────</span><br><span class="line">[root@sanchuang-linux redirect]<span class="comment"># sh student_information.sh </span></span><br><span class="line">========学生信息管理系统===============</span><br><span class="line">==姓名：wenyao, 性别:18, 年龄:f==</span><br><span class="line">==姓名：fengcheng, 性别:78, 年龄:m==</span><br><span class="line">==姓名：chenpeng, 性别:80, 年龄:m==</span><br><span class="line">========================================</span><br><span class="line">[root@sanchuang-linux redirect]<span class="comment">#</span></span><br><span class="line"></span><br><span class="line">（注：窗口3 tmux）</span><br></pre></td></tr></table></figure><hr><h2 id="三-SHELL-脚本练习及管道">三. SHELL-脚本练习及管道</h2><blockquote><p><strong>知识点4.0 接受从键盘的输入  管道符号</strong></p><p>脚本  接受从键盘的输入</p><p>要求：输入用户名和密码 创建相应的用户</p><p>需求分析：接受用户输入</p><p>​创建用户</p><p>​设置密码</p><p>-----相关知识点----------------------------------</p><p>管道符号 <code>| ：上一条命令的输出作为下一条命令的输入</code></p><p>yum list 默认输出到屏幕</p><p>yum list | grep tmux  yumlist的输出 作为grep tmux命令的输入</p></blockquote><hr><blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">创建用户 useradd wy</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># useradd wy</span></span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># passwd wy</span></span><br><span class="line">更改用户 wy 的密码 。</span><br><span class="line">新的 密码：</span><br><span class="line">无效的密码： 密码少于 8 个字符</span><br><span class="line">重新输入新的 密码：</span><br><span class="line">passwd：所有的身份验证令牌已经成功更新。</span><br><span class="line">==============================================================</span><br><span class="line">重新给用户wy设置密码</span><br><span class="line">[root@sanchuang-linux ~]<span class="comment"># echo &quot;yyyzzz123&quot; |passwd wy --stdin</span></span><br><span class="line">stdin 标准输入</span><br></pre></td></tr></table></figure></blockquote><hr><blockquote><p><strong>*4.1 初始脚本1</strong></p><p>（注：# passwd在bash中执行时会在中间停止，让用户进行输入密码</p><p>​# <code>为了防止shell停止使用参数--stdin</code>，让passwd介绍标准输入，echo是标准输出</p><p>​来自：<a href="https://blog.csdn.net/qq_31820885/article/details/78100587%EF%BC%89">https://blog.csdn.net/qq_31820885/article/details/78100587）</a></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># vim test.sh</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;请输入用户名：&quot;</span> username</span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;请设置密码：&quot;</span> password</span><br><span class="line"></span><br><span class="line">useradd <span class="variable">$username</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$password</span> | passwd <span class="variable">$username</span> --stdin</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$username</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$password</span></span><br><span class="line"></span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># sh test.sh</span></span><br><span class="line">请输入用户名：cp1</span><br><span class="line">请设置密码：123456</span><br><span class="line">更改用户 cp1 的密码 。</span><br><span class="line">passwd：所有的身份验证令牌已经成功更新。</span><br><span class="line">cp1</span><br><span class="line">123456</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># id cp1</span></span><br><span class="line">uid=1009(cp1) gid=1009(cp1) 组=1009(cp1)</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># less /etc/passwd</span></span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">………………</span><br><span class="line">wy:x:1008:1008::/home/wy:/bin/bash</span><br><span class="line">cp1:x:1009:1009::/home/cp1:/bin/bash</span><br></pre></td></tr></table></figure><blockquote><p>============================================================================================</p><p><strong>*4.2 python 与 shell 程序运行出错</strong></p><p>python中如果程序运行中出现错误，后续操作会终止</p><p>shell 中如果出现错误，操作会继续向下执行</p><p><strong>*4.3 优化脚本2</strong></p><p>用户创建脚本优化：</p><p>1.让命令的标准输出和标准错误输出都输出到黑洞文件</p><p>echo $password | passwd $username --stdin <code>&amp;&gt;/dev/null</code></p><p>2.密码隐藏<code>-s</code></p><p>read -s -p “请设置密码：” password</p><p>3.判断用户是否存在</p><p>条件语句：</p><p><code>if   条件   then</code></p><p>​<code>语句体1</code></p><p><code>else</code></p><p>​<code>语句体2</code></p><p><code>fi</code></p><p><strong>*4.3 优化脚本2</strong></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># vim test.sh</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;请输入用户名：&quot;</span> username</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">cat</span> /etc/passwd |grep <span class="variable">$username</span> &amp;&gt;/dev/null</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$username</span> is exist!&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">read</span> -s -p <span class="string">&quot;请设置密码：&quot;</span> password</span><br><span class="line">    useradd <span class="variable">$username</span> &amp;&gt;/dev/null</span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$password</span> | passwd <span class="variable">$username</span> --stdin &amp;&gt;/dev/null</span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\n create <span class="variable">$username</span> ok!&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">----------------------------------------------------------</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># sh test.sh </span></span><br><span class="line">请输入用户名：cp1</span><br><span class="line">cp1 is exist!</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># sh test.sh </span></span><br><span class="line">请输入用户名：cp8</span><br><span class="line">请设置密码：</span><br><span class="line"> create cp8 ok!</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># </span></span><br></pre></td></tr></table></figure><blockquote><p><strong>4.3.2 脚本优化3</strong></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># vim test.sh</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;请输入用户名：&quot;</span> username</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">cat</span> /etc/passwd |grep <span class="variable">$username</span> &amp;&gt;/dev/null</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$username</span> is exist!&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">read</span> -s -p <span class="string">&quot;请设置密码：&quot;</span> password</span><br><span class="line">    useradd <span class="variable">$username</span> &amp;&gt;/dev/null</span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$password</span> | passwd <span class="variable">$username</span> --stdin &amp;&gt;/dev/null</span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\n create <span class="variable">$username</span> ok!&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">          </span><br><span class="line">（tmux 窗口1）                                                                                                       </span><br><span class="line">──────────────────────────────────────────────</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># sh test.sh </span></span><br><span class="line">请输入用户名：chen5556</span><br><span class="line">chen5556 is exist!</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># sh test.sh </span></span><br><span class="line">请输入用户名：chen7778</span><br><span class="line">请设置密码：</span><br><span class="line"> create chen7778 ok!</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># </span></span><br><span class="line"></span><br><span class="line">（tmux 窗口2）</span><br></pre></td></tr></table></figure><blockquote><p><strong>4.3.4 脚本改善 最终版</strong></p><p>[root@sanchuang-linux chenpeng]# <code>id chen5557</code><br>uid=1019(chen5557) gid=1019(chen5557) 组=1019(chen5557)</p><p>--------------------------------------------------------</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># vim test.sh</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;请输入用户名:&quot;</span> username</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">id</span> <span class="variable">$username</span> &amp;&gt;/dev/null</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$username</span> is exist!&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">read</span> -s -p <span class="string">&quot;请设置密码:&quot;</span> password</span><br><span class="line">   useradd <span class="variable">$username</span> &amp;&gt;/dev/null</span><br><span class="line">   <span class="built_in">echo</span> <span class="variable">$password</span> | passwd <span class="variable">$username</span> --stdin &amp;&gt;/dev/null</span><br><span class="line">   <span class="built_in">echo</span> -e <span class="string">&quot;\n create <span class="variable">$username</span> ok!&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">（tmux 窗口1）</span><br><span class="line">──────────────────────────────────────────────</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># sh test.sh </span></span><br><span class="line">请输入用户名:chen5556</span><br><span class="line">chen5556 is exist!</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># sh test.sh </span></span><br><span class="line">请输入用户名:chen7777</span><br><span class="line">请设置密码:</span><br><span class="line"> create chen7777 ok!</span><br><span class="line">[root@sanchuang-linux chenpeng]<span class="comment"># </span></span><br><span class="line"></span><br><span class="line">（tmux 窗口2）</span><br></pre></td></tr></table></figure><h3 id="查看用户是否存在">查看用户是否存在</h3><blockquote><p><strong>*4.4 查看用户是否存在</strong></p><p>[root@sanchuang-linux ~]# <code>cat /etc/passwd</code> |grep cp1<br><code>cp1</code>: x:1009:1009::/home/<code>cp1</code>:/bin/bash</p></blockquote><h3 id="上一条命令返回值">上一条命令返回值 $?</h3><blockquote><p><strong>*4.5 上一条命令返回值 $?</strong></p><p>$? 上一个命令的返回值</p><p>上一条命令返回值：  保存在 --&gt;$?</p><p>为0是成功</p><p>为1是失败</p><p><code>命令返回值为0  表示执行成功</code></p><p>​<code>1  执行失败</code></p><p>​<code>227  没有这条命令</code></p><p>命令返回值 $?</p></blockquote><hr><blockquote><p><strong>*4.6 命令返回值  不精确的判断用户是否存在</strong></p><p>不精确地判断用户是否存在</p><p>[root@sanchuang-linux ~]# cat /etc/passwd |<code>grep cp1</code>（注：不精确地判断用户是否存在）<br><code>cp1</code>: x:1009:1009::/home/<code>cp1</code>:/bin/bash<br>[root@sanchuang-linux ~]# echo $?（注：为0是成功）<br>0<br>[root@sanchuang-linux ~]# cat /etc/passwd |grep cp9<br>[root@sanchuang-linux ~]# echo $?（注：为1是失败）<br>1</p><p>=======================================================</p><p>命令返回值 id</p><p>[root@sanchuang-linux ~]# <code>id cp1</code><br><code>uid</code>=1009(cp1) <code>gid</code>=1009(cp1) <code>组</code>=1009(cp1)<br>[root@sanchuang-linux ~]# echo $?<br><code>0</code><br>[root@sanchuang-linux ~]# id cp9<br>id: “cp9”：无此用户<br>[root@sanchuang-linux ~]# echo $?<br><code>1</code><br>[root@sanchuang-linux ~]#</p><p>上一条命令返回值： 保存在 ——&gt;$?</p><p>--------------------------------------------------------</p><p><code>命令返回值为0  表示执行成功</code></p><p>​<code>1  执行失败</code></p><p>​<code>227  没有这条命令</code></p></blockquote><hr><blockquote><p><strong>*4.7 精确的判断用户是否存在 （完善脚本）</strong></p><p>想要精确匹配的话，就把过滤的范围缩小一点：</p><p>^wy:  以wy: 开头</p><p><code>^…：以什么开头，整行以什么开头</code></p><p><code>…$：以什么结尾，整行以什么结尾</code></p><p>[root@sanchuang-linux ~]# cat /etc/passwd |<code>grep &quot;^wy:&quot;</code><br><code>wy:</code> x:1008:1008::/home/wy:/bin/bash</p><p>[root@sanchuang-linux ~]# useradd wy:<br>useradd：无效的用户名“wy:”</p></blockquote><h3 id="wc命令-重定向标准输入">wc命令  &lt;重定向标准输入</h3><blockquote><p><strong>知识点5.1 wc命令  &lt;重定向标准输入</strong></p><p>wc（字数统计）命令</p><p>格式：<code>wc[选项]...目标文件...</code></p><p><code>-l：统计行数</code></p><p><code>-w：统计字数</code> （前后都是空白的一组字符）</p><p><code>-c：统计字符数</code>（可见和不可见的字符）</p><p>例：</p><p># wc /etc/hosts</p><p><code>4</code> <code>23</code> <code>185</code> /etc/hosts</p><p>（* 注：4行，23个单词，185个字节）</p><p>代码如下</p><p>---------------------------------------------------------------</p><p>[root@sanchuang-linux ~]# <code>wc -l</code> backup_log.sh  （注：查看文件有多少行）<br>0 backup_log.sh<br>[root@sanchuang-linux ~]# <code>wc &lt;</code> backup_log.sh （输入重定向）<br>0 0 0<br>[root@sanchuang-linux ~]# wc  backup_log.sh<br>0 0 0 backup_log.sh</p><p>[root@sanchuang-linux lianxi]# <code>wc -l</code> sshd_config2（注：查看文件有多少行）<br>148 sshd_config2<br>[root@sanchuang-linux lianxi]# <code>wc &lt;</code> sshd_config2（注：<code>标准输入  输入重定向</code>）<br>148  559 4425<br>[root@sanchuang-linux lianxi]# wc sshd_config2 （注：wc(字数统计)命令）<br>148  559 4425 sshd_config2</p></blockquote><hr><blockquote><p><strong>知识点5.2 重定向 发信息 echo “hello brother” &gt; /dev/pts/22</strong></p><p>[root@sanchuang-linux ~]# w<br>17:20:37 up 19:51,  7 users,  load average: 0.00, 0.00, 0.02<br>USER   TTY    FROM       LOGIN@  IDLE  JCPU  PCPU WHAT<br>root   tty1   -         0610月20  7:20m  0.60s  0.60s -bash<br>root   pts/7   192.168.0.30   14:30  42:37  0.09s  0.00s tmux<br>root   pts/21  192.168.0.30   16:48  21.00s  0.14s  0.14s -bash<br>root   <code>pts/22</code>  192.168.0.30   17:20   0.00s  0.02s  0.01s <code>w</code></p><p>----------------------------------------------------------------------</p><p># <code>echo &quot;hello brother&quot; &gt; /dev/pts/22</code></p><p>重定向 发信息</p></blockquote><h3 id="xargs-管道符号">xargs  管道符号</h3><blockquote><p><strong>知识点5.3 xargs  管道符号</strong></p><p>xargs 将前面命令的<code>输出</code>送给后面的命令<code>作为参数</code>使用</p><p><code>xargs 和 管道符号 一般配套使用</code></p><p>-------------------------------------------------</p><p>在当前路径查看.txt结尾的文件</p><p>find . -name “*.txt”</p><p>------------------------------------</p><p>管道 与 xargs</p><p>将管道前的输出作为参数赋给后面的命令</p><p><code>find . -name &quot;*.txt&quot; | xargs rm -rf</code></p><p>--------------------------------------------------------------------------------------</p><p>管道与xargs</p><p>xargs 可以将管道或标准输入（stdin）数据转换成命令行参数，也能够从文件的输出中读取数据。</p><p>[root@mysql-binary vim_test]# find . -name “*.sh” <code>|xargs ls -al</code></p><p>[root@mysql-binary vim_test]# find . -name “*.txt” <code>| xargs rm -rf</code></p><p>（注：ls -al 看文件详细信息）</p><p>代码如下</p><p>------------------------------------------------------------------</p><p>[root@sanchuang-linux chenpeng]# find . -name “*.sh” <code>|xargs ls -al</code><br>-rw-r–r–. 1 root root  77 10月 16 15:30 ./redirect/abc.sh<br>-rw-r–r–. 1 root root 206 10月 16 15:45 ./redirect/student_information.sh<br>-rw-r–r–. 1 root root 300 10月 16 17:15 ./test.sh<br>[root@sanchuang-linux chenpeng]# ls -al <a href="http://test.sh">test.sh</a><br>-rw-r–r–. 1 root root 300 10月 16 17:15 <a href="http://test.sh">test.sh</a></p></blockquote><hr>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>08_Linux基础-vim-tmux-字符编码</title>
      <link href="/blog/posts/33007.html"/>
      <url>/blog/posts/33007.html</url>
      
        <content type="html"><![CDATA[<p>摘要：博客迁移 <a href="https://blog.csdn.net/cpen_web"><code>https://blog.csdn.net/cpen_web</code></a> → 本站<span id="more"></span></p><h1 id="08-Linux基础-vim-tmux-字符编码">08_Linux基础-vim-tmux-字符编码</h1><p><a href="https://blog.csdn.net/cpen_web">博客🔗：https://blog.csdn.net/cpen_web</a></p><hr><h2 id="一-vim">一. vim</h2><blockquote><p>文本编辑器-vim（==编辑文本==）</p></blockquote><blockquote><p>Windows：记事本、word、sublime、pycharm</p><p>能编辑音乐、视频、图片？答：不能，==只能编辑文本==</p></blockquote><blockquote><p>Linux：</p><p>​vi（==字符界面==），vim（==字符界面==），gedit（==图形化==）</p><p>==unix 都会安装vi==</p><p>vim 是vi的==加强版==（在vi基础上添加其他功能）</p></blockquote><h3 id="vim编辑器作用">vim编辑器作用</h3><blockquote><p>vim编辑器==作用==：</p><p>==1、编写脚本、程序==</p><p>==2、修改配置文件==</p><p>==3、做一些文本处理==</p></blockquote><h3 id="vim模式">vim模式</h3><blockquote><p>vim有三种最常用最基本的模式：命令模式、编辑模式（插入模式）、末行模式、可视模式，替换模式</p><p>vim有三种最常用最==基本==的模式：</p><p>==命令模式==</p><p>==编辑模式==</p><p>==末行模式==</p><p>还有另外两种==不常用==模式：</p><p>==视图模式==</p><p>==替换模式==</p></blockquote><h4 id="vim命令模式">vim命令模式</h4><blockquote><p>==命令模式：vim  a  /  ESC==</p><p>​==无法编辑==，只允许删除、复制、粘贴、撤销等快捷操作，打开文件时==默认==进行此模式</p><p>==yy复制==</p><p>==p粘贴==</p><p>==dd删除==</p><p>==u撤销==</p><p>==命令模式== 相当于一个==中间==介</p><p>每个模式==退出== 都会==回到命令模式==，命令模式可以进入所有模式</p></blockquote><h4 id="vim编辑模式">vim编辑模式</h4><blockquote><p>编辑模式 ESC  ==i==</p><p>– 插入 –</p><p>​插入模式，进行==文本编辑==</p><p>-----------------------------------------------------------------------</p><p>操作键功能</p><p>​==i==光标在==当前==位置进入插入模式</p><p>​I光标==跳到行首==并进入插入模式</p><p>​a光标==后退一格==并进入插入模式</p><p>​A光标==退到行尾==并进入插入模式</p><p>​==o==在光标所在==行下新起一行==并进入插入模式</p><p>​==O==在光标所在==行上新起一行==并进入插入模式</p><p>​s==删除==光标==所在字符==并进入插入模式</p><p>​S==删除==光标所在==行==并进入插入模式</p></blockquote><h4 id="vim末行模式">vim末行模式</h4><blockquote><p>末行模式 ESC  ==:==</p><p>:</p><p>输入命令，设置环境，保存文件，查找替换</p><p>----------------------------------------------------</p><p>操作键功能</p><p>​==:q==如果未对文件做改动则==退出==</p><p>​==:q!====放弃保存==并==退出==</p><p>​==:wq保存==当前文件并==退出==</p><p>​==:wq!强制保存==当前文件并==退出==</p><p>​==:x保存==当前文件并==退出==</p><p>​==:x!强制保存==当前文件并==退出==</p><p>​==ZZ保存==当前文件并==退出==</p></blockquote><h4 id="vim视图模式">vim视图模式</h4><blockquote><p>视图模式 ESC  ==v、V、ctrl+v==</p><p>– 可视 行 –</p><p>​选择特定的块文本，进行复制，修改等</p><p>小==v==：选择==行指定的部分==</p><p>大==V==：选择==整个行==</p><p>==Ctrl + v== :选择==块== 插入按I  退出模式进人命令模式（Esc），这个时候就全部加上</p></blockquote><h4 id="vim替换模式">vim替换模式</h4><blockquote><p>替换模式 ESC  ==R==</p><p>– 替换 –</p><p>-----------------------------------</p><p>123 hello456 789<br>xxx helloyyy zzz<br>xxx yyy zzz</p></blockquote><h3 id="练习">练习</h3><blockquote><p><strong>课堂练习1 插入模式</strong></p><p>123 456<br>123 4<br>xyz 789<br>4<br>xyz 789</p><p>---------------------------------------------------------</p><p>步骤：</p><p>==v== 小v 可视模式 visual —》选择一部分</p><p>==y==  按y复制</p><p>==o== 按o另起一行，进入插入模式</p><p>==P== 再按esc，再p，按p粘贴</p></blockquote><blockquote><p><strong>课堂练习2</strong></p><p>123 TEST 456 789<br>xxx TEST yyy zzz</p><p>---------------------------------------------------------</p><p>选择块插入</p><p>ctrl + v：选择块</p><p>插入按大I</p><p>ESC  退出模式进入命令模式，这个时候就全部加上</p></blockquote><h3 id="vim常用快捷方式">vim常用快捷方式</h3><blockquote><p>vim 常用快捷方式</p><p>vim打开文件：</p><p># vim e<br># ==vim +5 e==</p><p>表示打开文件e，并且==将光标移动到第3行==</p><p># ==vim +/aa e==</p><p>打开文件e，并且==高亮显示aa字符==</p></blockquote><h3 id="退出vim编辑器的方法">退出vim编辑器的方法</h3><blockquote><p>vim保存退出：</p><p>操作键功能</p><p>​==:q==如果未对文件做改动则==退出==</p><p>​==:q!==放弃保存并==退出==</p><p>​==:wq====保存==当前文件并==退出==</p><p>​==:wq!====强制保存==当前文件并==退出==</p><p>​==:x====保存==当前文件并==退出==</p><p>​==:x!====强制保存==当前文件并==退出==</p><p>​==ZZ====保存==当前文件并==退出== （注：命令模式退出）</p></blockquote><h3 id="光标移动">光标移动</h3><blockquote><p>光标移动：上下左右方向键（k，j，h，l）</p><p>-------------------------------------------------</p><p>操作类型 操作键功能</p><p>==光标==方向移动 ==k，j，h，l====上、下、左、右==</p><p>==============================================================</p><p>==翻页== Page Down或Ctrl+F向==下==翻动一整页内容</p><p>​ Page Up或Ctrl+B向==上==翻动一整页内容</p><p>==============================================================</p><p>==行内==快速跳转 Home键或“^”、数字“0”跳转至==行首（注：“^”尖符号）==</p><p>​End键或“$”键跳转到==行尾==</p><p>==============================================================</p><p>==行间==快速跳转</p><p>1G或者gg跳转到文件的==首行==</p><p>G  跳转到文件的==末尾行==</p><p>#G跳转到文件中的==第#行==</p><p>（末行模式）:40跳转到==40行==</p><p>w  ==每个单词==的==首字母==跳转</p><p>e   ==每个单词==的==尾字母==跳转</p></blockquote><h3 id="vim设置">vim设置</h3><blockquote><p><strong>vim设置</strong></p><p>（末行模式）:set number==设置行数==</p><p>（末行模式）:set nonumber ==取消设置==</p><p>--------------------------------------</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">:<span class="keyword">set</span> <span class="keyword">number</span></span><br><span class="line"></span><br><span class="line"> <span class="number">1</span> aa bb <span class="keyword">cc</span></span><br><span class="line"> <span class="number">2</span> dd ee ff</span><br><span class="line"> <span class="number">1</span> aa bb <span class="keyword">cc</span></span><br><span class="line"> <span class="number">2</span> dd ee ff</span><br><span class="line"> <span class="number">3</span> aa bb <span class="keyword">cc</span></span><br></pre></td></tr></table></figure></blockquote><h3 id="删除（剪切）、复制、粘贴">删除（剪切）、复制、粘贴</h3><blockquote><p>操作类型</p><p>操作键功能</p><p>--------------------------------------</p><p><strong>删除</strong> （*注：一般==^行首，$行尾==）</p><p>==x或d或Del删除==光标处的==单个字符==</p><p>==dd删除==当前光标==所在行==</p><p>==#dd删除==从光标处开始的==#行内容==</p><p>d==^====删除==当前==光标之前到行首==的所有字符</p><p>d==$==删除当前==光标处到行尾==的所有字符</p><p>d==w====删除一个单词==（word)，以空格、冒号等 符号</p><p>------------------------------------------------------</p><p><strong>复制</strong></p><p>==yy复制==当前行==整行==的内容到剪贴板</p><p>==#yy复制==从光标处开始的==#行==内容</p><p>------------------------------------------------------</p><p><strong>粘贴</strong></p><p>小==p==将==缓冲区==中的内容==粘贴==到光标位置处==之后==</p><p>大==P粘贴==到光标位置处==之前==</p></blockquote><h3 id="文件内容查找">文件内容查找</h3><blockquote><p>文件内容查找</p><p>操作键功能</p><p>==/==word==从上而下==在文件中查找字符串“word”</p><p>==?==word==从下而上==在文件中查找字符串“word”</p><p>小==n====定位下一个==匹配的被查找字符串</p><p>大==N====定位上一个==匹配的被查找字符串</p><p>（注：/word 和 ?word 不同点：==方向相反==）</p></blockquote><h3 id="取消高亮、设置行数、取消行数设置">取消高亮、设置行数、取消行数设置</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">取消高亮 ：noh</span><br><span class="line">设置行数：set nu</span><br><span class="line">取消：set nonu</span><br></pre></td></tr></table></figure><hr><h2 id="二-vim-tmux及字符编码问题">二. vim-tmux及字符编码问题</h2><blockquote><p><strong>文件内容替换</strong></p><p>文件内容替换(末行模式）</p><p>命令功能</p><p>==:s /old/new==将==当前行==中查找到的==第一个==字符“old”串==替换==为“new”</p><p>==:s /old/new/g== 将==当前行==中查找到的==所有==字符串“old”==替换==为“new”</p><p>==:#,# s==/old/new/==g==在==行号“#,#”==范围内替换==所有==的字符串“old”为“new”</p><p>==:% s==/old/new/==g==   在==整个文件==范围内替换==所有==的字符串“old”为“new” global</p><p>==:s== /old/new/==gc==在替换命令末尾加入==c命令==，将对每个替换动作==提示==用 户进行==确认==Confirm</p><p>==:%s==/feng//==g== 将==所有==的feng==删除==</p><p>（注：:s/…/… 当前行 第一个str</p><p>​:s/…/…/g当前行 所有str</p><p>​:#,#s/…/…/g 行号#,# 所有str</p><p>​:%s/…/…/g 整个文档 所有str</p><p>​:s/…/…/gc 整个文档 所有str 确认提示</p><p>​:%s/…//g 整个文档 所有str 删除）</p><p>（注：s  —— 替换</p><p>​ :s —— 当前行替换</p><p>​#,#  —— 行号#到#</p><p>​% —— 整个文档</p><p>​g —— 所有字符串</p><p>​c —— 确认提示</p><p>​:%s/…//g —— 整个文档 所有str 删除）</p></blockquote><blockquote><p>==缓存：swp文件==</p><p>==编写文件时 1.txt==</p><p>==先把1.txt文件拷贝一份，拷贝成.1.txt.swp文件，真正编辑的是这个文件==</p><p>==保存时，会将.1.txt.swp覆盖1.txt==</p><p>-------------------------------------------------------------------------------------------</p><p><strong>相关操作</strong></p><p>一个终端下# vim 2.txt,另一个终端敲# ls -al,提示如下</p><p>[root@sanchuang-linux cp]# ==ls -al==<br>总用量 88<br>-rw-r–r–.  1 root root  4096 10月 15 15:05 ==.2.txt.swp==</p><p>===========================================================================================</p><p>在另一个终端# vim 2.txt，提示如下</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">发现交换文件 &quot;.2.txt.swp&quot;</span><br><span class="line">            所有者: root    日期: Thu Oct 15 15:05:45 2020</span><br><span class="line">            文件名: ~root/cp/2.txt</span><br><span class="line">            修改过: 否</span><br><span class="line">            用户名: root      主机名: sanchuang-linux</span><br><span class="line">           进程 ID: 3129 (仍在运行)</span><br><span class="line">正在打开文件 &quot;2.txt&quot;</span><br><span class="line">              日期: Thu Oct 15 15:05:22 2020</span><br><span class="line"></span><br><span class="line">(1) Another program may be editing the same file.  If this is the case,</span><br><span class="line">    be careful not to end up with two different instances of the same</span><br><span class="line">    file when making changes.  Quit, or continue with caution.</span><br><span class="line">(2) An edit session for this file crashed.</span><br><span class="line">    如果是这样，请用 &quot;:recover&quot; 或 &quot;vim -r 2.txt&quot;</span><br><span class="line">    恢复修改的内容 (请见 &quot;:help recovery&quot;)。</span><br><span class="line">    如果你已经进行了恢复，请删除交换文件 &quot;.2.txt.swp&quot;</span><br><span class="line">    以避免再看到此消息。</span><br><span class="line"></span><br><span class="line">交换文件 &quot;.2.txt.swp&quot; 已存在！</span><br><span class="line">以只读方式打开([O]), 直接编辑((E)), 恢复((R)), 退出((Q)), 中止((A)): </span><br></pre></td></tr></table></figure><p>===========================================================================================</p><p>:wq 写入时，提示如下</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;2.txt&quot;                                                                                          </span><br><span class="line">警告: 此文件自读入后已发生变动！！！</span><br><span class="line">确实要写入吗 (y/n)?</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>==* 注意==：进入命令模式，按数字键，之后再进入插入模式的话，会将输入内容按照之前按的数字大小复制成多份</p><p>（注：步骤</p><p>​vim 1.txt ——&gt; 先按数字3 ——&gt; 按i进入插入模式 ——&gt; abc ——&gt; Esc ——&gt; abcabcabc）</p></blockquote><blockquote><p><strong>打开新文件或读入其他文件内容 &amp;&amp; 撤销和另存为</strong></p><p>打开新文件 ==:e==  或 读入其他文件内容 ==:r==</p><p>命令功能</p><p>==:e== ~/install.log==打开==新的==文件==进行==编辑==</p><p>==:r== /etc/filesystems在==当前文件==中==读入其他文件内容== （注：即追加内容）</p><p>撤销和另存为 ==:w==</p><p>==:w== /tmp/hello.txt把当前文件另存为/tmp目录下的hello.txt</p><p>==同时编辑==多个文件</p><p># ==vim 1.txt 2.txt==</p><p>==:n== 编辑上一个</p><p>==:N== 编辑下一个</p><p>===========================================================================================</p><p>例：</p><p># vim 2.txt</p><p>==:e 1.txt==</p><p>（注：进入1.txt进行编辑）</p><p>--------------------------</p><p># vim 2.txt</p><p>==:r 1.txt==</p><p>（注：读入1.txt文件的内容。在当前光标下一行插入1.txt文件内容）</p><p>===========================================================================================</p><p>撤销和另存为 ==:w==</p><p>命令  功能</p><p>==:w== /tmp/hello.txt把当前文件另存为/tmp目录下的hello.txt</p><p>===========================================================================================</p><p>例：</p><p># vim 1.txt</p><p>==:w /root/cp/test.txt==</p><p>（注：将文件1.txt另存为在/root/cp/目录下，==改名为test.txt==）</p></blockquote><blockquote><p><strong>vim的配置（3种）</strong></p><p>--------------------------------------------------------------------------------------------</p><p>第一种</p><p>==vim设置==：（末行模式）</p><p>一次性设置行数：（只在当前编辑时生效）</p><p>:set number</p><p>取消</p><p>:set nonumber</p><p>--------------------------------------------------------------------------------------------</p><p>第二种</p><p>==全局配置文件==：</p><p># vim /etc/vimrc</p><p># cp /etc/vimrc{,.bak} （注：效果等同于 # cp /etc/vimrc /etc/vimrc.bak）</p><p>​   （* 注↑：备份操作。修改全局配置文件前先备份。出错就回滚）</p><p>set number   （注：==设置行数==）</p><p>set ==showcmd==   （注：==显示当前键入命令==）</p><p>set encoding=utf-8  （注：==设置编码==）</p><p>set tabstop=4   （注：==设置tab键的空格数==）</p><p>--------------------------------------------------------------------------------------------</p><p>第三种：(只针对当前用户生效)</p><p>==编写 ~/.vimrc==</p><p>[root@sanchuang-linux ~]# vim ==.vimrc==</p><p>[root@sanchuang-linux ~]# cat .vimrc</p><p>set number</p><p>set showcmd</p><p>set encoding=utf-8</p><p>set tabstop=4</p></blockquote><h3 id="tmux">tmux</h3><blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">tmux shell里面多屏幕编辑</span><br><span class="line">安装：</span><br><span class="line"><span class="comment"># yum install tmux  -y  </span></span><br><span class="line">tmux</span><br><span class="line">Ctrl+b 上下左右</span><br><span class="line">Ctrl+b <span class="built_in">shift</span> +＂</span><br><span class="line">Ctrl+b <span class="built_in">shift</span> + %</span><br><span class="line">Ctrl+b + c  创造新的一页</span><br><span class="line">Ctrl+b + p  返回上一页</span><br><span class="line">Ctrl+b + n  返回下一页</span><br><span class="line">Ctrl+b + x 关闭当前小窗口 </span><br><span class="line">ctrl+d关闭</span><br><span class="line">Ctrl+b + b + ! 删除</span><br><span class="line"></span><br><span class="line">Ctrl+b + d 暂存，保存当前的tmux状态并退出tmux</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>tmux：</p><p>安装：yum install tmux</p><p>tmux：</p><p>一：敲tmux 进入会话</p><p>窗口底部有绿杠表示进入了tmux</p><p>----------------------------------------------------------------------------------------------------------</p><p>左右分屏：先按==ctrl + b==，然后再按shift+==%==号</p><p>上下分屏：先按==ctrl + b==,   然后再按shift+==&quot;==</p><p>上下左右移动光标： ==ctrl + b==，再按==上下左右==方向键</p><p>删除一个分割： 光标移动到那个分割屏幕，然后按==ctrl +d==</p><p>新增一个新的窗口（新增一页）：==ctrl+b==，然后按==c==</p><p>返回上一页： ==ctrl+b== 然后按==p==</p><p>返回下一页： ==ctrl+b== 然后按==n==</p><p>----------------------------------------------------------------------------------------------------------</p><p>保存当前的tmux状态，并退出tmux：</p><p>使用： ==ctrl+b==  然后按==d==</p><p>----------------------------------------------------------------------------------------------------------</p><p>查看当前保存的会话状态</p><p>[root@mysql-binary ~]# ==tmux ls==</p><p>0: 2 windows (created Thu Oct 15 16:31:27 2020) [139x22]</p><p>1: 2 windows (created Thu Oct 15 16:45:40 2020) [139x22]</p><p>-------------------------------------------------------------------------------------------------------------</p><p>进入第一个会话状态：</p><p>==tmux a -t 0==</p><p>-------------------------------------------------------------------------------------------------------------</p><p>==设置tmux==，跟vim的末行模式很像：</p><p>按==ctrl+b== ,然后按==：==（这时窗口底部就会有==黄色==的杠）</p><p>设置==同步==：  ==ctrl+b== 然后按==：== 然后输入==set synchronize-panes on==</p><p>​                  取消同步==set synchronize-panes off==</p></blockquote><blockquote><p><strong>tmux终端关闭，执行的程序会继续执行 （* tmux的好处）</strong></p><p>tmux 终端关闭，不是tmux会话关闭。tmux 终端关闭，那之前执行的程序都会继续执行。</p><p>不使用tmux，默认情况下，终端关闭，执行的程序也会关闭。 测试如下</p><p>================================================================</p><p>测试：</p><p>==编写脚本：==</p><p># cat <a href="http://sleep.sh">sleep.sh</a><br>echo “begin…”<br>sleep 100<br>echo “end…”</p><p>=======================</p><p>==运行脚本==<br># sh <a href="http://sleep.sh">sleep.sh</a><br>begin…</p><p>=======================</p><p>运行脚本：==（放到后台运行）==</p><p># sh <a href="http://sleep.sh">sleep.sh</a> ==&amp;==</p><p>=======================</p><p>==查看进程有没有运行==</p><p># ==ps -ef |grep sleep==<br>root    13133  13112  0 17:12 pts/6   00:00:00 sh <a href="http://sleep.sh">sleep.sh</a><br>root    13134  13133  0 17:12 pts/6   00:00:00 sleep 100<br>root    13190  13140  0 17:12 pts/16  00:00:00 grep --color=auto sleep</p><p>=======================</p><p>==关闭终端之后再重新开启连接，查看进程有没有运行。==</p><p>结果：没有运行</p><p>……</p><p>=======================</p><p>==在tmux下 运行脚本==</p><p>……</p><p>==tmux关闭后  会话还在，程序还会一直运行==</p><p># ps -ef |grep sleep<br>root    13278  13003  0 17:17 pts/13  00:00:00 sh <a href="http://sleep.sh">sleep.sh</a><br>root    13279  13278  0 17:17 pts/13  00:00:00 sleep 100<br>root    13284  13140  0 17:17 pts/16  00:00:00 grep --color=auto sleep</p><p>=======================</p></blockquote><h3 id="编码">编码</h3><blockquote><p><strong>编码</strong></p><p>编码：<a href="http://www.ruanyifeng.com/blog/2007/10/ascii_unicode_and_utf-8.html">http://www.ruanyifeng.com/blog/2007/10/ascii_unicode_and_utf-8.html</a></p><p>文件编码一般2种方式：==ascii 和 unicode==</p><p>UTF-8 是 Unicode 的实现方式之一</p><p>==转编码==：</p><p># ==iconv -f== utf-8 ==-t== gbk ==code_test.txt== &gt;==code_test1.txt==</p><p>ASCII 码 最多能表示256个字，不够用</p><p>unicode  万国码，每个字给你一个序号</p><p>UTF-8 是 Unicode 的实现方式之一，规定怎么存储在计算机。</p><p>（UTF-8对ascii码/英文码友好）</p><p>==以什么编码方式存储，就要以什么编码方式解码==</p><p>utf-8、utf-16</p><p>国内编码 gbk、gb2131</p><p>===============================================</p><p>==系统语言设置环境：==</p><p># ==locale==</p><p>LANG=zh_CN.UTF-8</p><p>LC_CTYPE=“zh_CN.UTF-8”</p><p>LC_NUMERIC=“zh_CN.UTF-8”</p><p>LC_TIME=“zh_CN.UTF-8”</p><p>LC_COLLATE=“zh_CN.UTF-8”</p><p>LC_MONETARY=“zh_CN.UTF-8”</p><p>LC_MESSAGES=“zh_CN.UTF-8”</p><p>LC_PAPER=“zh_CN.UTF-8”</p><p>LC_NAME=“zh_CN.UTF-8”</p><p>LC_ADDRESS=“zh_CN.UTF-8”</p><p>LC_TELEPHONE=“zh_CN.UTF-8”</p><p>LC_MEASUREMENT=“zh_CN.UTF-8”</p><p>LC_IDENTIFICATION=“zh_CN.UTF-8”</p><p>LC_ALL=</p><p>===============================================</p><p>==file code_test.txt 注：查看文件编码类型==</p><p># locale 系统语言设置环境</p><p># file code_test1.txt 看文件编码方式</p><p>系统、文件、shell  三者统一 ，不会乱码</p><p>===============================================</p><p>上课代码操作：</p><p># mkdir vim_test<br># cd vim_test/<br># ls<br># rz -E（注：将windows code_test.txt文件上传linux）<br>rz waiting to receive.<br># ls<br>code_test.txt<br># vim code_test.txt<br># ==file code_test.txt （注：查看文件编码类型）==<br>code_test.txt: UTF-8 Unicode text<br># iconv -f utf-8 -t ==gbk== code_test.txt &gt;code_test1.txt（注：转国标码）<br># ==file code_test1.txt==<br>code_test1.txt: ==ISO-8859 text（注：国标码）==<br># vim code_test1.txt （注：显示乱码）<br>#</p><p>为什么出现乱码？答：以utf-8的方式打开gbk编码</p><p>以什么编码方式存储，就要以什么编码方式解码</p></blockquote><h3 id="总结（xmind）">总结（xmind）</h3><blockquote><p><img src="https://image.cpen.top/image/202205041447906.png" alt="image-20220504144731448"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line">vim文本编辑器</span><br><span class="line">vi，vim</span><br><span class="line">vim常见模式</span><br><span class="line">命令模式</span><br><span class="line">文件打开默认就是命令模式</span><br><span class="line">ESC键到达</span><br><span class="line">编辑模式</span><br><span class="line">a,i,o,s（支持大写）</span><br><span class="line">末行模式</span><br><span class="line">：</span><br><span class="line">可视模式</span><br><span class="line">v</span><br><span class="line">选中文本指定部分</span><br><span class="line">V</span><br><span class="line">选择文本指定行</span><br><span class="line">ctrl+v</span><br><span class="line">选择文本指定块</span><br><span class="line">替换模式</span><br><span class="line">R</span><br><span class="line">基本使用</span><br><span class="line">命令模式</span><br><span class="line">删除</span><br><span class="line">x 、d</span><br><span class="line"><span class="built_in">dd</span></span><br><span class="line">5dd</span><br><span class="line">复制</span><br><span class="line">yy</span><br><span class="line">3yy</span><br><span class="line">粘贴</span><br><span class="line">p </span><br><span class="line">撤销</span><br><span class="line">u</span><br><span class="line">查找</span><br><span class="line">/</span><br><span class="line">光标移动</span><br><span class="line">上下左右方向键（k,j,h,l）</span><br><span class="line">文件首</span><br><span class="line">gg</span><br><span class="line">文件尾</span><br><span class="line">G</span><br><span class="line">移动到特定行</span><br><span class="line">5G</span><br><span class="line">：5</span><br><span class="line">行首</span><br><span class="line">home键</span><br><span class="line">0</span><br><span class="line">^</span><br><span class="line">行尾</span><br><span class="line">end键</span><br><span class="line">$</span><br><span class="line">上翻页</span><br><span class="line">page up， ctrl+b</span><br><span class="line">下翻页</span><br><span class="line">pagedowm， ctrl+f</span><br><span class="line">编辑模式</span><br><span class="line">i</span><br><span class="line">I</span><br><span class="line">o</span><br><span class="line">O</span><br><span class="line">a</span><br><span class="line">A</span><br><span class="line">s</span><br><span class="line">S</span><br><span class="line">可视模式</span><br><span class="line">复制y</span><br><span class="line">插入 I</span><br><span class="line">末行模式</span><br><span class="line">退出和保存</span><br><span class="line">q</span><br><span class="line">q!</span><br><span class="line">wq</span><br><span class="line">wq!</span><br><span class="line">x</span><br><span class="line">ZZ命令模式退出</span><br><span class="line">替换</span><br><span class="line">：s/old/new</span><br><span class="line">:s/old/new/g</span><br><span class="line">:%s/old/new</span><br><span class="line">:%s/old/new/g</span><br><span class="line">:3,5s/old/new/g</span><br><span class="line">:%s/old/new/gc</span><br><span class="line">设置</span><br><span class="line">文件操作</span><br><span class="line">：e  编辑新文件</span><br><span class="line">：r  导入文件内容</span><br><span class="line">：w  另存文件路径</span><br><span class="line">vim  1.txt 2.txt</span><br><span class="line">：n 编辑下一个</span><br><span class="line">：N 编辑上一个</span><br><span class="line">vim常见快捷方式使用</span><br><span class="line">vim file1 file2 file3</span><br><span class="line">vim +10  file</span><br><span class="line">vim +/aa file</span><br><span class="line">vim的配置</span><br><span class="line">临时配置</span><br><span class="line">末行模式</span><br><span class="line">：<span class="built_in">set</span> nu</span><br><span class="line">全局配置</span><br><span class="line">/etc/vimrc</span><br><span class="line">用户配置</span><br><span class="line">~/.vimrc</span><br><span class="line">tmux</span><br><span class="line">tmux：</span><br><span class="line">安装：yum install tmux</span><br><span class="line">tmux： </span><br><span class="line">一：敲tmux 进入会话</span><br><span class="line">窗口底部有绿杠表示进入了tmux</span><br><span class="line"></span><br><span class="line">左右分屏：先按ctrl + b ，然后再按<span class="built_in">shift</span>+% 号</span><br><span class="line">上下分屏：先按ctrl + b, 然后再按 <span class="built_in">shift</span>+<span class="string">&quot;</span></span><br><span class="line"><span class="string">上下左右移动光标： ctrl + b 再按上下左右方向键</span></span><br><span class="line"><span class="string">删除一个分割： 光标移动到那个分割屏幕，然后按ctrl +d</span></span><br><span class="line"><span class="string">新增一个新的窗口（新增一页）：  ctrl+b 然后按c</span></span><br><span class="line"><span class="string">返回上一页： ctrl+b 然后按p</span></span><br><span class="line"><span class="string">返回下一页： ctrl+b 然后按n</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">保存当前的tmux状态，并退出tmux：</span></span><br><span class="line"><span class="string">使用： ctrl+b  然后按d</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">查看当前保存的会话状态</span></span><br><span class="line"><span class="string">[root@mysql-binary ~]# tmux ls</span></span><br><span class="line"><span class="string">0: 2 windows (created Thu Oct 15 16:31:27 2020) [139x22]</span></span><br><span class="line"><span class="string">1: 2 windows (created Thu Oct 15 16:45:40 2020) [139x22]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">进入第一个会话状态：</span></span><br><span class="line"><span class="string">tmux a -t 0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">设置tmux，跟vim的末行模式很像：</span></span><br><span class="line"><span class="string">按ctrl+b ,然后按：  （这时窗口底部就会有黄色的杠）</span></span><br><span class="line"><span class="string">设置同步：  ctrl+b 然后按：  然后输入set synchronize-panes on</span></span><br><span class="line"><span class="string">                           取消同步set synchronize-panes off</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">tmux 终端关闭，不是tmux会话关闭。那之前执行的程序都会继续执行。</span></span><br><span class="line"><span class="string">不使用tmux，默认情况下，终端关闭，执行的程序也会关闭。</span></span><br><span class="line"><span class="string">文件编码</span></span><br><span class="line"><span class="string">iconv -f utf-8 -t gbk file.txt &gt; file2.txt</span></span><br><span class="line"><span class="string">查看系统语言环境</span></span><br><span class="line"><span class="string">locale</span></span><br><span class="line"><span class="string">ascii</span></span><br><span class="line"><span class="string">unicode</span></span><br><span class="line"><span class="string">utf-8</span></span><br><span class="line"><span class="string">utf-16</span></span><br><span class="line"><span class="string">gbk</span></span><br><span class="line"><span class="string">gb2132</span></span><br></pre></td></tr></table></figure></blockquote><hr>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Vim </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>07_Linux基础-计划任务-备份脚本-变量定义和使用</title>
      <link href="/blog/posts/29955.html"/>
      <url>/blog/posts/29955.html</url>
      
        <content type="html"><![CDATA[<p>摘要：博客迁移 <a href="https://blog.csdn.net/cpen_web"><code>https://blog.csdn.net/cpen_web</code></a> → 本站<span id="more"></span></p><h1 id="07-Linux基础-计划任务-备份脚本-变量定义和使用">07_Linux基础-计划任务-备份脚本-变量定义和使用</h1><p><a href="https://blog.csdn.net/cpen_web">博客🔗：https://blog.csdn.net/cpen_web</a></p><hr><h2 id="一-计划任务">一. 计划任务</h2><blockquote><p>主要内容：周期性的计划任务crontab</p><p>==/var/spool/cron/ 统一存放计划任务的目录==</p><p>==/var/log/cron日志文件==</p><p>==/etc/cron cron.daily/ cron.hourly/ cron.monthly/ cron.weekly/ crontab的顺风车==</p><p>/etc/crontab</p><p>==crontab -l==</p><p>==crontab -e==</p><p>crontab ==-u cali== -e</p><p>crontab  -u  cali  -l</p><p>​==如何知道计划任务是否执行？==</p><p>​==用户没有登录，计划任务是否执行？答：会执行==</p><p>​==黑客也会去利用计划任务定时执行程序，你如何去检查？==</p><p>​==annacron 将电脑主机因为系统故障关机导致计划任务没有被执行，正常启动后，anacron会去检测没有执行的计划任何，重新执行一次==</p><p>at  一次性的计划任务</p><p>==at 11:45==</p><p>==at -l==</p></blockquote><h3 id="cron">cron</h3><blockquote><p>计划任务</p><p>​1.什么是计划任务？ （闹钟）</p><p>​计划什么时候去做什么事情</p></blockquote><blockquote><p>一次性的计划任务</p><p>​at</p><p>周期性的计划任务</p><p>​crontab</p></blockquote><blockquote><p>linux系统里的==执行计划任务的进程==–》==crond==</p><p>crond会==每分钟==去检查下所有用户的计划任务</p><p># ps aux|grep crond</p><p>root     887  0.0  0.1  36300  3508 ?     Ss  9月24  0:00 /usr/sbin/==crond== -n</p><p>root    16948  0.0  0.0  12320  984 pts/0   S+  10:05  0:00 grep --color=auto ==crond==</p><p># cd  ==/var/spool/cron/（注：统一存放计划任务的目录）==</p><p># ls</p><p>#</p></blockquote><blockquote><p>计划任务  原理</p><p><img src="https://image.cpen.top/image/202205032051307.png" alt="image-20220503205140202"></p></blockquote><blockquote><p>原理  时间的格式和语法（笔试）</p><p><img src="https://image.cpen.top/image/202205032052474.png" alt="image-20220503205205407"></p><p>（注：每个用户都可以用的命令）</p><p># ==crontab -l（注：查看当前用户的计划任务）==（每个用户只能看自己的，root用户能看所有的）</p><p>no crontab for root</p><p>#</p><p># ==crontab -e（注：创建计划任务）==</p><p>…… （注：vim编辑器 本质上是文本文件）</p><p># crontab -l</p><p>==30 4  *  * *==  bash  /lianxi/9_25/backup_log.sh</p><p>==*/5 * * * *==  bash /lianxi/9_25/backup_log.sh</p><p>==50  3  6-9  10 *== bash  /lianxi/9_25/backup_log.sh</p><p><img src="https://image.cpen.top/image/202205032053580.png" alt="image-20220503205331550"></p><p>==*==  该范围内的任意时间</p><p>==，== 间隔的多个不连续时间点</p><p>==-==  一个连续的时间范围</p><p>==/n== 指定间隔的时间频率</p><p>​==（注：crond进程 最低的时间间隔是1分钟）==</p><p>（注：时间不能冲突 日期和星期不能冲突）</p></blockquote><blockquote><p>#</p><p># cd  ==/var/spool/cron/（注：统一存放计划任务的目录，一个用户对应一个文件名）==</p><p># ls</p><p>cali  liangluyao  ==root==</p><p># ==cat  root （注：文件里面 就是cronta  -e编辑的）==</p><p>30  4  *  *  *  bash  /lianxi/9_25/backup_log.sh</p><p>*/5  *  *  *  *  bash  /lianxi/9_25/backup_log.sh</p><p>50  3  6-9  10  *  bash  /lianxi/9_25/backup_log.sh</p><p>#</p><p># ll==（注：每一个用户的计划任务都会放在/var/spool/cron/目录下）==</p><p>总用量 12</p><p>-rw-------. 1 ==cali==    cali     31 9月  25 10:27 cali</p><p>-rw-------. 1 ==liangluyao== liangluyao  31 9月  25 10:28 liangluyao</p><p>-rw-------. 1 ==root==    root    139 9月  25 10:25 root</p><p>#</p></blockquote><blockquote><p>==问：如何知道计划任务是否执行？==</p><p>==答：看日志文件，/var/log/cron。==</p><p>​==或者直接去看效果。==</p><p>======================</p><p>日志文件==（注：记录crond执行的计划任务，存放在/var/log/cron，用来排错。）==</p><p># tail  -f  ==/var/log/cron== （注：tail  -f 盯着文件末尾看）</p><p>Sep 25 10:30:01 sanchuang-linux CROND[17143]: (root) CMD (bash /lianxi/9_25/backup_log.sh)</p><p>Sep 25 10:30:01 sanchuang-linux CROND[17147]: (liangluyao) CMD (date &gt;&gt;~/liang.txt)</p><p>Sep 25 10:30:02 sanchuang-linux CROND[17119]: (root) CMDOUT (tar: 从成员名中删除开头的“/”)</p><p>Sep 25 10:30:02 sanchuang-linux CROND[17119]: (root) CMDOUT (tar: /var/log/audit/audit.log: 在我们读入文件时文件发生了变化)</p><p>Sep 25 10:30:02 sanchuang-linux CROND[17155]: (cali) CMD (date &gt;&gt;~/cali.txt)</p></blockquote><blockquote><p>示例1（root用户）：</p><p>每天早上7:50自动开启sshd服务，22点50时关闭</p><p>==service sshd start （注：开启sshd服务）==</p><p>==service sshd stop （注：关闭sshd服务）==</p><p>50  7 * *  *  service sshd start</p><p>50 22  *  *  * service sshd stop</p><p>每隔5天的12点整==清空==一次FTP服务器公共目录/var/ftp/pub</p><p>0  12  <em>/5  *  *  rm -rf /var/ftp/pub==/</em> （注：清空：删除里面所有东西）==</p><p>每周六的7:30时，==重新==启动httpd服务</p><p>==service httpd  restart （注：重启httpd服务）==</p><p>30  7  * *  6  service  httpd restart</p><p>每周一、三、五的17:30时，打包备份/etc/httpd目录</p><p>30  17  *  * 1,3,5  tar  czf /==backup==/httpd.tar.gz  /etc/httpd  ==（注：/backup/是备份目录）==</p><p>示例2（jerry用户）：==（注：宿主目录：~/）==</p><p>每周日晚上23:55时将“/etc/passwd”文件的内容复制到==宿主目录==中，保存为pwd.txt文件</p><p>55 23  *  *  0  ==/usr/bin/cp== /etc/passwd  ~/pwd.txt==（注：命令的绝对路径）==</p></blockquote><blockquote><p>/etc/crontab 是cron的一个配置文件</p><p># vim /etc/crontab</p><p>SHELL=/bin/bash （注：计划任务执行命令时用/bin/bash执行）</p><p>==PATH===/sbin:/bin:/usr/sbin:/usr/bin ==（注：它有自己的PATH变量，和shell的PATH变量不同）==</p><p>MAILTO=root==（注：所有 计划任务里的命令，建议使用命令的绝对路径，因为PATH变量的问题）==</p><p>​==（注↑：默认情况，计划任务出了问题，crontab会给root发邮件）==</p><p># For details see man 4 crontabs</p><p># Example of job definition:（注：对命令的解释）</p><p># .---------------- minute (0 - 59)</p><p># |  .------------- hour (0 - 23)</p><p># |  |  .---------- day of month (1 - 31)</p><p># |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr …</p><p># |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat</p><p># |  |  |  |  |</p><p># *  *  *  *  * user-name  command to be executed</p></blockquote><blockquote><p># crontab ==-u cali== -e ==（注：用root用户为cali创建计划任务）==</p><p># crontab  -u  cali  -l  （注：查看）</p></blockquote><blockquote><p>1.电脑关机了计划任务是否执行？答：不执行</p><p>==2.用户没有登录，计划任务是否执行？答：会执行==</p></blockquote><blockquote><p># ==w  （注：查看哪个用户从哪里登录）==</p><p><img src="https://image.cpen.top/image/202205032102651.jpg" alt="img"></p><p># ==tail  -f  /var/log/cron（注：日志文件）==</p></blockquote><blockquote><p>==3.黑客也会去利用计划任务定时执行程序，你如何去检查？==</p><p>​去==/var/spool/cron==目录下查看每一个计划任务文件</p><p>​看日志 ==/var/log/cron==</p><p>​crontd的顺风车目录（如下）</p><p>#</p><p># ==cd  /etc/cron*******==</p><p>cron.d/    ==cron.daily/==  cron.deny   ==cron.hourly/  cron.monthly/== crontab    ==cron.weekly/==</p><p># cd  /etc/cron</p><p>（注：crontab的顺风车）</p><p>==黑客也可以把需要执行的程序放到这些文件夹里==</p><p>==cron.daily  --》Linux系统里要求crond每天去执行的事情==</p><p>==cron.hourly  --》Linux系统里要求crond每小时去执行的事情==</p><p>==cron.monthly --》Linux系统里要求crond每月去执行的事情==</p><p>==cron.weekly  --》Linux系统里要求crond每周去执行的事情==</p><p>（注：# ls  cron.daily</p><p>​ logrotate(每天都会执行，crond每天运行一次（脚本，用sh执行）)</p><p>​# ls  cron.hourly</p><p>​0==anacron(annacron 将电脑主机因为系统故障关机导致计划任务没有被执行，正常启动后，anacron会去检测没有执行的计划任何，重新执行一次)==</p></blockquote><h3 id="at">at</h3><blockquote><p>at 命令 一次性的计划任务</p><p>yum  install at  -y</p><p># ==at 11:45==</p><p>warning: commands will be executed using /bin/sh</p><p>at&gt; touch $(date +%F).txt</p><p>at&gt; <EOT>==（注：退出 Ctrl+D）==</p><p>job 1 at Fri Sep 25 11:45:00 2020</p><p>Can’t open /var/run/atd.pid to signal atd. No atd running?</p><p># ==at -l（注：查看）==</p><p>1Fri Sep 25 11:45:00 2020 a root</p><p>#</p></blockquote><hr><h2 id="二-计划任务练习-备份脚本">二. 计划任务练习-备份脚本</h2><blockquote><p>主要内容：==chmod  777== /opt/fnum.txt  （注：==设置任何用户都可以对文件/opt/fnum.txt读写执行==）</p><p>==2&gt;/dev/null==</p><p>==/dev/null 特殊的文件，相当于黑洞文件，任何的内容重定向到这个文件都会消失，不保存==</p><p>==正确的输出重定向==</p><p>==&gt;==</p><p>==&gt;&gt;==</p><p>==错误的输出重定向==</p><p>==2&gt;==</p><p>==2&gt;&gt;  追加==</p><p>==不管正确的还是错误的都往一个文件里重定向==</p><p>==&amp;&gt;==</p><p>==&amp;&gt;&gt;  追加==</p><p>==&gt;1.txt  清空1.txt文件里的内容==</p><p>==删除xull这个用户所有的计划任务== rm  -rf  /var/spool/cron/xull</p><p>​==# crontab  -u xull -r （注 *）==</p><p>取消计划任务</p></blockquote><blockquote><p>脚本+计划任务=自动化</p><p>先编写脚本，再创建计划任务</p></blockquote><h3 id="计划任务实验">计划任务实验</h3><blockquote><p>计划任务实验：</p><p>1.为root用户编写计划任务：每周2、4、6的10点到17点的每隔5分钟自动将/etc/passwd、/etc/shadow这2个重要系统文件到user.备份的日期和时间.tar.gz这种名称的文件里（例如：user.201202011615.tar.gz）备份文件放到/opt/目录下面。</p><p>backup_shadow_pwd.sh</p><p># cat backup_shadow_pwd.sh</p><p>#!/bin/bash</p><p>mkdir -p  /opt#注：date +%Y%m%d%H%M%S ， ==date后面有空格==</p><p>tar czf  /opt/user.$(date +%Y%m%d%H%M%S).tar.gz  /etc/passwd  /etc/shadow</p><p>#$(date +%Y-%m-%d-%H)注意空格 上面的</p><p>==crontab  -e==</p><p>*/5  10-17  *  * 2,4,6  bash  /lianxi/9_25/backup_shadow_pwd.sh #==（注：路径要接对，绝对路径）==</p></blockquote><blockquote><p>2.==root用户==在/opt==新建==了一个文件fnum.txt专门用来统计普通用户的文件个数。请==为普通用户hello编写计划任务==：要求每5分钟，将系统中属于hello用户的文件的个数自动保存到/opt/fnum.txt文件中。内容格式为：“日期时间  姓名 拥有的文件个数是：数目”。每行中间用“*************************”隔开</p><p>file_num.sh</p><p># touch  /opt/fnum.txt  （注：==新建空文件，普通用户建不了，root用户去建==）</p><p># ==chmod  777== /opt/fnum.txt  （注：==设置任何用户都可以对文件/opt/fnum.txt读写执行==）</p><p>[cali@sanchuang-linux ~]$ crontab  -l</p><p>*/5 * * * *  date &gt;&gt;~/cali.txt</p><p>5 12-18 * * *  date &gt;&gt;~/cali.txt</p><p>*/1 * * * * bash /home/cali/file_num.sh</p><p>[cali@sanchuang-linux ~]$ pwd</p><p>/home/cali</p><p>$ cat file_num.sh ==（注：脚本放在普通用户家目录里）==</p><p>#!/bin/bash</p><p>fnum=$(find / -user cali  -type f  ==2&gt;/dev/null== |wc -l) ==（注：普通用户 文件权限不够 是出错的）==</p><p>（注↑：错误重对象）</p><p>ctime=$(date +%F_%H%M%S)</p><p>echo “${ctime}  cali  the number of files : $fnum”  ==&gt;&gt;/opt/fnum.txt （注：追加重定向 写到文件里去）==</p><p>echo “******************************” ==&gt;&gt;/opt/fnum.txt （注：追加重定向 写到文件里去）==</p><p>$</p><p>$ crontab  -e==（注：是哪个用户就哪个用户创建计划任务，==cali创建）</p><p>*/1 *  *  *  * bash /home/cali/file_num.sh</p><p>$ pwd</p><p>/home/cali==（注：脚本的路径）==</p></blockquote><blockquote><p>每行中间用“*************************”隔开 解决方法</p><p># cat <a href="http://a.sh">a.sh</a></p><p>echo “helllo”</p><p>echo “**********************”</p><p>echo “cali”</p><p>echo “**********************”</p><p>#</p><p># num=$(find / -user liangluyao |wc -l)</p></blockquote><blockquote><p>$ find / -user cali  -type f  2&gt;/dev/null|wc -l</p><p>==/dev/null 特殊的文件，相当于黑洞文件，任何的内容重定向到这个文件都会消失，不保存==</p><p>null 零，空，无效的</p></blockquote><h3 id="重定向">重定向</h3><blockquote><p>==正确的输出重定向==</p><p>==&gt;==</p><p>==&gt;&gt;==</p><p>======</p><p>==错误的输出重定向==</p><p>==2&gt;==</p><p>==2&gt;&gt;  追加==</p><p>======</p><p>==不管正确的还是错误的都往一个文件里重定向==</p><p>==&amp;&gt;==</p><p>==&amp;&gt;&gt;  追加==</p><p><img src="https://image.cpen.top/image/202205032115780.jpg" alt="img"></p><p>==ls 命令执行成功重定向到1.txt  执行失败重定向到2.txt==</p><p>$ ==ls &gt;1.txt  2&gt;2.txt==</p><p>$ ==&gt;1.txt  清空1.txt文件里的内容==</p><p>$ cat 1.txt</p><p>$</p><p>$ ls &amp;&gt;1.txt ==不管正确的还是错误的都往一个文件里重定向==</p></blockquote><h3 id="练习总结">练习总结</h3><blockquote><p>练习总结：</p><p>问题：</p><ol><li><p>2&gt;/dev/null</p></li><li><p>如何查看效果</p></li></ol><p># cat  fnum.txt</p><p># tail  -f  /var/log/cron  （日志文件）</p><ol start="3"><li>取消计划任务</li></ol><p>==删除xull这个用户所有的计划任务== rm  -rf  /var/spool/cron/xull</p><p>​==# crontab  -u xull -r （注 *）==</p><p>将文件里的计划任务注释或者删除 #*/1  *  *  *  *  bash  /home/xull/file_num.sh</p><p># cd  /var/spool/cron/ ——》# rm  -rf  xull  ==# crontab  -u xull -r==</p><p># cd  /var/spool/cron/ ——》# vim  xull ——》 加 # 注释掉</p><ol start="4"><li><p>某个用户的计划任务如何创建</p></li><li><p>文件的路径问题和权限问题（root可以访问任务地方的文件，但是普通不行，只能访问有限的路径）</p></li></ol><p>将root用户的所有计划任务追加到xull用户的计划任务里</p><p># cd  /var/spool/cron</p><p># cat  root  &gt;&gt;xull（注：注意权限问题，能否访问）</p><p>每一个用户的计划任务都存放在一个文件里  /var/spool/cron/</p></blockquote><blockquote><p>2.root用户在/opt2新建了一个文件fnum.txt专门用来统计普通用户的文件个数。请为普通用户xull编写计划任务：要求每5分钟，将==系统中属于xull用户的文件的个数==自动保存到/opt2/fnum.txt文件中。内容格式为：“日期时间  姓名 拥有的文件个数是：数目”。每行中间用“*************************”隔开</p><p>使用root用户新建/opt2目录</p><p>mkdir  /opt2</p><p>cd  /opt2/</p><p>touch  /opt2/fnum.txt 文件</p><p>chmod  777  /opt2/fnum.txt授权</p><p>==xull用户需要去编写脚本，创建计划任务（普通用户）==</p><p>==脚本：建议放在用户的家目录下==</p><p># su - xull</p><p>上一次登录：五 9月 25 15:53:35 CST 2020pts/1 上</p><p>$ pwd</p><p>==/home/xull==</p><p>$ ls</p><p>$ vim  file_num.sh （注：脚本放到自己的家目录下，用户xull去创建）</p><p>$ cat  file_num.sh</p><p>#!/bin/bash</p><p>num=$(find  / -user  xull  -type  f 2&gt;/dev/null |wc -l)</p><p>#current time （注：当前的时间）</p><p>ctime=$(date +%F%H%M%S)</p><p>echo  “<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi>c</mi><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi></mrow><mi>x</mi><mi>u</mi><mi>l</mi><mi>l</mi><mtext>文件数量是</mtext></mrow><annotation encoding="application/x-tex">{ctime}  xull  文件数量是</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="mord mathnormal">t</span><span class="mord mathnormal">im</span><span class="mord mathnormal">e</span></span><span class="mord mathnormal">xu</span><span class="mord mathnormal" style="margin-right:0.01968em;">ll</span><span class="mord cjk_fallback">文件数量是</span></span></span></span>num”  &gt;&gt;/opt2/fnum.txt（注：&gt;&gt;追加）</p><p>echo “****************************”  &gt;&gt;/opt2/fnum.txt（注：一行隔开）</p><p>$</p><p>（注：vim交互式的。脚本是背后执行的，用echo）</p><p>$ crontab -e</p><p>*/1  * * * *  bash /home/xull/file_num.sh</p><p>$</p><p>切换到root用户</p><p>$ exit</p><p># cd  /var/spool/cron/ （注：该目录下文件存放计划任务）</p><p># ls</p><p>cali  liangluyao  root  ==xull==</p><p>#cat  xull（注：文件存放计划任务）</p><p>==*/1  * * * *  bash /home/xull/file_num.sh==</p></blockquote><hr><h2 id="三-黑客-计划任务">三. 黑客-计划任务</h2><blockquote><p>主要内容：假如你是黑客，想在别人的机器上，每10分钟让它的服务器重启一次或者每天重启一次</p><p>关机命令：init 6</p><p>​reboot</p><p>==1.停止crond服务==</p><p># service crond stop</p><p>2.查找可能存放计划任务的目录</p><p>/var/spool/cron（注：先挪走）</p><p>/etc/cron.d （注：与cron.hourly 有关）</p><p>/etc/cron.weekly</p><p>/etc/cron.daily</p><p>/etc/cron.monthly</p><p>3.检查发现没有问题了，再重新启动crond服务</p><p># service crond start</p><p>Redirecting to /bin/systemctl start crond.service</p><p># ps aux|grep crond</p><p>实在有的话</p><p># tail  -f  /var/log/cron  （日志文件）</p><p>开机启动流程</p><p># cd  /root  （注：root用户家目录下）</p><p># ls  -a  （注：隐藏文件）</p><p># vim  .bashrc</p><p># vim  .bash_profile</p><p># vim  /etc/profile （注：可以快捷筛选查找 /reboot  /init）</p><p># vim  /etc/bashrc  （注：可以快捷筛选查找 /reboot  /init）</p><p># cat  /etc/rc.local</p></blockquote><blockquote><p>假如你是黑客，想在别人的机器上，每10分钟让它的服务器重启一次或者每天重启一次</p><p>====</p><p>192.168.0.45  root  123456</p><p>关机命令：init 6</p><p>​reboot</p><p>============================</p><p>在各个路径下看  有没有可疑的 init6  和  reboot</p><p>==1.停止crond服务==</p><p># service crond stop</p><p>2.查找可能存放计划任务的目录</p><p>/var/spool/cron（注：先挪走）</p><p>/etc/cron.d （注：与cron.hourly 有关）</p><p>/etc/cron.weekly</p><p>/etc/cron.daily</p><p>/etc/cron.monthly</p><p>3.检查发现没有问题了，再重新启动crond服务</p><p># service crond start</p><p>Redirecting to /bin/systemctl start crond.service</p><p># ps aux|grep crond</p><p>root     1506  3.6  0.1  36304  3656 ?     Ss  16:54  0:00 /usr/sbin/crond -n</p><p>root     1511  0.0  0.0  12320  1052 pts/0   S+  16:54  0:00 grep --color=auto crond</p><p>#</p><p>实在有的话</p><p># tail  -f  /var/log/cron  （日志文件）</p><p>（注：通过日志去排查）</p><p>=============================</p><p>集中放计划任务的地方 /var/spool/cron/</p><p># cd  /var/spool/cron/</p><p># ls</p><p>cali  liangluyao  root  xull</p><p># cat  cali</p><p>……（查看有没有可疑的，vim全部注释掉）</p><p>或者把所有文件全部挪走，如下操作</p><p># ls</p><p>cali  liangluyao  root  xull</p><p># mkdir  /backup  （注：根下面建一个/backup 目录）/backup 备份目录</p><p>mv  *  /backup/  （把文件cali  liangluyao  root  xull 挪到 /backup 目录下）</p><p>计划任务停了，crond不会执行</p><p># cd  /backup/</p><p># ls</p><p>cali  liangluyao  root  xull</p><p># cat  cali（注：把计划任务文件挪走后，再再/backup目录下 一个个排查）</p><p>……</p><p># cat  liangluyao</p><p>……</p><p># w（注：查看哪些用户登录）</p><p>=======================================</p><p>顺风车</p><p># cd  /etc/cron.daily</p><p>​# ls</p><p>​# vim …</p><p># cd  /etc/cron.hourly/</p><p># cd  /etc/cron.monthly</p><p># cd  /etc/cron.weekly</p><p># cd  /etc/cron.d （注：每小时执行是每小时的第一分钟执行）</p><p><img src="https://image.cpen.top/image/202205032124429.jpg" alt="img"></p><p>（注：run-parts 是一个命令，运行这个文件夹里的所有文件）</p><p>=======================================================</p><p>开机启动流程</p><p># cd  /root  （注：root用户家目录下）</p><p># ls  -a  （注：隐藏文件）</p><p># vim  .bashrc</p><p># vim  .bash_profile</p><p># vim  /etc/profile （注：可以快捷筛选查找 /reboot  /init）</p><p># vim  /etc/bashrc  （注：可以快捷筛选查找 /reboot  /init）</p><p># cat  /etc/rc.local</p><p>===============================================================================</p></blockquote><hr><h2 id="四-变量定义和使用">四. 变量定义和使用</h2><blockquote><p>主要内容：</p><p>​变量的命名：1.下划线命名法 （shell里建议）2.驼峰命名法3.匈牙利命名法</p><p>​变量命名的注意事项</p><p>​shell里如果变量没有定义，输出的是空值</p><p>​==env==  查看shell里的==环境变量==</p><p>​==set==  查看当前shell里==所有的变量==</p><p>​==export 输出变量为全局变量==</p><p>​# ==echo $$  （注：显示当前bash的进程号）（注：$$代表当前bash的进程号）==</p><p>​# ==bash（注：起一个子进程，子bash）==</p><p>​# ==echo “$mv  $sg hello”（注：输出一串内容的时候，用双引号引起来）==</p><p>​# ==echo ‘$mv  $sg hello’（注：单引号：所见即所得  $接变量名不会引用变量的值）==</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">shell编程</span><br><span class="line">1.变量的定义</span><br><span class="line">variable  变量的</span><br><span class="line"></span><br><span class="line">sg=tanglf</span><br><span class="line"></span><br><span class="line">变量的命名：</span><br><span class="line">1.下划线命名法 （shell里建议）</span><br><span class="line">sc_sg=tanglf</span><br><span class="line">2.驼峰命名法</span><br><span class="line">ScSg=wangtc</span><br><span class="line">小驼峰</span><br><span class="line">scSg=wangtc</span><br><span class="line">大驼峰</span><br><span class="line">ScSg=wangtc</span><br><span class="line">3.匈牙利命名法</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">变量命名的注意事项：</span><br><span class="line">1.不是以数字开头</span><br><span class="line">2.不要全部是数字</span><br><span class="line">3.不要包含特殊符号 #!@^$&lt;&gt;等</span><br><span class="line">4.=左右不能有空格</span><br></pre></td></tr></table></figure><blockquote><p>linux系统里的环境变量都是大写的</p><p>自定义变量尽量使用小写</p><p>变量尽量要先定义后使用</p><p>shell里如果变量没有定义，输出的是空值</p><p># sc_sg=zhangxueyou</p><p># echo  $sg_sg</p><p>​==（←注：变量sg_sg没有定义，输出的是空值）==</p><p># echo $sc_sg</p><p>zhangxueyou</p><p># ==echo <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mi>g</mi><mi>s</mi><mi>g</mi><mi mathvariant="normal">/</mi></mrow><annotation encoding="application/x-tex">sgsg/</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">s</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord">/</span></span></span></span>mvmv==</p><p>==/（←注：变量{sgsg} {mvmv}没有定义，输出的是“/”根）==</p><p>#</p><p># rm -rf  ==<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mi>g</mi><mi>s</mi><mi>g</mi><mi mathvariant="normal">/</mi></mrow><annotation encoding="application/x-tex">sgsg/</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">s</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord">/</span></span></span></span>mvmv==</p><p>rm: 在’/’ 进行递归操作十分危险</p><p>rm: 使用 --no-preserve-root 选项跳过安全模式</p><p>#</p></blockquote><blockquote><p>==env==  查看shell里的==环境变量==</p><p>==set==  查看当前shell里==所有的变量==</p><p>变量是有作用域</p><p>全局变量</p><p>局部变量</p><p>==export 输出变量为全局变量==</p><p>​==用法：先定义再输出==</p></blockquote><blockquote><p>ssh访问22号端口，sshd监听22号端口</p><p>web服务是80端口</p></blockquote><blockquote><p># ==echo $$  （注：显示当前bash的进程号）（注：$$代表当前bash的进程号）==</p><p>1425</p><p>#</p><p># ==export sg （注：输出sg这个变量为全局变量）==</p></blockquote><blockquote><p># echo $$</p><p>==1425==</p><p># mv=xull</p><p># ==bash（注：起一个子进程，子bash）==</p><p># echo $mv</p><p>​==（注：输出为空，变量不继承）==</p><p># echo $$</p><p>==1598==</p></blockquote><blockquote><p># mv=xull</p><p># ==export mv（注：输出变量为全局变量）（注：export 输出）==</p><p># ==bash（注：起一个子进程，子bash）==</p><p># echo $mv</p><p>Xull==（注：子进程继承了变量）==</p><p>#</p></blockquote><blockquote><p># vim  /root/.bash_profile</p><p><img src="https://image.cpen.top/image/202205032135309.jpg" alt="img"></p></blockquote><blockquote><p>==输出一串内容的时候，用双引号引起来==</p><p>==单引号：所见即所得  $接变量名不会引用变量的值==</p><p># echo ==“$mv  $sg hello”（注：输出一串内容的时候，用双引号引起来）==</p><p>xull  wangtc hello</p><p># echo ==‘$mv  $sg hello’（注：单引号：所见即所得  $接变量名不会引用变量的值）==</p><p>$mv  $sg hello</p><p>#</p></blockquote><hr>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Crontab </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>06_Linux基础-NGINX和浏览器、网页的关系-压缩命令-配置NGINX支持下载功能-备份脚本</title>
      <link href="/blog/posts/10149.html"/>
      <url>/blog/posts/10149.html</url>
      
        <content type="html"><![CDATA[<p>摘要：博客迁移 <a href="https://blog.csdn.net/cpen_web"><code>https://blog.csdn.net/cpen_web</code></a> → 本站<span id="more"></span></p><h1 id="06-Linux基础-NGINX和浏览器、网页的关系-云服务器ssh登陆-安装NGINX-上传网页-压缩命令-xz-gzip-bzip2-zip-tar-配置NGINX服务器支持下载功能-备份脚本">06_Linux基础-NGINX和浏览器、网页的关系-云服务器ssh登陆-安装NGINX-上传网页-压缩命令-xz-gzip-bzip2-zip-tar-配置NGINX服务器支持下载功能-备份脚本</h1><p><a href="https://blog.csdn.net/cpen_web">博客🔗：https://blog.csdn.net/cpen_web</a></p><hr><h2 id="一-NGINX和浏览器、网页的关系">一. NGINX和浏览器、网页的关系</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">nginx是一个web服务器</span><br><span class="line">html语言编写网页</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span>  /usr/local/nginx  html</span><br><span class="line"><span class="built_in">cd</span>  html/ （注：存放网页路径）</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">思考：</span><br><span class="line">1.网页和nginx的关系</span><br><span class="line">nginx将网页发送给浏览器</span><br><span class="line">2.浏览器和nginx的关系</span><br><span class="line">浏览器问nginx要网页</span><br><span class="line">nginx将网页发送给浏览器</span><br><span class="line">3.浏览器和网页的关系</span><br><span class="line">浏览器是能读懂网页的html，js，css代码，渲染出效果</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202204232005482.png" alt="image-20220423200516418"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">web:网站</span><br><span class="line">表单信息放到数据库里去，nginx只能访问静态页面，Python把信息传到数据库里。Python——》flask web后端——》user表</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">如何判断nginx是否运行？</span><br><span class="line">1.看进程</span><br><span class="line">ps aux|grep nginx</span><br><span class="line">2.看端口</span><br><span class="line">netstat -anplut</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">项目组：</span><br><span class="line">1.前端</span><br><span class="line">2.后端</span><br><span class="line">3.运维</span><br><span class="line">4.测试</span><br><span class="line">5.dba</span><br><span class="line">6.项目经理</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/nginx/html/放网页</span><br><span class="line">rz 只能传文件，不能传文件夹</span><br></pre></td></tr></table></figure><hr><h2 id="二-云服务器ssh登陆-安装NGINX-上传网页">二. 云服务器ssh登陆-安装NGINX-上传网页</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">自己的虚拟机的linux系统里呢？（如何上传自己的网页到linux系统呢）</span><br><span class="line">Xshell连过去</span><br><span class="line">自己的云服务器，如何上传自己的网页到云服务器呢？</span><br><span class="line">1.xshell  --》公网ip（云服务器的公网ip）106.54.83.86 （注：xshell连接）</span><br><span class="line"> 用户名root  --》密码是有个初始密码 （注：passwd 改密码）</span><br><span class="line">2.自己去编译安装nginx--》建议使用脚本安装--&gt;启动nignx</span><br><span class="line">3.上传自己的网页到nginx的html目录下 （注：scp或上传Windows【中间环节】）</span><br><span class="line">4.去访问106.54.83.86</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">（注）脚本：</span><br><span class="line"><span class="comment"># cat onekey_install_nginx_v2.sh </span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#1.下载nginx软件包</span></span><br><span class="line"><span class="built_in">mkdir</span> -p /nginx2</span><br><span class="line"><span class="built_in">cd</span> /nginx2</span><br><span class="line">curl  -O http://nginx.org/download/nginx-1.19.2.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment">#2.解压,进入文件夹</span></span><br><span class="line"></span><br><span class="line">tar xf  nginx-1.19.2.tar.gz</span><br><span class="line"><span class="built_in">cd</span>  nginx-1.19.2</span><br><span class="line"></span><br><span class="line"><span class="comment">#3.编译前的配置</span></span><br><span class="line"> <span class="comment">#新建用户sanchuang9</span></span><br><span class="line">useradd sanchuang9</span><br><span class="line"> <span class="comment">#安装gcc和pcre-devel软件包，因为nginx需要这些软件，解决软件的依赖关系</span></span><br><span class="line">yum install  gcc make   pcre-devel zlib-devel  -y</span><br><span class="line"> <span class="comment">#配置nginx，指定安装路径和启动nginx的用户名</span></span><br><span class="line">./configure  --prefix=/usr/local/nginx2  --user=sanchuang9 </span><br><span class="line"></span><br><span class="line"><span class="comment">#4.编译</span></span><br><span class="line">make</span><br><span class="line"><span class="comment">#5.编译安装</span></span><br><span class="line">make  install</span><br><span class="line"></span><br><span class="line"><span class="comment">#6.关闭防火墙服务和设置开机不要启动</span></span><br><span class="line"></span><br><span class="line">service firewalld  stop</span><br><span class="line">systemctl <span class="built_in">disable</span>  firewalld </span><br><span class="line"></span><br><span class="line"><span class="comment">#7.修改PATH变量，方便可以直接使用nginx</span></span><br><span class="line"><span class="built_in">echo</span>  <span class="string">&quot;PATH=<span class="variable">$PATH</span>:/usr/local/nginx2/sbin&quot;</span>  &gt;&gt;/root/.bashrc</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ip add 看的是私网IP</span><br><span class="line">scp  远程copy</span><br><span class="line">/usr/local/nginx/sbin/nginx 启动nginx</span><br><span class="line">ps aux|grep nginx 查看nginx进程</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">搞一个自己的网站</span><br><span class="line">1.购买一个云服务器--》阿里云或者腾讯云，华为云，亚马逊免费试用 --》学生版 10元/月</span><br><span class="line">2.购买域名  5元/年</span><br><span class="line">在哪里购买的云服务器，就在哪里买域名，方便备案</span><br><span class="line">3.备案</span><br><span class="line">如果不备案，不能正常的使用域名去访问</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /etc/centos-release 查看centos版本</span><br></pre></td></tr></table></figure><hr><h2 id="三-压缩命令-xz-gzip-bzip2-zip-tar-配置NGINX服务器支持下载功能">三. 压缩命令-xz-gzip-bzip2-zip-tar-配置NGINX服务器支持下载功能</h2><blockquote><p>主要内容：压缩命令-tar（重点） 对文件和文件夹进行压缩</p><p>​==tar  -czf   --&gt;.tar.gz==</p><p>​==tar  cjf    --&gt;.tar.bz2==</p><p>​==tar  cJf    --&gt;.tar.xz==</p><pre><code>  ==tar  tf   \*.tar.\*==</code></pre><p>​==tar  xf   *.tar.*==</p><p>​# tar xf  boot_log_passwd.tar.gz  ==-C== /zhanghuayou/</p><p>​压缩命令-xz-gzip-bzip2-zip：都只能对文件进行压缩</p><p>​zip --&gt;.zip</p><p>​gzip --&gt;.gz</p><p>​xz  —&gt;.xz</p><p>​bzip2 --&gt;.bz2</p><p>​zip  yum  install  zip unzip -y</p><p>​==zip chenpeng.txt.zip  chenpeng.txt==</p><p>​==unzip passwd.zip==</p><p>​gzip</p><p>​==gzip hosts==</p><p>​==gunzip hosts.gz==</p><p>​==zcat messages.gz==</p><p>​xz</p><p>​==xz hosts==</p><p>​==unxz  hosts.xz==</p><p>​==xzcat messages.xz==</p><p>​bzip2  yum  install  bzip2  -y</p><p>​==bzip2  passwd==</p><p>​==bunzip2  passwd.bz2==</p><p>​==bzcat  passwd.bz2==</p><p>​配置nginx服务器支持下载功能</p></blockquote><h3 id="压缩命令-xz-gzip-bzip2-zip-tar">压缩命令-xz-gzip-bzip2-zip-tar</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">为什么要打压缩包？</span><br><span class="line">备份的时候，能节约空间</span><br><span class="line">网络传送的时候，能节约时间</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">windows里有哪些解压缩软件？</span><br><span class="line">winrar</span><br><span class="line">7z</span><br><span class="line">好压</span><br><span class="line">快压</span><br><span class="line">Zip</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">windows里的.rar压缩文件传递到linux里，是否能打开</span><br><span class="line">sc.rar （注：rar解压不了，linux里没这个软件，需要安装才有）</span><br><span class="line">sc.zip  --&gt;linux默认支持</span><br><span class="line">windows能解压linux里的所有的压缩文件</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nginx-1.19.2.tar.gz  linux里的压缩文件</span><br><span class="line">压缩文件红色的，可执行文件绿色的</span><br></pre></td></tr></table></figure><h3 id="zip">zip</h3><blockquote><p>zip</p><p>zip只能对文件进行压缩，不能对文件夹进行压缩</p><p>​yum  install  zip unzip -y ==（注：zip需要安装）==</p><p>zip 打压缩包</p><p>unzip 解压的</p></blockquote><blockquote><p># ==zip chenpeng.txt.zip  chenpeng.txt== （注：==用法==）</p><p>​压缩后的文件    源文件</p><p>[root@sanchuang-linux lianxi]# zip passwd.zip  passwd</p><p>adding: passwd (deflated 61%)（注:deflated压缩，泄气）</p><p>ll  -h 看大小</p><p>passwd.zip</p><p># ==unzip passwd.zip  解压==</p><p>Archive:  passwd.zip</p><p>inflating: passwd</p><p># ls</p><p>passwd  passwd.zip</p><p>==zip的缺点：有源文件和新文件==</p></blockquote><h3 id="gzip">gzip</h3><blockquote><p>gzip</p><p>gzip可以直接在源文件上压缩，后缀名是.gz （注：与zip的区别，理解为zip的升级版）</p><p>​==（注：gzip不需要安装）==</p><p>hosts  passwd  passwd.zip</p></blockquote><blockquote><p># ==gzip hosts （用法）== gzip + 源文件</p><p># ls</p><p>hosts.gz  passwd  passwd.zip</p><p># ==gunzip hosts.gz （解压）==</p><p># ==zcat messages.gz  （查看压缩文件）==</p></blockquote><h3 id="xz">xz</h3><blockquote><p>xz==（注：xz不需要安装）==</p><p><a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.8.11.tar.xz">https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.8.11.tar.xz</a></p></blockquote><blockquote><p># ==xz hosts （用法）==</p><p># ls</p><p>hosts.xz  passwd  passwd.zip</p><p># ==unxz  hosts.xz （解压）==</p><p># ls</p><p>hosts  passwd  passwd.zip</p><p># ==xzcat messages.xz  （查看压缩文件）==</p><p>gz与xz 比较，xz效果好</p><p>推荐使用xz</p></blockquote><h3 id="bzip2">bzip2</h3><blockquote><p>bzip2==（注：bzip2需要安装）==</p><p>yum  install  bzip2  -y</p></blockquote><blockquote><p># ==bzip2  passwd（用法）==</p><p>passwd.bz2</p><p># ==bunzip2  passwd.bz2  （解压）==</p><p>passwd</p><p># ==bzcat  passwd.bz2  （查看压缩文件）==</p></blockquote><blockquote><p>zip --&gt;.zip</p><p>gzip --&gt;.gz</p><p>xz  —&gt;.xz</p><p>bzip2 --&gt;.bz2</p></blockquote><h3 id="tar">tar</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">tar  --&gt;兼并了gzip,xz,bzip2</span><br><span class="line"></span><br><span class="line">tarball  --&gt;使用tar命令打的压缩包--》归档文件--》压缩文件--》一个压缩包里可以包含很多的文件</span><br><span class="line"></span><br><span class="line">tar是可以对文件和文件夹进行压缩的</span><br><span class="line"></span><br><span class="line">Compressed TAR Archive    [compressed压缩的  archive归档]</span><br><span class="line"></span><br><span class="line">https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.8.11.tar.xz</span><br><span class="line">http://nginx.org/download/nginx-1.19.2.tar.gz</span><br><span class="line">mysql-8.0.21-linux-glibc2.12-i686.tar.xz</span><br><span class="line">https://mirrors.tuna.tsinghua.edu.cn/apache/httpd/httpd-2.4.46.tar.bz2</span><br></pre></td></tr></table></figure><h3 id="配置NGINX服务器支持下载功能">配置NGINX服务器支持下载功能</h3><blockquote><p>(autoindex auto 自动 index索引)</p><p># cd /usr/local/nginx/conf/==（注：配置目录）==</p><p>#</p><p># vim nginx.conf   ==（注2：修改配置文件）即加上autoindex on；这一行==</p><p>​    location / {</p><p>​      root  html;     （注4：指定nginx的存放网页的目录为html–》网页根目录）</p><p>​      index  index.html index.htm;  （注5：配置nginx服务器支持的首页为index.html  或者index.htm  index.html的优先级要高，没有index.html的时候，就会去查找index.htm）</p><p>​      ==autoindex on;      （注3：添加配置，让nginx支持显示文件夹里的内容）==</p><p>​    }</p><p># /usr/local/nginx/sbin/nginx  -s reload  重新加载nginx</p></blockquote><p><img src="https://image.cpen.top/image/202204232026925.png" alt="image-20220423202600884"></p><p><img src="https://image.cpen.top/image/202204232026825.png" alt="image-20220423202613795"></p><p>压缩包上传</p><hr><h2 id="四-tar命令">四. tar命令</h2><blockquote><p>tar命令</p><p>用途：制作归档文件、释放归档文件</p><p>格式：tar  [选项]…  归档文件名  源文件或目录</p><p>​       tar  [选项]…  归档文件名  [-C 目标目录]</p><p>常用命令选项</p><p>-c：创建 .tar 格式的包文件  create</p><p>-x：解开.tar格式的包文件  extract提取</p><p>-v：输出详细信息  verbose冗余的</p><p>-f：表示使用归档文件  file</p><p>-t：列表查看包内的文件  list</p><p>常用命令选项</p><p>-C：解包时进入指定的目标文件夹</p><p>==-z：调用gzip程序进行压缩或解压==</p><p>==-j：调用bzip2程序进行压缩或解==</p><p>==-J：调用xz程序进行压缩或解压==</p></blockquote><blockquote><p>=== ==（经典组合）==</p><p>==创建压缩包==</p><p>​==tar  -czf   --&gt;.tar.gz==</p><p>​==tar  cjf    --&gt;.tar.bz2==</p><p>​==tar  cJf    --&gt;.tar.xz==</p><p>==创建压缩包到指定的路径 使用绝对路径==</p><p># tar czf  /zhanghuayou/passwd.tar.gz  ==/etc/passwd==</p><p>tar: 从成员名中删除开头的“/”</p></blockquote><p><img src="https://image.cpen.top/image/202204232028186.png" alt="image-20220423202847149"></p><blockquote><p>==查看压缩包里的内容==</p><pre><code>  ==tar  tf   \*.tar.\*==</code></pre></blockquote><blockquote><p>==解压–》默认解压到当前目录==</p><p>​==tar  xf  *.tar.*==</p><p>​==-C 解压到指定的路径==</p><p># tar xf  boot_log_passwd.tar.gz  ==-C== /zhanghuayou/</p></blockquote><blockquote><p># mkdir tar</p><p># cd tar</p><p># ls</p><p># tar  czf  passwd.tar.gz  ==/etc/passwd==</p><p>==tar: 从成员名中删除开头的“/”==</p><p># ls</p><p>passwd.tar.gz</p><p># tar  tf passwd.tar.gz</p><p>==etc/passwd（注：/ 没有了）==</p><p>[root@sanchuang-linux tar]# ls</p><p>passwd.tar.gz</p><p># tar  xf passwd.tar.gz</p><p># ls</p><p>==etc== passwd.tar.gz==（注2：解压后是文件夹etc,没有“/”）==</p><p># cd etc/</p><p># ls</p><p>passwd</p><p>#</p></blockquote><blockquote><p>==给文件夹打压缩包==</p><p># tar  cJf  boot.tar.xz  /boot</p><p># tar czf  boot.tar.gz /boot</p><p># tar cjf  boot.tar.bz2 /boot</p><p># ==time tar czf  boot.tar.gz /boot （注：压缩命令前接 time 可以看时间）==</p><p>tar: 从成员名中删除开头的“/”</p><p>real0m8.467s</p><p>user0m6.851s</p><p>sys0m2.226s</p><p>#</p><p>==（注：↓接v可以看过程，信息输出。一般写脚本不接v）==</p><p># tar  czvf boot_log_passwd.tar.gz  /boot  /var/log  /etc/passwd ==（注：文件和目录）==</p><p># tar  czf boot_log_passwd.tar.gz  /boot  /var/log  /etc/passwd</p><p>tar: 从成员名中删除开头的“/”</p><p>tar: 从硬连接目标中删除开头的“/”</p><p>#</p><p>==后面打包的文件如果压缩文件的名字一样，会覆盖==</p></blockquote><hr><h2 id="五-压缩练习-备份脚本">五. 压缩练习-备份脚本</h2><blockquote><p>主要内容：</p><p>排错多个文件 exclude 排除 ==（难点）==</p><p># tar  ==–exclude===/boot/{grub2,efi,loader}  ==-czvf==  no_grub_boot.tar.gz  /boot</p><p># ==date +%Y%m%d%H%M%S==</p><p>20200924170954</p><p>当前的日期往后面推10天</p><p># ==date  -d  “10 days”==</p><p>如何得到命令的执行结果赋值给变量</p><p>==方法1：==</p><p>​ctime=$(date  +%F)</p><p>==方法2：反引号==</p><p>​ctime=`date  +%F`</p><p>命令的嵌套</p><p>==设置时间 -s==</p><p># ==date -s ‘2020-10-10’（注：调时间）==</p><p># date -s  ==‘2020-10-10 9:53:00’（注：指定小时分钟秒）==</p><p># ==cal  看日历==  calendar（日历）</p><p># ==cal  2020== 看2020年日历</p></blockquote><hr><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">压缩练习：</span><br><span class="line">1.在windows里使用winrar软件压缩2个文件，一个是.rar格式的文件，一个是.zip的文件，具体压缩那个文件，你自己定义</span><br><span class="line">2.将文件传输到linux系统的/lianxi目录下，尝试解压.zip的文件</span><br><span class="line"><span class="comment"># unzip</span></span><br><span class="line">3.复制/etc/passwd文件到/lianxi目录下，将/lianxi目录下的passwd文件压缩成passwd.xz</span><br><span class="line"><span class="comment"># cp /etc/passwd . # xz passwd </span></span><br><span class="line">4.复制/etc/ssh/sshd_config 文件到/lianxi目录下，然后进行压缩为sshd_config.gz</span><br><span class="line"><span class="comment"># cp /etc/ssh/sshd_config . # gzip sshd_config</span></span><br><span class="line">5.查看passwd.xz里的内容，查看sshd_config.gz里的内容</span><br><span class="line"><span class="comment"># xzcat passwd.xz # zcat sshd_config.gz</span></span><br><span class="line">6.新建文件夹/backup_sc，然后复制/lianxi下的passwd.xz和sshd_config.gz到/backup_sc目录里</span><br><span class="line">7.到/backup_sc目录里解压passwd.xz和sshd_config.gz文件</span><br><span class="line">8.将/lianxi下的sshd_config.gz传到windows系统里看是否可以解压？</span><br></pre></td></tr></table></figure><blockquote><p>练习8：</p><p>​1.创建一个目录在/lianxi下叫tar</p><p># mkdir /lianxi/tar</p><p>​2.进入tar目录，复制/etc/hosts文件和/etc/passwd到tar目录下</p><p># cd /lianxi/tar # cp /etc/hosts . # cp /etc/passwd .</p><p>​3.复制/boot目录到tar目录下</p><p># cp /boot . -r</p><p>​4.将当前目录下的boot目录打包放在/lianxi/tar目录下叫boot.tar.gz</p><p># tar czf boot.tar.gz boot</p><p>​5.查看boot.tar.gz文件里的内容</p><p># tar tf boot.tar.gz</p><p>​6.将hosts文件和passwd文件打包放到host_passwd.tar.bz2文件</p><p># tar cjf host_passwd.tar.bz2 hosts passwd</p><p>​7.查看host_passwd.tar.bz2文件里的内容</p><p># tar tf host_passwd.tar.bz2</p><p>​8.将/boot/目录和/etc/passwd、/var/log目录备份到/lianxi目录下叫boot_pw_log.tar.xz</p><p># tar cJf /lianxi/boot_pw_log.tar.xz /boot /etc/passwd /var/log</p><p>​9.新建/bak目录，然后将/lianxi目录下的boot_pw_log.tar.xz解压到/bak目录下</p><p># mkdir -p /bak # tar xf boot_pw_log.tar.xz -C /bak</p><p>​10.将/boot目录下的除grub2目录以外的所有文件都备份到/bak目录下叫no-grub.tar.gz</p><p>tar czvf --exclude  ==（难点）==</p><p># tar  ==–exclude=/boot/grub2  -czvf==  no_grub_boot.tar.gz  /boot</p><p>centos8里的 （注：==–exclude=/boot/grub2  -czvf  前后不能错，grub2不能接/，-czvf  -不能省略==）</p><p># tar  ==–exclude=/boot/grub2  -czvf==  no_grub_boot.tar.gz  /boot</p><p>centos7里的</p><p># tar czvf  no_grub2_boot.tar.gz  /boot  ==–exclude=/boot/grub2==</p><p>排错多个文件 exclude 排除 ==（难点）==</p><p># tar  ==–exclude===/boot/{grub2,efi,loader}  ==-czvf==  no_grub_boot.tar.gz  /boot</p><p>（注：目录结构 {} 表示多个）</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">练习：</span><br><span class="line"></span><br><span class="line">编写一个脚本实现备份/var/log目录下的所有文件到/bak目录下，要求文件名是包含当天日期，精确到秒，文件名例如：2013-6-6-2_30_20-log.tar.gz。同时要求删除/bak目录下七天前的备份文件，只保留最近7天的文件。</span><br></pre></td></tr></table></figure><blockquote><p>需求分析：</p><p>==年月日小时分钟秒==</p><p>==时间戳：年月日小时分钟秒==</p><p>​获得当前的日期  date</p><p>%Y   year==（注：年）==</p><p>%m   month (01…12)==（注：月）==</p><pre><code>  %M   minute (00..59)==（注：分钟）==</code></pre><p>%d   day of month (e.g., 01)==（注：日）==</p><p>%H   hour (00…23)==（注：小时）==</p><p>%S   second (00…60)==（注：秒）==</p><p>%F   full date; same as %Y-%m-%d==（注：年月日）==</p><p># ==date +%Y%m%d%H%M%S==</p><p>20200924170954</p><p># ==date +%Y-%m-%d%H%M%S==</p><p>2020-09-24171008</p><p># ==date +%Y-%m-%d_%H_%M_%S==</p><p>2020-09-24_17_10_31</p><p>#</p><p>当前的日期往后面推10天==（推迟时间）==</p><p># ==date  -d  “10 days”==</p><p>2020年 10月 04日 星期日 17:21:27 CST</p><p># ==date  -d  10days==</p><p>2020年 10月 04日 星期日 17:21:37 CST</p><p>#</p><p># ==date  -d  10hours==</p><p>2020年 09月 25日 星期五 03:22:13 CST</p><p>#</p></blockquote><blockquote><p>如何得到命令的执行结果赋值给变量</p><p>==方法1：$()（更好，因为可以嵌套）==</p><p>​ctime=$(date  +%F)</p><p>==方法2：反引号（不能嵌套）==</p><p>​ctime=`date  +%F`</p><p># ==ctime=$(date  +%F)==</p><p># echo $ctime</p><p>2020-09-24</p><p># ==sctime=`date +%F`==</p><p># echo $sctime</p><p>2020-09-24</p><p>#</p><p># ==touch $(date  +%F).txt==</p><p># sg=zhanghuayou</p><p># echo $sg</p><p>zhanghuayou</p><p># echo $sg1</p><p>​（注：该行输出为空）</p><p># echo ==${sg}==1</p><p>zhanghuayou==1==</p><p>#</p><p>删除/bak目录下七天前的备份文件</p><p>find  /bak  -type f  -mtime +7  -name  “*.tar.gz”  -exec rm  -rf  {}  ;</p><p>脚本名字：</p><p>​backup_log.sh</p></blockquote><blockquote><p>命令的嵌套</p><p># which mkdir</p><p>/usr/bin/mkdir</p><p># rpm -qf /usr/bin/mkdir</p><p>coreutils-8.30-6.el8_1.1.x86_64</p><p># softname===$(rpm -qf <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>w</mi><mi>h</mi><mi>i</mi><mi>c</mi><mi>h</mi><mi>m</mi><mi>k</mi><mi>d</mi><mi>i</mi><mi>r</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mtext>（注：</mtext></mrow><annotation encoding="application/x-tex">(which mkdir))（注：</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord mathnormal">hi</span><span class="mord mathnormal">c</span><span class="mord mathnormal" style="margin-right:0.03148em;">hmk</span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mclose">))</span><span class="mord cjk_fallback">（注：</span></span></span></span>() 好，可以嵌套）==</p><p># echo $softname</p><p>==coreutils-8.30-6.el8_1.1.x86_64==</p><p># softname2===`rpm -qf `which mkdir``==</p><p>==rpm：未给出要查询的参数==</p><p>==mkdir: 缺少操作数==</p><p>请尝试执行 “mkdir --help” 来获取更多信息。</p><p>#</p></blockquote><hr><blockquote><p>编写一个脚本实现==备份==/var/log目录下的所有文件到/bak目录下，要求文件名是包含当天日期，精确到秒，文件名例如：2013-6-6-2_30_20-log==.tar.gz==。同时要求删除/bak目录下七天前的备份文件，只保留最近7天的文件。</p><p>==通过文件名知道使用tar命令，而不是cp==</p></blockquote><blockquote><p># mkdir /lianxi/9_25</p><p># cd /lianxi/9_25</p><p># vim  backup_log.sh</p><p>#!/bin/bash</p><p>#获得当前的时间，精确到秒</p><p>ctime=$(date  +%Y%m%d%H%M%S)</p><p>#备份</p><p>mkdir  -p  /bak</p><p>tar  czf  /bak/${ctime}-log.tar.gz  /var/log</p><p>#删除7天前的==备份文件==，只保留最近的7天内的文件</p><p>find  /bak  -type  f  -mtime  +7  ==-name  “*log.tar.gz”== -exec  rm  -rf  {}  ;</p></blockquote><blockquote><p>怎么验证删除7天前的文件？</p><p>答：调时间</p><p>==设置时间 -s==</p><p># date</p><p>2020年 09月 25日 星期五 09:53:18 CST</p><p># ==date -s ‘2020-10-10’（注：调时间）==</p><p>2020年 10月 10日 星期六 00:00:00 CST</p><p>#</p><p># date -s  ==‘2020-10-10 9:53:00’（注：指定小时分钟秒）==</p><p>2020年 10月 10日 星期六 09:53:00 CST</p><p>#</p><p># date  -s ‘2020-9-25 9:55:00’</p><p>2020年 09月 25日 星期五 09:55:00 CST</p><p>#</p></blockquote><blockquote><p># ==cal  看日历==  calendar（日历）</p><p># ==cal  2020== 看2020年日历</p><p><img src="https://image.cpen.top/image/202204232047523.png" alt="image-20220423204712463"></p><p><img src="https://image.cpen.top/image/202204232047209.png" alt="image-20220423204723137"></p></blockquote><hr>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>05_Linux基础-NGINX编译安装^判断是否启动^修改端口^启动停止重启^相关路径^中文乱码</title>
      <link href="/blog/posts/43579.html"/>
      <url>/blog/posts/43579.html</url>
      
        <content type="html"><![CDATA[<p>摘要：博客迁移 <a href="https://blog.csdn.net/cpen_web"><code>https://blog.csdn.net/cpen_web</code></a> → 本站<span id="more"></span></p><h1 id="05-Linux基础-NGINX编译安装-判断是否启动-修改端口-启动停止重启-相关路径-中文乱码-Windows、Linux文件传输">05_Linux基础-NGINX编译安装^判断是否启动^修改端口^启动停止重启^相关路径^中文乱码-Windows、Linux文件传输</h1><p><a href="https://blog.csdn.net/cpen_web">博客🔗：https://blog.csdn.net/cpen_web</a></p><hr><h2 id="一-回顾">一. 回顾</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">//service  sshd  restart  刷新sshd服务</span><br><span class="line">        信息会写到/var/log/messages里，<span class="built_in">tail</span>  -f  /var/log/messages动态监控</span><br><span class="line">        /var/log/messages 记录日志</span><br><span class="line">//root用户有权限，可以更改普通用户密码，密码123也能成功</span><br><span class="line">一个安全的密码有：大小写、数字、特殊符号、足够的长度 Sanchuang123<span class="comment">#</span></span><br><span class="line">//1.显示ps aux查看进程命令输出信息，从第2行到9行，并且显示行号。</span><br><span class="line">        ps  aux|<span class="built_in">cat</span>  -n|<span class="built_in">head</span>  -9|<span class="built_in">tail</span>  -8</span><br><span class="line">        ps  aux|<span class="built_in">cat</span>  -n|sed  -n  ‘2,9p’</span><br><span class="line">        2.使用find命令查找出/find目录下大小大于1M并且名字里包含vmlinuz的文件</span><br><span class="line">        find  /find  -size  +1M  -iname  “*vmlinuz*”</span><br><span class="line">        find  /find  -size  +1M  -iname  “*vmlinuz*”  -<span class="built_in">exec</span>  <span class="built_in">ls</span>  -hl  &#123;&#125;  \;</span><br><span class="line">        （注1：<span class="built_in">ls</span>  -hl命令）</span><br><span class="line">查找出daydayup的文件然后删除它</span><br><span class="line">        find  /  -name  “daydayup”  -<span class="built_in">exec</span>  <span class="built_in">rm</span>  -rf  &#123;&#125;  \;</span><br><span class="line">        （注2：字符串用””引号引起来）</span><br><span class="line">        3.将最近3小时内/lianxi目录下文件大小大于10K的文件 移动到/back目录下</span><br><span class="line">        find /lianxi  -mmin -180 -size +10k -<span class="built_in">type</span> f -<span class="built_in">exec</span> <span class="built_in">mv</span>  &#123;&#125;  /back \;</span><br><span class="line">        4.查找/home目录下用户是root，文件类型是f，这2个条件必须满足，然后再满足大小大于2k或者文件名包含cali的文件中的一个条件，查找出来后，复制到/lianxi目录下。</span><br><span class="line">find /home  -user root  -<span class="built_in">type</span> f  \( -size +2k  -o  -name <span class="string">&quot;*cali*&quot;</span>  \)  -<span class="built_in">exec</span>  <span class="built_in">cp</span> &#123;&#125; /lianxi   \;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h2 id="二-NGINX">二. NGINX</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//nginx是一个web服务器软件，是使用c语言开发的软件，俄罗斯人开发</span><br><span class="line">        http://nginx.org/</span><br><span class="line">        nginx是开源免费的软件（增值的插件收费）</span><br><span class="line">        国内知名互联网公司都在使用nginx：</span><br><span class="line">淘宝，腾讯，百度，京东，小米，美团，字节跳动，金山云，37互娱等</span><br><span class="line">http://nginx.org/en/download.html</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203160925990.png" alt="image-20220316092524896"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">前端 —— web服务器 —— 后端数据库</span><br><span class="line">Html,css,js   nginx,python      mysql,redis</span><br></pre></td></tr></table></figure><h3 id="编译安装">编译安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">//一键安装脚本</span><br><span class="line">    [root@sanchuang-linux nginx]<span class="comment"># cat onekey_install_nginx.sh </span></span><br><span class="line">    <span class="comment">#!/bin/bash</span></span><br><span class="line">    <span class="comment">#↑声明脚本用bash去执行</span></span><br><span class="line">    <span class="comment">#1.下载nginx软件包</span></span><br><span class="line">    <span class="built_in">mkdir</span> -p /nginx2</span><br><span class="line">    <span class="built_in">cd</span> /nginx2</span><br><span class="line">    curl  -O http://nginx.org/download/nginx-1.19.2.tar.gz</span><br><span class="line"></span><br><span class="line">    <span class="comment">#2.解压,进入文件夹</span></span><br><span class="line">    tar xf  nginx-1.19.2.tar.gz</span><br><span class="line">    <span class="built_in">cd</span>  nginx-1.19.2</span><br><span class="line"></span><br><span class="line">    <span class="comment">#3.编译前的配置</span></span><br><span class="line">     <span class="comment">#新建用户sanchuang9</span></span><br><span class="line">    useradd sanchuang9</span><br><span class="line">     <span class="comment">#安装gcc和pcre-devel软件包，因为nginx需要这些软件，解决软件的依赖关系</span></span><br><span class="line">    yum install  gcc make   pcre-devel zlib-devel  -y</span><br><span class="line">     <span class="comment">#配置nginx，指定安装路径和启动nginx的用户名</span></span><br><span class="line">    ./configure  --prefix=/usr/local/nginx2  --user=sanchuang9 </span><br><span class="line"></span><br><span class="line">    <span class="comment">#4.编译</span></span><br><span class="line">    make</span><br><span class="line">    <span class="comment">#5.编译安装</span></span><br><span class="line">    make  install</span><br><span class="line"></span><br><span class="line">    <span class="comment">#6.关闭防火墙服务和设置开机不要启动</span></span><br><span class="line">    service firewalld  stop</span><br><span class="line">    systemctl <span class="built_in">disable</span>  firewalld </span><br><span class="line"></span><br><span class="line">    <span class="comment">#7.修改PATH变量，方便可以直接使用nginx</span></span><br><span class="line">    <span class="built_in">echo</span>  <span class="string">&quot;PATH=<span class="variable">$PATH</span>:/usr/local/nginx2/sbin&quot;</span>  &gt;&gt;/root/.bashrc</span><br></pre></td></tr></table></figure><h3 id="具体步骤">具体步骤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">具体步骤</span><br><span class="line">//nginx的安装部署</span><br><span class="line">    <span class="comment">#1.下载nginx软件包</span></span><br><span class="line">    <span class="built_in">mkdir</span> -p /nginx</span><br><span class="line">    <span class="built_in">cd</span> /nginx（注2：进入指定路径）</span><br><span class="line">    curl  -O http://nginx.org/download/nginx-1.19.2.tar.gz（注1:curl是linux下面的字符界面浏览器）</span><br><span class="line">    curl是字符界面的一个浏览器 （注3：-O就是下载到当前）</span><br><span class="line"></span><br><span class="line">    <span class="comment">#2.解压,进入文件夹（注3：#1完成后，nginx软件包下载完成，是一个红色的压缩包.tar.gz）</span></span><br><span class="line">    tar xf  nginx-1.19.2.tar.gz（注1：解压后得到一个文件夹，深蓝色。.tar.gz是linux的压缩格式）</span><br><span class="line">    <span class="built_in">cd</span>  nginx-1.19.2（注2：进入这个得到的目录下）</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">详细操作</span><br><span class="line">//cd  nginx-1.19.2</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203160927086.png" alt="image-20220316092724052"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> configure配置</span><br><span class="line"><span class="comment"># ./configure  --help（注1：告诉我们可以配置什么东西）</span></span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203160927097.png" alt="image-20220316092758056"></p><p><img src="https://image.cpen.top/image/202203160928420.png" alt="image-20220316092811368"></p><blockquote><p>​==–prefix=PATH指定安装路径==</p><p>​--sbin-path=PATH指定二进制程序路径</p><p>​--error-log-path=PATH指定错误日志路径</p><p>​--pid-path=PATH指定pid路径</p><p>​==–user=USER 指定启动nginx的用户==</p><p>​==–group=GROUP指定启动nginx的组==</p></blockquote><p><img src="https://image.cpen.top/image/202203160928130.png" alt="image-20220316092838065"></p><blockquote><p>​--with开启某样功能</p><p>​--without  禁用某样功能</p></blockquote><blockquote><p>详细操作</p><p>​新建用户sanchuang（自动建一个同名的组）</p><p><img src="https://image.cpen.top/image/202203160930690.png" alt="image-20220316093032655"></p><p>​# ./configure  --prefix=/usr/local/nginx  --user=sanchuang</p><p>​（注1：配置nginx，指定安装路径和启动nginx的用户名）（下一步）</p></blockquote><blockquote><p>详细操作</p><p>​解决依赖关系</p><p><img src="https://image.cpen.top/image/202203160931910.png" alt="image-20220316093112870"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//没有PCRE这个库</span><br><span class="line">yum install  gcc  pcre-devel  -y （devel开发包）</span><br><span class="line">//装好后，继续配置</span><br><span class="line"><span class="comment"># ./configure  --prefix=/usr/local/nginx  --user=sanchuang</span></span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203160931499.png" alt="image-20220316093145472"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//没有zlib这个库</span><br><span class="line">    yum install  zlib-devel  -y</span><br><span class="line">    （注1：开发库一般会提供很多的接口、很多的包、函数给我们）</span><br><span class="line">//装好后继续</span><br><span class="line"><span class="comment"># ./configure  --prefix=/usr/local/nginx  --user=sanchuang</span></span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203160932904.png" alt="image-20220316093213881"></p><p>​生成makefile文件（配置单）后面根据这个文件编译</p><p>​指定路径↓↓</p><p><img src="https://image.cpen.top/image/202203160932599.png" alt="image-20220316093233539"></p><p>​编译前的配置完成，如下</p></blockquote><blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 3.编译前的配置</span></span><br><span class="line"><span class="comment"># 新建用户sanchuang</span></span><br><span class="line">useradd sanchuang</span><br><span class="line"><span class="comment"># 安装gcc和pcre-devel软件包，因为nginx需要这些软件，解决软件的依赖关系</span></span><br><span class="line">yum install  gcc make   pcre-devel zlib-devel  -y</span><br><span class="line"><span class="comment"># 配置nginx，指定安装路径和启动nginx的用户名</span></span><br><span class="line">./configure  --prefix=/usr/local/nginx  --user=sanchuang </span><br></pre></td></tr></table></figure></blockquote><blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 4.编译（注1：源码 编译成 二进制代码）</span></span><br><span class="line">make</span><br><span class="line">yum  install  make  -y</span><br><span class="line"><span class="comment"># 5.编译安装（注2：本质上是cp，编译好的二进制程序是放在当前目录下）</span></span><br><span class="line">make  install（注2：make install 就是把当前下面的东西拷贝到/usr/local/niginx/下指定路径下去）</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203160934530.png" alt="image-20220316093449432"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 进入/usr/local/nginx/目录（安装完成后）</span><br><span class="line"><span class="comment"># cd /usr/local/nginx/</span></span><br><span class="line"><span class="comment"># ls</span></span><br><span class="line">conf  html  logs  sbin</span><br><span class="line"></span><br><span class="line">conf是存放nginx的配置文件</span><br><span class="line">html是存放网页的目录</span><br><span class="line">logs 是存放日志文件的目录</span><br><span class="line">sbin 是存放可执行程序，也就是nginx的启动程序</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//运行nginx程序</span><br><span class="line"> <span class="comment"># cd sbin/</span></span><br><span class="line"> <span class="comment"># ls</span></span><br><span class="line"> nginx</span><br><span class="line"> <span class="comment"># ./nginx  运行nginx程序</span></span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203160935178.png" alt="image-20220316093531137"></p><p>​//接下来判断nginx是否启动</p></blockquote><h3 id="判断服务是否启动">判断服务是否启动</h3><blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">判断一个服务是否启动的方法：</span><br><span class="line">//1.看是否有相关的进程</span><br><span class="line"><span class="comment"># ps aux|grep nginx</span></span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203160936274.png" alt="image-20220316093633235"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">有两个进程，主进程和工作进程（注1：有这两个进程，说明nginx程序起来了）</span><br><span class="line">2.看是否有进程占用的端口号</span><br><span class="line"> <span class="comment"># yum install  lsof   net-tools  -y（注2：用来看端口号的软件”）</span></span><br><span class="line"> <span class="comment"># lsof -i:80  只是看80端口被那个进程占用了（注3：两个命令都可以看端口号开没开）</span></span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203160937120.png" alt="image-20220316093704075"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># netstat -anplut  查看本机上所有的开放的端口（注3：两个命令都可以看端口号开没开）</span></span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203160937067.png" alt="image-20220316093727014"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">（注4：0.0.0.0表示本机上所有的ip地址，：80表示所有ip地址上的80端口）</span><br><span class="line">（注5：端口号在：80体现）</span><br><span class="line">开启了防火墙，所以Windows上的浏览器访问不过去</span><br><span class="line"><span class="comment"># service firewalld stop  关闭防火墙服务</span></span><br><span class="line"><span class="comment"># systemctl  disable firewalld  设置防火墙服务开机不要启动</span></span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203160937982.png" alt="image-20220316093750934"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如下↓↓</span><br></pre></td></tr></table></figure></blockquote><blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#6.关闭防火墙服务和设置开机不要启动</span></span><br><span class="line"> service firewalld  stop</span><br><span class="line"> systemctl <span class="built_in">disable</span>  firewalld </span><br></pre></td></tr></table></figure></blockquote><blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">详细操作</span><br><span class="line">刚在启动nginx 是在/usr/local/nginx/sbin目录下启动的 ./nginx</span><br><span class="line">怎么样让我们在任何地方敲nginx它都能找到</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203160938411.png" alt="image-20220316093851369"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">做法：修改PATH变量</span><br><span class="line">如下</span><br></pre></td></tr></table></figure></blockquote><blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#7.修改PATH变量，方便可以直接使用nginx</span></span><br><span class="line"><span class="built_in">echo</span>  <span class="string">&quot;PATH=<span class="variable">$PATH</span>:/usr/local/nginx/sbin&quot;</span>  &gt;&gt;/root/.bashrc</span><br><span class="line">（注1：<span class="built_in">echo</span> 在屏幕上输出，&gt;&gt;输出重对象，追加进去，把它写到/root/.bashrc里）</span><br><span class="line">（注2：写脚本特别喜欢用重对象）</span><br></pre></td></tr></table></figure></blockquote><blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">编译安装的步骤：3部曲</span><br><span class="line">1.  编译前的配置  --》  生成配置单 （Makefile）</span><br><span class="line">./configure  --prefix=/usr/local/nginx  --user=sanchuang</span><br><span class="line">2.  编译   --》根据配置单制作</span><br><span class="line">make</span><br><span class="line">3.  编译安装  --》将编译好的程序安装</span><br><span class="line">make install</span><br></pre></td></tr></table></figure></blockquote><blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">改首页</span><br><span class="line"> <span class="comment"># cd  /usr/local/nginx/html/</span></span><br><span class="line"> <span class="comment"># ls</span></span><br><span class="line"> 50x.html  index.html</span><br><span class="line"> <span class="comment"># vim index.html   编辑下首页文件</span></span><br><span class="line"> （注1：index.html  首页：打开网站看到的第一个页面 --》首先看到的页面）</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203160940865.png" alt="image-20220316094005835"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim 编辑器的复制和粘贴</span><br><span class="line">yy 是复制当前行（注2：按下ESC后）</span><br><span class="line">p 粘贴到下一行</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203160940638.png" alt="image-20220316094037604"></p><p><img src="https://image.cpen.top/image/202203160940080.png" alt="image-20220316094046045"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//vim  chenpeng.html</span><br><span class="line"><span class="built_in">ls</span></span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203160941813.png" alt="image-20220316094112773"></p><p><img src="https://image.cpen.top/image/202203160941822.png" alt="image-20220316094121790"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">（注3：这里建的html叫什么名字，外面接的时候就要/接它）</span><br><span class="line">（注4：默认情况下首页都叫index.html  nginx里的规定）</span><br></pre></td></tr></table></figure></blockquote><h3 id="回顾">回顾</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">web服务器：网站方面的应用 web server</span><br><span class="line">提供网站服务</span><br><span class="line"></span><br><span class="line">server  服务器</span><br><span class="line">client   客户机</span><br><span class="line">broswer 浏览器</span><br><span class="line">http访问的端口是80</span><br><span class="line">https访问的端口是443</span><br><span class="line">nginx可以监听两个端口（80、443）（要记）</span><br><span class="line">https传输的内容经过加密，更加安全（注1：很多电商网站和银行网上支付都是https）</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203160942822.png" alt="image-20220316094226777"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//安装两个nginx不冲突，路径不同就行。同时启动不能占用相同的端口</span><br><span class="line">    nginx卸载，直接把这个目录删掉 rm  -rf</span><br><span class="line"></span><br><span class="line">    脚本的意义：提前设置好的程序，按照程序去走</span><br><span class="line">      下到指定目录的路径</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203160942770.png" alt="image-20220316094252721"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//80端口被占用，新建的nginx启动不了</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203160943828.png" alt="image-20220316094307770"></p><h3 id="修改-8080-端口">修改 8080 端口</h3><blockquote><p>//配置新的nginx使用8080端口 （注2：vim nginx.conf  80 /usr/local/nginx2/conf）</p><p>​（注3：改端口号，改了配置文件一定要重启reload）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pwd</span></span><br><span class="line">/usr/local/nginx2/conf</span><br><span class="line"><span class="comment"># ls</span></span><br><span class="line">fastcgi.conf          fastcgi_params.default  mime.types          nginx.conf.default   uwsgi_params</span><br><span class="line">fastcgi.conf.default  koi-utf                 mime.types.default  scgi_params          uwsgi_params.default</span><br><span class="line">fastcgi_params        koi-win                 nginx.conf          scgi_params.default  win-utf</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># vim nginx.conf</span></span><br><span class="line">       listen       8080;   修改端口号80为8080（注1：找到这一行，修改8080）</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203160945122.png" alt="image-20220316094529087"></p><p>//启动nginx的路径 /usr/local/nginx/sbin/nginx</p><p>//netstat  -anplut 查看端口号</p><p>​有两个nginx，一个nginx监听8080端口，一个nginx监听80端口</p><p><img src="https://image.cpen.top/image/202203160945730.png" alt="image-20220316094556682"></p><p>​两个nginx不冲突，多个nginx可以共存</p><p>//访问</p><p>​192.168.0.45</p><p>​192.168.0.45:8080</p><p>​可以 1个机器里面跑了2个网站</p></blockquote><h3 id="启动-停止-重启-NGINX">启动/停止/重启 NGINX</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//启动nginx</span><br><span class="line">        <span class="comment"># /usr/local/nginx/sbin/nginx</span></span><br><span class="line">        <span class="comment"># /usr/local/nginx2/sbin/nginx</span></span><br><span class="line">停止nginx</span><br><span class="line">        <span class="comment"># /usr/local/nginx/sbin/nginx  -s stop</span></span><br><span class="line">        <span class="comment"># /usr/local/nginx2/sbin/nginx  -s stop</span></span><br><span class="line">重启(重新加载)（注1：修改了配置文件一定要reload重启）</span><br><span class="line">    <span class="comment"># /usr/local/nginx2/sbin/nginx -s reload</span></span><br><span class="line">    （注1：修改了配置文件一定要reload重启，不然不会生效）</span><br></pre></td></tr></table></figure><h3 id="相关路径">相关路径</h3><p><img src="https://image.cpen.top/image/202203160948321.png" alt="image-20220316094810280"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//conf 放配置文件</span><br><span class="line">修改nginx监听的端口号  conf/nginx.conf</span><br><span class="line">修改nginx首页index.html内容 html/index.html</span><br><span class="line">启动nginx/usr/local/nginx/sbin/nginx</span><br><span class="line">重启nginx/usr/local/nginx/sbin/nginx  -s  reload（注1：前提条件nginx启动了）</span><br></pre></td></tr></table></figure><h3 id="编写自己的网页">编写自己的网页</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">//编写一个自己的网页 sc.html</span><br><span class="line">里面需要有文字，图片，链接</span><br><span class="line"></span><br><span class="line">        /usr/local/nginx2/html （注1：存放网页的地方）</span><br><span class="line">        <span class="comment"># vim  sc.html</span></span><br><span class="line">        &lt;html&gt; （注4：html语言 有头有尾）</span><br><span class="line">            &lt;<span class="built_in">head</span>&gt; （注2：头部）</span><br><span class="line">                &lt;title&gt;welcome to sanchuang&lt;/title&gt; （注3：标题）</span><br><span class="line">            &lt;/head&gt;</span><br><span class="line">            &lt;body&gt; （注5：body部分就是一段一段的话）</span><br><span class="line">                &lt;p&gt;my name is chenpeng&lt;/p&gt; （注6：p段落标记，表示一段）</span><br><span class="line">                &lt;p&gt;my phone number is 18874991147&lt;/p&gt;</span><br><span class="line">                &lt;p&gt;&lt;h1&gt;chenpeng  linux&lt;/h1&gt; （注7：h1字体加粗）</span><br><span class="line">                &lt;p&gt;&lt;a href=<span class="string">&quot;https://www.qq.com&quot;</span>&gt;qq.com&lt;/a&gt;&lt;/p&gt;</span><br><span class="line">                &lt;p&gt;&lt;a href=<span class="string">&quot;https://www.taobao.com&quot;</span>&gt;taobao.com&lt;/a&gt;&lt;/p&gt;</span><br><span class="line">                &lt;p&gt;&lt;a href=<span class="string">&quot;https://www.jd.com&quot;</span>&gt;jd.com&lt;/a&gt;&lt;/p&gt; （注10：链接 a标签  href）</span><br><span class="line">                &lt;img src=<span class="string">&quot;linghuchong.jpg&quot;</span>&gt;（注12：图片img  src，图片放在sc.html同一文件夹下）</span><br><span class="line">                &lt;p&gt;&lt;a href=<span class="string">&quot;index.html&quot;</span>&gt;index.html&lt;/a&gt;（注13：链接到首页）</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            &lt;/body&gt;</span><br><span class="line">        &lt;/html&gt;</span><br><span class="line">    （注8：ESC  :w 只保存，不退出）</span><br><span class="line">    （注9：访问 192.168.0.45:8080/sc.html）</span><br><span class="line">    （注11：首页（样例）/usr/local/nginx/html/index.html）</span><br><span class="line">    修改网页不需要重新启动nginx服务,只要刷新浏览器就可以了</span><br><span class="line">    只有修改了nginx的配置文件，才需要重新启动nginx服务  nginx -s reload</span><br><span class="line">//这是在8080端口，放到80端口操作↓↓</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203160951912.png" alt="image-20220316095132879"></p><h3 id="vim-基本使用">vim 基本使用</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//vim的基本使用</span><br><span class="line">        1.按i 进入输入模式</span><br><span class="line">        2.按ESC返回到命令模式</span><br><span class="line">            yy  复制当前行</span><br><span class="line">            2yy 复制两行  nyy复制多行</span><br><span class="line">            p   粘贴（往下粘贴)</span><br><span class="line">            u   撤销</span><br><span class="line">            <span class="built_in">dd</span>  删除当前行</span><br><span class="line">            2dd 删除两行  ndd删除多行</span><br></pre></td></tr></table></figure><h3 id="中文乱码">中文乱码</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//解决访问时中文乱码问题</span><br><span class="line">    &lt;<span class="built_in">head</span>&gt;</span><br><span class="line">    &lt;meta  charset=”utf8”&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    （注1：可以在Windows sublime软件写*.html文件 上传到linux  /usr/local/nginx/hml 里）</span><br></pre></td></tr></table></figure><hr><h2 id="三-Windows、Linux-文件传输">三. Windows、Linux 文件传输</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//Windows、linux文件传输</span><br><span class="line">    解决文件传输的问题</span><br><span class="line">    1.rz 和sz</span><br><span class="line">        <span class="comment"># yum  install lrzsz  -y</span></span><br><span class="line">        <span class="comment"># rz    从windows里上传文件到linux里  receive （注3：传到你当前路径 z是模式）</span></span><br><span class="line">        <span class="comment"># sz abcd.txt   从linux里发送文件abcd.txt到windows里  send  （注4:z是模式）</span></span><br><span class="line">2.xftp传输</span><br><span class="line">需要安装xftp（注1：左右边直接拖过来）</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203160950271.png" alt="image-20220316095002232"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">（yum  provides  rz  注2：查询rz命令是哪个软件包提供的）</span><br></pre></td></tr></table></figure><hr>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>04_Linux基础-.&amp;..-cat-tac-重定向-EOF-基本命令</title>
      <link href="/blog/posts/62964.html"/>
      <url>/blog/posts/62964.html</url>
      
        <content type="html"><![CDATA[<p>摘要：博客迁移 <a href="https://blog.csdn.net/cpen_web"><code>https://blog.csdn.net/cpen_web</code></a> → 本站<span id="more"></span></p><h1 id="04-Linux基础-…-cat-tac-EOF-Shell-more-ps-less-head-tail-sed-grep-which-whereis-PATH-bash-usr-locate-find">04_Linux基础-.&amp;…-cat-tac-&gt;&amp;&gt;&gt;-EOF-Shell-more-ps-less-head-tail-sed-grep-which-whereis-PATH-bash-/usr-locate-find</h1><p><a href="https://blog.csdn.net/cpen_web">博客🔗：https://blog.csdn.net/cpen_web</a></p><hr><h2 id="一-回顾">一. 回顾</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">回顾</span><br><span class="line">//将/home/目录下的所有文件和文件夹复制到/jindafu目录下</span><br><span class="line"><span class="built_in">cp</span>  /home/*  .  -r</span><br><span class="line"><span class="comment">#注：复制文件夹 接-r递归复制(因为提到了文件夹)</span></span><br><span class="line"><span class="comment">#注：所有通配符*</span></span><br><span class="line">//复制/etc/hosts文件到jindafu,不给予覆盖提醒</span><br><span class="line">用<span class="built_in">cp</span>的绝对路径</span><br><span class="line"><span class="built_in">which</span>  <span class="built_in">cp</span>得到<span class="built_in">cp</span>的路径</span><br><span class="line">/usr/bin/cp  /etc/hosts  .</span><br><span class="line"><span class="comment">#注：不给予提醒 输入cp命令的绝对路径因为cp命令是别名 所有会有提醒</span></span><br><span class="line">//将xiena目录改名为xienana</span><br><span class="line"><span class="built_in">mv</span>  xiena/  xienana</span><br><span class="line">//将singer目录下的所有文件复制到hejiong目录下</span><br><span class="line"><span class="built_in">cp</span>  haiquan/singer/*  hejiong/</span><br><span class="line"><span class="comment">#注：所有通配符*</span></span><br><span class="line"><span class="comment">#注：复制文件不接-r</span></span><br><span class="line">//删除所有的xienana目录</span><br><span class="line">find命令 或 tree查看xienana在哪  <span class="built_in">rm</span>  -rf  路径</span><br><span class="line">find  /hunantv/  -name  “xienana”  -<span class="built_in">exec</span>  <span class="built_in">rm</span>  -rf  &#123;&#125; \;</span><br><span class="line">//查看目录结构 tree  查看类型 file</span><br><span class="line">//<span class="built_in">echo</span>  <span class="variable">$PS1</span>  <span class="variable">$PS2</span> 怎么看PS1 PS2</span><br><span class="line">//hostname  查看主机名</span><br><span class="line">//<span class="built_in">echo</span>  <span class="variable">$SHELL</span>  查看默认shell  （是bash）</span><br><span class="line">//<span class="built_in">cat</span>  /ect/shells  查看机器里有哪些shell</span><br><span class="line">sh  bash  <span class="built_in">exit</span></span><br><span class="line"><span class="comment">#/etc存放配置文件</span></span><br><span class="line">//d  目录</span><br><span class="line">-  普通文件</span><br><span class="line">l  链接文件</span><br><span class="line">c  字符设备文件（显示）</span><br><span class="line">b  块设备文件 （磁盘）</span><br><span class="line">//reboot  重启机器</span><br><span class="line">//clear  清屏</span><br><span class="line">//别名 <span class="built_in">alias</span> , <span class="built_in">unalias</span> , vim  /root/.bashrc</span><br><span class="line">//<span class="built_in">env</span>  环境变量  <span class="built_in">set</span>  所有变量</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h2 id="二-…-删不掉">二. . … 删不掉</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//rm  -rf  不会删除隐藏文件</span><br><span class="line">rm  -rf  .lixh  删除隐藏文件</span><br><span class="line">.和..删不掉</span><br></pre></td></tr></table></figure><hr><h2 id="三-cat">三. cat</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//<span class="built_in">ls</span>  查看文件夹里的内容</span><br><span class="line">        <span class="built_in">cat</span> 1.查看文件里的内容</span><br><span class="line">        2.可以将多个文件连接到一起输出</span><br><span class="line">        -n, --number  给输出的行进行编号</span><br><span class="line">        用处2： <span class="built_in">cat</span>  tangliangfei.txt  wangtc.txt （连接功能）</span><br><span class="line">        先将tangliangfei.txt内容输出，再将wangtc.txt内容输出</span><br></pre></td></tr></table></figure><h3 id="tac-与-cat">tac 与 cat</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//tac 逆序显示，从最后一行到第一行</span><br><span class="line">不能接-n</span><br><span class="line">cat 正序显示，从第一行到最后一行 (有-n选项)</span><br></pre></td></tr></table></figure><hr><h2 id="四-重定向">四. 重定向</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//&gt;  输出重定向，会覆盖原来的内容，如果文件不存在会自动新建</span><br><span class="line">重定向：就是将在屏幕上输出的内容，改变输出的方向，输出到文件里</span><br><span class="line">&gt;&gt;  追加输出重定向，不会覆盖原来的内容，只是在末尾追加，如果文件不存在会自动新建</span><br><span class="line">&gt;会覆盖原来的内容，&gt;&gt;不覆盖，末尾追加</span><br><span class="line"><span class="comment"># cat  tangliangfei.txt  wangtc.txt  &gt;tang_wang.txt</span></span><br><span class="line"><span class="comment"># echo 123456789  &gt;&gt;tang_wang.txt </span></span><br><span class="line">（学会<span class="built_in">cat</span>与&gt;、&gt;&gt;的组合）</span><br></pre></td></tr></table></figure><hr><h2 id="五-here-document">五. here document</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//生成指定内容的文件 --》here document  --》主要用在写脚本生成指定的内容</span><br><span class="line">//  &lt;&lt;EOF 定义的结束字符串</span><br><span class="line">当输入EOF的时候，结束  end of file </span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cat   &gt;chenpeng.txt  &lt;&lt;EOF  （注1：后面不一定非得EOF，但要起的有意义）</span></span><br><span class="line">&gt; chen peng（注2:1个&gt;符号，原来内容会被覆盖）</span><br><span class="line">&gt; jiangsu</span><br><span class="line">&gt; xinhua</span><br><span class="line">&gt; nongda</span><br><span class="line">&gt; linux</span><br><span class="line">&gt; cali</span><br><span class="line">&gt; EOF （注3：点回车）</span><br><span class="line"></span><br><span class="line"><span class="comment"># cat &gt;&gt;cali.txt &lt;&lt;end（注1：2个&gt;符号，内容追加，不覆盖）</span></span><br><span class="line">&gt; sanchuang</span><br><span class="line">&gt; nongda</span><br><span class="line">&gt; changsha</span><br></pre></td></tr></table></figure><hr><h2 id="六-Shell-脚本">六. Shell 脚本</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//shell脚本： 其实是一个文件，文件里面有很多的linux命令，这个文件可以执行，被执行的时候，会执行文件里的所有的命令</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># vim  first_shell.sh</span></span><br><span class="line"><span class="comment">#!/bin/bash（注1：声明这个脚本使用的解释器是bash）</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">mkdir</span>  -p  /test（注2：存在不报错，不存在就新建）</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> /test</span><br><span class="line"></span><br><span class="line"><span class="built_in">mkdir</span> sc&#123;1..100&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">touch</span> pengyf&#123;1..100&#125;.txt</span><br><span class="line"></span><br><span class="line"><span class="built_in">cp</span> /etc/hosts  /test</span><br><span class="line"></span><br><span class="line"><span class="built_in">cat</span> &gt;sanchuang.txt  &lt;&lt;<span class="string">EOF（注3：回车后直接打，文本文件里没有提示符&gt;）</span></span><br><span class="line"><span class="string">sanchuang   hunan  changsha  furongqu hunannongda</span></span><br><span class="line"><span class="string">feng de yong</span></span><br><span class="line"><span class="string">linux</span></span><br><span class="line"><span class="string">EOF</span>（注4：结束）</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;####################################&quot;</span></span><br><span class="line"><span class="built_in">cat</span>  -n  sanchuang.txt </span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;####################################&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">脚本写好了↑↑↑</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># bash  first_shell.sh   执行脚本（注：内容如下）</span></span><br><span class="line"><span class="comment">####################################</span></span><br><span class="line">     1sanchuang   hunan  changsha  furongqu hunannongda</span><br><span class="line">     2feng de yong</span><br><span class="line">     3linux</span><br><span class="line"><span class="comment">####################################</span></span><br><span class="line">//脚本在执行的时候，是从第1条命令，自上而下执行，如果中间有命令执行失败，后面的命令还是会执行的（Python中间出错，没有异常捕获的话，不再执行）</span><br></pre></td></tr></table></figure><hr><h2 id="七-more">七. more</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// more命令  分页显示 （注1：没有-n选项，cat有-n选项）</span><br><span class="line">用途：全屏方式分页显示文件内容</span><br><span class="line">交互操作方法：</span><br><span class="line">     按Enter键向下逐行滚动</span><br><span class="line">     按空格键向下翻一屏、按b键向上翻一屏   back</span><br><span class="line">     按q键退出 （注2：显示完自动退出，与less的差别）</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># more  messages </span></span><br></pre></td></tr></table></figure><hr><h2 id="八-ps-aux">八. ps aux</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//<span class="comment"># ps aux  查看linux当前运行的进程的信息--》任务管理器（ps  -aux也可以）</span></span><br><span class="line">        <span class="comment"># ps -aux|more</span></span><br><span class="line">        <span class="comment"># cat messages |more 和 more messages 一样</span></span><br><span class="line">        <span class="comment"># cat -n messages |more 显示行号</span></span><br></pre></td></tr></table></figure><hr><h2 id="九-less">九. less</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// less命令</span><br><span class="line">用途：与more命令相同，但扩展功能更多</span><br><span class="line">交互操作方法：</span><br><span class="line"> 与more命令基本类似，但个别操作会有些出入</span><br><span class="line">【page down】【page up】上翻下翻页（注1：more不支持）</span><br><span class="line">显示完不退出，按q退出 （注2：与more的差别）</span><br><span class="line">（注3：也支持空格、b、Enter，凡是more支持的less都支持）</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># less messages </span></span><br><span class="line"><span class="comment"># cat messages |less</span></span><br></pre></td></tr></table></figure><hr><h2 id="十-head">十. head</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// head命令（注1：默认取前10行，连续的几行）</span><br><span class="line">        用途：查看文件开头的一部分内容（默认为10行）</span><br><span class="line">        格式：head -n number 文件名</span><br><span class="line">        格式：head -数字  文件名</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span>  -n  passwd  |<span class="built_in">head</span>  显示前10行，有编号</span><br><span class="line"><span class="built_in">head</span>  passwd  显示前10行，没有编号</span><br><span class="line"><span class="built_in">head</span>  -5  passwd  显示前5行（没编号）</span><br><span class="line"><span class="built_in">head</span>  -n  5  passwd  显示前5行（没编号，与上一条命令效果一样）</span><br></pre></td></tr></table></figure><hr><h2 id="十一-tail">十一. tail</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// tail命令</span><br><span class="line">        用途：查看文件结尾的少部分内容（默认为10行）</span><br><span class="line">        格式：tail  -n  number 文件名</span><br><span class="line">        格式：tail  -数字   文件名</span><br><span class="line">           tail  -f  文件名  = tailf# 注：tailf不知道怎么用</span><br><span class="line">#注：tail  -f 动态的监控文件末尾的变化</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tail</span>  passwd  取末尾10行（无编号）</span><br><span class="line"><span class="built_in">cat</span>  -n  passwd  |<span class="built_in">tail</span>  取末尾10行（有编号）</span><br><span class="line"><span class="built_in">cat</span>  -n  passwd  |<span class="built_in">tail</span>  -5  取末尾5行（有编号）</span><br><span class="line"><span class="built_in">cat</span>  -n  passwd  |<span class="built_in">tail</span>  -1  最后1行（有编号）</span><br><span class="line"><span class="built_in">cat</span>  -n  passwd  |<span class="built_in">tail</span>  -n  3  取末尾3行（有编号）</span><br><span class="line"></span><br><span class="line"><span class="built_in">tail</span>  -n  2  passwd  显示最后2行</span><br><span class="line"><span class="built_in">tail</span>  -n  -2  passwd  与上条效果一样</span><br><span class="line"><span class="built_in">tail</span>  -n  +2  passwd  显示从第2行到末尾  （注1：用处：统计有多少行的时候，不想显示首行，统计磁盘挂载的时候不想看到标题这一行）</span><br><span class="line">    （注2：<span class="built_in">df</span>  -Th 显示linux里的磁盘分区的使用情况）</span><br><span class="line">    <span class="built_in">df</span>  -Th|<span class="built_in">tail</span>  -n  +2  统计磁盘挂载不显示标题行</span><br><span class="line">    <span class="built_in">df</span>  -Th|<span class="built_in">tail</span>  -n  +2|<span class="built_in">wc</span>  -l  统计行数</span><br><span class="line"></span><br><span class="line"><span class="comment"># tail -f feng.txt   动态的监控文件末尾的变化</span></span><br><span class="line">（注4：经常用来查看日志文件的变化，根据日志的记录去排错）</span><br><span class="line">（注2：重新打开窗口连过去，右边修改文件内容，左边动态监控文件末尾的变化，一有新的内容就显示）（注3：Ctrl+C 强行终止）</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tail  -f 扩展 </span><br><span class="line">特别适合看某些日志文件</span><br><span class="line">        /var  存放动态变化的文件  variable  变量，变化的，可变的</span><br><span class="line">        log  日志：是程序记录它发生的事情</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cd  /var/log（注1：/var/log 存放大量日志文件）</span></span><br><span class="line"><span class="comment"># tail  -f  secure   查看secure日志文件 （注2：secure 安全）</span></span><br><span class="line">（注3：别的窗口做操作，日志文件末尾动态更新）</span><br></pre></td></tr></table></figure><hr><h2 id="十二-sed">十二. sed</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">    1.取出passwd的第3行</span><br><span class="line">    <span class="comment"># cat -n /etc/passwd|head -3|tail -1 （注1：先取前3行，再取最后1行，用|管道）</span></span><br><span class="line">    <span class="comment"># cat  /etc/passwd|head -3|tail -1 （注2：与上面命令比，没有编号3）</span></span><br><span class="line">2.取出passwd文件的第5行到10行</span><br><span class="line"><span class="comment">#注：这种 先看末尾 用head 因为行数是从前到后计算的</span></span><br><span class="line">    <span class="comment"># cat -n /etc/passwd|head |tail -6 （注3：先head取默认前10行，再取后六行）</span></span><br><span class="line">   （注4：从第5行到10行，<span class="built_in">tail</span>  -6，不是-5）</span><br><span class="line"><span class="comment"># cat -n messages |head -200|tail -101  （100到200行）</span></span><br><span class="line">3.取出第3行，第5行，第10行</span><br><span class="line"><span class="comment"># sed  -n  &#x27;1p;3p;5p&#x27;  passwd （注5：-n是选项，符合要求的选项显示出来，不是显示行号的意思）</span></span><br><span class="line"></span><br><span class="line">练习3扩展</span><br><span class="line">// sed</span><br><span class="line">-n 作用：只是显示符合要求的行（注9：不符合要求的行不显示）</span><br><span class="line">            1p;3p;5p</span><br><span class="line">            1p 显示第1行  p 是<span class="built_in">print</span>命令</span><br><span class="line">; 命令连接符号</span><br><span class="line">        <span class="comment"># cat  -n  passwd  |sed  -n  ‘1p;3p;5p’ （注6：显示1、3、5行，有编号）</span></span><br><span class="line">        <span class="comment"># sed  -n  &#x27;1p;3p;5p&#x27;  passwd （注7：没有编号）</span></span><br><span class="line">      （注10：用双引号””也可以）</span><br><span class="line">        <span class="comment"># cat -n passwd |sed -n  &#x27;3p;5p;10p&#x27;  显示不连续的3,5,10行的内容(这样写显示行号)</span></span><br><span class="line">        <span class="comment"># cat -n passwd |sed -n  &#x27;3,10p&#x27; 显示第3行到第10行的内容，中间是连续的</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># cat -n passwd |sed  &#x27;3,10p&#x27;（注8：sed后不接-n的话，会显示所有的行[包括不符合要求的行]，只不过3到10行输出两遍，所有一定要接-n）</span></span><br><span class="line"></span><br><span class="line">总结：sed  1.显示连续的  2.显示不连续的</span><br></pre></td></tr></table></figure><hr><h2 id="十三-grep">十三. grep</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//grep 文本过滤 （过滤的是文件，不是文件夹目录）</span><br><span class="line">        grep  “root”  /etc/passwd 包含root的行</span><br><span class="line">        grep  “^liang”  /etc/passwd 以liang开头的行</span><br><span class="line">        grep  “bash$”  /etc/passwd 以bash结尾的行</span><br><span class="line">        Ctrl + c 终止</span><br><span class="line">//文本处理三剑客 sed  grep  awk</span><br></pre></td></tr></table></figure><hr><h2 id="十四-which">十四. which</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">which</span>  查找可执行文件并显示所在的位置</span><br><span class="line">搜索范围由PATH环境变量指定</span><br><span class="line">    <span class="comment"># which  mkdir</span></span><br><span class="line">    /usr/bin/mkdir</span><br><span class="line">    <span class="comment"># cd /usr/bin/</span></span><br><span class="line">    <span class="comment"># ll mkdir</span></span><br><span class="line">    -rwxr-xr-x. 1 root root 195192 4月  10 02:53 <span class="built_in">mkdir</span></span><br><span class="line"></span><br><span class="line">    rwxr-xr-x 权限</span><br><span class="line">    r  读  <span class="built_in">read</span>   --》<span class="built_in">cat</span>  vim</span><br><span class="line">    w  写  write  --》 vim   &gt;&gt;</span><br><span class="line">    x  执行 execute   ---》运行</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ll first_shell.sh</span></span><br><span class="line">    -rw-r--r--. 1 root root…… （注1：脚本无可执行权限）</span><br><span class="line">    <span class="comment"># bash  first_shell.sh  （注2：用bash去执行它）</span></span><br><span class="line">    <span class="comment"># chmod  +x  first_shell.sh  （注3：给它可执行权限）</span></span><br><span class="line">    -rwxr-xr-x.  root root……  （注4：有可执行权限了）</span><br><span class="line">    <span class="comment"># ./first_shell.sh  （注5：直接执行，直接在当前终端执行，当前bash执行）</span></span><br><span class="line">    <span class="comment"># /lianxi/first_shell.sh  （注6：接绝对路径，接文件，直接执行）</span></span><br><span class="line">    <span class="comment"># chmod  -x  first_shell.sh  （注7：取消可执行权限）</span></span><br><span class="line">    <span class="comment"># /lianxi/first_shell.sh </span></span><br><span class="line">    -bash: /lianxi/first_shell.sh: 权限不够  （取消可执行权限后不能直接执行）</span><br></pre></td></tr></table></figure><h3 id="whereis">whereis</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//whereis 查找命令放到哪里（注1：跟<span class="built_in">which</span>很像）（注2：没什么用，man手册在哪里不是很重要）</span><br><span class="line"><span class="comment"># whereis  mkdir</span></span><br><span class="line"><span class="built_in">mkdir</span>:  /usr/bin/mkdir  /usr/share/man/man1/mkdir.1.gz</span><br><span class="line">（注2：压缩文件，是它的文档）</span><br><span class="line">        1.查看命令安放路径</span><br><span class="line">        2.该命令man手册的路径（man的时候看的内容的存放路径）</span><br><span class="line">//whereis和<span class="built_in">which</span>的区别</span><br><span class="line">        Which不显示man手册的路径，whereis显示man手册的路径</span><br><span class="line">        <span class="comment"># whereis  mkdir</span></span><br><span class="line">        <span class="built_in">mkdir</span>:  /usr/bin/mkdir  /usr/share/man/man1/mkdir.1.gz</span><br><span class="line">        <span class="comment"># which  mkidr</span></span><br><span class="line">        /usr/bin/mkdir</span><br><span class="line">//whereis和<span class="built_in">which</span> 都是到PATH变量里去找的 （共同点）</span><br></pre></td></tr></table></figure><hr><h2 id="十五-PATH">十五. PATH</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//PATH是路径</span><br><span class="line"><span class="built_in">which</span>命令在查找命令的时候，会到PATH变量指定的路径下查找</span><br><span class="line"><span class="comment"># which fengdeyong</span></span><br><span class="line">/usr/bin/which: no fengdeyong <span class="keyword">in</span> (/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin)</span><br><span class="line">(备注1：红色为路径  备注2：多个文件夹用：冒号隔开)</span><br><span class="line"><span class="comment"># echo $PATH  （注3：$PATH 引用PATH变量）</span></span><br><span class="line">/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin</span><br><span class="line">查找的顺序是从左往右找，如果在第1个里面找到了，就不会往后面找，以此类推</span><br></pre></td></tr></table></figure><h3 id="深入理解-PATH-变量的作用">深入理解 PATH 变量的作用</h3><blockquote><p>1.编写一个schello.c的文件</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># vim schello.c （注1：编写脚本如下）</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;hello,world\n&quot;</span>); （注<span class="number">2</span>：\n 换行）</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;i am cali\n&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta"># file schello.c </span></span><br><span class="line">schello.c: C source, ASCII text （注<span class="number">3</span>：C语言文件，文本文件，机器不能识别）</span><br></pre></td></tr></table></figure><p>2.编译成二进制程序文件</p><p>gcc 是linux里的一个编译器，将c源码文件编译成二进制文件</p><p><img src="https://image.cpen.top/image/202203131403345.png" alt="image-20220313140253260"></p><p>gcc 是linux里的一个编译器，将c源码文件编译成二进制文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yum  install  gcc -y</span></span><br><span class="line"><span class="comment"># gcc  -o  schello  schello.c  （注1：-o  输出一个二进制文件）（注2：编译schello.c的命令）</span></span><br><span class="line"><span class="comment"># ls（↑↑注3：schello产生的文件，schello原来文件）</span></span><br><span class="line">schello  schello.c （注2：生成绿色可执行权限的文件 schello）</span><br><span class="line"><span class="comment"># ll</span></span><br><span class="line">总用量 20</span><br><span class="line">-rwxr-xr-x. 1 root root 12744 9月  18 15:12 schello</span><br><span class="line">-rw-r--r--. 1 root root    93 9月  18 15:08 schello.c</span><br><span class="line"><span class="comment"># ./schello        （注4：./ 运行）</span></span><br><span class="line"><span class="comment"># /lianxi/sc/schello  （注5：绝对路径运行，./相对路径或绝对路径都可以运行）</span></span><br><span class="line"><span class="comment"># schello 不能运行 （注6：linux不知道schello放在哪里，它只会到PATH变量里去找）</span></span><br><span class="line">-bash: schello:未找到命令 （注7：PATH变量没有当前所在路径，没有/lianxi/sc）</span><br><span class="line">（解决如下）</span><br></pre></td></tr></table></figure></blockquote><h3 id="要让-Linux-系统知道我们的命令在哪里？">要让 Linux 系统知道我们的命令在哪里？</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">1.适应PATH变量，将我们的命令复制到PATH变量已有的路径下</span><br><span class="line"><span class="comment"># echo $PATH</span></span><br><span class="line">/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin</span><br><span class="line"><span class="comment"># cp  schello  /usr/local/bin/</span></span><br><span class="line"><span class="comment"># schello （注1：成功运行）</span></span><br><span class="line">hello,world</span><br><span class="line">i am cali</span><br><span class="line"><span class="comment"># which schello</span></span><br><span class="line">/usr/local/bin/schello （注2：复制到PATH变量的路径下后bash可以找到schello）</span><br><span class="line">2.修改PATH变量，添加我们自己的命令所在的路径</span><br><span class="line">①临时修改PATH变量</span><br><span class="line"><span class="comment"># PATH=/lianxi/sc:$PATH   临时修改PATH变量</span></span><br><span class="line">（注3：先引用PATH变量的值，在和/lianxi/sc:字符串拼凑在一起再赋值给PATH变量）</span><br><span class="line">（注3：<span class="variable">$PATH</span>——》/lianxi/sc:+<span class="variable">$PATH</span>重新组合——》赋值PATH变量  从右到左）</span><br><span class="line"><span class="comment"># echo $PATH</span></span><br><span class="line">/lianxi/sc:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin</span><br><span class="line">（注4：新的PATH变量，前面多了/lianxi/sc:）</span><br><span class="line">[root@sanchuang-linux sc]<span class="comment"># which schello（注5：which 可以找到）</span></span><br><span class="line">/lianxi/sc/schello</span><br><span class="line"><span class="comment"># schello （注6：bash可以运行）</span></span><br><span class="line">hello,world</span><br><span class="line">i am cali</span><br><span class="line">②永久有效</span><br><span class="line">修改文件，添加PATH变量，让它永久生效</span><br><span class="line"><span class="comment"># vim  /root/.bashrc  </span></span><br><span class="line">.bashrc这个文件是linux系统开机启动或者用户登录都会运行这个文件里的命令，所以才会永久有效</span><br><span class="line">PATH=/lianxi/sc:<span class="variable">$PATH</span> （注1:打进去，放到最后一行）</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//<span class="built_in">mkdir</span> 用C写的</span><br><span class="line"></span><br><span class="line">//<span class="comment"># yum  install  python3  -y   安装python3软件</span></span><br><span class="line">        <span class="comment"># python3 （注1：进入Python3解释器）</span></span><br><span class="line">        &gt;&gt;&gt; a = 10 （注2：提示符&gt;&gt;&gt;）</span><br><span class="line">        &gt;&gt;&gt; b = 20 （注4：Python不需要编译，Python代码直接运行，用Python解释器去解释）</span><br><span class="line">        &gt;&gt;&gt; sg = <span class="string">&quot;tangliangfei&quot;</span></span><br><span class="line">        &gt;&gt;&gt; c = a  + b</span><br><span class="line">        &gt;&gt;&gt; c</span><br><span class="line">        30</span><br><span class="line">        &gt;&gt;&gt; <span class="built_in">print</span>(sg) （注3：输出）</span><br><span class="line">        tangliangfei</span><br><span class="line">        &gt;&gt;&gt; <span class="built_in">exit</span>() （注5：<span class="built_in">exit</span>()退出出 <span class="built_in">exit</span>()是<span class="built_in">exit</span>函数）</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">//扩展</span><br><span class="line">.py结尾的文件，是python程序文件</span><br><span class="line">.sh结尾，shell脚本</span><br><span class="line">.c结尾，c语言</span><br><span class="line"><span class="comment"># vim  sc_py_hello.py</span></span><br><span class="line"><span class="comment">#!/usr/bin/python3 （注1：which python3——》/usr/bin/python3）</span></span><br><span class="line">   （注2：申明脚本是Python脚本，里面的命令用Python3解释器去解释）</span><br><span class="line">username = input(<span class="string">&quot;please input your name:&quot;</span>)（注3：引号里面只是提示符，提示输什么）</span><br><span class="line">   （注4：input()函数会接收你输入的东西，赋值给username）</span><br><span class="line">age = input(<span class="string">&quot;please input your age:&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(f<span class="string">&quot;your name is &#123;username&#125; ,your age is &#123;age&#125;&quot;</span>)（注5：<span class="built_in">print</span>(f ) 语法）</span><br><span class="line">   （注6：&#123;username&#125;&#123;age&#125; 引用变量的值）</span><br><span class="line"></span><br><span class="line"><span class="comment"># ls</span></span><br><span class="line">schello  schello.c  sc_py_hello.py</span><br><span class="line"><span class="comment"># python3  sc_py_hello.py （注7：直接执行Python3，类似于bash  a.sh）</span></span><br><span class="line">please input your name:cali</span><br><span class="line">please input your age:18</span><br><span class="line">your name is cali ,your age is 18</span><br><span class="line">[root@sanchuang-linux sc]<span class="comment"># cat sc_py_hello.py </span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># /lianxi/sc/sc_py_hello.py （注1：不能直接运行，如下 权限不够，pwd查看路径）</span></span><br><span class="line">-bash: /lianxi/sc/sc_py_hello.py: 权限不够</span><br><span class="line"><span class="comment"># chmod +x sc_py_hello.py （注2：给它可执行权限）</span></span><br><span class="line"><span class="comment"># /lianxi/sc/sc_py_hello.py （注3：可以直接执行了）</span></span><br><span class="line">please input your name:wangtc</span><br><span class="line">please input your age:18</span><br><span class="line">your name is wangtc ,your age is 18</span><br><span class="line"></span><br><span class="line">//怎样让sc_py_hello.py 在PATH变量里运行</span><br><span class="line">    <span class="comment"># which  sc_py_hello.py （注1：能运行，因为之前在PATH变量里已经添加这个路径了(/lianxi/sc)）</span></span><br><span class="line">    <span class="comment"># sc_py_hello.py （注2：能运行，因为之前在PATH变量里已经添加这个路径了(/lianxi/sc)）</span></span><br><span class="line">    <span class="comment"># echo  $PATH</span></span><br><span class="line">    /lianxi/sc:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"> 总结：跟是用什么语言写的关系不大</span><br><span class="line">1.把它放到PATH变量所在的路径里面，并2.给它可执行权限 就能直接运行</span><br><span class="line">   <span class="comment"># chmod  -x  sc_py_hello.py （注3：取消可执行权限）</span></span><br><span class="line">   <span class="comment"># sc_py_hello.py  （注4：不给它可执行权限，路径放在PATH变量所在的路径下，也不能直接执行）</span></span><br><span class="line">-bash:  /lianxi/sc/sc_py_hello.py： 权限不够</span><br><span class="line"> 总结：写的Python程序，一定要1.给它可执行权限，并2.把它放到PATH变量所在路径下面，不然不能执行</span><br><span class="line">   //扩展  （注2:总结:文件名字很长，想敲个短一点的命令，考虑用别名 [快捷键]）</span><br><span class="line">   <span class="comment"># alias sc_py_hello=sc_py_hello.py   定义别名，可以缩短命令的长度</span></span><br><span class="line">   <span class="comment"># sc_py_hello（注1：不想输这么长，可以使用别名，别名可以用来偷懒）</span></span><br><span class="line">   please input your name:feng （运行成功，条件是在PATH变量路径下和可执行权限，如上面的操作）</span><br><span class="line">   please input your age:19</span><br><span class="line">   your name is feng ,your age is 19</span><br><span class="line">   <span class="comment"># which sc_py_hello</span></span><br><span class="line">   <span class="built_in">alias</span> sc_py_hello=<span class="string">&#x27;sc_py_hello.py&#x27;</span></span><br><span class="line">/lianxi/sc/sc_py_hello.py</span><br></pre></td></tr></table></figure><hr><h2 id="十六-bash">十六. bash</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//bash 是linux非常好的shell解析器 （注1：2件事要做）</span><br><span class="line">1.查找命令 --》PATH变量的路径下</span><br><span class="line">2.告诉内核去启动命令（运行这个命令）</span><br></pre></td></tr></table></figure><hr><h2 id="十七-usr">十七. /usr</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// /usr  存放linux程序的目录   unix  system  resource </span><br><span class="line">    /usr/bin  存放二进制程序，所有的用户都可以使用  binary</span><br><span class="line">    /usr/sbin   存放二进制程序，有比较高的权限（root）的用户执行的程序  super user binary</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># which  useradd（注1：查找useradd命令路径）</span></span><br><span class="line">/usr/sbin/useradd （注2：存放在sbin目录下）</span><br><span class="line"><span class="comment"># su  -  xulilin （注3：切换为普通用户）</span></span><br><span class="line">$ <span class="built_in">which</span>  useradd</span><br><span class="line">$ /usr/sbin/useradd</span><br><span class="line">$ useradd  xu123 （注4：普通用户不能执行sbin/下高级别命令）</span><br><span class="line">……报错useradd:Permission denied （注5：权限被拒绝）</span><br></pre></td></tr></table></figure><hr><h2 id="十八-locate">十八. locate</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//locate 知识点（注4：需要安装）（注5经常需要更新<span class="comment"># updatedb）</span></span><br><span class="line"><span class="comment"># yum provides locate -y  查询locate是哪个软件包提供的（注1：新知识点）</span></span><br><span class="line">mlocate-0.26-20.el8.x86_64 : An utility <span class="keyword">for</span> finding files by name</span><br><span class="line">（注3：yum  provides …… -y 查询某命令是哪个软件包提供的）</span><br><span class="line">（注2：从结果知道 mlocate提供locate命令）</span><br><span class="line"><span class="comment"># yum install  mlocate -y 安装mlocate软件</span></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">locate命令</span><br><span class="line">格式：locate 文件名</span><br><span class="line">（注5：locate是到自己的数据库查找的，能具体到/下面，且必须更新自己的数据库）</span><br><span class="line">根据每天更新的数据库(/var/lib/mlocate)查找，速度块</span><br><span class="line">/var/lib/mlocate/mlocate.db</span><br><span class="line">database  数据库（注6：db的解释）</span><br><span class="line">数据库里的内容还是根据/目录下的内容生成</span><br><span class="line">每天会自动更新数据库/var/lib/mlocate/mlocate.db</span><br><span class="line">手动更新数据库updatedb</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># updatedb   生成和更新数据库mlocate.db （注1：手动更新）</span></span><br><span class="line"><span class="comment"># cd /var/lib/mlocate/</span></span><br><span class="line"><span class="comment"># ls</span></span><br><span class="line">mlocate.db</span><br><span class="line"><span class="comment"># locate mkdir（注2：将linux系统里面文件名里面包含了mkdir的文件全部找出来）</span></span><br><span class="line">/usr/bin/mkdir</span><br><span class="line">/usr/lib/python3.6/site-packages/pip/_vendor/lockfile/mkdirlockfile.py</span><br><span class="line">/usr/lib/python3.6/site-packages/pip/_vendor/lockfile/__pycache__/mkdirlockfile.cpython-36.opt-1.pyc</span><br><span class="line">/usr/lib/python3.6/site-packages/pip/_vendor/lockfile/__pycache__/mkdirlockfile.cpython-36.pyc</span><br><span class="line">/usr/share/man/man1/mkdir.1.gz</span><br><span class="line"><span class="comment"># which mkdir（注3：只是找到/usr下的mkdir，其他地方的mkdir没找出来）</span></span><br><span class="line">/usr/bin/mkdir</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">locate查找的范围：</span><br><span class="line">/--》mlocate.db里去查找（注2：在 根下面自己的数据库mlocate.db下面去查找）</span><br><span class="line">方式：模糊查找，文件名里包含就可以</span><br><span class="line">缺点：新的文件，有时候找不到，因为没有更新数据库   --》updatedb（注3：手动更新）</span><br><span class="line">可以查找任何文件（注4：新建的文件，# updatedb手动更新数据库，否则找不到）</span><br><span class="line">which 查找的范围：PATH变量</span><br><span class="line">方式：精确查找（注1：文件名必须一模一样）</span><br><span class="line">只能查找命令</span><br></pre></td></tr></table></figure><h3 id="which、whereis、locate、find">which、whereis、locate、find</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//which、whereis、locate、find 命令查找类</span><br><span class="line">        Which、whereis  只能找命令</span><br><span class="line">        loacte  也可以查找普通文件、可以查找任何文件</span><br></pre></td></tr></table></figure><hr><h2 id="十九-find">十九. find</h2><blockquote><p>//*find命令</p><p>​ 格式：find  [查找范围]  [查找条件] [动作]</p><p>​find 可以找1.命令、2.文件 （即任何文件）</p><p>​ （注1：融合了which、whereis、locate所有功能）</p><p>​find命令</p><p>​用途：用于查找文件或目录</p><p>​格式：find  [查找范围]  [查找条件] [动作]</p><p>​常用查找条件</p><p>​==-name==：按文件名称查找</p><p>​==-iname==：按文件名称查找,不区分大小写</p><p>​==-size==：  按文件大小查找</p><p>​-user：  按文件属主查找</p><p>​==-type==：  按文件类型查找</p><p>​-perm ：按文件权限查找</p><p>​==-mtime== ：按文件更改时间查找</p><p>​-newer：按比某个文件更新的查找</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">-name和-iname</span><br><span class="line">    <span class="comment"># find /lianxi  -name &quot;lixh.txt&quot;（注1：精确查找，-name根据文件名来）</span></span><br><span class="line">    /lianxi/lixh.txt</span><br><span class="line">    <span class="comment"># find  / -name  &quot;schello&quot;（注2：精确查找，可以/下查找）</span></span><br><span class="line">    /lianxi/sc/schello</span><br><span class="line">    <span class="comment"># find  / -name  &quot;schello*&quot;（注3：*模糊查找，可以/下查找）</span></span><br><span class="line">    /lianxi/sc/schello.c</span><br><span class="line">    /lianxi/sc/schello</span><br><span class="line">    <span class="comment"># find  / -name  &quot;li*.txt&quot;（注4：*模糊查找）</span></span><br><span class="line">    <span class="comment"># find  / -iname  &quot;lixh.txt&quot; （注5：-iname 查找的文件名不区分大小写）</span></span><br><span class="line">    /lianxi/lixh.txt</span><br><span class="line">    /lianxi/LIXH.TXT</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-size （大小）</span><br><span class="line">    <span class="comment"># ll  -h  看文件夹下的每个文件的大小</span></span><br><span class="line">    <span class="comment"># du  -a 查看文件夹下的每个文件的大小（单位KB）</span></span><br><span class="line">     <span class="built_in">du</span>  -ah  查看文件夹下的每个文件的大小 （单位K、M、G）</span><br><span class="line">    <span class="comment"># find  /boot  -size  +1M（注1：+1M 大于1M的 全部找出来）（注2：-1M、1M：小于1M，等于1M）</span></span><br><span class="line">    /boot/grub2/fonts/unicode.pf2  （注3:查找的结果不是特别精准）</span><br><span class="line">    /boot/initramfs-4.18.0-193.el8.x86_64kdump.img</span><br><span class="line">    /boot/initramfs-4.18.0-193.el8.x86_64.img</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-<span class="built_in">type</span> （类型）</span><br><span class="line">    <span class="comment"># find  .  -type  d （注1：查找目录）</span></span><br><span class="line">    <span class="comment"># find  .  -type  f （注2：查找普通文件）</span></span><br><span class="line">    <span class="comment"># find  .  -type  l （注3：链接文件）</span></span><br><span class="line">    <span class="comment"># find  .  -type  c （注4：字符设备文件）</span></span><br><span class="line">    <span class="comment"># find  .  -type  b （注5：块设备文件）</span></span><br><span class="line">    <span class="comment"># find  .  -type  p （注6：管道文件）</span></span><br><span class="line">    <span class="comment"># find  .  -type  s （注7：socket文件）（进程与进程通信的文件）</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-mtime （以24小时为单位） 按文件更改时间查找</span><br><span class="line">-mmin  （以分钟为单位）</span><br><span class="line">    <span class="comment"># find  .  -time  +1  1天以前</span></span><br><span class="line">    <span class="comment"># find  .  -time  -1  1天以内</span></span><br><span class="line">    <span class="comment"># find  .  -mmin  -30  30分钟以内</span></span><br><span class="line">    <span class="comment"># find  .  -mmin  +30  30分钟以前</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-user （属于哪个用户创建的文件）（用处不大）</span><br><span class="line">    <span class="comment"># find  .  -user  root</span></span><br><span class="line">    <span class="comment"># find  /  -user  cali</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-newer （比指定文件更新的文件，后建的文件）</span><br><span class="line"><span class="comment"># find  .  -newer  feng.txt</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">//特殊查找条件</span><br><span class="line">-o ：逻辑或，只要所给的条件中有一个满足，寻找条件就算满足 or</span><br><span class="line">-not :逻辑非，在命令中可用“!”表示。该运算符表示查找不满足所给条件的文件</span><br><span class="line">-a：逻辑与，系统默认是与，可不加，表示只有当所给的条件都满足时，寻找条件才算满and</span><br><span class="line"></span><br><span class="line">  find  /boot -size +1024k  -a -name “vmlinuz*”（注1：逻辑与 -a可不加，系统默认逻辑与）</span><br><span class="line">  find  /boot -size +1024k  -o -name “vmlinuz*”</span><br><span class="line">  find  .  -user nie  -<span class="built_in">type</span> f   -size  +1k  -o  -name  <span class="string">&quot;vmlinuz*&quot;</span> </span><br><span class="line">  find  .  -user nie  -<span class="built_in">type</span> f  \( -size +1k -o -name <span class="string">&quot;vmlinuz*&quot;</span> \)  （注3：()改变了优先级,\解释在下方）（注5：\(  \)即()  改变了优先级）</span><br><span class="line">  find   /home  ！-user  hello  -<span class="built_in">exec</span>  <span class="built_in">ls</span>  -ld  &#123;&#125;  \;</span><br><span class="line">\  转义字符 （注2：因为小括号()有特殊作用，接上/以后让它表示只是小括号）</span><br><span class="line">默认情况下-a的优先级高，先执行逻辑与（-a），再执行逻辑或（-o）</span><br><span class="line"><span class="comment"># find  / -iname &quot;*.conf&quot;  -size +1k  -type f  -user root -o -size +10M</span></span><br><span class="line">（注4：前面先组合成一个条件，要么满足-o前面的，要么满足-o后面的条件）</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">//扩展，接上面的命令 -<span class="built_in">exec</span> 和 -ok</span><br><span class="line">  <span class="comment"># find  /lianxi  -name  &quot;li*.txt&quot;  -exec  rm -rf  &#123;&#125;  \;（注1：前面是查找，-exec表示要执行的动作）相关解释如下</span></span><br><span class="line">    -<span class="built_in">exec</span>  执行后面的命令</span><br><span class="line">    <span class="built_in">rm</span> -rf  具体删除命令</span><br><span class="line">    &#123;&#125; 代表前面的find查找出来的内容，理解为一个容器存放前面find查找到的内容</span><br><span class="line">    \; 表示find命令结束符号</span><br><span class="line">    <span class="comment"># find /lianxi -name &quot;*.txt&quot;  -size +1k  -type f  -exec cp &#123;&#125; /fengdeyong \;</span></span><br><span class="line">    （注2：文件名.txt结尾的，大小大于1k的，文件，拷贝到fengdeyong里面）</span><br><span class="line">    （注3：find 找/lianxi 下的每一层）</span><br><span class="line">    -ok</span><br><span class="line">    -ok 让你确认一下，再执行</span><br><span class="line">    <span class="comment"># find . -name &quot;*wang*&quot; -ok rm -rf &#123;&#125; \;</span></span><br><span class="line">    &lt; <span class="built_in">rm</span> ... ./wangtc.txt &gt; ? y</span><br><span class="line">    &lt; <span class="built_in">rm</span> ... ./tang_wang.txt &gt; ? y</span><br><span class="line"></span><br><span class="line">总结：-<span class="built_in">exec</span>执行命令，不给与确认（写脚本常用，方便）</span><br><span class="line"> -ok 执行命令，需要确认</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">-maxdepth  查找文件时，目录的深度</span><br><span class="line">    <span class="comment"># find  .  -name  bb</span></span><br><span class="line">    ./aa/bb</span><br><span class="line">    ./aa/bb/bb</span><br><span class="line">    ./bb</span><br><span class="line">    <span class="comment"># find  .  -maxdepth  1  -name  bb（注2：只挖1级）</span></span><br><span class="line">    ./bb</span><br><span class="line">    <span class="comment"># find  .  -maxdepth  2  -name  bb（注3：只挖2级）</span></span><br><span class="line">    ./aa/bb</span><br><span class="line">    ./bb</span><br><span class="line">    <span class="comment"># find  .  -maxdepth  3  -name  bb（注4：只挖3级）</span></span><br><span class="line">    ./aa/bb</span><br><span class="line">    ./aa/bb/bb</span><br><span class="line">    ./bb</span><br><span class="line">    （注1：不接-maxdepth的话，有多少层挖多少层）</span><br><span class="line">    <span class="comment"># find /lianxi  -name  &quot;*.txt&quot;</span></span><br><span class="line">    （注6：不接-maxdepth，东西太多了，挖的太深了）</span><br><span class="line">    /lianxi/tangliangfei.txt</span><br><span class="line">    /lianxi/chenpeng.txt</span><br><span class="line">    /lianxi/cali.txt</span><br><span class="line">    /lianxi/feng.txt</span><br><span class="line">    /lianxi/aa/bb/feng.txt</span><br><span class="line">    /lianxi/aa/feng.txt</span><br><span class="line">    <span class="comment"># find /lianxi -maxdepth 1 -name  &quot;*.txt&quot;</span></span><br><span class="line">    （注5：这种情况用的多，只想找1层的，只挖/lianxi下面的，子文件夹、子子文件夹下面都不要）</span><br><span class="line">    /lianxi/tangliangfei.txt（注7：显示如下）</span><br><span class="line">    /lianxi/chenpeng.txt</span><br><span class="line">    /lianxi/cali.txt</span><br><span class="line">    /lianxi/feng.txt</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//！取反 的使用，接上面的命令（注1：lianxi下面的不是*.txt的）</span><br><span class="line">    <span class="comment"># find  /lianxi  -maxdepth  1  !  -name  &quot;*.txt&quot;（只对后面的条件取反）</span></span><br><span class="line">    /lianxi</span><br><span class="line">    /lianxi/passwd</span><br><span class="line">    /lianxi/first_shell.sh</span><br><span class="line">    /lianxi/messages</span><br><span class="line">    /lianxi/sc</span><br><span class="line">    /lianxi/LIXH.TXT</span><br><span class="line">    /lianxi/aa</span><br><span class="line">    /lianxi/bb</span><br></pre></td></tr></table></figure><hr>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>03_Linux基础-文件类型-主辅提示符-第1提示符-3个时间-stat-其他基础命令</title>
      <link href="/blog/posts/43225.html"/>
      <url>/blog/posts/43225.html</url>
      
        <content type="html"><![CDATA[<p>摘要：博客迁移 <a href="https://blog.csdn.net/cpen_web"><code>https://blog.csdn.net/cpen_web</code></a> → 本站<span id="more"></span></p><h1 id="03-Linux基础-文件类型-主辅提示符-第1提示符-Linux命令-内外部命令-快捷键-改为英文编码-3个时间-stat-1…100-du-cd-cp-file-mv-echo-id-shell-ln-env-set-which-rpm-usr-与-root-hostname-vim-cat-pwd-alias-unalias-ls-ASCII-wc-chmod">03_Linux基础-文件类型-主辅提示符-第1提示符-Linux命令-内外部命令-快捷键-改为英文编码-3个时间-stat-{1…100}-du-cd-cp-file-mv-echo-id-shell-ln-env-set-which-rpm-/usr-/与/root-hostname-vim-cat-pwd-alias-unalias-ls-ASCII-wc-chmod</h1><p><a href="https://blog.csdn.net/cpen_web">博客🔗：https://blog.csdn.net/cpen_web</a></p><hr><h2 id="一-stat-与-ll">一. stat 与 ll</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//stat 与 ll stat 只能看自己。 ll能看文件夹下面的东西。</span><br><span class="line">//选项组合（不分先后顺序）  如  ls  -Al  （2个功能一起显示）</span><br><span class="line">//du  -sh统计文件和文件夹大小</span><br><span class="line">//mkdir  -p如果父目录不存在，就新建</span><br><span class="line">如果文件夹存在，就不报错</span><br><span class="line">    //写脚本经常用到</span><br><span class="line">    -v给提醒（显示已经创建成功）（没什么用）</span><br></pre></td></tr></table></figure><h3 id="stat-与-ll-与-ls-l-d">stat 与 ll 与 ls -l -d</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//stat 与 ll 与 ls  -l  -d</span><br><span class="line">stat 只能看本身的文件信息（文件夹本身）</span><br><span class="line">ll能看文件夹下面的东西（文件夹里面的）</span><br><span class="line">ls  -l  -d 只看它自己的详细信息 不看里面的（文件夹本身）</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203101921976.png" alt="image-20220310192151920"></p><p><img src="https://image.cpen.top/image/202203101921851.png" alt="image-20220310192158823"></p><hr><h2 id="二-集合-xx-xxx">二. 集合 {xx,xxx}</h2><h3 id="1条命令建多个文件夹">1条命令建多个文件夹</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#注：关键点&#123;&#125;</span><br><span class="line">//mkdir  hunantv/&#123;weishi,jingshi,dushi&#125;一条命令建多个文件夹</span><br><span class="line">在 China_voice路径下建 hunantv文件夹下的 文件夹（hunantv在 China_voice下）</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;weishi,jingshi,dushi&#125; 表示一个集合，有共同的上一级目录</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203101918842.png" alt="image-20220310191803814"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">只建一个文件夹的时候，不能用 &#123; &#125; 括起来，&#123; &#125; 会成为文件名。</span><br><span class="line">//一条命令完成（日常用的不多）里面有好几级</span><br><span class="line">父目录不存在时候  接 -p  选项</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203101918797.png" alt="image-20220310191848767"></p><hr><h2 id="三-1…100">三. {1…100}</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#注：mkdir sc&#123;1..100&#125;</span><br><span class="line">#注：rm  -rf  sc&#123;1..100&#125;</span><br><span class="line">//mkdir sc&#123;1..100&#125;产生1到100的文件</span><br><span class="line">&#123;1..100&#125; 代表 1 到 100的集合 和前面的sc 组合</span><br><span class="line">mkdir  可以一次性建立多个  的功能</span><br><span class="line">//rm  -rf  sc&#123;1..100&#125;</span><br><span class="line">rm  -rf  sc*  2种都能删</span><br><span class="line">//mandatory 命令的</span><br><span class="line">arguments 参数</span><br><span class="line">//mkdir  -p如果父目录不存在，就新建</span><br><span class="line">如果文件夹存在，就不报错</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203101920498.png" alt="image-20220310192017460"></p><p><img src="https://image.cpen.top/image/202203101920800.png" alt="image-20220310192023763"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//mkdir  -v给提醒</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203101920641.png" alt="image-20220310192037604"></p><hr><h2 id="四-du-sh">四. du -sh</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//du  -sh  查看目录大小</span><br><span class="line">命令  选项  参数</span><br></pre></td></tr></table></figure><hr><h2 id="五-cd">五. cd</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">//cd  -  返回上一次所在的路径</span><br><span class="line">cd  .  进入当前目录</span><br><span class="line">cd  ..  返回到上一级目录</span><br><span class="line">cd  ~  返回到当前用户的家目录</span><br><span class="line">cd    返回到当前用户的家目录</span><br><span class="line">cd命令</span><br><span class="line">用途：切换工作目录（Change Directory）</span><br><span class="line">格式：cd  [目录位置]</span><br><span class="line">#注：特殊目录 </span><br><span class="line">.     当前目录</span><br><span class="line">..     上一级目录</span><br><span class="line">~     用户主目录（家目录）</span><br><span class="line">-     上一次所在的工作目录（遥控器上的返回键）</span><br><span class="line">//useradd  xulilin  新建用户</span><br><span class="line">cd  ~xulilin  进入xulilin这个用户的家目录</span><br><span class="line">[root@localhost xulilin]# pwd</span><br><span class="line">/home/xulilin</span><br><span class="line">//mkdir新建目录</span><br><span class="line">touch  qijian新建空文件</span><br><span class="line">touch  hengshan/yilin.txt</span><br></pre></td></tr></table></figure><hr><h2 id="六-cp-r">六. cp -r</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//cp  /etc/hosts  songshan/复制文件不接 -r</span><br><span class="line">cp  hengshan/  songsahn/  -r  复制文件夹接 -r</span><br></pre></td></tr></table></figure><hr><h2 id="七-file">七. file</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//file  taishan  查看文件类型</span><br></pre></td></tr></table></figure><hr><h2 id="八-文件类型">八. 文件类型</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//经典文件类型：目录directory</span><br><span class="line">空文件empty</span><br><span class="line">文本文件text</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203101925631.png" alt="image-20220310192555585"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//du  -sh  taishan/  查看文件大小</span><br><span class="line">//rm  -rf  tianshan/  删除</span><br></pre></td></tr></table></figure><hr><h2 id="九-cp">九. cp</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//cp复制的时候：</span><br><span class="line">复制，粘贴，重命名一步到位（重命名要后面不存在）</span><br><span class="line">cp  a.txt  abc.txt （目录下有2个文件 a.txt  abc.txt）</span><br><span class="line">cp  a.txt  songshan/feng.txt （复制到songshan下改名叫feng.txt）</span><br><span class="line">cp  hengshan/  songshan/nanyue_hs  -r（复制文件夹接-r）</span><br><span class="line">复制hengshan到songshan下 改名nanyue_hs</span><br></pre></td></tr></table></figure><hr><h2 id="十-mv">十. mv</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//mv剪切，粘贴，重命名一步到位（重命名要后面不存在）</span><br><span class="line">mv  a.txt  hengshan/aaa.txt （剪切粘贴，重命名为aaa.txt）</span><br><span class="line">mv  songshan/  hengshan/shaolinshi （移动粘贴重命名为shaolinshi）</span><br><span class="line">移动重命名不需要接-r选项（与 cp 的不同点）</span><br></pre></td></tr></table></figure><hr><h2 id="十一-主辅提示符">十一. 主辅提示符</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//主提示符</span><br><span class="line">[登录用户@主机名 工作目录]</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">辅助提示符</span><br><span class="line">#  $</span><br><span class="line"> [root@localhost xuxia]#</span><br><span class="line">[root@localhost wuxia]# </span><br><span class="line">[xulilin@localhost ~]$ </span><br><span class="line">//linux是一个多用户多任务的操作系统</span><br><span class="line">root用户家目录  /root</span><br><span class="line">普通用户家目录/home下面跟用户名同名</span><br></pre></td></tr></table></figure><hr><h2 id="十二-echo">十二. echo</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//echo  输出  相当于print</span><br><span class="line">PS1 是linux系统里内置的一个变量，不需要我们定义</span><br></pre></td></tr></table></figure><hr><h2 id="十三-第1提示符">十三. 第1提示符</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">第1提示符变量 PS1   prompt symbol 提示 符号 variable 变量</span><br></pre></td></tr></table></figure><h3 id="u-h-W-解释">[\u@\h \W]$解释</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//# echo $PS1# 注：第一提示符</span><br><span class="line">[\u@\h \W]\$</span><br><span class="line">解释：</span><br><span class="line">\u  引用当前的用户  user</span><br><span class="line">   \u  the username of the current user</span><br><span class="line">\h  引用当前的主机名   hostname</span><br><span class="line">\W 引用当前工作的目录的名字  working</span><br><span class="line">\$  当用户为root的时候，就输出#,如果不是root就是$符号</span><br><span class="line">\t  当前的时间</span><br></pre></td></tr></table></figure><h3 id="临时修改PS1变量">临时修改PS1变量</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//# PS1=&#x27;[\h@\u \t@\W]\$&#x27;  临时修改PS1变量（没必要改知道就行）\t 当前的时间</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[localhost@root 11:01:07@~]<span class="comment">#</span></span><br><span class="line">[localhost@xulilin 11:03:08@boot]<span class="variable">$PS1</span>=<span class="string">&#x27;[\h#\u \t@\W]\$&#x27;</span></span><br><span class="line">[localhost<span class="comment">#xulilin 11:03:32@boot]$  // # 也可以</span></span><br></pre></td></tr></table></figure><h3 id="第1、2提示符">第1、2提示符</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//# echo  $PS1</span><br><span class="line">[\u@\h \W]\$</span><br><span class="line"># echo  $PS2   第2提示符</span><br><span class="line">&gt;</span><br><span class="line">//一行没输完  会显示第2提示符&gt;（只是提醒的作用）</span><br></pre></td></tr></table></figure><hr><h2 id="十四-变量名">十四. $+变量名</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$PS1  $+变量名  引用某个变量</span><br><span class="line">//# echo  $PS1</span><br><span class="line">[\u@\h \W]\$</span><br><span class="line">//sg=&quot;tangliangfei&quot;  定义一个变量sg 赋值tangliangfei 右边赋值左边</span><br><span class="line">echo $sg  输出sg这个变量的值</span><br><span class="line">shell编程里引用变量需要接$+变量名</span><br><span class="line">Shell编程  linux里的命令编程</span><br><span class="line">//mv=&quot;liangly&quot;</span><br><span class="line">echo $sg  $mv</span><br><span class="line">tangliangfei liangly  （都显示）</span><br></pre></td></tr></table></figure><hr><h2 id="十五-id">十五. id</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//id  命令</span><br><span class="line">[root@localhost china_voice]# id  </span><br><span class="line">uid=0(root) gid=0(root) 组=0(root) 环境=unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023</span><br><span class="line">root用户 uid 为0</span><br><span class="line">user id 用户的编号 uid</span><br><span class="line">group id 组的编号  gid</span><br></pre></td></tr></table></figure><hr><h2 id="十六-Linux命令">十六. Linux命令</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//Linux命令</span><br><span class="line">用于实现某一类功能的指令或程序 </span><br><span class="line">命令的执行依赖于解释器程序（例如：/bin/bash）</span><br><span class="line">//人 &lt;——&gt; bash &lt;——&gt; 内核 &lt;——&gt; 硬件</span><br><span class="line">bash  就是解释器  相当于翻译 C语言写的 程序 工具</span><br><span class="line">Linux命令的分类</span><br><span class="line">内部命令：属于Shell解释器的一部分</span><br><span class="line">外部命令：独立于Shell解释器之外的程序文件</span><br><span class="line">//shell：是一类程序，用来解释用户输入的命令，然后告诉内核去执行这些命令</span><br><span class="line">bsh</span><br><span class="line">sh</span><br><span class="line">csh</span><br><span class="line">bash</span><br><span class="line">ksh</span><br><span class="line">bash是最流行的shell--》几乎所有的linux系统默认的shell都是bash</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203101946989.png" alt="image-20220310194610950"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">人——BASH——kernel</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203101946345.png" alt="image-20220310194628296"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">（大概了解）</span><br></pre></td></tr></table></figure><hr><h2 id="十七-cat-etc-shells">十七. cat /etc/shells</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//cat /etc/shells  查看本机里有哪些shell</span><br><span class="line">/bin/sh   比较老的shell</span><br><span class="line">/bin/bash  </span><br><span class="line">/usr/bin/sh</span><br><span class="line">/usr/bin/bash</span><br><span class="line">//sh  敲sh，使用sh，没有提示符，退出去 敲bash 或者 exit （父子进程）</span><br><span class="line">//切换shell  sh  和  bash  命令  exit</span><br></pre></td></tr></table></figure><hr><h2 id="十八-ln-s">十八. ln -s</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#注：链接文件 天蓝色</span><br><span class="line">//ln  -s</span><br><span class="line">ln  创建链接文件（快捷方式）</span><br><span class="line">不要去删除原文件，不然会导致链接文件不可用 (一闪一闪 冒红)</span><br><span class="line">ln  -s  源文件  链接文件ln  -s  xulilin  xll</span><br><span class="line">-s  symbol link 符号链接（软链接 soft）</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mkdir changsha</span></span><br><span class="line"><span class="comment"># ln -s  changsha cs  </span></span><br><span class="line"><span class="comment"># ll</span></span><br><span class="line">lrwxrwxrwx. 1 root root  8 9月  17 11:19 cs -&gt; changsha </span><br></pre></td></tr></table></figure><hr><h2 id="十九-echo-SHELL">十九. echo $SHELL</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//# echo $SHELL 查看linux系统里默认的shell</span><br><span class="line">/bin/bash</span><br></pre></td></tr></table></figure><hr><h2 id="二十-env">二十. env</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//# env  查看当前用户的环境变量（linux系统里预先定义的变量）  environment</span><br><span class="line">当前用户的很多进程都可以使用的变量</span><br><span class="line">环境变量--》全局变量</span><br></pre></td></tr></table></figure><hr><h2 id="二一-set">二一. set</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># set  查看所有的变量（自定义变量和环境变量）</span><br></pre></td></tr></table></figure><hr><h2 id="二二-内部外部命令">二二. 内部外部命令</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//bash - GNU Bourne-Again SHell</span><br><span class="line">BASH_BUILTINS  builtin 内置（内部）  built in</span><br><span class="line">额外安装的命令--》外部命令</span><br><span class="line">通过安装bash这个程序就可以得到的命令--》bash的内部命令</span><br><span class="line">yum  install tree -ytree命令是外部命令，需要额外安装</span><br><span class="line">mkdir ip 外部命令  cd echo exit 内部命令</span><br></pre></td></tr></table></figure><hr><h2 id="二三-which">二三. which</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//which bash  查看bash命令存放在哪里</span><br><span class="line">/usr/bin/bash</span><br></pre></td></tr></table></figure><hr><h2 id="二四-rpm">二四. rpm</h2><h3 id="rpm-qf">rpm -qf</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#注：rpm -qf查询命令通过那个软件包安装过来的</span><br><span class="line">#注：先用which 查看命令的绝对路径</span><br><span class="line">//rpm -qf /usr/bin/bash  查询/usr/bin/bash是通过哪个软件包安装过来的</span><br><span class="line">bash-4.4.19-10.el8.x86_64</span><br></pre></td></tr></table></figure><h3 id="rpm">rpm</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//rpm 是linux里的软件管理的命令，例如安装，卸载软件</span><br><span class="line">-qf 查询文件是通过那个软件安装过来的</span><br><span class="line">//# which ip</span><br><span class="line">/usr/sbin/ip</span><br><span class="line"># rpm -qf /usr/sbin/ip</span><br><span class="line">iproute-5.3.0-1.el8.x86_64</span><br><span class="line">//bin  二进制 binary  </span><br></pre></td></tr></table></figure><hr><h2 id="二五-usr">二五. /usr</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#注：/usr存放安装软件的目录unix system resource</span><br><span class="line">///usr   是linux里存放安装软件的目录   unix system resource  unix 系统资源</span><br><span class="line">相当于windows里的Program Files</span><br><span class="line">//链接文件 浅蓝色</span><br><span class="line">正常文件 深蓝色</span><br><span class="line">///  根目录</span><br><span class="line">/root    root用户的家目录</span><br><span class="line">/home/用户名同名的目录   普通用户的家目录</span><br></pre></td></tr></table></figure><hr><h2 id="二六-与-root关系">二六. / 与 /root关系</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//根目录和root用户的家目录的关系？</span><br><span class="line">/root  在/目录下，是包含关系</span><br><span class="line">//~ 代表家目录，当你所在的文件夹的路径是家目录，就会显示 ~</span><br><span class="line">普通用户只能进自己家目录，root用户能进任何家目录↓↓↓</span><br></pre></td></tr></table></figure><h3 id="进入其他用户家目录">进入其他用户家目录</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[xulilin@localhost /]$ <span class="built_in">cd</span> ~xulilin<span class="comment"># 注：普通用户只能进自己家目录</span></span><br><span class="line">[xulilin@localhost ~]$ <span class="built_in">cd</span> ~cali</span><br><span class="line">-bash: <span class="built_in">cd</span>: /home/cali: 权限不够</span><br><span class="line">[xulilin@localhost ~]$ <span class="built_in">exit</span></span><br><span class="line">注销</span><br><span class="line">[root@localhost ~]<span class="comment"># cd  ~cali</span></span><br><span class="line">[root@localhost cali]<span class="comment"># pwd</span></span><br><span class="line">/home/cali</span><br><span class="line">[root@localhost cali]<span class="comment"># </span></span><br></pre></td></tr></table></figure><hr><h2 id="二七-hostname">二七. hostname</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//# hostname 查看主机名</span><br><span class="line">localhost.localdomain</span><br></pre></td></tr></table></figure><h3 id="临时、永久修改主机名">临时、永久修改主机名</h3><h3 id="临时修改">临时修改</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//# hostname  sanchuang-linux  临时修改主机名（不能用下划线_）</span><br><span class="line">接着重新登录 su - root（当前终端登录）/ 或者重新建立一个连接（开一个终端登录） 重启后失效</span><br><span class="line">//为什么要修改主机名？</span><br><span class="line">方便识别，区别不同的服务器</span><br></pre></td></tr></table></figure><h3 id="永久修改">永久修改</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//*永久修改主机名</span><br><span class="line"># vim  /etc/hostname  改这个文件，打个新名字。</span><br><span class="line"># cat  /etc/hostname </span><br><span class="line">sanchuang-linux</span><br><span class="line">重启后生效</span><br><span class="line">//reboot  重启</span><br><span class="line">//不一定非得 虚拟机 登录后 xshell才能登录</span><br><span class="line">//提示符</span><br><span class="line">PS1第一提示符</span><br><span class="line">PS2第二提示符</span><br></pre></td></tr></table></figure><hr><h2 id="二八-vim">二八. vim</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//vim编辑器的使用</span><br><span class="line">vim 是linux里的字符界面的文本编辑器 ——》记事本  只能写文字</span><br><span class="line">安装vimyum   install  vim  -y</span><br><span class="line">//vim  sc.txt</span><br><span class="line">1.按字母键i进入输入模式  insert</span><br><span class="line">2.输入内容，可以是中文或者英文</span><br><span class="line">3.按ESC键，返回到命令模式  escape 离开，逃离</span><br><span class="line">4.输入:wq  退出并且保存  write  quit</span><br><span class="line">  :q!  退出不保存</span><br><span class="line">  :q  退出（没有修改可以退出）</span><br></pre></td></tr></table></figure><hr><h2 id="二九-cat">二九. cat</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//# cat  sc.txt   查看文本文件里的内容</span><br></pre></td></tr></table></figure><hr><h2 id="三十-快捷键">三十. 快捷键</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//快捷键</span><br><span class="line">//ctrl + l</span><br><span class="line">//ctrl + c强行终止命令  # ^ C</span><br><span class="line">比如 ping  www.baidu.com  ctrl + c</span><br><span class="line">//tab补齐命令  # mkd （之后按2下tab键）mkd开头的命令都列出来了</span><br><span class="line">补齐路径  # mkdir wang 唯一性就直接补齐  否则敲两下 列出wang…</span><br><span class="line">能识别唯一性的时候，按一次tab键</span><br><span class="line">不能识别唯一性的时候，需要按2次，然后自己输入</span><br><span class="line">// 上下方向键，可以调用以前使用过的命令</span><br></pre></td></tr></table></figure><hr><h2 id="三一-pwd">三一. pwd</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//pwd  查看工作目录</span><br><span class="line">cd    切换工作目录</span><br><span class="line">cd  ~ （cd） 进入用户家目录</span><br><span class="line">cd  -返回上一次目录</span><br><span class="line">cd  ~  liangluyao  进入liangluyao家目录</span><br><span class="line">cd  ..  返回上一级目录</span><br></pre></td></tr></table></figure><hr><h2 id="三二-别名">三二. 别名</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//ll  是 ls  -l  --color=auto的别名</span><br><span class="line">//# alias  查看linux里有哪些定义好的别名</span><br><span class="line">//# alias  c=clear  临时定义c是clear的别名</span><br><span class="line">clear 是linux系统里的命令  命令有选项的 要同’ ’ （单引号）引起来 </span><br><span class="line">再开启一个终端 就没效了 临时定义</span><br><span class="line">c是自定义的名字，定义别名的时候，不要和系统里已经存在的命令冲突</span><br></pre></td></tr></table></figure><h3 id="取消别名">取消别名</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//unalias取消别名</span><br><span class="line"># alias mkdir=ls</span><br><span class="line"># unalias  mkdir  取消别名</span><br></pre></td></tr></table></figure><h3 id="永久修改别名">永久修改别名</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//# vim  /root/.bashrc  永久修改别名，需要重新登陆，或者su切换用户到root</span><br><span class="line">.bashrc 是一个隐藏文件  按i进去 进行别名定义——》ESC  :wq</span><br></pre></td></tr></table></figure><hr><h2 id="三三-ls">三三. ls</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">//ls命令</span><br><span class="line">用途：列表（List）显示目录内容 </span><br><span class="line">格式：ls  [选项]...  [目录或文件名]</span><br><span class="line">        常用命令选项</span><br><span class="line">        -l ：以长格式显示</span><br><span class="line">        -d：显示目录本身的属性</span><br><span class="line">        -t： 按文件修改时间进行排序</span><br><span class="line">        -r ：将目录的内容清单以英文字母顺序的逆序显示</span><br><span class="line">        -a：显示所有子目录和文件的信息，包括隐藏文件</span><br><span class="line">        -A：类似于“-a”，但不显示“.”和“..”目录的信息</span><br><span class="line">        -h：以更易读的字节单位（K、M等）显示信息</span><br><span class="line">        //  必须和 -l 一起用</span><br><span class="line">        -h, --human-readable</span><br><span class="line">    with -l and -s, print sizes like 1K 234M 2G etc.</span><br><span class="line">        -R：递归显示内容</span><br><span class="line">        一层一层显示，作用远远不及 tree好，很繁琐</span><br><span class="line">//ls查看当前 目录</span><br><span class="line">        ls  /boot  查看/boot 下目录</span><br><span class="line">        ls  -l  -d  /boot  只显示本身的文件夹信息 ls -ld / ls -dl</span><br><span class="line">        ls  -t  时间  文件修改时间排序</span><br><span class="line">        ls  -r  英文字母 逆序显示</span><br><span class="line">        ls  -l  -h  /boot  显示/boot的各个文件的大小</span><br><span class="line">        -h  必须和  -l  一起用  显示大小 K M G</span><br></pre></td></tr></table></figure><h3 id="ls-l">\ls -l</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//\ls  -l  不显示列出的文件类型颜色</span><br></pre></td></tr></table></figure><h3 id="ls-l-grep-“-d”">ls -l |grep “^d”</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">//# ls  -l|grep  &quot;^d&quot;  </span><br><span class="line">解释如下</span><br><span class="line">//| 管道符号： 进程和进程之间通信的一种方式</span><br><span class="line">作用:将前面一个命令的输出送给后面一个命令作为输入</span><br><span class="line">中间商，借花献佛，提篮子</span><br><span class="line">//grep ：文本过滤的命令</span><br><span class="line">会根据匹配的字符串去过滤，显示出匹配内容的行</span><br><span class="line"></span><br><span class="line">//^d  表示以d开头的行</span><br><span class="line">//# ll|grep &quot;txt&quot;</span><br><span class="line">        -rw-r--r--. 1 root root  0 9月  17 15:58 a.txt</span><br><span class="line">        -rw-r--r--. 1 root root  0 9月  17 16:02 sc10.txt</span><br><span class="line">        # ll|grep &quot;^d&quot;</span><br><span class="line">        drwxr-xr-x. 5 root root 48 9月  17 09:51 hunantv</span><br><span class="line">        drwxr-xr-x. 4 root root 42 9月  17 09:54 jiangsutv</span><br><span class="line">        # ll|grep &quot;^-&quot;</span><br><span class="line">        -rw-r--r--. 1 root root  0 9月  17 15:58 a.txt</span><br><span class="line">        -rw-r--r--. 1 root root  0 9月  17 16:02 sc10.txt</span><br><span class="line">        # ll|grep &quot;^-&quot;|wc -l</span><br><span class="line">        11</span><br></pre></td></tr></table></figure><hr><h2 id="三四-ASCII">三四. ASCII</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//ASCII  美国信息交换标准代码</span><br><span class="line">数字、大写字母、小写字母 ASCII码值 小——》大</span><br><span class="line">//一个字节=8位</span><br><span class="line">101010101</span><br><span class="line">//man  ls  ——》/-h  查找 -h</span><br><span class="line">//# man ls</span><br><span class="line">            回车：一行一行的往下走</span><br><span class="line">            /-h  查找包含-h的行</span><br><span class="line">            n   查找下一个 next</span><br><span class="line">            N   查找上一个   next</span><br><span class="line">            q   退出</span><br></pre></td></tr></table></figure><hr><h2 id="三五-文件类型">三五. 文件类型</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//文件类型缩写应用</span><br><span class="line">        常规文件    - 保存数据</span><br><span class="line">        目录       d  存放文件  directory</span><br><span class="line">        符号链接文件    l指向其它文件  link</span><br><span class="line">        字符设备文件   ccharacter  --》与字符显示相关的文件</span><br><span class="line">        块设备文件b block --&gt;存放数据的块文件</span><br><span class="line">        s socket文件</span><br><span class="line">        p 管道文件 pipe</span><br></pre></td></tr></table></figure><hr><h2 id="三六-「drwxr-xr-x-5-root-root-48-9月-17-09-51-hunantv」解释">三六. 「drwxr-xr-x. 5 root root 48 9月  17 09:51 hunantv」解释</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//[root@sanchuang-linux china_voice]# ls  -l</span><br><span class="line">总用量 0</span><br><span class="line">drwxr-xr-x. 5 root root 48 9月  17 09:51 hunantv</span><br><span class="line">            d 代表文件类型  directory 目录</span><br><span class="line">            rwxr-xr-x 权限  r 读 read   w写 write   x 执行 execute</span><br><span class="line">            . 和selinux权限相关</span><br><span class="line">            5 文件的链接数</span><br><span class="line">            root  用户 </span><br><span class="line">            root  组</span><br><span class="line">            48  文件大小</span><br><span class="line">            9月  17 09:51  文件的创建时间</span><br></pre></td></tr></table></figure><h2 id="三七-wc">三七. wc</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//wc 是一个统计命令，可以统计文件里有多少行，多少单词，多少字节</span><br><span class="line">-l 统计行数  lines</span><br><span class="line">wc  -l  统计行数</span><br></pre></td></tr></table></figure><h3 id="不显示文件名">不显示文件名</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//# wc -l  a.txt  (wc  -l 也可以统计文件的行数) 直接统计会显示文件名</span><br><span class="line">3 a.txt</span><br><span class="line">//# cat a.txt |wc -l （cat管道传给wc 不会显示文件名）</span><br><span class="line">3</span><br><span class="line">//# cat /etc/passwd|wc -l</span><br><span class="line">27</span><br><span class="line">//# cat /etc/passwd|grep &quot;liang&quot;</span><br><span class="line">    liangluyao:x:1001:1001::/home/liangluyao:/bin/bash</span><br><span class="line">    liangluyao2:x:1002:1002::/home/liangluyao2:/bin/bash</span><br><span class="line">    # cat /etc/passwd|grep &quot;root&quot;</span><br><span class="line">    root:x:0:0:root:/root:/bin/bash</span><br><span class="line">    operator:x:11:0:operator:/root:/sbin/nologin</span><br></pre></td></tr></table></figure><h3 id="练习">练习</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//1.统计出/dev目录下有多少字符设备文件</span><br><span class="line"> ll  /dev|grep “^c”|wc  -l</span><br><span class="line">2.统计出/dev目录下有多少块设备文件</span><br><span class="line"> ll  /dev|grep “^b”|wc  -l</span><br><span class="line">        3.统计/etc/目录下有多少文件夹和普通的文件</span><br><span class="line">         ll  /dev|grep “^-”|wc  -l  文件</span><br><span class="line">         ll  /dev|grep “^d”|wc  -l文件夹</span><br><span class="line">         ll  -R  /etc|grep “^-”|wc  -l统计/etc和子文件夹下的所有普通文件 更彻底（包含子目录下）</span><br><span class="line">         ll  -R  /etc|grep “^d”|wc  -l统计/etc和子文件夹下的所有文件夹  更彻底（包含子目录下）</span><br><span class="line">        4.统计/etc/ssh/sshd_config文件有多少行</span><br><span class="line">     cat  /etc/ssh/sshd_config  |wc  -l</span><br><span class="line">//统计文件夹里有多少文件</span><br><span class="line">    ll  |  grep  wc </span><br><span class="line">//统计文件有多少行</span><br><span class="line">    cat   |  wc</span><br></pre></td></tr></table></figure><hr><h2 id="三八-du">三八. du</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//du  统计目录及文件的空间占用情况  disk  usage（估算值，并不是很准确）</span><br><span class="line">        *du  -sh  统计汇总的大小（常用）黄金组合</span><br><span class="line">            -s</span><br><span class="line">              -s, --summarize 汇总的大小</span><br><span class="line">                      display only a total for each argument</span><br><span class="line">            -h  </span><br><span class="line">             -h, --human-readable</span><br><span class="line">                      print sizes in human readable format (e.g., 1K 234M 2G)</span><br><span class="line">            -a 统计文件和文件夹</span><br><span class="line">                 -a, --all</span><br><span class="line">              write counts for all files, not just directories</span><br></pre></td></tr></table></figure><h3 id="du-sh-与-ll-h-区别">du -sh 与 ll -h 区别</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">        du  -sh  /boot</span><br><span class="line">        ll  -h  /boot</span><br><span class="line">//# ll  -h  /boot  只能统计文件的大小，文件夹里的所有的文件不会汇总</span><br><span class="line">        总用量 134M</span><br><span class="line">        du  -sh可以汇总</span><br><span class="line">        ll  -h 就是你文件里面有多少个单词 多少个字符</span><br><span class="line">        # du -sh /boot</span><br><span class="line">        140M/boot</span><br><span class="line">        # ll -h  -d /boot</span><br><span class="line">        dr-xr-xr-x. 6 root root 4.0K 9月  13 14:38 /boot</span><br><span class="line">//英文字母，数字 占1个字节</span><br><span class="line">        中文字母：utf8编码   3个字节</span><br><span class="line">        ll  -h 统计的是一个文件里有多少字符</span><br><span class="line"> 统计文件里面文字的字节数</span><br><span class="line">du  统计占用多少块</span><br><span class="line">统计文件存放在磁盘上消耗了多少个块</span><br><span class="line">//1个块的大小就是4096 （4K）</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203110716996.png" alt="image-20220311071612898"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//touch新建空文件</span><br><span class="line">更新时间</span><br><span class="line">//stat  host  查看三个时间</span><br><span class="line">        最近访问</span><br><span class="line">        最近更改</span><br><span class="line">        最近改动</span><br></pre></td></tr></table></figure><hr><h2 id="三九-改为英文编码">三九. 改为英文编码</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//改为英文编码</span><br><span class="line">        # LANG=en_US.UTF8</span><br><span class="line">        # ll hosts </span><br><span class="line">        -rw-r--r--. 1 root root 158 Sep 17 16:57 hosts</span><br></pre></td></tr></table></figure><hr><h2 id="四十-3个时间">四十. 3个时间</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># stat hosts </span></span><br><span class="line">  File: hosts</span><br><span class="line">  Size: 158       Blocks: 8          IO Block: 4096   regular file</span><br><span class="line">Device: fd00h/64768dInode: 17162314    Links: 1</span><br><span class="line">Access: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)</span><br><span class="line">Context: unconfined_u:object_r:default_t:s0</span><br><span class="line">Access: 2020-09-17 16:57:57.748799777 +0800</span><br><span class="line">Modify: 2020-09-17 16:57:57.748799777 +0800</span><br><span class="line">Change: 2020-09-17 16:57:57.748799777 +0800</span><br><span class="line"> Birth: -</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">时间：</span><br><span class="line">访问时间  access time  --》atime     打开这个文件  cat</span><br><span class="line">修改时间  modify time  --》mtime    修改里面的内容，增加，删除内容等  vim</span><br><span class="line">更改时间  change time  --》ctime    更改了文件的属性（名字，权限，大小，时间，用户，组）</span><br><span class="line">精确到纳秒</span><br><span class="line">touch  hosts三个时间都更新（都改了）</span><br></pre></td></tr></table></figure><hr><h2 id="四一-chmod">四一. chmod</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//chmod 修改权限  change  mode </span><br><span class="line">chmod  a+w  hosts</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203110720169.png" alt="image-20220311072045096"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown 修改属主和属组  change  owner</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203110721123.png" alt="image-20220311072106068"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vim  hosts  输入  ：wq  修改数据</span><br><span class="line">//+0800 表示东八区  中国的上海，北京 </span><br><span class="line">乌鲁木齐  东六区</span><br><span class="line">//# cp /etc/passwd  .  将/etc/passwd复制到当前目录</span><br><span class="line">现在我们敲的cp，都是 cp  -i ，cp是别名</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment"># alias</span></span><br><span class="line">    <span class="built_in">alias</span> c=<span class="string">&#x27;clear&#x27;</span></span><br><span class="line">    <span class="built_in">alias</span> <span class="built_in">cp</span>=<span class="string">&#x27;cp -i&#x27;</span></span><br><span class="line">-i, --interactive 交互式</span><br><span class="line">          prompt before overwrite (overrides a previous -n option)</span><br></pre></td></tr></table></figure><hr><h2 id="四二-cp的时候覆盖文件，不给予提醒的方法">四二. cp的时候覆盖文件，不给予提醒的方法</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//cp的时候覆盖文件，不给与提醒的方法</span><br><span class="line">1.取消别名  --》不推荐</span><br><span class="line"># unalias cp</span><br><span class="line">2.使用cp命令的绝对路径  --》推荐</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment"># which  cp</span></span><br><span class="line"><span class="built_in">alias</span> <span class="built_in">cp</span>=<span class="string">&#x27;cp -i&#x27;</span></span><br><span class="line">  /usr/bin/cp</span><br><span class="line"><span class="comment"># /usr/bin/cp  feng  changsha/ -r</span></span><br><span class="line"><span class="comment"># /usr/bin/cp  feng  changsha/ -r  再次复制 覆盖不给提醒</span></span><br></pre></td></tr></table></figure><hr>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>02_Linux基础-文件系统层次结构-提示符-进程-隐藏文件-通配符-绝对相对路径-其他基础命令</title>
      <link href="/blog/posts/34556.html"/>
      <url>/blog/posts/34556.html</url>
      
        <content type="html"><![CDATA[<p>摘要：博客迁移 <a href="https://blog.csdn.net/cpen_web"><code>https://blog.csdn.net/cpen_web</code></a> → 本站<span id="more"></span></p><h1 id="02-Linux基础-ls-mkdir-cd-pwd-man-useradd-su-rm-tree-tab-passwd-w-ssh-touch-date-stat-cp-mv-du-文件系统层次结构-提示符-进程-命令格式-隐藏文件-通配符-绝对-相对路径-1…100">02_Linux基础-ls-mkdir-cd-pwd-man-useradd-su-rm-tree-tab-passwd-w-ssh-touch-date-stat-cp-mv-du-文件系统层次结构-提示符-进程-命令格式-隐藏文件-通配符-绝对/相对路径-{1…100}</h1><p><a href="https://blog.csdn.net/cpen_web">博客🔗：https://blog.csdn.net/cpen_web</a></p><hr><h2 id="一-基本命令">一. 基本命令</h2><h3 id="ls">ls</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls --- 查看文件夹内容 ==&gt; list</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203061401811.png" alt="image-20220306140133778"></p><h4 id="ls-l">ls -l</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//ls  -l显示文件的详细信息</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203061441930.png" alt="image-20220306144158855"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//ls  -l显示文件的详细信息 (大概能看到文件时间 ，不详细)</span><br><span class="line">ll是 ls  -l  的别名</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203071140074.png" alt="image-20220307114020028"></p><h4 id="其他参数">其他参数</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-l  显示文件的详细信息</span><br><span class="line">// use a long listing format ( 使用长格式显示 )</span><br><span class="line">-a  显示所有的文件和文件夹包括.和..</span><br><span class="line">-A  显示所有的文件和y文件夹，但是不包括.和..</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//ls  -a   显示所有的文件和文件夹 包括 . 和 ..</span><br></pre></td></tr></table></figure><hr><h3 id="mkdir">mkdir</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir --- 新建文件夹 ==&gt; make directory(目录)</span><br><span class="line"></span><br><span class="line">--- mkdir可以一次性建多个文件夹 空格隔开</span><br><span class="line">--- 默认情况下 新建文件夹放在你所在的文件夹里</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203061402859.png" alt="image-20220306140213833"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">--- windows下</span><br><span class="line">--- dir ==&gt; Windows里面显示文件夹下内容 (等同于Linux ls)</span><br><span class="line">--- mkdir ==&gt; Windows里建目录</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203061402223.png" alt="image-20220306140244189"></p><p><img src="https://image.cpen.top/image/202203061402977.png" alt="image-20220306140250947"></p><h4 id="mkdir-p">mkdir -p</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//mkdir  -p  ( -P 的作用 )</span><br><span class="line">1 .如果文件存在就不报错</span><br><span class="line">2 .当父目录不存在就新建</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203061427602.png" alt="image-20220306142737547"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//-p, --parents  [ 选项 ]</span><br><span class="line">              no error if existing, make parent directories as needed</span><br><span class="line">              1.如果文件存在就不报错</span><br><span class="line">               2.当父目录不存在就新建</span><br><span class="line">//参数： 参与进来的操作的对象</span><br><span class="line">   也可以没有</span><br><span class="line">如果没有参数，当前目录就是参数</span><br></pre></td></tr></table></figure><hr><h3 id="cd">cd</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd --- 进入目录 ==&gt; change directory to other directory</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203061403502.png" alt="image-20220306140319474"></p><p><img src="https://image.cpen.top/image/202203061403973.png" alt="image-20220306140335947"></p><hr><h3 id="pwd">pwd</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pwd --- 显示当前所在路径 </span><br><span class="line">print working directory name</span><br><span class="line">Print name of current/working directory</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203061404419.png" alt="image-20220306140421390"></p><hr><h3 id="man">man</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">man --- 查询命令的使用手册（指南）</span><br><span class="line">--- 按 q 退出  quit</span><br><span class="line">--- manual 手册，指南</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203061404282.png" alt="image-20220306140450247"></p><p><img src="https://image.cpen.top/image/202203061404178.png" alt="image-20220306140456152"></p><hr><h3 id="…">. &amp; …</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.  --- 代表当前目录</span><br><span class="line">.. --- 代表上一级目录</span><br><span class="line">---cd .. 返回上一级目录</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203061405670.png" alt="image-20220306140528640"></p><hr><h3 id="useradd">useradd</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">useradd cpen --- 新建一个普通用户</span><br><span class="line">su - cpen --- 切换用户登录</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root用户的家目录在/root</span><br><span class="line">普通用户的家目录在/home目录下和用户名同名的目录</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203061409446.png" alt="image-20220306140932423"></p><hr><h3 id="su-exit">su &amp; exit</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">--- su - cpen 切换用户登录</span><br><span class="line">--- - 是一个选项</span><br><span class="line"></span><br><span class="line">--- exit 注销</span><br><span class="line">--- 退出用户/注销 exit</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203061410466.png" alt="image-20220306141026442"></p><hr><h3 id="rm-rf">rm -rf</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">--- rm -rf 删除</span><br><span class="line">rm --- 删除的命令 (remove)</span><br><span class="line">-rf --- 强制删除不给提醒</span><br><span class="line"></span><br><span class="line">rm -rf /china--- 删除/china目录</span><br><span class="line">--- /china --- 绝对路径</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost china]<span class="comment"># rm  -rf  jiangxi/  删除数据一定要注意，非常不安全</span></span><br></pre></td></tr></table></figure><h4 id="rm-rf-2">rm -rf *</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rm  -rf  *</span><br><span class="line">rm  -rf  *  删除当前目录下所有的文件，但是隐藏文件不删除</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203071112309.png" alt="image-20220307111210242"></p><p><img src="https://image.cpen.top/image/202203071114881.png" alt="image-20220307111425817"></p><p><img src="https://image.cpen.top/image/202203071114740.png" alt="image-20220307111432706"></p><hr><h3 id="tree">tree</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">yum install tree -y</span><br><span class="line">--- yum - linux里软件管理的命令</span><br><span class="line">--- install - 安装</span><br><span class="line">--- tree - 安装的具体软件名</span><br><span class="line">--- -y 自动安装，不需要输入yes确认</span><br><span class="line"></span><br><span class="line">tree --- 查看目录结构</span><br><span class="line">yum install tree -y</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203061411723.png" alt="image-20220306141156672"></p><hr><h3 id="tab">tab</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">--- 文件路径补齐：tab键</span><br></pre></td></tr></table></figure><hr><h3 id="passwd">passwd</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//给用户设置密码passwd  username</span><br><span class="line">默认情况：root用户可以给任何一个用户设置密码</span><br><span class="line">普通用户只能给自己设置密码（root授权除外）</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">回文</span><br><span class="line">回文123321（上海自来水来自海上）从左、右边念一样</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203061420578.png" alt="image-20220306142004534"></p><hr><h3 id="w">w</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//查看有哪些用户登录在linux系统里 w</span><br><span class="line">What</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203061424409.png" alt="image-20220306142447353"></p><hr><h3 id="ssh">ssh</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//ssh  ip地址连接到相同网段 的主机上</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203061425076.png" alt="image-20220306142517994"></p><hr><h3 id="Ctrl-L">Ctrl + L</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//清屏  Ctrl + L</span><br></pre></td></tr></table></figure><hr><h3 id="touch">touch</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//touch</span><br><span class="line">1 .如果文件不存在，新建空文件</span><br><span class="line">2 .如果文件存在，就是更新时间</span><br><span class="line">//touch  a.txt  建立文本文件</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203071137858.png" alt="image-20220307113733818"></p><hr><h3 id="date">date</h3><p><img src="https://image.cpen.top/image/202203071137661.png" alt="image-20220307113753598"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//更新时间</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203071138288.png" alt="image-20220307113817224"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//date  查看当前时间</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203101206464.png" alt="image-20220310120605357"></p><hr><h3 id="stat">stat</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//stat查看文件的状态（详细信息）</span><br><span class="line">stat  status 状态</span><br><span class="line">文件名、大小、用户、时间</span><br><span class="line">比 ls  -l 更加详细的信息</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203071141730.png" alt="image-20220307114133662"></p><p><img src="https://image.cpen.top/image/202203071141483.png" alt="image-20220307114146424"></p><hr><h3 id="cp">cp</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//cp  复制（复制的同时会粘贴） copy</span><br><span class="line">将文件复制到文件夹</span><br><span class="line">cp  sc.txt  hunan</span><br><span class="line"> 源   目的地</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203101210796.png" alt="image-20220310121009737"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//cp  -r</span><br><span class="line">-r  复制文件夹的时候，需要接的选项  递归复制 ( 将子文件夹也复制过去 )</span><br><span class="line">#注：-r一般表示递归</span><br><span class="line">linux里的操作哲学：</span><br><span class="line">1.没有消息就是好消息</span><br><span class="line">2. 一切皆文件</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203101211902.png" alt="image-20220310121118864"></p><p><img src="https://image.cpen.top/image/202203101211678.png" alt="image-20220310121130633"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//复制原来有的文件，提示：是否覆盖</span><br><span class="line">空文件夹，不会提醒 是否覆盖</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203101211150.png" alt="image-20220310121155097"></p><p><img src="https://image.cpen.top/image/202203101212054.png" alt="image-20220310121200979"></p><hr><h3 id="mv">mv</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//mvmv - move (rename) files</span><br><span class="line">1 .移动--》当后面接的文件夹存在就是移动（剪切） move 后面必须是文件夹，不能是文件。</span><br><span class="line">2 .改名字（重命名）--》当后面接的文件夹不存在就是重命名</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.移动  外面就没有这些文件了</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203101218793.png" alt="image-20220310121801689"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2.重命名</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203101218882.png" alt="image-20220310121823828"></p><hr><h3 id="du-sh">du -sh</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#注：查看的是所有文件 汇总的大小，而不是分开的文件</span><br><span class="line">//查看文件夹大小  du  -sh</span><br><span class="line">-sh  是选项</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203101219312.png" alt="image-20220310121922252"></p><hr><h2 id="二-目录结构">二. 目录结构</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Linux目录结构</span><br><span class="line">--- / 根目录</span><br><span class="line">--- /root 家目录</span><br><span class="line">--- /是一个文件夹，/下的root 也是个文件夹</span><br><span class="line">--- Linux目录结构 ==&gt; 文件夹的结构 ==&gt; 倒立的树 ==&gt; 树目录结构</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203061406632.png" alt="image-20220306140624588"></p><p><img src="https://image.cpen.top/image/202203061406966.png" alt="image-20220306140632939"></p><h3 id="家目录">家目录</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/root 是root用户的家目录</span><br><span class="line">--- root用户是linux超级用户</span><br><span class="line">--- 家目录：用户登录进入Linux系统所在的目录 (home directory)</span><br><span class="line"></span><br><span class="line">普通用户的家目录在根下面的 home 下面</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203061407565.png" alt="image-20220306140708540"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">--- ~ 所在路径是用户的家目录</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203061407832.png" alt="image-20220306140724803"></p><h3 id="文件系统层次结构">文件系统层次结构</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//linux 文件系统层次结构 </span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203071128624.png" alt="image-20220307112856570"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//危险操作,不能做</span><br><span class="line">rm  -rf  /</span><br><span class="line">rm  -rf  /*</span><br><span class="line">cd  / ——》 rm  -rf  *</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203071129791.png" alt="image-20220307112936742"></p><hr><h2 id="三-提示符">三. 提示符</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">提示符</span><br><span class="line">--- # root使用的提示符</span><br><span class="line">--- $ 普通用户使用的提示符</span><br></pre></td></tr></table></figure><hr><h2 id="四-进程">四. 进程</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//进程  子进程、父进程</span><br><span class="line">bash 终端交互程序</span><br><span class="line">sshd进程远程登录</span><br><span class="line">sshd 监听 22号接口</span><br><span class="line">sshd 起的bash</span><br><span class="line">bash 接受人输入的东西（人机交互的程序）</span><br><span class="line">内核管操作系统，操作系统最核心的软件</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203061418027.png" alt="image-20220306141856984"></p><hr><h2 id="五-通用命令格式">五. 通用命令格式</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//linux命令的通用命令格式</span><br><span class="line">命令字符  [选项]  [参数]   //  “[ ]” 里的 可接可不接</span><br><span class="line">如：ls   -l  /home</span><br><span class="line">[选项] 和 [参数] 有时候顺序可以颠倒</span><br><span class="line">//option 选项： 是可供选项的项目，可接可不接，有特殊作用</span><br></pre></td></tr></table></figure><hr><h2 id="六-隐藏文件">六. 隐藏文件</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//. 开头的文件在linux下是隐藏文件</span><br></pre></td></tr></table></figure><hr><h2 id="七">七. *</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//* 是通配符：代表所有的文件</span><br><span class="line">//ls  -A   显示所有的文件和文件夹，但是不包括 . 和 ..</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203071116926.png" alt="image-20220307111626880"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//选项可以组合，一般不分先后顺序</span><br><span class="line">ls  -al (常见)ls  -a  -l</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203071116336.png" alt="image-20220307111652259"></p><p><img src="https://image.cpen.top/image/202203071117622.png" alt="image-20220307111703548"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//一般不分先后顺序</span><br><span class="line">[root@localhost ~]# ls  -al</span><br><span class="line">[root@localhost ~]# ls  -la</span><br><span class="line">[root@localhost ~]# ls  -a  -l</span><br><span class="line">[root@localhost ~]# ls  -l  -a</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//既没有参数，也没有选项，看当前 .</span><br><span class="line">可以没有参数和选项</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203071126544.png" alt="image-20220307112647502"></p><hr><h2 id="八-通配符">八. * ? 通配符</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//rm   -rf  删除</span><br><span class="line">  -rf  强制删除</span><br><span class="line">* 代表任意字符  通配符</span><br><span class="line">? 代表一个字符  通配符</span><br><span class="line"></span><br><span class="line">-r递归</span><br><span class="line">-f强制删除，不给予提醒忽略不存在的文件</span><br><span class="line">-f, --force 强制删除。忽略不存在的文件，不提示确认</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203101214413.png" alt="image-20220310121434322"></p><p><img src="https://image.cpen.top/image/202203101214632.png" alt="image-20220310121441584"></p><hr><h2 id="九-绝对路径、相对路径">九. 绝对路径、相对路径</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//相对路径 和 绝对路径</span><br><span class="line">//绝对路径</span><br><span class="line">不考虑你当前的位置，从“/”到达目标文件需要经过的文件系统目录树的所有分支/home/hello/docs/share</span><br><span class="line">从/开始，一层一层往下走，不能跳跃，而且是绝对不会搞错的路径</span><br><span class="line">//相对路径</span><br><span class="line">参照你当前的位置，到达目标文件需要经过的文件系统目录树的所有分</span><br><span class="line">不以“/”开头</span><br><span class="line">不是以/开头的路径，可进可退</span><br><span class="line">以当前目录作为参照物</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203071134064.png" alt="image-20220307113450019"></p><p><img src="https://image.cpen.top/image/202203071134553.png" alt="image-20220307113458512"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//cd  ./hunan（不要这么写） 和 cd  hunan  效果一样</span><br></pre></td></tr></table></figure><hr><h2 id="十-1…100">十. {1…100}</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#注：这些操作也可以↓</span></span><br><span class="line">[root@cPen_centos8 lianxi]<span class="comment"># rm -rf &#123;1..50&#125;.txt</span></span><br><span class="line">[root@cPen_centos8 ~]<span class="comment"># echo &#123;1..10&#125;</span></span><br><span class="line">1 2 3 4 5 6 7 8 9 10</span><br><span class="line">//<span class="built_in">touch</span>  sc&#123;1..100&#125;.txt</span><br><span class="line"><span class="built_in">mkdir</span>  hunan&#123;1..100&#125;</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203101215608.png" alt="image-20220310121548513"></p><p><img src="https://image.cpen.top/image/202203101216340.png" alt="image-20220310121624213"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//rm  -rf  hunan*删除上面建的文件</span><br><span class="line">rm  -rf  sc*.txt删除上面建的.txt文件</span><br><span class="line">//touch  sc&#123;1..100&#125;.txt创建文件 sc1.txt、sc2.txt……sc100.txt</span><br><span class="line">cp  *.txt  beijing复制文件不需要接 -r 复制这些文件到beijing 文件夹下</span><br></pre></td></tr></table></figure><hr>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>01_Linux基础-部署-VMware-Xshell-Xftp-内核-安迪比尔定理</title>
      <link href="/blog/posts/48860.html"/>
      <url>/blog/posts/48860.html</url>
      
        <content type="html"><![CDATA[<p>摘要：博客迁移 <a href="https://blog.csdn.net/cpen_web"><code>https://blog.csdn.net/cpen_web</code></a> → 本站<span id="more"></span></p><h1 id="01-Linux基础-部署-VMware-Xshell-Xftp-内核-安迪比尔定理">01_Linux基础-部署-VMware-Xshell-Xftp-内核-安迪比尔定理</h1><p><a href="https://blog.csdn.net/cpen_web">博客🔗：https://blog.csdn.net/cpen_web</a></p><hr><p>CentOS开源 免费 — ==CentOS是Linux里的开源免费版本==</p><h2 id="一-配置虚拟机">一. 配置虚拟机</h2><h3 id="1-新建虚拟机">1. 新建虚拟机</h3><p><img src="https://image.cpen.top/image/202203061328865.png" alt="image-20220306132810763"></p><p><img src="https://image.cpen.top/image/202203061328202.png" alt="image-20220306132843159"></p><p><img src="https://image.cpen.top/image/202203061328076.png" alt="image-20220306132852047"></p><p><img src="https://image.cpen.top/image/202203061329324.png" alt="image-20220306132944296"></p><p><img src="https://image.cpen.top/image/202203061329906.png" alt="image-20220306132951879"></p><p><img src="https://image.cpen.top/image/202203061332226.png" alt="image-20220306133209184"></p><p><img src="https://image.cpen.top/image/202203061332550.png" alt="image-20220306133239524"></p><h3 id="2-放-镜像文件">2. 放 镜像文件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">镜像文件其实就是 系统盘</span><br><span class="line">iso结尾，iso其实就是压缩格式的文件 --- 里面很多文件</span><br><span class="line"></span><br><span class="line">从虚拟机里出来：按 Ctrl + Alt</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203061334787.png" alt="image-20220306133412744"></p><p><img src="https://image.cpen.top/image/202203061334233.png" alt="image-20220306133424202"></p><p><img src="https://image.cpen.top/image/202203061334094.png" alt="image-20220306133432057"></p><p><img src="https://image.cpen.top/image/202203061334231.png" alt="image-20220306133440201"></p><p><img src="https://image.cpen.top/image/202203061334174.png" alt="image-20220306133446130"></p><p><img src="https://image.cpen.top/image/202203061334283.png" alt="image-20220306133452249"></p><h3 id="总结">总结</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">注①：root用户不需要创建，默认有，用户名就叫root</span><br><span class="line">Linux里的超级用户 root 123456</span><br><span class="line"></span><br><span class="line">注②：用虚拟机的意思其实和花钱买云服务器一模一样</span><br><span class="line"></span><br><span class="line">注③：1个CPU核心 对应 4G内存</span><br><span class="line"></span><br><span class="line">注④：企业服务器用xeon（至强）</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203061336083.png" alt="image-20220306133619051"></p><hr><h2 id="二-云厂商">二. 云厂商</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">阿里云</span><br><span class="line">--- 阿里云国际第四大云服务，主要业务在国内</span><br><span class="line">--- 国际上：亚马逊云、Google云、微软云、阿里云</span><br><span class="line">--- 带宽在云服务器里面是稀缺资源，越大价格越贵</span><br><span class="line">--- 学习时购买一个学生机（阿里云/腾讯云） </span><br></pre></td></tr></table></figure><hr><h2 id="三-CPU">三. CPU</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">cpu的概念 --- 大脑</span><br><span class="line">处理器：CPU中央处理器 （Central Processing Unit）</span><br><span class="line">--- 颗：物理的</span><br><span class="line">--- 核心：逻辑的</span><br><span class="line"></span><br><span class="line">1颗CPU里面有8个核 ==&gt; 1个鸡蛋2个黄</span><br><span class="line">--- 核心越多CPU的处理能力越强，速度越快</span><br><span class="line"></span><br><span class="line">--- 个人电脑用酷睿，企业的服务器用至强（xeon）</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">电脑cpu厂家：</span><br><span class="line">- Intel英特尔美国</span><br><span class="line">Core酷睿 i3 i5 i7 i9 ==&gt; 个人电脑</span><br><span class="line">Xeon至强 ==&gt; 服务器使用的CPU</span><br><span class="line">- AMD美国</span><br></pre></td></tr></table></figure><hr><h2 id="四-虚拟机-2G2核">四. 虚拟机 2G2核</h2><p>==虚拟机2G2C怎么回事？==</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">并不是分2个核2G给它，虚拟机跑起来后其实是进程，名字叫VMware .exe 不会消耗1个G，也就几百兆。虚拟机模拟出来的操作系统配置是两个核一个G，虚拟出的虚幻世界，进程并不会消耗一个G两个核，但确实会用电脑里面的cpu。都是模拟出来的，假的。</span><br></pre></td></tr></table></figure><hr><h2 id="五-虚拟机软件">五. 虚拟机软件</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">部署环境</span><br><span class="line">--- 软件：vmware workstation 15 pro</span><br><span class="line">--- xshell - windows里连接Linux系统的工具 ==&gt; 远程连接工具</span><br><span class="line">--- xftp - windows里和Linux之间传输文件的工具</span><br></pre></td></tr></table></figure><h3 id="Xshell">Xshell</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">登录提示符 (vmware)</span><br><span class="line">--- Localhost 代表本机的主机名(默认主机名)==&gt; local 本地；host 主机(电脑)</span><br><span class="line">--- login 登录</span><br><span class="line">--- root Linux里的超级用户，默认有 不需要新建</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203061343511.png" alt="image-20220306134312489"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">--- exit 退出系统 / 注销</span><br><span class="line">--- Ctrl + L 清除屏幕</span><br><span class="line">--- ip add 查看ip地址 ==&gt; 每台计算机都需要一个ip地址 去上网</span><br><span class="line">--- inet ==&gt; Internet</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203061343105.png" alt="image-20220306134332067"></p><h4 id="使用步骤">使用步骤</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1. 双击 Xshell</span><br><span class="line"></span><br><span class="line">2. 未知主机秘钥，点“接受并保存”</span><br><span class="line"></span><br><span class="line">3. 用户名输入“root”密码输入“123456”，点确定（点记住用户名、密码）</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203061345353.png" alt="image-20220306134541298"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">--- 看到# 显示连接成功 ==&gt; 在Windows里成功连到Linux</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203061345565.png" alt="image-20220306134559536"></p><p><img src="https://image.cpen.top/image/202203061346527.png" alt="image-20220306134606498"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">--- 调背景的（ANSI Colors），可以调成白色背景</span><br><span class="line">--- 旁边的A logo 可以调字体</span><br></pre></td></tr></table></figure><p><img src="https://image.cpen.top/image/202203061346372.png" alt="image-20220306134622329"></p><hr><h2 id="六-CentOS">六. CentOS</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CentOS --- Community ENTerprise Operating System ==&gt; 社区企业版操作系统</span><br><span class="line">Red Hat Enterprise Linux (RHEL) ==&gt; 红帽企业版linux系统 ==&gt; 开源 ==&gt; centos</span><br><span class="line">CentOS 山寨的Redhat ==&gt; CentOS被Redhat收购了</span><br></pre></td></tr></table></figure><h3 id="内核">内核</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">内核</span><br><span class="line">--- 主要使用 C语言 编写 ==&gt; 开源免费</span><br><span class="line">--- 安卓/centos/redhat/Ubuntu用的Linux内核</span><br><span class="line">--- Linus李纳斯 写出内核，还写了GIT 版本控制软件</span><br><span class="line">--- 内核相当于汽车的发动机</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kernel内核</span><br><span class="line">--- 内核：Linux系统内部最核心的软件</span><br><span class="line">--- http://www.kernel.org/ ==&gt; organization 组织</span><br></pre></td></tr></table></figure><h4 id="内核作用">内核作用</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">内核的作用：</span><br><span class="line">- 1.对CPU进行调度管理</span><br><span class="line">- 2.对内存进行分配管理</span><br><span class="line">- 3.对磁盘进行管理</span><br><span class="line">- 4.对进程进行管理</span><br><span class="line">- 5.其他硬件 (网卡、声卡、显卡等)</span><br></pre></td></tr></table></figure><hr><h2 id="七-Linux-与-Windows-区别">七. Linux 与 Windows 区别</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Linux和windows的区别：</span><br><span class="line">--- Linux开源</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># root @ CentOS in ~ [13:51:11]</span></span><br><span class="line">$ <span class="built_in">uname</span> -r</span><br><span class="line">4.18.0-193.14.2.el8_2.x86_64</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解释</span></span><br><span class="line">--- el8 ==&gt; Enterprise Linux 8</span><br><span class="line">--- x86_64 ==&gt; 系统64位</span><br><span class="line">- 64位 CPU一次性处理数据的大小</span><br><span class="line">- 1字节 = 8位</span><br><span class="line">- CPU带领操作系统的发展</span><br></pre></td></tr></table></figure><hr><h2 id="八-安迪比尔定理">八. 安迪比尔定理</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">安迪比尔定理</span><br><span class="line">--- CPU带领操作系统的发展 ==&gt; 硬件与软件，现在手机行业</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">安迪-比尔定理 （Andy and Bill’s Law）是对IT产业中软件和硬件升级换代关系的一个概括。原话是 “Andy gives, Bill takes away.（安迪提供什么，比尔拿走什么。）” 安迪指英特尔前CEO安迪·格鲁夫，比尔指微软前任CEO比尔·盖茨，这句话的意思是，硬件提高的性能，很快被软件消耗掉了。</span><br></pre></td></tr></table></figure><hr>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
  
  
    
    
    <entry>
      <title></title>
      <link href="/blog/manifest.json"/>
      <url>/blog/manifest.json</url>
      
        <content type="html"><![CDATA[{"name":"MycpenBlog","short_name":"MycpenBlog","theme_color":"#5CA1FF","background_color":"#5CA1FF","display":"standalone","scope":"/","start_url":"/","icons":[{"src":"/blog/img/siteicon/16.png","sizes":"16x16","type":"image/png"},{"src":"/blog/img/siteicon/32.png","sizes":"32x32","type":"image/png"},{"src":"/blog/img/siteicon/48.png","sizes":"48x48","type":"image/png"},{"src":"/blog/img/siteicon/64.png","sizes":"64x64","type":"image/png"},{"src":"/blog/img/siteicon/128.png","sizes":"128x128","type":"image/png"},{"src":"/blog/img/siteicon/144.png","sizes":"144x144","type":"image/png"},{"src":"/blog/img/siteicon/512.png","sizes":"512x512","type":"image/png"}],"splash_pages":null}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>关于自己</title>
      <link href="/blog/about/index.html"/>
      <url>/blog/about/index.html</url>
      
        <content type="html"><![CDATA[<details class="folding-tag" ><summary> <p style=font-size:28px><b>👲 基本信息</b></p> </summary>              <div class='content'>              <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">Name:</span> <span class="string">Peng</span></span><br><span class="line"><span class="attr">Age:</span> <span class="number">23</span></span><br><span class="line"><span class="attr">Address:</span> <span class="string">Jiangsu,Taizhou</span></span><br><span class="line"><span class="attr">Blog:</span> <span class="string">https://cpen.top/</span></span><br><span class="line"><span class="attr">Github:</span> <span class="string">https://github.com/mycpen</span></span><br><span class="line"><span class="attr">Hobbies:</span> <span class="string">Ctrl</span> <span class="string">C</span> <span class="string">+</span> <span class="string">Ctrl</span> <span class="string">V</span></span><br></pre></td></tr></table></figure>              </div>            </details><details class="folding-tag" ><summary> <p style=font-size:28px><b>🔨 技术栈</b></p> </summary>              <div class='content'>              <ul style="font-size:16px">    <li><b>IT菜鸟</b></li>    <!-- <li><b>测试</b></li> -->    <!-- <li><b>测试</b></li> -->    <li><b>……</b></li></ul>              </div>            </details><details class="folding-tag" ><summary> <p style=font-size:28px><b>💪 技能学习</b></p> </summary>              <div class='content'>              <table><thead><tr><th>🏅基本掌握</th><th>💪正在努力</th><th>🗓️未来可期</th></tr></thead><tbody><tr><td>✅📃Markdown</td><td>☑️</td><td>🔲</td></tr><tr><td>✅💠Git</td><td>☑️</td><td>🔲</td></tr><tr><td>✅🐧Linux</td><td>☑️</td><td>🔲</td></tr><tr><td>✅🐚Shell</td><td>☑️</td><td>🔲</td></tr><tr><td>✅🐬MySQL</td><td>☑️</td><td>🔲</td></tr><tr><td>✅</td><td>☑️</td><td>🔲</td></tr><tr><td>✅</td><td>☑️</td><td>🔲</td></tr><tr><td>✅</td><td>☑️</td><td>🔲</td></tr><tr><td>✅</td><td>☑️</td><td>🔲</td></tr><tr><td>✅</td><td>☑️</td><td>🔲</td></tr><tr><td>✅</td><td>☑️</td><td>🔲</td></tr></tbody></table>              </div>            </details><details class="folding-tag" ><summary> <p style=font-size:28px><b>💌 联系博主</b></p> </summary>              <div class='content'>              <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">Email:</span> <span class="string">mycpen@qq.com</span></span><br><span class="line"><span class="attr">QQ:</span> <span class="number">1533431376</span></span><br></pre></td></tr></table></figure>              </div>            </details><details class="folding-tag" ><summary> <p style=font-size:28px><b>💘 关于本站</b></p> </summary>              <div class='content'>              <ul><li><p><a href="https://hexo.io/zh-cn/">Hexo</a> 框架 + <a href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a> 主题</p></li><li><p>博客中的部分图片源于网络，侵删</p></li><li><p>本博客文章采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">CC BY-NC-SA 4.0</a> 协议，转载请注明出处</p></li><li><p>欢迎小伙伴们交换友链，具体说明可在 <a href="/blog/link/">友链页</a> 查看</p></li></ul>              </div>            </details><details class="folding-tag" ><summary> <p style=font-size:28px><b>🙋 免责声明</b></p> </summary>              <div class='content'>              <ul>    <li>本站以分享互联网经验、学习知识为目的，所有文章所涉及使用的工具、资源等均来自互联网， 仅供学习和研究使用，版权归作者所有，如果无意之中侵犯了您的版权，请来信告知。本站将在第一时间删除！另外， 本站内的文章多为博主原创，大部分是由CSDN平台搬迁过来，仅供学习交流之用，不参与商业用途。</li>    <li>遵守相关法律法规，由于本站资源部分来源于网络，开发也是使用开源模板，故无法核实资源侵权的真实性，无论出于何种目的要求本站删除内容，“您”均需要提供相关证明，否则不予处理。</li></ul>              </div>            </details>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/blog/blog/manifest.json"/>
      <url>/blog/blog/manifest.json</url>
      
        <content type="html"><![CDATA[{"name":"MycpenBlog","short_name":"MycpenBlog","theme_color":"#5CA1FF","background_color":"#5CA1FF","display":"standalone","scope":"/","start_url":"/","icons":[{"src":"/blog/img/siteicon/16.png","sizes":"16x16","type":"image/png"},{"src":"/blog/img/siteicon/32.png","sizes":"32x32","type":"image/png"},{"src":"/blog/img/siteicon/48.png","sizes":"48x48","type":"image/png"},{"src":"/blog/img/siteicon/64.png","sizes":"64x64","type":"image/png"},{"src":"/blog/img/siteicon/128.png","sizes":"128x128","type":"image/png"},{"src":"/blog/img/siteicon/144.png","sizes":"144x144","type":"image/png"},{"src":"/blog/img/siteicon/512.png","sizes":"512x512","type":"image/png"}],"splash_pages":null}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>bangumis</title>
      <link href="/blog/bangumis/index.html"/>
      <url>/blog/bangumis/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>分类</title>
      <link href="/blog/categories/index.html"/>
      <url>/blog/categories/index.html</url>
      
        <content type="html"><![CDATA[<!-- 文章分类统计图 --><div id="categories-chart" data-parent="true" style="border-radius: 8px; height: 300px; padding: 10px;"></div>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>博客统计</title>
      <link href="/blog/census/index.html"/>
      <url>/blog/census/index.html</url>
      
        <content type="html"><![CDATA[<!-- 留意 /baidu-tongji-api github action 是否自动执行，密钥一月后过期 --><!-- https://blog.eurkon.com/post/61763977.html --><div class="tip info"><p>自 2022-08-01 开始统计</p></div><div id="visit_container" style="border-radius: 8px;"></div><br><div id="map-chart" style="height: 600px; padding: 10px; text-align: center;"><i class="fa fas fa-spinner fa-spin" style="font-size: 150px; line-height: 580px;"></i></div><br><div id="trends-chart" style="height: 300px; padding: 10px; text-align: center;"><i class="fa fas fa-spinner fa-spin" style="font-size: 150px; line-height: 280px;"></i></div><br><div id="sources-chart" style="height: 300px; padding: 10px; text-align: center;"><i class="fa fas fa-spinner fa-spin" style="font-size: 150px; line-height: 280px;"></i></div><!-- 访问地图 --><!-- <div id="map-chart" style="border-radius: 8px; height: 600px; padding: 10px;"></div> --><!-- 访问趋势 --><!-- <div id="trends-chart" style="border-radius: 8px; height: 300px; padding: 10px;"></div> --><!-- 访问来源 --><!-- <div id="sources-chart" style="border-radius: 8px; height: 300px; padding: 10px;"></div> --><script defer data-pjax src="/blog/js/census.js"></script><script defer data-pjax src="/blog/js/visit_calendar.js"></script>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>文章统计</title>
      <link href="/blog/charts/index.html"/>
      <url>/blog/charts/index.html</url>
      
        <content type="html"><![CDATA[<!-- https://blog.eurkon.com/post/1213ef82.html --><div class="tip info"><p>自 2022-07-01 开始统计<br>标签统计图 已剔除与分类同名的标签</p></div><!-- 文章发布时间统计图 --><div id="posts-chart" data-start="2022-07" style="border-radius: 8px; height: 300px; padding: 10px;"></div><!-- 文章标签统计图 --><div id="tags-chart" data-length="10" style="border-radius: 8px; height: 300px; padding: 10px;"></div><!-- 文章分类统计图 --><div id="categories-chart" data-parent="true" style="border-radius: 8px; height: 300px; padding: 10px;"></div>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/blog/css/butterfly.css"/>
      <url>/blog/css/butterfly.css</url>
      
        <content type="html"><![CDATA[@font-face {  font-family: 'SAOUI';  src: url("https://cdn.jsdelivr.net/npm/akilar-candyassets/fonts/SAOUI.ttf");  font-display: swap;}#fMessageBoard {  font-size: 20px;  background: rgba(249,249,249,0.8);  color: rgba(60,60,61,0.7);  border-radius: 5px;  font-weight: bolder;  box-shadow: 2px 2px 10px #888;  font-family: 'SAOUI' !important;  width: 90%;  max-width: 810px;  margin: auto;  height: 260px;  overflow: hidden;}#fMessageBoard .fUpdatedTime {  text-align: center;  height: 40px;}#fMessageBoard .fMessageItem {  background: rgba(207,207,207,0.8);  box-shadow: 0px 0px 15px #bcbcbc inset;}#fMessageBoard .fMessageItem .fItem {  height: 60px;  background: transparent;  display: flex;}#fMessageBoard .fMessageItem .fItem .fLabel {  padding: 0 3%;  align-self: center;  text-align: center;  width: 25%;  overflow: hidden;}#fMessageBoard .fMessageItem .fItem .fMeasureBar {  align-self: center;  text-align: center;  height: 20px;  width: 50%;  display: block;  background: rgba(117,117,117,0.6);  border-radius: 5px;  overflow: hidden;  display: block;  box-shadow: 2px 2px 5px rgba(21,21,21,0.6);}#fMessageBoard .fMessageItem .fItem .fMeasureBar .fMeasure {  display: block;  height: 20px;  text-align: center;  font-size: 12px;}#fMessageBoard .fMessageItem .fItem .fMessage {  align-self: center;  text-align: center;  padding: 0 3%;  width: 25%;}#fMessageBoard #switchRankBtn {  width: auto;  max-width: 250px;  height: 40px;  display: flex;  text-align: center;  margin: auto;  flex-direction: row;  flex-wrap: wrap;  align-content: space-around;  justify-content: space-around;}#fMessageBoard #switchRankBtn #rankByCreated {  font-size: 20px;  height: 30px;  width: 80px;  display: inline-block;  padding: 2px 5px;}#fMessageBoard #switchRankBtn #rankByUpdated {  font-size: 20px;  height: 30px;  width: 80px;  display: inline-block;  padding: 2px 5px;}#fMessageBoard #switchRankBtn input#switchRankMode[type=checkbox] {  display: none;}#fMessageBoard #switchRankBtn label#switchRank {  cursor: pointer;  text-indent: -9999px;  width: 40px;  height: 20px;  margin: 15px 0px;  background: #3a8ec4;  display: inline-block;  border-radius: 10px;  position: relative;}#fMessageBoard #switchRankBtn label#switchRank:after {  content: '';  position: absolute;  top: 2px;  left: 2px;  width: 16px;  height: 16px;  background: #fff;  border-radius: 8px;  transition: 0.3s;}#fMessageBoard #switchRankBtn label#switchRank:active:after {  width: 50px;}#fMessageBoard #switchRankBtn input#switchRankMode:checked + label {  background: #d8653e;}#fMessageBoard #switchRankBtn input#switchRankMode:checked + label:after {  left: calc(100% - 2px);  transform: translateX(-100%);}#fcircleMoreBtn {  width: 90%;  max-width: 810px;  height: 30px;  margin: auto;  background: rgba(249,249,249,0.8);  color: rgba(60,60,61,0.7);  box-shadow: 2px 2px 10px #888;  border-radius: 5px;  font-weight: bolder;  text-align: center;  display: flex;  flex-direction: column;  justify-content: space-around;}#fcircleContainer {  font-family: 'SAOUI' !important;  width: 100%;  max-width: 900px;  height: auto;  margin: auto;}#fcircleContainer a {  text-decoration: none;}#fcircleContainer a:hover {  text-decoration: none !important;}#fcircleContainer .fArticleItem {  margin: 20px 5%;  height: 150px;  display: flex;  background: rgba(249,249,249,0.8);  color: rgba(60,60,61,0.7);  border-radius: 5px;  font-weight: bolder;  box-shadow: 2px 2px 10px #888;  overflow: hidden;}#fcircleContainer .fArticleItem .fArticleAvatar {  width: 30%;  display: flex;  flex-direction: column;}#fcircleContainer .fArticleItem .fArticleAvatar .fAvatar {  align-self: center;  text-align: center;}#fcircleContainer .fArticleItem .fArticleAvatar .fAvatar img {  width: 75px;  height: 75px;  margin: 15px 5px !important;  border-radius: 25px;}#fcircleContainer .fArticleItem .fArticleAvatar .fAvatar .img-alt.is-center {  display: none;}#fcircleContainer .fArticleItem .fArticleAvatar .fArticleAuthor {  width: 80%;  margin: 3px 0px;  align-self: center;  text-align: center;  transform: skewX(-10deg);  height: 40px;  white-space: nowrap;  overflow: hidden;  text-overflow: ellipsis;}#fcircleContainer .fArticleItem .fArticleMessage {  display: flex;  flex-direction: column;  width: 70%;}#fcircleContainer .fArticleItem .fArticleMessage a.fArticleTitle {  align-self: center;  text-align: center;  font-size: 20px;  line-height: 50px;  width: 80%;  padding: 0 10%;  color: rgba(60,60,61,0.7);  white-space: nowrap;  overflow: hidden;  text-overflow: ellipsis;}#fcircleContainer .fArticleItem .fArticleMessage a.fArticleTitle:hover:before {  position: fixed;  width: fit-content;  max-width: 80%;  margin: auto;  left: 0;  right: 0;  top: 10%;  border-radius: 10px;  text-align: center;  z-index: 100;  content: attr(data-title);  font-size: 20px;  color: #fff;  padding: 10px;  background-color: rgba(60,60,61,0.7);  white-space: break-spaces;}#fcircleContainer .fArticleItem .fArticleMessage .fArticleTime {  width: 100%;  height: 100px;  text-align: center;  display: flex;}#fcircleContainer .fArticleItem .fArticleMessage .fArticleTime .fArticleCreated {  width: 40%;  margin: 5% 0% 5% 10%;  text-align: center;  align-self: center;  padding: 15px 0;}#fcircleContainer .fArticleItem .fArticleMessage .fArticleTime .fArticleUpdated {  width: 40%;  margin: 5% 10% 5% 0%;  text-align: center;  align-self: center;  padding: 15px 0;}#fcircleContainer .fArticleItem .fArticleMessage .fArticleTime i:before {  margin-right: 5px;}@media screen and (max-width: 768px) {  #fMessageBoard {    font-size: 16px;  }}@media screen and (max-width: 400px) {  #fcircleContainer .fArticleItem .fArticleMessage .fArticleTime i {    display: none;  }  #fMessageBoard {    font-size: 12px;  }  #fMessageBoard #switchRankBtn #rankByCreated {    font-size: 12px;  }  #fMessageBoard #switchRankBtn #rankByUpdated {    font-size: 12px;  }  #fcircleContainer .fArticleItem .fArticleAvatar {    display: none;  }  #fcircleContainer .fArticleItem .fArticleMessage {    width: 100%;  }  #fcircleContainer .fArticleItem .fArticleMessage a.fArticleTitle:hover:before {    font-size: 16px;  }}@media screen and (max-width: 300px) {  #fMessageBoard .fUpdatedTime span.fLabel {    display: none;  }  #fMessageBoard .fMessageItem .fItem .fLabel {    width: 50%;  }  #fMessageBoard .fMessageItem .fItem meter.fMeasureBar {    display: none;  }  #fMessageBoard .fMessageItem .fItem .fMessage {    width: 50%;  }  #fMessageBoard span#rankByCreated {    display: none !important;  }  #fMessageBoard span#rankByUpdated {    display: none !important;  }}[data-theme="dark"] #fMessageBoard {  background: rgba(21,21,21,0.7);  color: rgba(249,249,249,0.8);  box-shadow: 0px 0px 5px rgba(102,218,215,0.5);}[data-theme="dark"] #fMessageBoard .fMessageItem {  background: rgba(21,21,21,0.7);  box-shadow: 0px 0px 5px rgba(222,221,174,0.5) inset;}[data-theme="dark"] #fMessageBoard #switchRankBtn input#switchRankMode[type=checkbox] {  display: none;}[data-theme="dark"] #fMessageBoard #switchRankBtn label#switchRank {  background: #3a8ec4;}[data-theme="dark"] #fMessageBoard #switchRankBtn label#switchRank:after {  background: rgba(21,21,21,0.7);}[data-theme="dark"] #fMessageBoard #switchRankBtn input#switchRankMode:checked + label {  background: #d8653e;}[data-theme="dark"] #fcircleMoreBtn {  background: rgba(21,21,21,0.7);  color: rgba(249,249,249,0.8);  box-shadow: 2px 2px 5px rgba(102,218,215,0.5);}[data-theme="dark"] #fcircleMoreBtn:hover {  box-shadow: 0px 0px 2px rgba(102,218,215,0.5);}[data-theme="dark"] #fcircleContainer .fArticleItem {  background: rgba(21,21,21,0.7);  color: rgba(249,249,249,0.8);  box-shadow: 2px 2px 5px rgba(102,218,215,0.5);}[data-theme="dark"] #fcircleContainer .fArticleItem:hover {  box-shadow: 0px 0px 2px rgba(102,218,215,0.5);}[data-theme="dark"] #fcircleContainer .fArticleItem .fArticleMessage a.fArticleTitle {  color: rgba(249,249,249,0.8);}[data-theme="dark"] #fcircleContainer .fArticleItem .fArticleMessage a.fArticleTitle:hover:before {  color: rgba(60,60,61,0.7);  background-color: rgba(249,249,249,0.8);}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>留言板</title>
      <link href="/blog/comments/index.html"/>
      <url>/blog/comments/index.html</url>
      
        <content type="html"><![CDATA[<p style="font-size:28px"><b>🙆‍♀️ 社会主义核心价值观：</b></p><div class='checkbox green checked'><input type="checkbox" checked="checked"/>            <p>富强 民主 文明 和谐</p>            </div><div class='checkbox green checked'><input type="checkbox" checked="checked"/>            <p>自由 平等 公正 法治</p>            </div><div class='checkbox green checked'><input type="checkbox" checked="checked"/>            <p>爱国 敬业 诚信 友善</p>            </div><p></p><p style="font-size:28px"><b>📢 留言须知：</b></p><div class='checkbox green checked'><input type="checkbox" checked="checked"/>            <p>对博客有任何疑问欢迎留言</p>            </div><div class='checkbox green checked'><input type="checkbox" checked="checked"/>            <p>留言建议留下你的昵称与邮箱，方便及时收到博主回复</p>            </div><div class='checkbox green checked'><input type="checkbox" checked="checked"/>            <p>可以通过聊天机器人发送消息，收到会及时回复</p>            </div><div class='checkbox times red checked'><input type="checkbox" checked="checked"/>            <p>你在本站发表的内容你无权删除，并且记录评论者的ip</p>            </div><div class='checkbox times red checked'><input type="checkbox" checked="checked"/>            <p>请不要恶意评论，请不要评论违反中国法律的内容</p>            </div><p></p><p></p> ]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/blog/css/categorybar.css"/>
      <url>/blog/css/categorybar.css</url>
      
        <content type="html"><![CDATA[#categoryBar {  width: 100% !important;}ul.categoryBar-list {  margin: 5px 5px 0 5px !important;  padding: 0 !important;}li.categoryBar-list-item {  font-weight: bold;  display: inline-block;  height: 180px !important;  margin: 5px 0.5% 0 0.5% !important;  background-image: linear-gradient(rgba(0,0,0,0.4) 25%, rgba(16,16,16,0) 100%);  border-radius: 10px;  padding: 25px 0 25px 25px !important;  box-shadow: rgba(50,50,50,0.3) 50px 50px 50px 50px inset;  overflow: hidden;  background-size: 100% !important;  background-position: center !important;}li.categoryBar-list-item:hover {  background-size: 110% !important;  box-shadow: inset 500px 50px 50px 50px rgba(50,50,50,0.6);}li.categoryBar-list-item:hover span.categoryBar-list-descr {  transition: all 0.5s;  transform: translate(-100%, 0);}a.categoryBar-list-link {  color: #fff !important;  font-size: 20px !important;}a.categoryBar-list-link::before {  content: '|' !important;  color: #fff !important;  font-size: 20px !important;}a.categoryBar-list-link:after {  content: '';  position: relative;  width: 0;  bottom: 0;  display: block;  height: 3px;  border-radius: 3px;  background-color: #fff;}a.categoryBar-list-link:hover:after {  width: 90%;  left: 1%;  transition: all 0.5s;}span.categoryBar-list-count {  display: block !important;  color: #fff !important;  font-size: 20px !important;}span.categoryBar-list-count::before {  content: '\f02d' !important;  padding-right: 15px !important;  display: inline-block;  font-weight: 600;  font-style: normal;  font-variant: normal;  font-family: 'Font Awesome 6 Free';  text-rendering: auto;  -webkit-font-smoothing: antialiased;}span.categoryBar-list-descr {  padding: 5px;  display: block !important;  color: #fff !important;  font-size: 20px !important;  position: relative;  right: -100%;}@media screen and (max-width: 650px) {  li.categoryBar-list-item {    width: 48% !important;    height: 150px !important;    margin: 5px 1% 0 1% !important;  }}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/blog/css/clock.css"/>
      <url>/blog/css/clock.css</url>
      
        <content type="html"><![CDATA[@font-face {    font-family: UnidreamLED;    src: url(https://cdn.cbd.int/anzhiyu-blog/fonts/UnidreamLED.ttf);    font-display: swap;}@font-face {  font-family: "qweather-icons";  src: url("./fonts/qweather-icons.woff2") format("woff2"),url("./fonts/qweather-icons.woff") format("woff"),url("./fonts/qweather-icons.ttf") format("truetype");}span.card-clock-weather,.card-clock-location,.card-clock-windDir {  font-family: 'ZhuZiAYuanJWD';}span.temp {  font-family: UnidreamLED;}#hexo_electric_clock {  padding: 20px;}.card-clock {  padding: 0 !important;}.card-background {  height: 153px;  margin: 15px;  border-radius: 8px;  box-shadow: inset 0px 0px 4px 2px rgb(145 148 154 / 40%);  z-index: 2;}.clock-row {  font-family: UnidreamLED;  font-weight: 400;  color: #000;  display: flex;  justify-content: space-between;  flex-wrap: nowrap;  white-space: nowrap;}.card-clock-clockdate,.card-clock-ip {  text-align: left;}.card-clock-location,.card-clock-weather {  text-align: center;}.card-clock-dackorlight,.card-clock-humidity {  text-align: right;}.card-clock-time {  flex: 1;  font-family: UnidreamLED;  font-size: 38px;  text-align: center;  line-height: 1.5;}[data-theme='dark'] .card-background {  background-color: #212121;}[data-theme='dark'] .clock-row {  color: #fff;}@media screen and (min-width: 900px){  .card-clock-humidity {     display: block;  }}@media screen and (max-width: 1086px){  .card-clock-humidity {    display: none;  }}/*!* QWeather Icons (https://icons.qweather.com)* Copyright QWeather 和风天气 (https://www.qweather.com)* License:  Code for MIT, Icons for CC BY 4.0*/[class^="qi-"]::before,[class*=" qi-"]::before {  display: inline-block;  font-family: "qweather-icons" !important;  font-style: normal;  font-weight: normal !important;  font-variant: normal;  text-transform: none;  line-height: 1;  vertical-align: -.125em;  -webkit-font-smoothing: antialiased;  -moz-osx-font-smoothing: grayscale;}.qi-100::before { content: "\f101"; }.qi-101::before { content: "\f102"; }.qi-102::before { content: "\f103"; }.qi-103::before { content: "\f104"; }.qi-104::before { content: "\f105"; }.qi-150::before { content: "\f106"; }.qi-151::before { content: "\f107"; }.qi-152::before { content: "\f108"; }.qi-153::before { content: "\f109"; }.qi-300::before { content: "\f10a"; }.qi-301::before { content: "\f10b"; }.qi-302::before { content: "\f10c"; }.qi-303::before { content: "\f10d"; }.qi-304::before { content: "\f10e"; }.qi-305::before { content: "\f10f"; }.qi-306::before { content: "\f110"; }.qi-307::before { content: "\f111"; }.qi-308::before { content: "\f112"; }.qi-309::before { content: "\f113"; }.qi-310::before { content: "\f114"; }.qi-311::before { content: "\f115"; }.qi-312::before { content: "\f116"; }.qi-313::before { content: "\f117"; }.qi-314::before { content: "\f118"; }.qi-315::before { content: "\f119"; }.qi-316::before { content: "\f11a"; }.qi-317::before { content: "\f11b"; }.qi-318::before { content: "\f11c"; }.qi-350::before { content: "\f11d"; }.qi-351::before { content: "\f11e"; }.qi-399::before { content: "\f11f"; }.qi-400::before { content: "\f120"; }.qi-401::before { content: "\f121"; }.qi-402::before { content: "\f122"; }.qi-403::before { content: "\f123"; }.qi-404::before { content: "\f124"; }.qi-405::before { content: "\f125"; }.qi-406::before { content: "\f126"; }.qi-407::before { content: "\f127"; }.qi-408::before { content: "\f128"; }.qi-409::before { content: "\f129"; }.qi-410::before { content: "\f12a"; }.qi-456::before { content: "\f12b"; }.qi-457::before { content: "\f12c"; }.qi-499::before { content: "\f12d"; }.qi-500::before { content: "\f12e"; }.qi-501::before { content: "\f12f"; }.qi-502::before { content: "\f130"; }.qi-503::before { content: "\f131"; }.qi-504::before { content: "\f132"; }.qi-507::before { content: "\f133"; }.qi-508::before { content: "\f134"; }.qi-509::before { content: "\f135"; }.qi-510::before { content: "\f136"; }.qi-511::before { content: "\f137"; }.qi-512::before { content: "\f138"; }.qi-513::before { content: "\f139"; }.qi-514::before { content: "\f13a"; }.qi-515::before { content: "\f13b"; }.qi-800::before { content: "\f13c"; }.qi-801::before { content: "\f13d"; }.qi-802::before { content: "\f13e"; }.qi-803::before { content: "\f13f"; }.qi-804::before { content: "\f140"; }.qi-805::before { content: "\f141"; }.qi-806::before { content: "\f142"; }.qi-807::before { content: "\f143"; }.qi-900::before { content: "\f144"; }.qi-901::before { content: "\f145"; }.qi-999::before { content: "\f146"; }.qi-1001::before { content: "\f147"; }.qi-1002::before { content: "\f148"; }.qi-1003::before { content: "\f149"; }.qi-1004::before { content: "\f14a"; }.qi-1005::before { content: "\f14b"; }.qi-1006::before { content: "\f14c"; }.qi-1007::before { content: "\f14d"; }.qi-1008::before { content: "\f14e"; }.qi-1009::before { content: "\f14f"; }.qi-1010::before { content: "\f150"; }.qi-1011::before { content: "\f151"; }.qi-1012::before { content: "\f152"; }.qi-1013::before { content: "\f153"; }.qi-1014::before { content: "\f154"; }.qi-1015::before { content: "\f155"; }.qi-1016::before { content: "\f156"; }.qi-1017::before { content: "\f157"; }.qi-1018::before { content: "\f158"; }.qi-1019::before { content: "\f159"; }.qi-1020::before { content: "\f15a"; }.qi-1021::before { content: "\f15b"; }.qi-1022::before { content: "\f15c"; }.qi-1023::before { content: "\f15d"; }.qi-1024::before { content: "\f15e"; }.qi-1025::before { content: "\f15f"; }.qi-1026::before { content: "\f160"; }.qi-1027::before { content: "\f161"; }.qi-1028::before { content: "\f162"; }.qi-1029::before { content: "\f163"; }.qi-1030::before { content: "\f164"; }.qi-1031::before { content: "\f165"; }.qi-1032::before { content: "\f166"; }.qi-1033::before { content: "\f167"; }.qi-1034::before { content: "\f168"; }.qi-1035::before { content: "\f169"; }.qi-1036::before { content: "\f16a"; }.qi-1037::before { content: "\f16b"; }.qi-1038::before { content: "\f16c"; }.qi-1039::before { content: "\f16d"; }.qi-1040::before { content: "\f16e"; }.qi-1041::before { content: "\f16f"; }.qi-1042::before { content: "\f170"; }.qi-1043::before { content: "\f171"; }.qi-1044::before { content: "\f172"; }.qi-1045::before { content: "\f173"; }.qi-1046::before { content: "\f174"; }.qi-1047::before { content: "\f175"; }.qi-1048::before { content: "\f176"; }.qi-1049::before { content: "\f177"; }.qi-1050::before { content: "\f178"; }.qi-1051::before { content: "\f179"; }.qi-1052::before { content: "\f17a"; }.qi-1053::before { content: "\f17b"; }.qi-1054::before { content: "\f17c"; }.qi-1055::before { content: "\f17d"; }.qi-1056::before { content: "\f17e"; }.qi-1057::before { content: "\f17f"; }.qi-1058::before { content: "\f180"; }.qi-1059::before { content: "\f181"; }.qi-1061::before { content: "\f182"; }.qi-1064::before { content: "\f183"; }.qi-1101::before { content: "\f184"; }.qi-1302::before { content: "\f185"; }.qi-1402::before { content: "\f186"; }.qi-1601::before { content: "\f187"; }.qi-1602::before { content: "\f188"; }.qi-1603::before { content: "\f189"; }.qi-1604::before { content: "\f18a"; }.qi-1605::before { content: "\f18b"; }.qi-1606::before { content: "\f18c"; }.qi-1607::before { content: "\f18d"; }.qi-2001::before { content: "\f18e"; }.qi-2002::before { content: "\f18f"; }.qi-2003::before { content: "\f190"; }.qi-2004::before { content: "\f191"; }.qi-2005::before { content: "\f192"; }.qi-2006::before { content: "\f193"; }.qi-2007::before { content: "\f194"; }.qi-2008::before { content: "\f195"; }.qi-2009::before { content: "\f196"; }.qi-2010::before { content: "\f197"; }.qi-2011::before { content: "\f198"; }.qi-2012::before { content: "\f199"; }.qi-2013::before { content: "\f19a"; }.qi-2014::before { content: "\f19b"; }.qi-2015::before { content: "\f19c"; }.qi-2016::before { content: "\f19d"; }.qi-2017::before { content: "\f19e"; }.qi-2018::before { content: "\f19f"; }.qi-2019::before { content: "\f1a0"; }.qi-2020::before { content: "\f1a1"; }.qi-2021::before { content: "\f1a2"; }.qi-2022::before { content: "\f1a3"; }.qi-2023::before { content: "\f1a4"; }.qi-2024::before { content: "\f1a5"; }.qi-2025::before { content: "\f1a6"; }.qi-2026::before { content: "\f1a7"; }.qi-2027::before { content: "\f1a8"; }.qi-2028::before { content: "\f1a9"; }.qi-9998::before { content: "\f1aa"; }.qi-9999::before { content: "\f1ab"; }.qi-100-fill::before { content: "\f1ac"; }.qi-101-fill::before { content: "\f1ad"; }.qi-102-fill::before { content: "\f1ae"; }.qi-103-fill::before { content: "\f1af"; }.qi-104-fill::before { content: "\f1b0"; }.qi-150-fill::before { content: "\f1b1"; }.qi-151-fill::before { content: "\f1b2"; }.qi-152-fill::before { content: "\f1b3"; }.qi-153-fill::before { content: "\f1b4"; }.qi-300-fill::before { content: "\f1b5"; }.qi-301-fill::before { content: "\f1b6"; }.qi-302-fill::before { content: "\f1b7"; }.qi-303-fill::before { content: "\f1b8"; }.qi-304-fill::before { content: "\f1b9"; }.qi-305-fill::before { content: "\f1ba"; }.qi-306-fill::before { content: "\f1bb"; }.qi-307-fill::before { content: "\f1bc"; }.qi-308-fill::before { content: "\f1bd"; }.qi-309-fill::before { content: "\f1be"; }.qi-310-fill::before { content: "\f1bf"; }.qi-311-fill::before { content: "\f1c0"; }.qi-312-fill::before { content: "\f1c1"; }.qi-313-fill::before { content: "\f1c2"; }.qi-314-fill::before { content: "\f1c3"; }.qi-315-fill::before { content: "\f1c4"; }.qi-316-fill::before { content: "\f1c5"; }.qi-317-fill::before { content: "\f1c6"; }.qi-318-fill::before { content: "\f1c7"; }.qi-350-fill::before { content: "\f1c8"; }.qi-351-fill::before { content: "\f1c9"; }.qi-399-fill::before { content: "\f1ca"; }.qi-400-fill::before { content: "\f1cb"; }.qi-401-fill::before { content: "\f1cc"; }.qi-402-fill::before { content: "\f1cd"; }.qi-403-fill::before { content: "\f1ce"; }.qi-404-fill::before { content: "\f1cf"; }.qi-405-fill::before { content: "\f1d0"; }.qi-406-fill::before { content: "\f1d1"; }.qi-407-fill::before { content: "\f1d2"; }.qi-408-fill::before { content: "\f1d3"; }.qi-409-fill::before { content: "\f1d4"; }.qi-410-fill::before { content: "\f1d5"; }.qi-456-fill::before { content: "\f1d6"; }.qi-457-fill::before { content: "\f1d7"; }.qi-499-fill::before { content: "\f1d8"; }.qi-500-fill::before { content: "\f1d9"; }.qi-501-fill::before { content: "\f1da"; }.qi-502-fill::before { content: "\f1db"; }.qi-503-fill::before { content: "\f1dc"; }.qi-504-fill::before { content: "\f1dd"; }.qi-507-fill::before { content: "\f1de"; }.qi-508-fill::before { content: "\f1df"; }.qi-509-fill::before { content: "\f1e0"; }.qi-510-fill::before { content: "\f1e1"; }.qi-511-fill::before { content: "\f1e2"; }.qi-512-fill::before { content: "\f1e3"; }.qi-513-fill::before { content: "\f1e4"; }.qi-514-fill::before { content: "\f1e5"; }.qi-515-fill::before { content: "\f1e6"; }.qi-900-fill::before { content: "\f1e7"; }.qi-901-fill::before { content: "\f1e8"; }.qi-999-fill::before { content: "\f1e9"; }.qi-sunny::before { content: "\f101"; }.qi-cloudy::before { content: "\f102"; }.qi-few-clouds::before { content: "\f103"; }.qi-partly-cloudy::before { content: "\f104"; }.qi-overcast::before { content: "\f105"; }.qi-clear-night::before { content: "\f106"; }.qi-cloudy-night::before { content: "\f107"; }.qi-few-clouds-night::before { content: "\f108"; }.qi-partly-cloudy-night::before { content: "\f109"; }.qi-shower-rain::before { content: "\f10a"; }.qi-heavy-shower-rain::before { content: "\f10b"; }.qi-thundershower::before { content: "\f10c"; }.qi-heavy-thunderstorm::before { content: "\f10d"; }.qi-thundershower-with-hail::before { content: "\f10e"; }.qi-light-rain::before { content: "\f10f"; }.qi-moderate-rain::before { content: "\f110"; }.qi-heavy-rain::before { content: "\f111"; }.qi-extreme-rain::before { content: "\f112"; }.qi-drizzle-rain::before { content: "\f113"; }.qi-storm::before { content: "\f114"; }.qi-heavy-storm::before { content: "\f115"; }.qi-severe-storm::before { content: "\f116"; }.qi-freezing-rain::before { content: "\f117"; }.qi-light-to-moderate-rain::before { content: "\f118"; }.qi-moderate-to-heavy-rain::before { content: "\f119"; }.qi-heavy-rain-to-storm::before { content: "\f11a"; }.qi-storm-to-heavy-storm::before { content: "\f11b"; }.qi-heavy-to-severe-storm::before { content: "\f11c"; }.qi-shower-rain-night::before { content: "\f11d"; }.qi-heavy-shower-rain-night::before { content: "\f11e"; }.qi-rain::before { content: "\f11f"; }.qi-light-snow::before { content: "\f120"; }.qi-moderate-snow::before { content: "\f121"; }.qi-heavy-snow::before { content: "\f122"; }.qi-snowstorm::before { content: "\f123"; }.qi-sleet::before { content: "\f124"; }.qi-rain-and-snow::before { content: "\f125"; }.qi-shower-snow::before { content: "\f126"; }.qi-snow-flurry::before { content: "\f127"; }.qi-light-to-moderate-snow::before { content: "\f128"; }.qi-moderate-to-heavy-snow::before { content: "\f129"; }.qi-heavy-snow-to-snowstorm::before { content: "\f12a"; }.qi-shower-snow-night::before { content: "\f12b"; }.qi-snow-flurry-night::before { content: "\f12c"; }.qi-snow::before { content: "\f12d"; }.qi-mist::before { content: "\f12e"; }.qi-foggy::before { content: "\f12f"; }.qi-haze::before { content: "\f130"; }.qi-sand::before { content: "\f131"; }.qi-dust::before { content: "\f132"; }.qi-duststorm::before { content: "\f133"; }.qi-sandstorm::before { content: "\f134"; }.qi-dense-fog::before { content: "\f135"; }.qi-strong-fog::before { content: "\f136"; }.qi-moderate-haze::before { content: "\f137"; }.qi-heavy-haze::before { content: "\f138"; }.qi-severe-haze::before { content: "\f139"; }.qi-heavy-fog::before { content: "\f13a"; }.qi-extra-heavy-fog::before { content: "\f13b"; }.qi-new-moon::before { content: "\f13c"; }.qi-waxing-crescent::before { content: "\f13d"; }.qi-first-quarter::before { content: "\f13e"; }.qi-waxing-gibbous::before { content: "\f13f"; }.qi-full-moon::before { content: "\f140"; }.qi-waning-gibbous::before { content: "\f141"; }.qi-last-quarter::before { content: "\f142"; }.qi-waning-crescent::before { content: "\f143"; }.qi-hot::before { content: "\f144"; }.qi-cold::before { content: "\f145"; }.qi-unknown::before { content: "\f146"; }.qi-typhoon::before { content: "\f147"; }.qi-tornado::before { content: "\f148"; }.qi-rainstorm::before { content: "\f149"; }.qi-snow-storm::before { content: "\f14a"; }.qi-cold-wave::before { content: "\f14b"; }.qi-gale::before { content: "\f14c"; }.qi-sandstorm-warning::before { content: "\f14d"; }.qi-low-temperature-freeze::before { content: "\f14e"; }.qi-high-temperature::before { content: "\f14f"; }.qi-heat-wave::before { content: "\f150"; }.qi-dry-hot-air::before { content: "\f151"; }.qi-downburst::before { content: "\f152"; }.qi-avalanche::before { content: "\f153"; }.qi-lightning::before { content: "\f154"; }.qi-hail::before { content: "\f155"; }.qi-frost::before { content: "\f156"; }.qi-heavy-fog-warning::before { content: "\f157"; }.qi-low-level-wind-shearl::before { content: "\f158"; }.qi-haze-warning::before { content: "\f159"; }.qi-thunder-gust::before { content: "\f15a"; }.qi-road-icing::before { content: "\f15b"; }.qi-drought::before { content: "\f15c"; }.qi-gale-at-sea::before { content: "\f15d"; }.qi-heat-stroke::before { content: "\f15e"; }.qi-wildfire::before { content: "\f15f"; }.qi-grassland-fire::before { content: "\f160"; }.qi-freeze::before { content: "\f161"; }.qi-space-weather::before { content: "\f162"; }.qi-heavy-air-pollution::before { content: "\f163"; }.qi-low-temperature-rain-and-snow::before { content: "\f164"; }.qi-strong-convection::before { content: "\f165"; }.qi-ozone::before { content: "\f166"; }.qi-heavy-snow-warning::before { content: "\f167"; }.qi-cold-warning::before { content: "\f168"; }.qi-continuous-rain::before { content: "\f169"; }.qi-waterlogging::before { content: "\f16a"; }.qi-geological-hazard::before { content: "\f16b"; }.qi-heavy-rainfall::before { content: "\f16c"; }.qi-severely-falling-temperature::before { content: "\f16d"; }.qi-snow-disaster::before { content: "\f16e"; }.qi-wildfire-grassland::before { content: "\f16f"; }.qi-medical-meteorology::before { content: "\f170"; }.qi-thunderstorm::before { content: "\f171"; }.qi-school-closure::before { content: "\f172"; }.qi-factory-closure::before { content: "\f173"; }.qi-maritime-risk::before { content: "\f174"; }.qi-spring-dust::before { content: "\f175"; }.qi-falling-temperature::before { content: "\f176"; }.qi-typhoon-and-rainstorm::before { content: "\f177"; }.qi-severe-cold::before { content: "\f178"; }.qi-sand-dust::before { content: "\f179"; }.qi-sea-thunderstorms::before { content: "\f17a"; }.qi-sea-fog::before { content: "\f17b"; }.qi-sea-thunder::before { content: "\f17c"; }.qi-sea-typhoon::before { content: "\f17d"; }.qi-low-temperature::before { content: "\f17e"; }.qi-road-ice-and-snow::before { content: "\f17f"; }.qi-thunderstorm-and-gale::before { content: "\f180"; }.qi-continuous-low-temperature::before { content: "\f181"; }.qi-strong-dust::before { content: "\f182"; }.qi-short-lived-heavy-shower-rain::before { content: "\f183"; }.qi-flood::before { content: "\f184"; }.qi-mudflow::before { content: "\f185"; }.qi-storm-surge::before { content: "\f186"; }.qi-very-hot-weather::before { content: "\f187"; }.qi-strong-monsoon-signal::before { content: "\f188"; }.qi-landslip::before { content: "\f189"; }.qi-tropical-cyclone::before { content: "\f18a"; }.qi-fire-danger::before { content: "\f18b"; }.qi-flooding-in-the-northern-new-territories::before { content: "\f18c"; }.qi-cold-weather::before { content: "\f18d"; }.qi-wind::before { content: "\f18e"; }.qi-snow-ice::before { content: "\f18f"; }.qi-fog::before { content: "\f190"; }.qi-coastal-event::before { content: "\f191"; }.qi-forest-fire::before { content: "\f192"; }.qi-rain-warning::before { content: "\f193"; }.qi-rain-flood::before { content: "\f194"; }.qi-freezing-rain-icing::before { content: "\f195"; }.qi-ground-frost::before { content: "\f196"; }.qi-dust-raising-winds::before { content: "\f197"; }.qi-strong-surface-winds::before { content: "\f198"; }.qi-hot-day::before { content: "\f199"; }.qi-warm-night::before { content: "\f19a"; }.qi-cold-day::before { content: "\f19b"; }.qi-thunderstorm-and-lightning::before { content: "\f19c"; }.qi-hailstorm::before { content: "\f19d"; }.qi-sea-area-warning::before { content: "\f19e"; }.qi-fishermen-warning::before { content: "\f19f"; }.qi-low-humidity::before { content: "\f1a0"; }.qi-accumulated-rain::before { content: "\f1a1"; }.qi-hazardous-surf-warning::before { content: "\f1a2"; }.qi-marine-wind-warning::before { content: "\f1a3"; }.qi-road-weather-alert::before { content: "\f1a4"; }.qi-thunder-rain::before { content: "\f1a5"; }.qi-thunder-rain-and-fog::before { content: "\f1a6"; }.qi-damaging-winds::before { content: "\f1a7"; }.qi-veld-fire-conditions::before { content: "\f1a8"; }.qi-weather-advisory::before { content: "\f1a9"; }.qi-severe-weather-warning::before { content: "\f1aa"; }.qi-warning-default::before { content: "\f1ab"; }.qi-sunny-fill::before { content: "\f1ac"; }.qi-cloudy-fill::before { content: "\f1ad"; }.qi-few-clouds-fill::before { content: "\f1ae"; }.qi-partly-cloudy-fill::before { content: "\f1af"; }.qi-overcast-fill::before { content: "\f1b0"; }.qi-clear-night-fill::before { content: "\f1b1"; }.qi-cloudy-night-fill::before { content: "\f1b2"; }.qi-few-clouds-night-fill::before { content: "\f1b3"; }.qi-partly-cloudy-night-fill::before { content: "\f1b4"; }.qi-shower-rain-fill::before { content: "\f1b5"; }.qi-heavy-shower-rain-fill::before { content: "\f1b6"; }.qi-thundershower-fill::before { content: "\f1b7"; }.qi-heavy-thunderstorm-fill::before { content: "\f1b8"; }.qi-thundershower-with-hail-fill::before { content: "\f1b9"; }.qi-light-rain-fill::before { content: "\f1ba"; }.qi-moderate-rain-fill::before { content: "\f1bb"; }.qi-heavy-rain-fill::before { content: "\f1bc"; }.qi-extreme-rain-fill::before { content: "\f1bd"; }.qi-drizzle-rain-fill::before { content: "\f1be"; }.qi-storm-fill::before { content: "\f1bf"; }.qi-heavy-storm-fill::before { content: "\f1c0"; }.qi-severe-storm-fill::before { content: "\f1c1"; }.qi-freezing-rain-fill::before { content: "\f1c2"; }.qi-light-to-moderate-rain-fill::before { content: "\f1c3"; }.qi-moderate-to-heavy-rain-fill::before { content: "\f1c4"; }.qi-heavy-rain-to-storm-fill::before { content: "\f1c5"; }.qi-storm-to-heavy-storm-fill::before { content: "\f1c6"; }.qi-heavy-to-severe-storm-fill::before { content: "\f1c7"; }.qi-shower-rain-night-fill::before { content: "\f1c8"; }.qi-heavy-shower-rain-night-fill::before { content: "\f1c9"; }.qi-rain-fill::before { content: "\f1ca"; }.qi-light-snow-fill::before { content: "\f1cb"; }.qi-moderate-snow-fill::before { content: "\f1cc"; }.qi-heavy-snow-fill::before { content: "\f1cd"; }.qi-snowstorm-fill::before { content: "\f1ce"; }.qi-sleet-fill::before { content: "\f1cf"; }.qi-rain-and-snow-fill::before { content: "\f1d0"; }.qi-shower-snow-fill::before { content: "\f1d1"; }.qi-snow-flurry-fill::before { content: "\f1d2"; }.qi-light-to-moderate-snow-fill::before { content: "\f1d3"; }.qi-moderate-to-heavy-snow-fill::before { content: "\f1d4"; }.qi-heavy-snow-to-snowstorm-fill::before { content: "\f1d5"; }.qi-shower-snow-night-fill::before { content: "\f1d6"; }.qi-snow-flurry-night-fill::before { content: "\f1d7"; }.qi-snow-fill::before { content: "\f1d8"; }.qi-mist-fill::before { content: "\f1d9"; }.qi-foggy-fill::before { content: "\f1da"; }.qi-haze-fill::before { content: "\f1db"; }.qi-sand-fill::before { content: "\f1dc"; }.qi-dust-fill::before { content: "\f1dd"; }.qi-duststorm-fill::before { content: "\f1de"; }.qi-sandstorm-fill::before { content: "\f1df"; }.qi-dense-fog-fill::before { content: "\f1e0"; }.qi-strong-fog-fill::before { content: "\f1e1"; }.qi-moderate-haze-fill::before { content: "\f1e2"; }.qi-heavy-haze-fill::before { content: "\f1e3"; }.qi-severe-haze-fill::before { content: "\f1e4"; }.qi-heavy-fog-fill::before { content: "\f1e5"; }.qi-extra-heavy-fog-fill::before { content: "\f1e6"; }.qi-hot-fill::before { content: "\f1e7"; }.qi-cold-fill::before { content: "\f1e8"; }.qi-unknown-fill::before { content: "\f1e9"; }]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/blog/css/clock.js"/>
      <url>/blog/css/clock.js</url>
      
        <content type="html"><![CDATA[function clockUpdateTime(info, city) {  let currentColor = '#000'  switch (info.now.icon) {    case '100':      currentColor = '#fdcc45'      break    case '101':      currentColor = '#fe6976'      break    case '102':    case '103':      currentColor = '#fe7f5b'      break    case '104':    case '150':    case '151':    case '152':    case '153':    case '154':    case '800':    case '801':    case '802':    case '803':    case '804':    case '805':    case '806':    case '807':      currentColor = '#2152d1'      break    case '300':    case '301':    case '305':    case '306':    case '307':    case '308':    case '309':    case '310':    case '311':    case '312':    case '313':    case '314':    case '315':    case '316':    case '317':    case '318':    case '350':    case '351':    case '399':      currentColor = '#49b1f5'      break    case '302':    case '303':    case '304':      currentColor = '#fdcc46'      break    case '400':    case '401':    case '402':    case '403':    case '404':    case '405':    case '406':    case '407':    case '408':    case '409':    case '410':    case '456':    case '457':    case '499':      currentColor = '#a3c2dc'      break    case '500':    case '501':    case '502':    case '503':    case '504':    case '507':    case '508':    case '509':    case '510':    case '511':    case '512':    case '513':    case '514':    case '515':      currentColor = '#97acba'      break    case '900':    case '999':      currentColor = 'red'      break    case '901':      currentColor = '#179fff;'      break    default:      break  }  var clock_box = document.getElementById('hexo_electric_clock')    clock_box_html = `  <div class="clock-row">    <span id="card-clock-clockdate" class="card-clock-clockdate"></span>    <span class="card-clock-weather"><i class="qi-${info.now.icon}-fill" style="color: ${currentColor}"></i> ${info.now.text} <span>${info.now.temp}</span> ℃</span>    <span class="card-clock-humidity">💧 ${info.now.humidity}%</span>  </div>  <div class="clock-row">    <span id="card-clock-time" class="card-clock-time"></span>  </div>  <div class="clock-row">    <span class="card-clock-windDir"> <i class="qi-gale"></i> ${info.now.windDir}</span>    <span class="card-clock-location">${city}</span>    <span id="card-clock-dackorlight" class="card-clock-dackorlight"></span>  </div>  `  var week = ['SUN', 'MON', 'TUE', 'WED', 'THU', 'FRI', 'SAT']  var card_clock_loading_dom = document.getElementById('card-clock-loading')  if (card_clock_loading_dom) {    card_clock_loading_dom.innerHTML = ''  }  clock_box.innerHTML = clock_box_html  function updateTime() {    var cd = new Date()    var card_clock_time =      zeroPadding(cd.getHours(), 2) +      ':' +      zeroPadding(cd.getMinutes(), 2) +      ':' +      zeroPadding(cd.getSeconds(), 2)    var card_clock_date =      zeroPadding(cd.getFullYear(), 4) +      '-' +      zeroPadding(cd.getMonth() + 1, 2) +      '-' +      zeroPadding(cd.getDate(), 2) +      ' ' +      week[cd.getDay()]    var card_clock_dackorlight = cd.getHours()    var card_clock_dackorlight_str    if (card_clock_dackorlight > 12) {      card_clock_dackorlight -= 12      card_clock_dackorlight_str = ' P M'    } else {      card_clock_dackorlight_str = ' A M'    }    if (document.getElementById('card-clock-time')) {      var card_clock_time_dom = document.getElementById('card-clock-time')      var card_clock_date_dom = document.getElementById('card-clock-clockdate')      var card_clock_dackorlight_dom = document.getElementById('card-clock-dackorlight')      card_clock_time_dom.innerHTML = card_clock_time      card_clock_date_dom.innerHTML = card_clock_date      card_clock_dackorlight_dom.innerHTML = card_clock_dackorlight_str    }  }  function zeroPadding(num, digit) {    var zero = ''    for (var i = 0; i < digit; i++) {      zero += '0'    }    return (zero + num).slice(-digit)  }  var timerID = setInterval(updateTime, 1000)  updateTime()}function getIpInfo() {  let defaultInfo = {    city: '长沙市',    qweather_url: ''  }  if (clock_default_rectangle_enable === 'true' && defaultInfo) {    fetch(`https://restapi.amap.com/v3/geocode/regeo?key=${gaud_map_key}&location=${clock_rectangle}`)    .then(regeo_res => regeo_res.json())    .then(regeo_data => {      if (regeo_data.status === "1") {        const addressComponent = regeo_data.regeocode.addressComponent        return Array.isArray(addressComponent.city) ? addressComponent.province : addressComponent.city      }    })    .then((rectangleCity) => {      fetch(`https://devapi.qweather.com/v7/weather/now?location=${        clock_rectangle      }&key=${qweather_key}`)      .then(res => res.json())      .then(data => {        if (document.getElementById('hexo_electric_clock')) {          let city = Array.isArray(rectangleCity) ? defaultInfo.city : rectangleCity            clockUpdateTime(data, city)        }      })    })  } else {    fetch(`https://restapi.amap.com/v3/ip?key=${gaud_map_key}`)    .then(res => res.json())    .then(data => {      // ip未获取到 使用默认地理位置      let qweather_url_location = Array.isArray(data.rectangle) ? clock_rectangle : data.rectangle.split(';')[0]      defaultInfo.qweather_url = `https://devapi.qweather.com/v7/weather/now?location=${        qweather_url_location      }&key=${qweather_key}`      if (Array.isArray(data.rectangle)) {        fetch(`https://restapi.amap.com/v3/geocode/regeo?key=${gaud_map_key}&location=${clock_rectangle}`)          .then(regeo_res => regeo_res.json())          .then(regeo_data => {            if (regeo_data.status === "1") {              const addressComponent = regeo_data.regeocode.addressComponent              defaultInfo.city = Array.isArray(addressComponent.city) ? addressComponent.province : addressComponent.city            }            return data          })          .then((data3) => {            // 同步获取天气数据，否则城市获取将会异常            fetch(defaultInfo.qweather_url)              .then(r => r.json())              .then(resNotfindByIp => {                if (document.getElementById('hexo_electric_clock')) {                  let city = Array.isArray(data3.city) ? defaultInfo.city : data3.city                  clockUpdateTime(resNotfindByIp, city)                }              })          })      } else {        fetch(defaultInfo.qweather_url)          .then(res2 => res2.json())          .then(data2 => {            if (document.getElementById('hexo_electric_clock')) {              // 通过请求ip 获取到位置              let city = Array.isArray(data.city) ? defaultInfo.city : data.city              clockUpdateTime(data2, city)            }        })      }    })  }}getIpInfo()]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/blog/css/clock.min.css"/>
      <url>/blog/css/clock.min.css</url>
      
        <content type="html"><![CDATA[@font-face{font-family:UnidreamLED;src:url(https://cdn.cbd.int/anzhiyu-blog@1.1.6/fonts/UnidreamLED.ttf);font-display:swap}.card-clock-location,.card-clock-windDir,span.card-clock-weather{font-family:ZhuZiAYuanJWD}span.temp{font-family:UnidreamLED}#hexo_electric_clock{padding:20px}.card-clock{padding:0!important}.card-background{height:153px;margin:15px;border-radius:8px;box-shadow:inset 0 0 4px 2px rgb(145 148 154 / 40%);z-index:2}.clock-row{font-family:UnidreamLED;font-weight:400;color:#000;display:flex;justify-content:space-between;flex-wrap:nowrap;white-space:nowrap}.card-clock-clockdate,.card-clock-ip{text-align:left}.card-clock-location,.card-clock-weather{text-align:center}.card-clock-dackorlight,.card-clock-humidity{text-align:right}.card-clock-time{flex:1;font-family:UnidreamLED;font-size:38px;text-align:center;line-height:1.5}[data-theme=dark] .card-background{background-color:#212121}[data-theme=dark] .clock-row{color:#fff}@font-face{font-family:qweather-icons;src:url(fonts/qweather-icons.woff2?5bb5b475709c49961682eda055eb3dc5) format("woff2"),url(fonts/qweather-icons.woff?5bb5b475709c49961682eda055eb3dc5) format("woff"),url(fonts/qweather-icons.ttf?5bb5b475709c49961682eda055eb3dc5) format("truetype")}[class*=" qi-"]::before,[class^=qi-]::before{display:inline-block;font-family:qweather-icons!important;font-style:normal;font-weight:400!important;font-variant:normal;text-transform:none;line-height:1;vertical-align:-.125em;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}@media screen and (min-width:900px){.card-clock-humidity{display:block}}@media screen and (max-width:1086px){.card-clock-humidity{display:none}}.qi-100::before{content:"\f101"}.qi-101::before{content:"\f102"}.qi-102::before{content:"\f103"}.qi-103::before{content:"\f104"}.qi-104::before{content:"\f105"}.qi-150::before{content:"\f106"}.qi-151::before{content:"\f107"}.qi-152::before{content:"\f108"}.qi-153::before{content:"\f109"}.qi-300::before{content:"\f10a"}.qi-301::before{content:"\f10b"}.qi-302::before{content:"\f10c"}.qi-303::before{content:"\f10d"}.qi-304::before{content:"\f10e"}.qi-305::before{content:"\f10f"}.qi-306::before{content:"\f110"}.qi-307::before{content:"\f111"}.qi-308::before{content:"\f112"}.qi-309::before{content:"\f113"}.qi-310::before{content:"\f114"}.qi-311::before{content:"\f115"}.qi-312::before{content:"\f116"}.qi-313::before{content:"\f117"}.qi-314::before{content:"\f118"}.qi-315::before{content:"\f119"}.qi-316::before{content:"\f11a"}.qi-317::before{content:"\f11b"}.qi-318::before{content:"\f11c"}.qi-350::before{content:"\f11d"}.qi-351::before{content:"\f11e"}.qi-399::before{content:"\f11f"}.qi-400::before{content:"\f120"}.qi-401::before{content:"\f121"}.qi-402::before{content:"\f122"}.qi-403::before{content:"\f123"}.qi-404::before{content:"\f124"}.qi-405::before{content:"\f125"}.qi-406::before{content:"\f126"}.qi-407::before{content:"\f127"}.qi-408::before{content:"\f128"}.qi-409::before{content:"\f129"}.qi-410::before{content:"\f12a"}.qi-456::before{content:"\f12b"}.qi-457::before{content:"\f12c"}.qi-499::before{content:"\f12d"}.qi-500::before{content:"\f12e"}.qi-501::before{content:"\f12f"}.qi-502::before{content:"\f130"}.qi-503::before{content:"\f131"}.qi-504::before{content:"\f132"}.qi-507::before{content:"\f133"}.qi-508::before{content:"\f134"}.qi-509::before{content:"\f135"}.qi-510::before{content:"\f136"}.qi-511::before{content:"\f137"}.qi-512::before{content:"\f138"}.qi-513::before{content:"\f139"}.qi-514::before{content:"\f13a"}.qi-515::before{content:"\f13b"}.qi-800::before{content:"\f13c"}.qi-801::before{content:"\f13d"}.qi-802::before{content:"\f13e"}.qi-803::before{content:"\f13f"}.qi-804::before{content:"\f140"}.qi-805::before{content:"\f141"}.qi-806::before{content:"\f142"}.qi-807::before{content:"\f143"}.qi-900::before{content:"\f144"}.qi-901::before{content:"\f145"}.qi-999::before{content:"\f146"}.qi-1001::before{content:"\f147"}.qi-1002::before{content:"\f148"}.qi-1003::before{content:"\f149"}.qi-1004::before{content:"\f14a"}.qi-1005::before{content:"\f14b"}.qi-1006::before{content:"\f14c"}.qi-1007::before{content:"\f14d"}.qi-1008::before{content:"\f14e"}.qi-1009::before{content:"\f14f"}.qi-1010::before{content:"\f150"}.qi-1011::before{content:"\f151"}.qi-1012::before{content:"\f152"}.qi-1013::before{content:"\f153"}.qi-1014::before{content:"\f154"}.qi-1015::before{content:"\f155"}.qi-1016::before{content:"\f156"}.qi-1017::before{content:"\f157"}.qi-1018::before{content:"\f158"}.qi-1019::before{content:"\f159"}.qi-1020::before{content:"\f15a"}.qi-1021::before{content:"\f15b"}.qi-1022::before{content:"\f15c"}.qi-1023::before{content:"\f15d"}.qi-1024::before{content:"\f15e"}.qi-1025::before{content:"\f15f"}.qi-1026::before{content:"\f160"}.qi-1027::before{content:"\f161"}.qi-1028::before{content:"\f162"}.qi-1029::before{content:"\f163"}.qi-1030::before{content:"\f164"}.qi-1031::before{content:"\f165"}.qi-1032::before{content:"\f166"}.qi-1033::before{content:"\f167"}.qi-1034::before{content:"\f168"}.qi-1035::before{content:"\f169"}.qi-1036::before{content:"\f16a"}.qi-1037::before{content:"\f16b"}.qi-1038::before{content:"\f16c"}.qi-1039::before{content:"\f16d"}.qi-1040::before{content:"\f16e"}.qi-1041::before{content:"\f16f"}.qi-1042::before{content:"\f170"}.qi-1043::before{content:"\f171"}.qi-1044::before{content:"\f172"}.qi-1045::before{content:"\f173"}.qi-1046::before{content:"\f174"}.qi-1047::before{content:"\f175"}.qi-1048::before{content:"\f176"}.qi-1049::before{content:"\f177"}.qi-1050::before{content:"\f178"}.qi-1051::before{content:"\f179"}.qi-1052::before{content:"\f17a"}.qi-1053::before{content:"\f17b"}.qi-1054::before{content:"\f17c"}.qi-1055::before{content:"\f17d"}.qi-1056::before{content:"\f17e"}.qi-1057::before{content:"\f17f"}.qi-1058::before{content:"\f180"}.qi-1059::before{content:"\f181"}.qi-1061::before{content:"\f182"}.qi-1064::before{content:"\f183"}.qi-1101::before{content:"\f184"}.qi-1302::before{content:"\f185"}.qi-1402::before{content:"\f186"}.qi-1601::before{content:"\f187"}.qi-1602::before{content:"\f188"}.qi-1603::before{content:"\f189"}.qi-1604::before{content:"\f18a"}.qi-1605::before{content:"\f18b"}.qi-1606::before{content:"\f18c"}.qi-1607::before{content:"\f18d"}.qi-2001::before{content:"\f18e"}.qi-2002::before{content:"\f18f"}.qi-2003::before{content:"\f190"}.qi-2004::before{content:"\f191"}.qi-2005::before{content:"\f192"}.qi-2006::before{content:"\f193"}.qi-2007::before{content:"\f194"}.qi-2008::before{content:"\f195"}.qi-2009::before{content:"\f196"}.qi-2010::before{content:"\f197"}.qi-2011::before{content:"\f198"}.qi-2012::before{content:"\f199"}.qi-2013::before{content:"\f19a"}.qi-2014::before{content:"\f19b"}.qi-2015::before{content:"\f19c"}.qi-2016::before{content:"\f19d"}.qi-2017::before{content:"\f19e"}.qi-2018::before{content:"\f19f"}.qi-2019::before{content:"\f1a0"}.qi-2020::before{content:"\f1a1"}.qi-2021::before{content:"\f1a2"}.qi-2022::before{content:"\f1a3"}.qi-2023::before{content:"\f1a4"}.qi-2024::before{content:"\f1a5"}.qi-2025::before{content:"\f1a6"}.qi-2026::before{content:"\f1a7"}.qi-2027::before{content:"\f1a8"}.qi-2028::before{content:"\f1a9"}.qi-9998::before{content:"\f1aa"}.qi-9999::before{content:"\f1ab"}.qi-100-fill::before{content:"\f1ac"}.qi-101-fill::before{content:"\f1ad"}.qi-102-fill::before{content:"\f1ae"}.qi-103-fill::before{content:"\f1af"}.qi-104-fill::before{content:"\f1b0"}.qi-150-fill::before{content:"\f1b1"}.qi-151-fill::before{content:"\f1b2"}.qi-152-fill::before{content:"\f1b3"}.qi-153-fill::before{content:"\f1b4"}.qi-300-fill::before{content:"\f1b5"}.qi-301-fill::before{content:"\f1b6"}.qi-302-fill::before{content:"\f1b7"}.qi-303-fill::before{content:"\f1b8"}.qi-304-fill::before{content:"\f1b9"}.qi-305-fill::before{content:"\f1ba"}.qi-306-fill::before{content:"\f1bb"}.qi-307-fill::before{content:"\f1bc"}.qi-308-fill::before{content:"\f1bd"}.qi-309-fill::before{content:"\f1be"}.qi-310-fill::before{content:"\f1bf"}.qi-311-fill::before{content:"\f1c0"}.qi-312-fill::before{content:"\f1c1"}.qi-313-fill::before{content:"\f1c2"}.qi-314-fill::before{content:"\f1c3"}.qi-315-fill::before{content:"\f1c4"}.qi-316-fill::before{content:"\f1c5"}.qi-317-fill::before{content:"\f1c6"}.qi-318-fill::before{content:"\f1c7"}.qi-350-fill::before{content:"\f1c8"}.qi-351-fill::before{content:"\f1c9"}.qi-399-fill::before{content:"\f1ca"}.qi-400-fill::before{content:"\f1cb"}.qi-401-fill::before{content:"\f1cc"}.qi-402-fill::before{content:"\f1cd"}.qi-403-fill::before{content:"\f1ce"}.qi-404-fill::before{content:"\f1cf"}.qi-405-fill::before{content:"\f1d0"}.qi-406-fill::before{content:"\f1d1"}.qi-407-fill::before{content:"\f1d2"}.qi-408-fill::before{content:"\f1d3"}.qi-409-fill::before{content:"\f1d4"}.qi-410-fill::before{content:"\f1d5"}.qi-456-fill::before{content:"\f1d6"}.qi-457-fill::before{content:"\f1d7"}.qi-499-fill::before{content:"\f1d8"}.qi-500-fill::before{content:"\f1d9"}.qi-501-fill::before{content:"\f1da"}.qi-502-fill::before{content:"\f1db"}.qi-503-fill::before{content:"\f1dc"}.qi-504-fill::before{content:"\f1dd"}.qi-507-fill::before{content:"\f1de"}.qi-508-fill::before{content:"\f1df"}.qi-509-fill::before{content:"\f1e0"}.qi-510-fill::before{content:"\f1e1"}.qi-511-fill::before{content:"\f1e2"}.qi-512-fill::before{content:"\f1e3"}.qi-513-fill::before{content:"\f1e4"}.qi-514-fill::before{content:"\f1e5"}.qi-515-fill::before{content:"\f1e6"}.qi-900-fill::before{content:"\f1e7"}.qi-901-fill::before{content:"\f1e8"}.qi-999-fill::before{content:"\f1e9"}.qi-sunny::before{content:"\f101"}.qi-cloudy::before{content:"\f102"}.qi-few-clouds::before{content:"\f103"}.qi-partly-cloudy::before{content:"\f104"}.qi-overcast::before{content:"\f105"}.qi-clear-night::before{content:"\f106"}.qi-cloudy-night::before{content:"\f107"}.qi-few-clouds-night::before{content:"\f108"}.qi-partly-cloudy-night::before{content:"\f109"}.qi-shower-rain::before{content:"\f10a"}.qi-heavy-shower-rain::before{content:"\f10b"}.qi-thundershower::before{content:"\f10c"}.qi-heavy-thunderstorm::before{content:"\f10d"}.qi-thundershower-with-hail::before{content:"\f10e"}.qi-light-rain::before{content:"\f10f"}.qi-moderate-rain::before{content:"\f110"}.qi-heavy-rain::before{content:"\f111"}.qi-extreme-rain::before{content:"\f112"}.qi-drizzle-rain::before{content:"\f113"}.qi-storm::before{content:"\f114"}.qi-heavy-storm::before{content:"\f115"}.qi-severe-storm::before{content:"\f116"}.qi-freezing-rain::before{content:"\f117"}.qi-light-to-moderate-rain::before{content:"\f118"}.qi-moderate-to-heavy-rain::before{content:"\f119"}.qi-heavy-rain-to-storm::before{content:"\f11a"}.qi-storm-to-heavy-storm::before{content:"\f11b"}.qi-heavy-to-severe-storm::before{content:"\f11c"}.qi-shower-rain-night::before{content:"\f11d"}.qi-heavy-shower-rain-night::before{content:"\f11e"}.qi-rain::before{content:"\f11f"}.qi-light-snow::before{content:"\f120"}.qi-moderate-snow::before{content:"\f121"}.qi-heavy-snow::before{content:"\f122"}.qi-snowstorm::before{content:"\f123"}.qi-sleet::before{content:"\f124"}.qi-rain-and-snow::before{content:"\f125"}.qi-shower-snow::before{content:"\f126"}.qi-snow-flurry::before{content:"\f127"}.qi-light-to-moderate-snow::before{content:"\f128"}.qi-moderate-to-heavy-snow::before{content:"\f129"}.qi-heavy-snow-to-snowstorm::before{content:"\f12a"}.qi-shower-snow-night::before{content:"\f12b"}.qi-snow-flurry-night::before{content:"\f12c"}.qi-snow::before{content:"\f12d"}.qi-mist::before{content:"\f12e"}.qi-foggy::before{content:"\f12f"}.qi-haze::before{content:"\f130"}.qi-sand::before{content:"\f131"}.qi-dust::before{content:"\f132"}.qi-duststorm::before{content:"\f133"}.qi-sandstorm::before{content:"\f134"}.qi-dense-fog::before{content:"\f135"}.qi-strong-fog::before{content:"\f136"}.qi-moderate-haze::before{content:"\f137"}.qi-heavy-haze::before{content:"\f138"}.qi-severe-haze::before{content:"\f139"}.qi-heavy-fog::before{content:"\f13a"}.qi-extra-heavy-fog::before{content:"\f13b"}.qi-new-moon::before{content:"\f13c"}.qi-waxing-crescent::before{content:"\f13d"}.qi-first-quarter::before{content:"\f13e"}.qi-waxing-gibbous::before{content:"\f13f"}.qi-full-moon::before{content:"\f140"}.qi-waning-gibbous::before{content:"\f141"}.qi-last-quarter::before{content:"\f142"}.qi-waning-crescent::before{content:"\f143"}.qi-hot::before{content:"\f144"}.qi-cold::before{content:"\f145"}.qi-unknown::before{content:"\f146"}.qi-typhoon::before{content:"\f147"}.qi-tornado::before{content:"\f148"}.qi-rainstorm::before{content:"\f149"}.qi-snow-storm::before{content:"\f14a"}.qi-cold-wave::before{content:"\f14b"}.qi-gale::before{content:"\f14c"}.qi-sandstorm-warning::before{content:"\f14d"}.qi-low-temperature-freeze::before{content:"\f14e"}.qi-high-temperature::before{content:"\f14f"}.qi-heat-wave::before{content:"\f150"}.qi-dry-hot-air::before{content:"\f151"}.qi-downburst::before{content:"\f152"}.qi-avalanche::before{content:"\f153"}.qi-lightning::before{content:"\f154"}.qi-hail::before{content:"\f155"}.qi-frost::before{content:"\f156"}.qi-heavy-fog-warning::before{content:"\f157"}.qi-low-level-wind-shearl::before{content:"\f158"}.qi-haze-warning::before{content:"\f159"}.qi-thunder-gust::before{content:"\f15a"}.qi-road-icing::before{content:"\f15b"}.qi-drought::before{content:"\f15c"}.qi-gale-at-sea::before{content:"\f15d"}.qi-heat-stroke::before{content:"\f15e"}.qi-wildfire::before{content:"\f15f"}.qi-grassland-fire::before{content:"\f160"}.qi-freeze::before{content:"\f161"}.qi-space-weather::before{content:"\f162"}.qi-heavy-air-pollution::before{content:"\f163"}.qi-low-temperature-rain-and-snow::before{content:"\f164"}.qi-strong-convection::before{content:"\f165"}.qi-ozone::before{content:"\f166"}.qi-heavy-snow-warning::before{content:"\f167"}.qi-cold-warning::before{content:"\f168"}.qi-continuous-rain::before{content:"\f169"}.qi-waterlogging::before{content:"\f16a"}.qi-geological-hazard::before{content:"\f16b"}.qi-heavy-rainfall::before{content:"\f16c"}.qi-severely-falling-temperature::before{content:"\f16d"}.qi-snow-disaster::before{content:"\f16e"}.qi-wildfire-grassland::before{content:"\f16f"}.qi-medical-meteorology::before{content:"\f170"}.qi-thunderstorm::before{content:"\f171"}.qi-school-closure::before{content:"\f172"}.qi-factory-closure::before{content:"\f173"}.qi-maritime-risk::before{content:"\f174"}.qi-spring-dust::before{content:"\f175"}.qi-falling-temperature::before{content:"\f176"}.qi-typhoon-and-rainstorm::before{content:"\f177"}.qi-severe-cold::before{content:"\f178"}.qi-sand-dust::before{content:"\f179"}.qi-sea-thunderstorms::before{content:"\f17a"}.qi-sea-fog::before{content:"\f17b"}.qi-sea-thunder::before{content:"\f17c"}.qi-sea-typhoon::before{content:"\f17d"}.qi-low-temperature::before{content:"\f17e"}.qi-road-ice-and-snow::before{content:"\f17f"}.qi-thunderstorm-and-gale::before{content:"\f180"}.qi-continuous-low-temperature::before{content:"\f181"}.qi-strong-dust::before{content:"\f182"}.qi-short-lived-heavy-shower-rain::before{content:"\f183"}.qi-flood::before{content:"\f184"}.qi-mudflow::before{content:"\f185"}.qi-storm-surge::before{content:"\f186"}.qi-very-hot-weather::before{content:"\f187"}.qi-strong-monsoon-signal::before{content:"\f188"}.qi-landslip::before{content:"\f189"}.qi-tropical-cyclone::before{content:"\f18a"}.qi-fire-danger::before{content:"\f18b"}.qi-flooding-in-the-northern-new-territories::before{content:"\f18c"}.qi-cold-weather::before{content:"\f18d"}.qi-wind::before{content:"\f18e"}.qi-snow-ice::before{content:"\f18f"}.qi-fog::before{content:"\f190"}.qi-coastal-event::before{content:"\f191"}.qi-forest-fire::before{content:"\f192"}.qi-rain-warning::before{content:"\f193"}.qi-rain-flood::before{content:"\f194"}.qi-freezing-rain-icing::before{content:"\f195"}.qi-ground-frost::before{content:"\f196"}.qi-dust-raising-winds::before{content:"\f197"}.qi-strong-surface-winds::before{content:"\f198"}.qi-hot-day::before{content:"\f199"}.qi-warm-night::before{content:"\f19a"}.qi-cold-day::before{content:"\f19b"}.qi-thunderstorm-and-lightning::before{content:"\f19c"}.qi-hailstorm::before{content:"\f19d"}.qi-sea-area-warning::before{content:"\f19e"}.qi-fishermen-warning::before{content:"\f19f"}.qi-low-humidity::before{content:"\f1a0"}.qi-accumulated-rain::before{content:"\f1a1"}.qi-hazardous-surf-warning::before{content:"\f1a2"}.qi-marine-wind-warning::before{content:"\f1a3"}.qi-road-weather-alert::before{content:"\f1a4"}.qi-thunder-rain::before{content:"\f1a5"}.qi-thunder-rain-and-fog::before{content:"\f1a6"}.qi-damaging-winds::before{content:"\f1a7"}.qi-veld-fire-conditions::before{content:"\f1a8"}.qi-weather-advisory::before{content:"\f1a9"}.qi-severe-weather-warning::before{content:"\f1aa"}.qi-warning-default::before{content:"\f1ab"}.qi-sunny-fill::before{content:"\f1ac"}.qi-cloudy-fill::before{content:"\f1ad"}.qi-few-clouds-fill::before{content:"\f1ae"}.qi-partly-cloudy-fill::before{content:"\f1af"}.qi-overcast-fill::before{content:"\f1b0"}.qi-clear-night-fill::before{content:"\f1b1"}.qi-cloudy-night-fill::before{content:"\f1b2"}.qi-few-clouds-night-fill::before{content:"\f1b3"}.qi-partly-cloudy-night-fill::before{content:"\f1b4"}.qi-shower-rain-fill::before{content:"\f1b5"}.qi-heavy-shower-rain-fill::before{content:"\f1b6"}.qi-thundershower-fill::before{content:"\f1b7"}.qi-heavy-thunderstorm-fill::before{content:"\f1b8"}.qi-thundershower-with-hail-fill::before{content:"\f1b9"}.qi-light-rain-fill::before{content:"\f1ba"}.qi-moderate-rain-fill::before{content:"\f1bb"}.qi-heavy-rain-fill::before{content:"\f1bc"}.qi-extreme-rain-fill::before{content:"\f1bd"}.qi-drizzle-rain-fill::before{content:"\f1be"}.qi-storm-fill::before{content:"\f1bf"}.qi-heavy-storm-fill::before{content:"\f1c0"}.qi-severe-storm-fill::before{content:"\f1c1"}.qi-freezing-rain-fill::before{content:"\f1c2"}.qi-light-to-moderate-rain-fill::before{content:"\f1c3"}.qi-moderate-to-heavy-rain-fill::before{content:"\f1c4"}.qi-heavy-rain-to-storm-fill::before{content:"\f1c5"}.qi-storm-to-heavy-storm-fill::before{content:"\f1c6"}.qi-heavy-to-severe-storm-fill::before{content:"\f1c7"}.qi-shower-rain-night-fill::before{content:"\f1c8"}.qi-heavy-shower-rain-night-fill::before{content:"\f1c9"}.qi-rain-fill::before{content:"\f1ca"}.qi-light-snow-fill::before{content:"\f1cb"}.qi-moderate-snow-fill::before{content:"\f1cc"}.qi-heavy-snow-fill::before{content:"\f1cd"}.qi-snowstorm-fill::before{content:"\f1ce"}.qi-sleet-fill::before{content:"\f1cf"}.qi-rain-and-snow-fill::before{content:"\f1d0"}.qi-shower-snow-fill::before{content:"\f1d1"}.qi-snow-flurry-fill::before{content:"\f1d2"}.qi-light-to-moderate-snow-fill::before{content:"\f1d3"}.qi-moderate-to-heavy-snow-fill::before{content:"\f1d4"}.qi-heavy-snow-to-snowstorm-fill::before{content:"\f1d5"}.qi-shower-snow-night-fill::before{content:"\f1d6"}.qi-snow-flurry-night-fill::before{content:"\f1d7"}.qi-snow-fill::before{content:"\f1d8"}.qi-mist-fill::before{content:"\f1d9"}.qi-foggy-fill::before{content:"\f1da"}.qi-haze-fill::before{content:"\f1db"}.qi-sand-fill::before{content:"\f1dc"}.qi-dust-fill::before{content:"\f1dd"}.qi-duststorm-fill::before{content:"\f1de"}.qi-sandstorm-fill::before{content:"\f1df"}.qi-dense-fog-fill::before{content:"\f1e0"}.qi-strong-fog-fill::before{content:"\f1e1"}.qi-moderate-haze-fill::before{content:"\f1e2"}.qi-heavy-haze-fill::before{content:"\f1e3"}.qi-severe-haze-fill::before{content:"\f1e4"}.qi-heavy-fog-fill::before{content:"\f1e5"}.qi-extra-heavy-fog-fill::before{content:"\f1e6"}.qi-hot-fill::before{content:"\f1e7"}.qi-cold-fill::before{content:"\f1e8"}.qi-unknown-fill::before{content:"\f1e9"}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/blog/css/clock.min.js"/>
      <url>/blog/css/clock.min.js</url>
      
        <content type="html"><![CDATA[function clockUpdateTime(e,c){let a="#000";switch(e.now.icon){case"100":a="#fdcc45";break;case"101":a="#fe6976";break;case"102":case"103":a="#fe7f5b";break;case"104":case"150":case"151":case"152":case"153":case"154":case"800":case"801":case"802":case"803":case"804":case"805":case"806":case"807":a="#2152d1";break;case"300":case"301":case"305":case"306":case"307":case"308":case"309":case"310":case"311":case"312":case"313":case"314":case"315":case"316":case"317":case"318":case"350":case"351":case"399":a="#49b1f5";break;case"302":case"303":case"304":a="#fdcc46";break;case"400":case"401":case"402":case"403":case"404":case"405":case"406":case"407":case"408":case"409":case"410":case"456":case"457":case"499":a="#a3c2dc";break;case"500":case"501":case"502":case"503":case"504":case"507":case"508":case"509":case"510":case"511":case"512":case"513":case"514":case"515":a="#97acba";break;case"900":case"999":a="red";break;case"901":a="#179fff;"}var t=document.getElementById("hexo_electric_clock");clock_box_html=`\n  <div class="clock-row">\n    <span id="card-clock-clockdate" class="card-clock-clockdate"></span>\n    <span class="card-clock-weather"><i class="qi-${e.now.icon}-fill" style="color: ${a}"></i> ${e.now.text} <span>${e.now.temp}</span> ℃</span>\n    <span class="card-clock-humidity">💧 ${e.now.humidity}%</span>\n  </div>\n  <div class="clock-row">\n    <span id="card-clock-time" class="card-clock-time"></span>\n  </div>\n  <div class="clock-row">\n    <span class="card-clock-windDir"> <i class="qi-gale"></i> ${e.now.windDir}</span>\n    <span class="card-clock-location">${c}</span>\n    <span id="card-clock-dackorlight" class="card-clock-dackorlight"></span>\n  </div>\n  `;var s=["SUN","MON","TUE","WED","THU","FRI","SAT"],n=document.getElementById("card-clock-loading");function r(){var e,c=new Date,a=o(c.getHours(),2)+":"+o(c.getMinutes(),2)+":"+o(c.getSeconds(),2),t=o(c.getFullYear(),4)+"-"+o(c.getMonth()+1,2)+"-"+o(c.getDate(),2)+" "+s[c.getDay()],n=c.getHours();if(n>12?(n-=12,e=" P M"):e=" A M",document.getElementById("card-clock-time")){var r=document.getElementById("card-clock-time"),l=document.getElementById("card-clock-clockdate"),i=document.getElementById("card-clock-dackorlight");r.innerHTML=a,l.innerHTML=t,i.innerHTML=e}}function o(e,c){for(var a="",t=0;t<c;t++)a+="0";return(a+e).slice(-c)}n&&(n.innerHTML=""),t.innerHTML=clock_box_html;setInterval(r,1e3);r()}function getIpInfo(){let e={city:"长沙市",qweather_url:""};"true"===clock_default_rectangle_enable&&e?fetch(`https://restapi.amap.com/v3/geocode/regeo?key=${gaud_map_key}&location=${clock_rectangle}`).then((e=>e.json())).then((e=>{if("1"===e.status){const c=e.regeocode.addressComponent;return Array.isArray(c.city)?c.province:c.city}})).then((c=>{fetch(`https://devapi.qweather.com/v7/weather/now?location=${clock_rectangle}&key=${qweather_key}`).then((e=>e.json())).then((a=>{if(document.getElementById("hexo_electric_clock")){clockUpdateTime(a,Array.isArray(c)?e.city:c)}}))})):fetch(`https://restapi.amap.com/v3/ip?key=${gaud_map_key}`).then((e=>e.json())).then((c=>{let a=Array.isArray(c.rectangle)?clock_rectangle:c.rectangle.split(";")[0];e.qweather_url=`https://devapi.qweather.com/v7/weather/now?location=${a}&key=${qweather_key}`,Array.isArray(c.rectangle)?fetch(`https://restapi.amap.com/v3/geocode/regeo?key=${gaud_map_key}&location=${clock_rectangle}`).then((e=>e.json())).then((a=>{if("1"===a.status){const c=a.regeocode.addressComponent;e.city=Array.isArray(c.city)?c.province:c.city}return c})).then((c=>{fetch(e.qweather_url).then((e=>e.json())).then((a=>{if(document.getElementById("hexo_electric_clock")){clockUpdateTime(a,Array.isArray(c.city)?e.city:c.city)}}))})):fetch(e.qweather_url).then((e=>e.json())).then((a=>{if(document.getElementById("hexo_electric_clock")){clockUpdateTime(a,Array.isArray(c.city)?e.city:c.city)}}))}))}getIpInfo();]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/blog/css/custom.css"/>
      <url>/blog/css/custom.css</url>
      
        <content type="html"><![CDATA[/* 全站变黑白 *//* html {  -webkit-filter: grayscale(100%);  -moz-filter: grayscale(100%);  -ms-filter: grayscale(100%);  -o-filter: grayscale(100%);  filter: grayscale(100%);  filter: progid:DXImageTransform.Microsoft.BasicImage(grayscale=1);} *//* @font-face {  font-family: Candyhome;  src: url(https://npm.elemecdn.com/anzhiyu-blog@1.1.6/fonts/Candyhome.ttf);  font-display: swap;  font-weight: lighter;} */@font-face {    font-family: ZhuZiAYuanJWD;    src: url(/blog/img/foots/ZhuZiAWan.woff2);    font-display: swap;    font-weight: lighter;  }    div#menus {    font-family: 'ZhuZiAYuanJWD';  }  h1#site-title {    font-family: ZhuZiAYuanJWD;    font-size: 3em !important;  }  a.article-title,  a.blog-slider__title,  a.categoryBar-list-link,  h1.post-title {    font-family: ZhuZiAYuanJWD;  }    .iconfont {    font-family: 'iconfont' !important;    font-size: 3em;    /* 可以定义图标大小 */    font-style: normal;    -webkit-font-smoothing: antialiased;    -moz-osx-font-smoothing: grayscale;  }    /* 时间轴生肖icon */  svg.icon {    /* 这里定义svg.icon，避免和Butterfly自带的note标签冲突 */    width: 1em;    height: 1em;    /* width和height定义图标的默认宽度和高度*/    vertical-align: -0.15em;    fill: currentColor;    overflow: hidden;  }    .icon-zhongbiao::before {    color: #f7c768;  }    /* bilibli番剧插件 */  .bangumi-active {    background: #dbecfe !important;    border-radius: 10px !important;  }  a.bangumi-tab:hover {    text-decoration: none !important;  }  .bangumi-button:hover {    background: #dbecfe !important;    border-radius: 10px !important;  }  a.bangumi-button.bangumi-nextpage:hover {    text-decoration: none !important;  }  .bangumi-button {    padding: 5px 10px !important;  }    a.bangumi-tab {    padding: 5px 10px !important;  }  svg.icon.faa-tada {    font-size: 1.1em;  }    /* 解决artitalk的图标问题 */  #uploadSource > svg {    width: 1.19em;    height: 1.5em;  }    /*top-img黑色透明玻璃效果移除，不建议加，除非你执着于完全一图流或者背景图对比色明显 */  #page-header:not(.not-top-img):before {    background-color: transparent !important;  }    /* 首页文章卡片 */  #recent-posts > .recent-post-item {    background: rgba(255, 255, 255, 0.9);  }    /* 首页侧栏卡片 */  #aside-content .card-widget {    background: rgba(255, 255, 255, 0.9);  }    /* 文章页面正文背景 */  div#post {    background: rgba(255, 255, 255, 0.9);  }    /* 分页页面 */  div#page {    background: rgba(255, 255, 255, 0.9);  }    /* 归档页面 */  div#archive {    background: rgba(255, 255, 255, 0.9);  }    /* 标签页面 */  div#tag {    background: rgba(255, 255, 255, 0.9);  }    /* 分类页面 */  div#category {    background: rgba(255, 255, 255, 0.9);  }    /*夜间模式伪类遮罩层透明*/  [data-theme='dark'] #recent-posts > .recent-post-item {    background: #121212;  }    [data-theme='dark'] .card-widget {    background: #121212 !important;  }    [data-theme='dark'] div#post {    background: #121212 !important;  }    [data-theme='dark'] div#tag {    background: #121212 !important;  }    [data-theme='dark'] div#archive {    background: #121212 !important;  }    [data-theme='dark'] div#page {    background: #121212 !important;  }    [data-theme='dark'] div#category {    background: #121212 !important;  }    [data-theme='dark'] div#category {    background: transparent !important;  }  /* 页脚透明 */  #footer {    background: transparent !important;  }    /* 头图透明 */  #page-header {    background: transparent !important;  }    #rightside > div > button {    border-radius: 5px;  }    /* 滚动条 */    ::-webkit-scrollbar {    width: 10px;    height: 10px;  }    ::-webkit-scrollbar-thumb {    background-color: #5CA1FF;    border-radius: 2em;  }    ::-webkit-scrollbar-corner {    background-color: transparent;  }    ::-moz-selection {    color: #fff;    background-color: #5CA1FF;  }    /* 音乐播放器 */    /* .aplayer .aplayer-lrc {    display: none !important;  } */    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {    left: -66px !important;    transition: all 0.3s;    /* 默认情况下缩进左侧66px，只留一点箭头部分 */  }    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {    left: 0 !important;    transition: all 0.3s;    /* 鼠标悬停是左侧缩进归零，完全显示按钮 */  }    .aplayer.aplayer-fixed {    z-index: 999999 !important;  }    /* 评论框  */  .vwrap {    box-shadow: 2px 2px 5px #bbb;    background: rgba(255, 255, 255, 0.3);    border-radius: 8px;    padding: 30px;    margin: 30px 0px 30px 0px;  }    /* 设置评论框 */    .vcard {    box-shadow: 2px 2px 5px #bbb;    background: rgba(255, 255, 255, 0.3);    border-radius: 8px;    padding: 30px;    margin: 30px 0px 0px 0px;  }    /* 鼠标图标 */  /* body {    cursor: url('/blog/img/x1.cur'), auto;  }  a,  [type='button']:not(:disabled),  [type='reset']:not(:disabled),  [type='submit']:not(:disabled),  button:not(:disabled) {    cursor: url('/blog/img/x2.cur'), auto !important;  } */  /* md网站下划线 */  #article-container a:hover {    text-decoration: none !important;  }    #article-container #hpp_talk p img {    display: inline;  }    /* 404页面 */  #error-wrap {    position: absolute;    top: 40%;    right: 0;    left: 0;    margin: 0 auto;    padding: 0 1rem;    max-width: 1000px;    transform: translate(0, -50%);  }    #error-wrap .error-content {    display: flex;    flex-direction: row;    justify-content: center;    align-items: center;    margin: 0 1rem;    height: 18rem;    border-radius: 8px;    background: var(--card-bg);    box-shadow: var(--card-box-shadow);    transition: all 0.3s;  }    #error-wrap .error-content .error-img {    box-flex: 1;    flex: 1;    height: 100%;    border-top-left-radius: 8px;    border-bottom-left-radius: 8px;    background-color: #5CA1FF;    background-position: center;    background-size: cover;  }    #error-wrap .error-content .error-info {    box-flex: 1;    flex: 1;    padding: 0.5rem;    text-align: center;    font-size: 14px;    font-family: Titillium Web, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft JhengHei', 'Microsoft YaHei', sans-serif;  }  #error-wrap .error-content .error-info .error_title {    margin-top: -4rem;    font-size: 9em;  }  #error-wrap .error-content .error-info .error_subtitle {    margin-top: -3.5rem;    word-break: break-word;    font-size: 1.6em;  }  #error-wrap .error-content .error-info a {    display: inline-block;    margin-top: 0.5rem;    padding: 0.3rem 1.5rem;    background: var(--btn-bg);    color: var(--btn-color);  }    #body-wrap.error .aside-list {    display: flex;    flex-direction: row;    flex-wrap: nowrap;    bottom: 0px;    position: absolute;    padding: 1rem;    width: 100%;    overflow: scroll;  }    #body-wrap.error .aside-list .aside-list-group {    display: flex;    flex-direction: row;    flex-wrap: nowrap;    max-width: 1200px;    margin: 0 auto;  }    #body-wrap.error .aside-list .aside-list-item {    padding: 0.5rem;  }    #body-wrap.error .aside-list .aside-list-item img {    width: 100%;    object-fit: cover;    border-radius: 12px;  }    #body-wrap.error .aside-list .aside-list-item .thumbnail {    overflow: hidden;    width: 230px;    height: 143px;    background: var(--heo-card-bg);    display: flex;  }    #body-wrap.error .aside-list .aside-list-item .content .title {    -webkit-line-clamp: 2;    overflow: hidden;    display: -webkit-box;    -webkit-box-orient: vertical;    line-height: 1.5;    justify-content: center;    align-items: flex-end;    align-content: center;    padding-top: 0.5rem;    color: white;  }    #body-wrap.error .aside-list .aside-list-item .content time {    display: none;  }    /* 代码框主题 */  #article-container figure.highlight {    border-radius: 10px;  }    #article-container h1:before,#article-container h2:before,#article-container h3:before,#article-container h4:before,#article-container h5:before,#article-container h6:before,#post .post-outdate-notice:before,.fontawesomeIcon,.note:not(.no-icon)::before,hr:before {    display: inline-block;    font-weight: 600;    font-style: normal;    font-variant: normal;    font-family: 'Font Awesome 5 Free';    text-rendering: auto;    -webkit-font-smoothing: antialiased}#article-container h1:before,#article-container h2:before,#article-container h3:before,#article-container h4:before,#article-container h5:before,#article-container h6:before {    position: absolute;    color: #f47466;    /* 回形针 */    content: '\f0c1';      line-height: 1;    -webkit-transition: all .2s ease-out;    -moz-transition: all .2s ease-out;    -o-transition: all .2s ease-out;    -ms-transition: all .2s ease-out;    transition: all .2s ease-out;    /* 若要使用风车效果，请去掉下面的注释 */    /* content: '\f863';     animation: avatar_turn_around 1s linear infinite; */}#article-container h1 {    padding-left: 1.4rem}#article-container h1 code {    font-size: 1rem}#article-container h1:before {    margin-left: -1.3rem;    top: calc(50% - .5rem);    font-size: 1rem}#article-container h1:hover {    padding-left: 1.6rem}#article-container h2 {    padding-left: 1.3rem}#article-container h2 code {    font-size: .9rem}#article-container h2:before {    margin-left: -1.4rem;    top: calc(50% - .45rem);    font-size: .9rem}#article-container h2:hover {    padding-left: 1.5rem}#article-container h3 {    padding-left: 1.2rem}#article-container h3 code {    font-size: .8rem;    top: calc(50% - .4rem);}#article-container h3:before {    margin-left: -1.2rem;    top: calc(50% - .4rem);    font-size: .8rem}#article-container h3:hover {    padding-left: 1.4rem}#article-container h4 {    padding-left: 1.1rem}#article-container h4 code {    font-size: .7rem}#article-container h4:before {    margin-left: -1rem;    top: calc(50% - .35rem);    font-size: .7rem}#article-container h4:hover {    padding-left: 1.3rem}#article-container h5 {    padding-left: 1rem}#article-container h5 code {    font-size: .6rem}#article-container h5:before {    margin-left: -.8rem;    top: calc(50% - .3rem);    font-size: .6rem}#article-container h5:hover {    padding-left: 1.2rem}#article-container h6 {    padding-left: 1rem}#article-container h6 code {    font-size: .6rem}#article-container h6:before {    margin-left: -.8rem;    top: calc(50% - .3rem);    font-size: .6rem}#article-container h6:hover {    padding-left: 1.2rem}#toggle-sidebar {  bottom: 80px}#toggle-sidebar {  left: 100px}/* https://tzy1997.com/articles/hexo1606/ */.categoryBar-list {  max-height: 400px;}.clock-row {  overflow: hidden;  text-overflow: ellipsis;}/*3s为加载动画的时间，1为加载动画的次数，ease-in-out为动画效果*//* #page-header,#web_bg {  -webkit-animation: imgblur 2s 1 ease-in-out;  animation: imgblur 2s 1 ease-in-out;} */@keyframes imgblur {  0% {      filter: blur(5px);  }  100% {      filter: blur(0px);  }}/*适配使用-webkit内核的浏览器 */@-webkit-keyframes imgblur {  0% {      -webkit-filter: blur(5px);  }  100% {      -webkit-filter: blur(0px);  }}.table-wrap img {  margin: .6rem auto .1rem !important;}/* 标签外挂 网站卡片 start */.site-card-group img {  margin: 0 auto .1rem !important;}.site-card-group .info a img {  margin-right: 10px !important;}[data-theme='dark'] .site-card-group .site-card .info .title {  color: #f0f0f0 !important;}[data-theme='dark'] .site-card-group .site-card .info .desc {  color: rgba(255, 255, 255, .7) !important;}.site-card-group .info .desc {  margin-top: 4px !important;}/* 代码块颜色 */figure.highlight pre .addition {  color: #00bf03 !important;}/* menhera 表情样式优化 *//* https://tzy1997.com/articles/hexo1611/#menhera-%E8%A1%A8%E6%83%85%E6%A0%B7%E5%BC%8F%E4%BC%98%E5%8C%96 *//* Twikoo 评论样式 */.tk-input .el-textarea__inner {  min-height: 120px !important;}#twikoo .OwO-body {  max-width: 100% !important;}#twikoo .OwO .OwO-body .OwO-items:nth-child(1),#twikoo .OwO .OwO-body .OwO-items:nth-child(4) {  max-height: 360px !important;}#twikoo .OwO-items li[title|=menhera] img {  width: 100% !important;  margin: 5px 10px;}.tk-comment .tk-owo-emotion[alt*=menhera] {  width: 300px !important;}.tk-comment .vemoji[alt|=menhera],.tk-comment .tk-owo-emotion[alt*=menhera] {  max-width: 300px !important;  max-height: 300px !important;  margin: 8px 1px;  display: block !important;}@media screen and (max-width: 768px) {  .tk-comment .vemoji[alt|=menhera], .tk-comment .tk-owo-emotion[alt*=menhera] {      max-width: calc(100% - 30px) !important;      max-height: calc(100% - 30px) !important;  }  .OwO .OwO-body .OwO-items-image .OwO-item[title*=menhera] {      max-width: calc(50% - 10px);      box-sizing: border-box;  }  }/* tags样式 *//* #aside-content .card-tag-cloud a {  color: var(--anzhiyu-fontcolor)!important;  font-size: 1.05rem !important;  border-radius: 8px;  display: inline-block;  margin-right: 4px;}#aside-content .card-tag-cloud a:hover {  background: var(--anzhiyu-theme);  color: var(--anzhiyu-white) !important;  box-shadow: var(--anzhiyu-shadow-theme);}@media screen and (min-width: 1300px) {  #aside-content .card-tag-cloud a:hover {    transform: scale(1.03);  }  #aside-content .card-tag-cloud a:active {    transform: scale(0.97);  }}#aside-content .card-tag-cloud a sup {  opacity: .4;  margin-left: 2px;} *//* 归档样式 */span.card-archive-list-count {  width: auto;  text-align: left;  font-size: 1.5rem;  line-height: 0.9;  font-weight: 700;}.card-archive-list-count-group {  display: flex;  flex-direction: row;  align-items: baseline;}#aside-content .card-archives ul.card-archive-list > .card-archive-list-item a span:last-child,#aside-content .card-categories ul.card-category-list > .card-category-list-item a span:last-child {  width: fit-content;  margin-left: 4px;}span.card-archive-list-count {    width: auto;    text-align: left;    font-size: 1.1rem;    line-height: .9;    font-weight: 700;}.card-archive-list-date {  font-size: 14px;  opacity: 0.6;}li.card-archive-list-item {  width: 100%;  flex: 0 0 48%;}#aside-content .card-archives ul.card-archive-list > .card-archive-list-item a:hover,#aside-content .card-categories ul.card-category-list > .card-category-list-item a:hover {  color: var(--anzhiyu-white);  background-color: var(--anzhiyu-theme);  box-shadow: var(--anzhiyu-shadow-theme);  border-radius: 8px;  padding-left: 0.5rem;  padding-right: 0.5rem;}@media screen and (min-width: 1300px) {  #aside-content .card-archives ul.card-archive-list > .card-archive-list-item a:hover,  #aside-content .card-categories ul.card-category-list > .card-category-list-item a:hover {    transform: scale(1.03);  }  #aside-content .card-archives ul.card-archive-list > .card-archive-list-item a:active,  #aside-content .card-categories ul.card-category-list > .card-category-list-item a:active {    transform: scale(0.97);  }}#aside-content .card-archives ul.card-archive-list > .card-archive-list-item a,#aside-content .card-categories ul.card-category-list > .card-category-list-item a {  border-radius: 8px;  margin: 4px 0;  display: flex;  flex-direction: column;  align-content: space-between;  border: var(--style-border);}#aside-content .card-archives ul.card-archive-list > .card-archive-list-item a span:first-child,#aside-content .card-categories ul.card-category-list > .card-category-list-item a span:first-child {  width: auto;  flex: inherit;}#aside-content .card-archives ul.card-archive-list,#aside-content .card-categories ul.card-category-list {  display: flex;  flex-direction: row;  justify-content: space-between;  flex-wrap: wrap;}#aside-content .aside-list > .aside-list-item .content > time {  display: none;}#aside-content .aside-list > .aside-list-item .content > .title {  -webkit-line-clamp: 3;  font-weight: 700;  padding: 2px 0;}#aside-content .aside-list > .aside-list-item {  padding: 8px;  padding-top: 6px !important;  padding-bottom: 6px !important;  border-radius: 12px;  transition: 0.3s;  margin: 4px 0;  cursor: pointer;}@media screen and (min-width: 1300px) {  #aside-content .aside-list > .aside-list-item:hover {    transform: scale(1.03);  }  #aside-content .aside-list > .aside-list-item:active {    transform: scale(0.97);  }}#aside-content .aside-list > .aside-list-item:hover .thumbnail > img {  transform: scale(1);}#aside-content .aside-list > .aside-list-item:not(:last-child) {  border-bottom: 0 dashed var(--anzhiyu-background) !important;}#aside-content .aside-list > .aside-list-item .thumbnail {  border-radius: 8px;  border: var(--style-border);}#aside-content .aside-list > .aside-list-item:hover {  background: var(--anzhiyu-blue-main);  color: var(--anzhiyu-white);  transition: 0.3s;  box-shadow: var(--anzhiyu-shadow-main);}#aside-content .aside-list > .aside-list-item:hover a {  color: var(--anzhiyu-white) !important;}.card-widget.card-recent-post {  padding: 0.4rem 0.6rem !important;}/* 侧边栏个人卡片渐变色 */#aside-content > .card-widget.card-info {  background: linear-gradient(-45deg, #425aef, #031764, #150136, #67044d);  background-size: 400%;  box-shadow: var(--heo-shadow-black);  animation: gradient 15s ease infinite;  position: relative;  color: #ffffff;}.site-data > a .headline,.site-data > a .length-num {  color: #ffffff;}/* 文章底部版权样式 *//* https://anzhiy.cn/ */.layout #post .post-copyright {  border: 1px solid #49b1f5;  border-radius: 15px;  overflow: hidden;}#post .post-copyright {  position: relative;  margin: 40px 0 10px;  padding: 10px 16px;  border: 1px solid var(--light-grey);  -webkit-transition: box-shadow .3s ease-in-out;  -moz-transition: box-shadow .3s ease-in-out;  -o-transition: box-shadow .3s ease-in-out;  -ms-transition: box-shadow .3s ease-in-out;  transition: box-shadow .3s ease-in-out;}.layout #post .post-copyright:before {  top: -71px;  right: -20px;  font-size: 8.3em;}/* 上一篇 下一篇 样式 *//* https://blog.leonus.cn/2022/owo-big.html */#pagination.pagination-post, .relatedPosts>.relatedPosts-list>div {  border-radius: 20px;  border: 1px var(--leonus-blue) solid;  transition: .5s;}#pagination.pagination-post {  overflow: hidden;  margin-top: 40px;  width: 100%;}/* twikoo 评论框提醒 *//* https://blog.leonus.cn/2022/inputAlert.html *//* 设置文字内容 :nth-child(1)的作用是选择第几个 */.el-input.el-input--small.el-input-group.el-input-group--prepend:nth-child(1):before {  content: '输入QQ号会自动获取昵称和头像🐧';}.el-input.el-input--small.el-input-group.el-input-group--prepend:nth-child(2):before {  content: '收到回复将会发送到您的邮箱📧';}.el-input.el-input--small.el-input-group.el-input-group--prepend:nth-child(3):before {  content: '可以通过昵称访问您的网站🔗';}/* 当用户点击输入框时显示 */.el-input.el-input--small.el-input-group.el-input-group--prepend:focus-within::before,.el-input.el-input--small.el-input-group.el-input-group--prepend:focus-within::after {  display: block;}/* 主内容区 */.el-input.el-input--small.el-input-group.el-input-group--prepend::before {  /* 先隐藏起来 */  display: none;  /* 绝对定位 */  position: absolute;  /* 向上移动60像素 */  top: -60px;  /* 文字强制不换行，防止left:50%导致的文字换行 */  white-space: nowrap;  /* 圆角 */  border-radius: 10px;  /* 距离左边50% */  left: 50%;  /* 然后再向左边挪动自身的一半，即可实现居中 */  transform: translate(-50%);  /* 填充 */  padding: 14px 18px;  background: #444;  color: #fff;}/* 小角标 */.el-input.el-input--small.el-input-group.el-input-group--prepend::after {  display: none;  content: '';  position: absolute;  /* 内容大小（宽高）为0且边框大小不为0的情况下，每一条边（4个边）都是一个三角形，组成一个正方形。  我们先将所有边框透明，再给其中的一条边添加颜色就可以实现小三角图标 */  border: 12px solid transparent;  border-top-color: #444;  left: 50%;  transform: translate(-50%, -48px);}/* butterfly导航栏修改方案(自用方案) */#nav *::after {  background-color: transparent !important;}/* 圆角隐藏ul.menus_item_child {  overflow: hidden;  border-radius: 5px;} *//* 一级菜单居中 */#nav #blog_name {  font-size: 0px;}div#menus {  position: absolute;  /* width: fit-content; */  left: 50%;  transform: translateX(-50%);  /* display: flex; */  /* flex-direction: row; */  justify-content: center;  align-items: center;  /* height: 60px; */}/* 首页文章尾标居中 */#pagination {  overflow: hidden;  margin-top: 1rem;  width: 100%;}#pagination .pagination {  position: relative;  display: flex;  justify-content: center;  color: black;}#pagination .pagination {  margin-top: 20px;  text-align: center;}/* 隐藏歌词 */.aplayer.aplayer-fixed .aplayer-lrc {  height: 0px;}/* #nav #blog_name {  max-width: 1700px;  width: 100%;  display: flex;  position: relative;  padding: 0 1.5rem;} *//* #nav #site-name {  font-size: 0px;} */]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/blog/css/fcircle-beta.css"/>
      <url>/blog/css/fcircle-beta.css</url>
      
        <content type="html"><![CDATA[/*Last Modified time : 20220211 98:00 by https://immmmm.com已适配 FriendCircle 公共库和主库*/:root{  --lmm-hover: #fe5186;  --lmm-fontcolor: #363636;  --lmm-background: #f7f9fe;  --lmm-floorcolor: #a9a9b3;  --lmm-dark-fontcolor: #a9a9b3;  --lmm-dack-background: #252627;  --lmm-dark-floorcolor: #454545;}[data-theme=light] {  --lmm-fontcolor: #363636;  --lmm-background: #f7f9fe;  --lmm-floorcolor: #a9a9b3;}[data-theme=dark] {  --lmm-fontcolor: #a9a9b3;  --lmm-background: #252627;  --lmm-floorcolor: #454545;}/* 基本信息 */#cf-state {font-size:16px;border-radius:8px;box-shadow:none;max-width:810px;margin:auto;overflow:hidden;display:flex;flex-direction:row;flex-wrap:wrap;padding:8px 0;}.cf-state-data {width:100%;display:flex;}.cf-data-friends,.cf-data-active,.cf-data-article{height:60px;background:transparent;display:flex;flex-direction:column;width:33%;cursor:pointer;}.cf-label {font-size:16px;padding:0 3%;align-self:center;text-align:center;width:100%;height:30px;}.cf-message{align-self:center;text-align:center;padding:0 3%;width:50%;font-size:20px;}/* 排序按钮 */#cf-change{font-size:14px;display:block;padding:12px 0 4px;width:100%;text-align:center;}/* 更多按钮 */#cf-more {width:40%;max-width:810px;height:30px;margin:auto;border-radius:12px;font-weight:bolder;text-align:center;display:flex;flex-direction:column;justify-content:space-around;cursor:pointer;transition:0.3s;}#cf-more:hover{width:60%;}#cf-more i.fas::before {content:"∞";}/* 主容器 */#cf-container {width:100%;max-width:900px;height:auto;margin:auto;}#cf-container a {text-decoration:none;}.cf-article {margin:20px 1%;border-radius:5px;font-weight:bolder;overflow:hidden;transition: all ease-out .3s;position: relative;padding:0.5rem 1rem;}.cf-article:hover{transition:transform .3s;-webkit-transform:scale(1.3);transform:scale(1.03)}.cf-article-avatar{line-height:35px;}.cf-img-avatar {align-self:center;text-align:center;display:inline-block !important;width:22px;height:22px;border-radius:50%;margin:0 0 -4px !important;background: #fff;}.cf-article-author{line-height: 35px;font-size:14px;font-weight: 400;margin-left:5px;align-self:center;text-align:center;height:40px;white-space:nowrap;overflow:hidden;}.cf-article-floor{position: absolute;top: 0;right:0.5rem;font-style: italic;font-size: 3rem;line-height: 1.5rem;z-index:1;font-weight: 400;}.cf-article-title{font-weight: 500;position: relative;z-index:2;width:100%;display: block;letter-spacing:1.5px;font-size:18px;align-self:start;text-align:left;line-height:40px;padding:0;margin-bottom:10px;transition:0.3s;}.cf-article-time {font-size:14px;text-align:right;float:right;font-weight:400;}.cf-time-updated,.cf-time-created {display:inline-block;text-align:left;white-space:nowrap;}.cf-time-updated i.fas,.cf-time-created i.far{padding-right:8px;}.cf-article-time i:before {margin-right:5px;}/* 底部 */#cf-footer{margin:6rem 1% 2rem 0;text-align:right;font-size:13px;}.cf-data-lastupdated{font-size:13px;text-align:right;display: block;}/* 个人文章列表层 */#cf-overlay,#cf-overshow{position:fixed;width:100%;height:100%;}#cf-overlay{top: 0;left:100%;background-color: rgba(255, 255, 255, 0.42);-webkit-backdrop-filter: blur(10px);backdrop-filter: blur(10px);overflow-y:auto;pointer-events: all;transition: all 0.1s ease;z-index: 998;}#cf-overshow{bottom: 100%;left:0;transition: all 0.3s ease;z-index: 999;}#cf-overlay.cf-show-now{left:0;}#cf-overshow.cf-show-now{bottom:0;}.cf-overshow{text-align: center;border-radius: 20px;position: absolute;width: 320px;min-height:170px;left: 50%;top:50%;transform: translate(-50%,-50%);box-shadow: 0 12px 40px rgba(0, 0, 0, 0.093);background: var(--lmm-background);}.cf-overshow-head:hover img.cf-img-avatar{transform:rotate(360deg);transition:0.8s;}.cf-overshow .cf-overshow-head a{color: var(--lmm-hover);display:block;text-align:center;font-weight:bold;margin-top:-5px;padding:5px 8px 5px;text-decoration: none;}.cf-overshow img.cf-img-avatar{background:#fff;width: 80px;height: 80px;border-radius: 50%;margin: -45px auto 0 !important;box-shadow: 0 12px 40px rgb(0 0 0 / 9%);transform:rotate(-360deg);transition:0.8s;}.cf-overshow p{margin:0.3rem 5px;width:100%;position: relative;}.cf-overshow p a.cf-article-title{text-decoration: none !important;display:block;text-align:left;position: relative;z-index: 2;font-size:15px;line-height:25px;margin-bottom:15px;letter-spacing: normal;max-height:50px;overflow: hidden;text-overflow:ellipsis;display:-webkit-box;display:box;-webkit-line-clamp: 2; -webkit-box-orient: vertical;}.cf-overshow p span{position: absolute;bottom:-1rem;right:8px;z-index: 1;font-style: italic;font-size:12px;}#cf-container .cf-overshow p a:hover{letter-spacing:1px;transition:0.3s;}.cf-overshow .cf-overshow-content{padding:10px 15px 30px;border-bottom-left-radius:20px;border-bottom-right-radius:20px;background: #fff;}#cf-overshow .cf-overshow-close{position:sticky;display: block;width:100%;height:100%;}/* 颜色 */.cf-article .cf-article-title:hover{letter-spacing:2px;color:var(--lmm-hover) !important;}#cf-more i.fas:hover{color:var(--lmm-hover);}#cf-state,#cf-more {background:var(--lmm-background);color:var(--lmm-fontcolor);}#cf-change,.cf-time-updated,.cf-time-created,.cf-article-floor{color:var(--lmm-floorcolor);}.cf-article-author,.cf-article a.cf-article-title,.cf-article:hover .cf-article-floor,.cf-article:hover .cf-time-created,.cf-article:hover .cf-time-updated{color:var(--lmm-fontcolor);}.cf-article {background:var(--lmm-background);}#cf-change span:hover{color:var(--lmm-hover);cursor:pointer;}#cf-change .cf-change-now{color:var(--lmm-hover);font-weight:800;}.cf-overshow p a:hover{color:var(--lmm-hover) !important;}.cf-overshow p span{color:var(--lmm-floorcolor)}/* 暗色主题 */.dark-theme #cf-overlay,.theme-dark #cf-overlay{background-color: rgba(59, 61, 66, 0.42);}.dark-theme .cf-overshow,.theme-dark .cf-overshow{background: #292a2d;}.dark-theme .cf-overshow p a,.theme-dark .cf-overshow p a{color: var(--lmm-fontcolor);}.dark-theme .cf-overshow .cf-overshow-content,.theme-dark .cf-overshow .cf-overshow-content{background: #eaeaea;}.dark-theme #cf-state,.dark-theme #cf-more,.theme-dark #cf-state,.theme-dark #cf-more {background:var(--lmm-dack-background);color:var(--lmm-dark-fontcolor);}.dark-theme #cf-change,.dark-theme .cf-time-updated,.dark-theme .cf-time-created,.dark-theme .cf-article-floor,.theme-dark #cf-change,.theme-dark .cf-time-updated,.theme-dark .cf-time-created,.theme-dark .cf-article-floor{color:var(--lmm-dark-floorcolor);}.dark-theme .cf-article-author,.dark-theme .cf-article a.cf-article-title,.theme-dark .cf-article-author,.theme-dark .cf-article a.cf-article-title {color:var(--lmm-dark-fontcolor);}.dark-theme .cf-article,.theme-dark .cf-article {background:var(--lmm-dack-background);}.dark-theme .cf-article:hover .cf-article-floor,.dark-theme .cf-article:hover .cf-time-created,.dark-theme .cf-article:hover .cf-time-updated,.dark-theme .cf-overshow p span,.theme-dark .cf-article:hover .cf-article-floor,.theme-dark .cf-article:hover .cf-time-created,.theme-dark .cf-article:hover .cf-time-updated,.theme-dark .cf-overshow p span{color: var(--lmm-dark-fontcolor);}/* 移动端适配 */@media screen and (max-width:400px) {  #cf-state {font-size:14px;}  .cf-article-time i{display:none;}}@media screen and (max-width:300px) {  #cf-state,.cf-article-time{display:none;}}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/blog/css/friend.min.css"/>
      <url>/blog/css/friend.min.css</url>
      
        <content type="html"><![CDATA[.fUpdatedTime {    padding-top: 10px !important;    text-align: center;    height: 40px}#fMessageBoard {    transition: all .2s ease-in-out;    box-shadow: rgb(0 0 0 / 7%) 0 2px 2px 0, rgb(0 0 0 / 10%) 0 1px 5px 0;    border-radius: 2px}#fMessageBoard .fMessageItem {    position: relative;    display: flex;    align-items: center}#fMessageBoard .fMessageItem .fItem {    height: 60px;    width: 100%;    background: 0 0;    display: flex}#fMessageBoard .fMessageItem .fItem .fLabel {    padding: 0 3%;    font-weight: 600;    align-self: center;    text-align: center;    overflow: hidden}#fMessageBoard .fMessageItem .fItem .fMessage {    align-self: center;    text-align: center;    padding: 0 3%}#fMessageBoard #switchRankBtn {    width: auto;    max-width: 380px;    height: 40px;    display: flex;    text-align: center;    margin: auto;    flex-direction: row;    flex-wrap: wrap;    align-content: space-around;    justify-content: space-around}#fMessageBoard #switchRankBtn #rankByCreated {    height: 30px;    display: inline-block;    padding: 2px 5px}#fMessageBoard #switchRankBtn #rankByUpdated {    height: 30px;    display: inline-block;    padding: 2px 5px}#fMessageBoard #switchRankBtn input#switchRankMode[type=checkbox] {    display: none}#fMessageBoard #switchRankBtn label#switchRank {    cursor: pointer;    text-indent: -9999px;    width: 40px;    height: 20px;    margin: 7px 0;    background: #425aef;    display: inline-block;    border-radius: 10px;    position: relative}#fMessageBoard #switchRankBtn label#switchRank:after {    content: '';    position: absolute;    top: 2px;    left: 2px;    width: 16px;    height: 16px;    background: #fff;    border-radius: 8px;    transition: .3s}#fMessageBoard #switchRankBtn label#switchRank:active:after {    width: 50px}#fMessageBoard #switchRankBtn input#switchRankMode:checked+label {    background: #ff7242}#fMessageBoard #switchRankBtn input#switchRankMode:checked+label:after {    left: calc(100% - 2px);    transform: translateX(-100%)}#fcircleMoreBtn {    width: 90%;    max-width: 810px;    height: 30px;    margin: auto;    text-align: center;    display: flex;    flex-direction: column;    justify-content: space-around;    background: rgb(255 255 255 / 80%);    color: rgba(60, 60, 61, .7);    box-shadow: rgb(237 238 241) 0 2px 2px 0, rgb(25 141 176 / 10%) 0 1px 5px 0;    border-radius: 15px}#fcircleMoreBtn:hover {    color: #425aef;    cursor: pointer}#fcircleContainer {    width: 100%;    max-width: 900px;    height: auto;    margin: auto}#fcircleContainer a {    text-decoration: none}#fcircleContainer .fArticleItem {    margin: 20px 5%;    height: 150px;    display: flex;    background: rgb(255 255 255 / 80%);    color: rgba(60, 60, 61, .7);    box-shadow: rgb(237 238 241) 0 2px 2px 0, rgb(25 141 176 / 10%) 0 1px 5px 0;    border-radius: 15px;    overflow: hidden}#fcircleContainer .fArticleItem .fArticleAvatar {    width: 30%;    display: flex;    flex-direction: column;    font-weight: bolder}#fcircleContainer .fArticleItem .fArticleAvatar .fAvatar {    align-self: center;    text-align: center}#fcircleContainer .fArticleItem .fArticleAvatar .fAvatar img {    width: 75px;    height: 75px;    margin: 15px 5px !important;    border-radius: 25px}#fcircleContainer .fArticleItem .fArticleAvatar .fAvatar .img-alt.is-center {    display: none}#fcircleContainer .fArticleItem .fArticleAvatar .fArticleAuthor {    width: 80%;    margin: 3px 0;    align-self: center;    text-align: center;    transform: skewX(-10deg);    height: 30px;    white-space: nowrap;    overflow: hidden;    text-overflow: ellipsis}#fcircleContainer .fArticleItem .fArticleMessage {    display: flex;    flex-direction: column;    width: 70%;    justify-content: center}#fcircleContainer .fArticleItem .fArticleMessage a.fArticleTitle {    align-self: center;    text-align: center;    line-height: 40px;    width: 80%;    padding: 0 10%;    color: rgba(60, 60, 61, .7);    white-space: nowrap;    overflow: hidden;    text-overflow: ellipsis}#fcircleContainer .fArticleItem .fArticleMessage a.fArticleTitle:hover:before {    position: fixed;    width: fit-content;    max-width: 80%;    margin: auto;    left: 0;    right: 0;    top: 10%;    border-radius: 10px;    text-align: center;    z-index: 100;    content: attr(data-title);    color: #fff;    padding: 0 10px;    background-color: #425aef;    white-space: break-spaces}#fcircleContainer .fArticleItem .fArticleMessage a.fArticleTitle:hover {    color: var(--anzhiyu-theme)}#fcircleContainer .fArticleItem .fArticleMessage .fArticleTime {    width: 100%;    text-align: center;    display: flex}#fcircleContainer .fArticleItem .fArticleMessage .fArticleTime .fArticleCreated {    width: 40%;    margin: 0 0 0 10%;    text-align: center;    align-self: center;    padding: 15px 0}#fcircleContainer .fArticleItem .fArticleMessage .fArticleTime .fArticleUpdated {    width: 40%;    margin: 0 10% 0 0;    text-align: center;    align-self: center;    padding: 15px 0}#fcircleContainer .fArticleItem .fArticleMessage .fArticleTime i:before {    margin-right: 5px}@media screen and (max-width:768px) {    #fMessageBoard {        font-size: 16px    }}@media screen and (max-width:400px) {    #fcircleContainer .fArticleItem .fArticleMessage .fArticleTime i {        display: none    }    #fMessageBoard {        font-size: 12px    }    #fMessageBoard #switchRankBtn #rankByCreated {        font-size: 12px    }    #fMessageBoard #switchRankBtn #rankByUpdated {        font-size: 12px    }    #fcircleContainer .fArticleItem .fArticleAvatar {        display: none    }    #fcircleContainer .fArticleItem .fArticleMessage {        width: 100%    }    #fcircleContainer .fArticleItem .fArticleMessage a.fArticleTitle:hover:before {        font-size: 16px    }}@media screen and (max-width:300px) {    #fMessageBoard .fUpdatedTime span.fLabel {        display: none    }    #fMessageBoard .fMessageItem .fItem .fLabel {        width: 50%    }    #fMessageBoard .fMessageItem .fItem .fMessage {        width: 50%    }    #fMessageBoard span#rankByCreated {        display: none !important    }    #fMessageBoard span#rankByUpdated {        display: none !important    }}#fcircleContainer .fArticleItem a {    border-bottom: 0}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/blog/css/html.html"/>
      <url>/blog/css/html.html</url>
      
        <content type="html"><![CDATA[<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img class="entered loading" id="card-clock-loading" style="height: 120px; width: 100%;" data-ll-status="loading"/></div></div></div></div></div>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>赞助墙</title>
      <link href="/blog/donate/index.html"/>
      <url>/blog/donate/index.html</url>
      
        <content type="html"><![CDATA[<p style="font-size:28px"><b>博客打赏 😋</b></p><p>如果我的文章帮助到了您，或者您想支持我的网站，可以扫描下方二维码进行赞助，<br><code>赞助时请备注自己的 化名/昵称 ，打赏后将在此页面展示</code>，<br>非常感谢您的支持~ 🌹🌹🌹</p><iframe src="/blog/html/donate/index.html" style="overflow-x:hidden;overflow-y:hidden;border:0xp none #fff;min-height:240px;width:100%" frameborder="0" scrolling="no"></iframe><div class="tip info faa-horizontal animated"><p>特此鸣谢💓</p></div><table><thead><tr><th style="text-align:center">时间</th><th style="text-align:center">昵称</th><th style="text-align:center">金额</th><th style="text-align:center">备注</th><th style="text-align:center">打赏文章</th></tr></thead><tbody><tr><td style="text-align:center">暂无 😋</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td></tr></tbody></table><img src="https://image.cpen.top/image/thanks.jpg" alt="thanks" style="zoom:50%;" />]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/blog/css/qweather-icons.css"/>
      <url>/blog/css/qweather-icons.css</url>
      
        <content type="html"><![CDATA[/*!* QWeather Icons (https://icons.qweather.com)* Copyright QWeather 和风天气 (https://www.qweather.com)* License:  Code for MIT, Icons for CC BY 4.0*/@font-face {  font-family: "qweather-icons";  src: url("./fonts/qweather-icons.woff2?5bb5b475709c49961682eda055eb3dc5") format("woff2"),url("./fonts/qweather-icons.woff?5bb5b475709c49961682eda055eb3dc5") format("woff"),url("./fonts/qweather-icons.ttf?5bb5b475709c49961682eda055eb3dc5") format("truetype");}[class^="qi-"]::before,[class*=" qi-"]::before {  display: inline-block;  font-family: "qweather-icons" !important;  font-style: normal;  font-weight: normal !important;  font-variant: normal;  text-transform: none;  line-height: 1;  vertical-align: -.125em;  -webkit-font-smoothing: antialiased;  -moz-osx-font-smoothing: grayscale;}.qi-100::before { content: "\f101"; }.qi-101::before { content: "\f102"; }.qi-102::before { content: "\f103"; }.qi-103::before { content: "\f104"; }.qi-104::before { content: "\f105"; }.qi-150::before { content: "\f106"; }.qi-151::before { content: "\f107"; }.qi-152::before { content: "\f108"; }.qi-153::before { content: "\f109"; }.qi-300::before { content: "\f10a"; }.qi-301::before { content: "\f10b"; }.qi-302::before { content: "\f10c"; }.qi-303::before { content: "\f10d"; }.qi-304::before { content: "\f10e"; }.qi-305::before { content: "\f10f"; }.qi-306::before { content: "\f110"; }.qi-307::before { content: "\f111"; }.qi-308::before { content: "\f112"; }.qi-309::before { content: "\f113"; }.qi-310::before { content: "\f114"; }.qi-311::before { content: "\f115"; }.qi-312::before { content: "\f116"; }.qi-313::before { content: "\f117"; }.qi-314::before { content: "\f118"; }.qi-315::before { content: "\f119"; }.qi-316::before { content: "\f11a"; }.qi-317::before { content: "\f11b"; }.qi-318::before { content: "\f11c"; }.qi-350::before { content: "\f11d"; }.qi-351::before { content: "\f11e"; }.qi-399::before { content: "\f11f"; }.qi-400::before { content: "\f120"; }.qi-401::before { content: "\f121"; }.qi-402::before { content: "\f122"; }.qi-403::before { content: "\f123"; }.qi-404::before { content: "\f124"; }.qi-405::before { content: "\f125"; }.qi-406::before { content: "\f126"; }.qi-407::before { content: "\f127"; }.qi-408::before { content: "\f128"; }.qi-409::before { content: "\f129"; }.qi-410::before { content: "\f12a"; }.qi-456::before { content: "\f12b"; }.qi-457::before { content: "\f12c"; }.qi-499::before { content: "\f12d"; }.qi-500::before { content: "\f12e"; }.qi-501::before { content: "\f12f"; }.qi-502::before { content: "\f130"; }.qi-503::before { content: "\f131"; }.qi-504::before { content: "\f132"; }.qi-507::before { content: "\f133"; }.qi-508::before { content: "\f134"; }.qi-509::before { content: "\f135"; }.qi-510::before { content: "\f136"; }.qi-511::before { content: "\f137"; }.qi-512::before { content: "\f138"; }.qi-513::before { content: "\f139"; }.qi-514::before { content: "\f13a"; }.qi-515::before { content: "\f13b"; }.qi-800::before { content: "\f13c"; }.qi-801::before { content: "\f13d"; }.qi-802::before { content: "\f13e"; }.qi-803::before { content: "\f13f"; }.qi-804::before { content: "\f140"; }.qi-805::before { content: "\f141"; }.qi-806::before { content: "\f142"; }.qi-807::before { content: "\f143"; }.qi-900::before { content: "\f144"; }.qi-901::before { content: "\f145"; }.qi-999::before { content: "\f146"; }.qi-1001::before { content: "\f147"; }.qi-1002::before { content: "\f148"; }.qi-1003::before { content: "\f149"; }.qi-1004::before { content: "\f14a"; }.qi-1005::before { content: "\f14b"; }.qi-1006::before { content: "\f14c"; }.qi-1007::before { content: "\f14d"; }.qi-1008::before { content: "\f14e"; }.qi-1009::before { content: "\f14f"; }.qi-1010::before { content: "\f150"; }.qi-1011::before { content: "\f151"; }.qi-1012::before { content: "\f152"; }.qi-1013::before { content: "\f153"; }.qi-1014::before { content: "\f154"; }.qi-1015::before { content: "\f155"; }.qi-1016::before { content: "\f156"; }.qi-1017::before { content: "\f157"; }.qi-1018::before { content: "\f158"; }.qi-1019::before { content: "\f159"; }.qi-1020::before { content: "\f15a"; }.qi-1021::before { content: "\f15b"; }.qi-1022::before { content: "\f15c"; }.qi-1023::before { content: "\f15d"; }.qi-1024::before { content: "\f15e"; }.qi-1025::before { content: "\f15f"; }.qi-1026::before { content: "\f160"; }.qi-1027::before { content: "\f161"; }.qi-1028::before { content: "\f162"; }.qi-1029::before { content: "\f163"; }.qi-1030::before { content: "\f164"; }.qi-1031::before { content: "\f165"; }.qi-1032::before { content: "\f166"; }.qi-1033::before { content: "\f167"; }.qi-1034::before { content: "\f168"; }.qi-1035::before { content: "\f169"; }.qi-1036::before { content: "\f16a"; }.qi-1037::before { content: "\f16b"; }.qi-1038::before { content: "\f16c"; }.qi-1039::before { content: "\f16d"; }.qi-1040::before { content: "\f16e"; }.qi-1041::before { content: "\f16f"; }.qi-1042::before { content: "\f170"; }.qi-1043::before { content: "\f171"; }.qi-1044::before { content: "\f172"; }.qi-1045::before { content: "\f173"; }.qi-1046::before { content: "\f174"; }.qi-1047::before { content: "\f175"; }.qi-1048::before { content: "\f176"; }.qi-1049::before { content: "\f177"; }.qi-1050::before { content: "\f178"; }.qi-1051::before { content: "\f179"; }.qi-1052::before { content: "\f17a"; }.qi-1053::before { content: "\f17b"; }.qi-1054::before { content: "\f17c"; }.qi-1055::before { content: "\f17d"; }.qi-1056::before { content: "\f17e"; }.qi-1057::before { content: "\f17f"; }.qi-1058::before { content: "\f180"; }.qi-1059::before { content: "\f181"; }.qi-1061::before { content: "\f182"; }.qi-1064::before { content: "\f183"; }.qi-1101::before { content: "\f184"; }.qi-1302::before { content: "\f185"; }.qi-1402::before { content: "\f186"; }.qi-1601::before { content: "\f187"; }.qi-1602::before { content: "\f188"; }.qi-1603::before { content: "\f189"; }.qi-1604::before { content: "\f18a"; }.qi-1605::before { content: "\f18b"; }.qi-1606::before { content: "\f18c"; }.qi-1607::before { content: "\f18d"; }.qi-2001::before { content: "\f18e"; }.qi-2002::before { content: "\f18f"; }.qi-2003::before { content: "\f190"; }.qi-2004::before { content: "\f191"; }.qi-2005::before { content: "\f192"; }.qi-2006::before { content: "\f193"; }.qi-2007::before { content: "\f194"; }.qi-2008::before { content: "\f195"; }.qi-2009::before { content: "\f196"; }.qi-2010::before { content: "\f197"; }.qi-2011::before { content: "\f198"; }.qi-2012::before { content: "\f199"; }.qi-2013::before { content: "\f19a"; }.qi-2014::before { content: "\f19b"; }.qi-2015::before { content: "\f19c"; }.qi-2016::before { content: "\f19d"; }.qi-2017::before { content: "\f19e"; }.qi-2018::before { content: "\f19f"; }.qi-2019::before { content: "\f1a0"; }.qi-2020::before { content: "\f1a1"; }.qi-2021::before { content: "\f1a2"; }.qi-2022::before { content: "\f1a3"; }.qi-2023::before { content: "\f1a4"; }.qi-2024::before { content: "\f1a5"; }.qi-2025::before { content: "\f1a6"; }.qi-2026::before { content: "\f1a7"; }.qi-2027::before { content: "\f1a8"; }.qi-2028::before { content: "\f1a9"; }.qi-9998::before { content: "\f1aa"; }.qi-9999::before { content: "\f1ab"; }.qi-100-fill::before { content: "\f1ac"; }.qi-101-fill::before { content: "\f1ad"; }.qi-102-fill::before { content: "\f1ae"; }.qi-103-fill::before { content: "\f1af"; }.qi-104-fill::before { content: "\f1b0"; }.qi-150-fill::before { content: "\f1b1"; }.qi-151-fill::before { content: "\f1b2"; }.qi-152-fill::before { content: "\f1b3"; }.qi-153-fill::before { content: "\f1b4"; }.qi-300-fill::before { content: "\f1b5"; }.qi-301-fill::before { content: "\f1b6"; }.qi-302-fill::before { content: "\f1b7"; }.qi-303-fill::before { content: "\f1b8"; }.qi-304-fill::before { content: "\f1b9"; }.qi-305-fill::before { content: "\f1ba"; }.qi-306-fill::before { content: "\f1bb"; }.qi-307-fill::before { content: "\f1bc"; }.qi-308-fill::before { content: "\f1bd"; }.qi-309-fill::before { content: "\f1be"; }.qi-310-fill::before { content: "\f1bf"; }.qi-311-fill::before { content: "\f1c0"; }.qi-312-fill::before { content: "\f1c1"; }.qi-313-fill::before { content: "\f1c2"; }.qi-314-fill::before { content: "\f1c3"; }.qi-315-fill::before { content: "\f1c4"; }.qi-316-fill::before { content: "\f1c5"; }.qi-317-fill::before { content: "\f1c6"; }.qi-318-fill::before { content: "\f1c7"; }.qi-350-fill::before { content: "\f1c8"; }.qi-351-fill::before { content: "\f1c9"; }.qi-399-fill::before { content: "\f1ca"; }.qi-400-fill::before { content: "\f1cb"; }.qi-401-fill::before { content: "\f1cc"; }.qi-402-fill::before { content: "\f1cd"; }.qi-403-fill::before { content: "\f1ce"; }.qi-404-fill::before { content: "\f1cf"; }.qi-405-fill::before { content: "\f1d0"; }.qi-406-fill::before { content: "\f1d1"; }.qi-407-fill::before { content: "\f1d2"; }.qi-408-fill::before { content: "\f1d3"; }.qi-409-fill::before { content: "\f1d4"; }.qi-410-fill::before { content: "\f1d5"; }.qi-456-fill::before { content: "\f1d6"; }.qi-457-fill::before { content: "\f1d7"; }.qi-499-fill::before { content: "\f1d8"; }.qi-500-fill::before { content: "\f1d9"; }.qi-501-fill::before { content: "\f1da"; }.qi-502-fill::before { content: "\f1db"; }.qi-503-fill::before { content: "\f1dc"; }.qi-504-fill::before { content: "\f1dd"; }.qi-507-fill::before { content: "\f1de"; }.qi-508-fill::before { content: "\f1df"; }.qi-509-fill::before { content: "\f1e0"; }.qi-510-fill::before { content: "\f1e1"; }.qi-511-fill::before { content: "\f1e2"; }.qi-512-fill::before { content: "\f1e3"; }.qi-513-fill::before { content: "\f1e4"; }.qi-514-fill::before { content: "\f1e5"; }.qi-515-fill::before { content: "\f1e6"; }.qi-900-fill::before { content: "\f1e7"; }.qi-901-fill::before { content: "\f1e8"; }.qi-999-fill::before { content: "\f1e9"; }.qi-sunny::before { content: "\f101"; }.qi-cloudy::before { content: "\f102"; }.qi-few-clouds::before { content: "\f103"; }.qi-partly-cloudy::before { content: "\f104"; }.qi-overcast::before { content: "\f105"; }.qi-clear-night::before { content: "\f106"; }.qi-cloudy-night::before { content: "\f107"; }.qi-few-clouds-night::before { content: "\f108"; }.qi-partly-cloudy-night::before { content: "\f109"; }.qi-shower-rain::before { content: "\f10a"; }.qi-heavy-shower-rain::before { content: "\f10b"; }.qi-thundershower::before { content: "\f10c"; }.qi-heavy-thunderstorm::before { content: "\f10d"; }.qi-thundershower-with-hail::before { content: "\f10e"; }.qi-light-rain::before { content: "\f10f"; }.qi-moderate-rain::before { content: "\f110"; }.qi-heavy-rain::before { content: "\f111"; }.qi-extreme-rain::before { content: "\f112"; }.qi-drizzle-rain::before { content: "\f113"; }.qi-storm::before { content: "\f114"; }.qi-heavy-storm::before { content: "\f115"; }.qi-severe-storm::before { content: "\f116"; }.qi-freezing-rain::before { content: "\f117"; }.qi-light-to-moderate-rain::before { content: "\f118"; }.qi-moderate-to-heavy-rain::before { content: "\f119"; }.qi-heavy-rain-to-storm::before { content: "\f11a"; }.qi-storm-to-heavy-storm::before { content: "\f11b"; }.qi-heavy-to-severe-storm::before { content: "\f11c"; }.qi-shower-rain-night::before { content: "\f11d"; }.qi-heavy-shower-rain-night::before { content: "\f11e"; }.qi-rain::before { content: "\f11f"; }.qi-light-snow::before { content: "\f120"; }.qi-moderate-snow::before { content: "\f121"; }.qi-heavy-snow::before { content: "\f122"; }.qi-snowstorm::before { content: "\f123"; }.qi-sleet::before { content: "\f124"; }.qi-rain-and-snow::before { content: "\f125"; }.qi-shower-snow::before { content: "\f126"; }.qi-snow-flurry::before { content: "\f127"; }.qi-light-to-moderate-snow::before { content: "\f128"; }.qi-moderate-to-heavy-snow::before { content: "\f129"; }.qi-heavy-snow-to-snowstorm::before { content: "\f12a"; }.qi-shower-snow-night::before { content: "\f12b"; }.qi-snow-flurry-night::before { content: "\f12c"; }.qi-snow::before { content: "\f12d"; }.qi-mist::before { content: "\f12e"; }.qi-foggy::before { content: "\f12f"; }.qi-haze::before { content: "\f130"; }.qi-sand::before { content: "\f131"; }.qi-dust::before { content: "\f132"; }.qi-duststorm::before { content: "\f133"; }.qi-sandstorm::before { content: "\f134"; }.qi-dense-fog::before { content: "\f135"; }.qi-strong-fog::before { content: "\f136"; }.qi-moderate-haze::before { content: "\f137"; }.qi-heavy-haze::before { content: "\f138"; }.qi-severe-haze::before { content: "\f139"; }.qi-heavy-fog::before { content: "\f13a"; }.qi-extra-heavy-fog::before { content: "\f13b"; }.qi-new-moon::before { content: "\f13c"; }.qi-waxing-crescent::before { content: "\f13d"; }.qi-first-quarter::before { content: "\f13e"; }.qi-waxing-gibbous::before { content: "\f13f"; }.qi-full-moon::before { content: "\f140"; }.qi-waning-gibbous::before { content: "\f141"; }.qi-last-quarter::before { content: "\f142"; }.qi-waning-crescent::before { content: "\f143"; }.qi-hot::before { content: "\f144"; }.qi-cold::before { content: "\f145"; }.qi-unknown::before { content: "\f146"; }.qi-typhoon::before { content: "\f147"; }.qi-tornado::before { content: "\f148"; }.qi-rainstorm::before { content: "\f149"; }.qi-snow-storm::before { content: "\f14a"; }.qi-cold-wave::before { content: "\f14b"; }.qi-gale::before { content: "\f14c"; }.qi-sandstorm-warning::before { content: "\f14d"; }.qi-low-temperature-freeze::before { content: "\f14e"; }.qi-high-temperature::before { content: "\f14f"; }.qi-heat-wave::before { content: "\f150"; }.qi-dry-hot-air::before { content: "\f151"; }.qi-downburst::before { content: "\f152"; }.qi-avalanche::before { content: "\f153"; }.qi-lightning::before { content: "\f154"; }.qi-hail::before { content: "\f155"; }.qi-frost::before { content: "\f156"; }.qi-heavy-fog-warning::before { content: "\f157"; }.qi-low-level-wind-shearl::before { content: "\f158"; }.qi-haze-warning::before { content: "\f159"; }.qi-thunder-gust::before { content: "\f15a"; }.qi-road-icing::before { content: "\f15b"; }.qi-drought::before { content: "\f15c"; }.qi-gale-at-sea::before { content: "\f15d"; }.qi-heat-stroke::before { content: "\f15e"; }.qi-wildfire::before { content: "\f15f"; }.qi-grassland-fire::before { content: "\f160"; }.qi-freeze::before { content: "\f161"; }.qi-space-weather::before { content: "\f162"; }.qi-heavy-air-pollution::before { content: "\f163"; }.qi-low-temperature-rain-and-snow::before { content: "\f164"; }.qi-strong-convection::before { content: "\f165"; }.qi-ozone::before { content: "\f166"; }.qi-heavy-snow-warning::before { content: "\f167"; }.qi-cold-warning::before { content: "\f168"; }.qi-continuous-rain::before { content: "\f169"; }.qi-waterlogging::before { content: "\f16a"; }.qi-geological-hazard::before { content: "\f16b"; }.qi-heavy-rainfall::before { content: "\f16c"; }.qi-severely-falling-temperature::before { content: "\f16d"; }.qi-snow-disaster::before { content: "\f16e"; }.qi-wildfire-grassland::before { content: "\f16f"; }.qi-medical-meteorology::before { content: "\f170"; }.qi-thunderstorm::before { content: "\f171"; }.qi-school-closure::before { content: "\f172"; }.qi-factory-closure::before { content: "\f173"; }.qi-maritime-risk::before { content: "\f174"; }.qi-spring-dust::before { content: "\f175"; }.qi-falling-temperature::before { content: "\f176"; }.qi-typhoon-and-rainstorm::before { content: "\f177"; }.qi-severe-cold::before { content: "\f178"; }.qi-sand-dust::before { content: "\f179"; }.qi-sea-thunderstorms::before { content: "\f17a"; }.qi-sea-fog::before { content: "\f17b"; }.qi-sea-thunder::before { content: "\f17c"; }.qi-sea-typhoon::before { content: "\f17d"; }.qi-low-temperature::before { content: "\f17e"; }.qi-road-ice-and-snow::before { content: "\f17f"; }.qi-thunderstorm-and-gale::before { content: "\f180"; }.qi-continuous-low-temperature::before { content: "\f181"; }.qi-strong-dust::before { content: "\f182"; }.qi-short-lived-heavy-shower-rain::before { content: "\f183"; }.qi-flood::before { content: "\f184"; }.qi-mudflow::before { content: "\f185"; }.qi-storm-surge::before { content: "\f186"; }.qi-very-hot-weather::before { content: "\f187"; }.qi-strong-monsoon-signal::before { content: "\f188"; }.qi-landslip::before { content: "\f189"; }.qi-tropical-cyclone::before { content: "\f18a"; }.qi-fire-danger::before { content: "\f18b"; }.qi-flooding-in-the-northern-new-territories::before { content: "\f18c"; }.qi-cold-weather::before { content: "\f18d"; }.qi-wind::before { content: "\f18e"; }.qi-snow-ice::before { content: "\f18f"; }.qi-fog::before { content: "\f190"; }.qi-coastal-event::before { content: "\f191"; }.qi-forest-fire::before { content: "\f192"; }.qi-rain-warning::before { content: "\f193"; }.qi-rain-flood::before { content: "\f194"; }.qi-freezing-rain-icing::before { content: "\f195"; }.qi-ground-frost::before { content: "\f196"; }.qi-dust-raising-winds::before { content: "\f197"; }.qi-strong-surface-winds::before { content: "\f198"; }.qi-hot-day::before { content: "\f199"; }.qi-warm-night::before { content: "\f19a"; }.qi-cold-day::before { content: "\f19b"; }.qi-thunderstorm-and-lightning::before { content: "\f19c"; }.qi-hailstorm::before { content: "\f19d"; }.qi-sea-area-warning::before { content: "\f19e"; }.qi-fishermen-warning::before { content: "\f19f"; }.qi-low-humidity::before { content: "\f1a0"; }.qi-accumulated-rain::before { content: "\f1a1"; }.qi-hazardous-surf-warning::before { content: "\f1a2"; }.qi-marine-wind-warning::before { content: "\f1a3"; }.qi-road-weather-alert::before { content: "\f1a4"; }.qi-thunder-rain::before { content: "\f1a5"; }.qi-thunder-rain-and-fog::before { content: "\f1a6"; }.qi-damaging-winds::before { content: "\f1a7"; }.qi-veld-fire-conditions::before { content: "\f1a8"; }.qi-weather-advisory::before { content: "\f1a9"; }.qi-severe-weather-warning::before { content: "\f1aa"; }.qi-warning-default::before { content: "\f1ab"; }.qi-sunny-fill::before { content: "\f1ac"; }.qi-cloudy-fill::before { content: "\f1ad"; }.qi-few-clouds-fill::before { content: "\f1ae"; }.qi-partly-cloudy-fill::before { content: "\f1af"; }.qi-overcast-fill::before { content: "\f1b0"; }.qi-clear-night-fill::before { content: "\f1b1"; }.qi-cloudy-night-fill::before { content: "\f1b2"; }.qi-few-clouds-night-fill::before { content: "\f1b3"; }.qi-partly-cloudy-night-fill::before { content: "\f1b4"; }.qi-shower-rain-fill::before { content: "\f1b5"; }.qi-heavy-shower-rain-fill::before { content: "\f1b6"; }.qi-thundershower-fill::before { content: "\f1b7"; }.qi-heavy-thunderstorm-fill::before { content: "\f1b8"; }.qi-thundershower-with-hail-fill::before { content: "\f1b9"; }.qi-light-rain-fill::before { content: "\f1ba"; }.qi-moderate-rain-fill::before { content: "\f1bb"; }.qi-heavy-rain-fill::before { content: "\f1bc"; }.qi-extreme-rain-fill::before { content: "\f1bd"; }.qi-drizzle-rain-fill::before { content: "\f1be"; }.qi-storm-fill::before { content: "\f1bf"; }.qi-heavy-storm-fill::before { content: "\f1c0"; }.qi-severe-storm-fill::before { content: "\f1c1"; }.qi-freezing-rain-fill::before { content: "\f1c2"; }.qi-light-to-moderate-rain-fill::before { content: "\f1c3"; }.qi-moderate-to-heavy-rain-fill::before { content: "\f1c4"; }.qi-heavy-rain-to-storm-fill::before { content: "\f1c5"; }.qi-storm-to-heavy-storm-fill::before { content: "\f1c6"; }.qi-heavy-to-severe-storm-fill::before { content: "\f1c7"; }.qi-shower-rain-night-fill::before { content: "\f1c8"; }.qi-heavy-shower-rain-night-fill::before { content: "\f1c9"; }.qi-rain-fill::before { content: "\f1ca"; }.qi-light-snow-fill::before { content: "\f1cb"; }.qi-moderate-snow-fill::before { content: "\f1cc"; }.qi-heavy-snow-fill::before { content: "\f1cd"; }.qi-snowstorm-fill::before { content: "\f1ce"; }.qi-sleet-fill::before { content: "\f1cf"; }.qi-rain-and-snow-fill::before { content: "\f1d0"; }.qi-shower-snow-fill::before { content: "\f1d1"; }.qi-snow-flurry-fill::before { content: "\f1d2"; }.qi-light-to-moderate-snow-fill::before { content: "\f1d3"; }.qi-moderate-to-heavy-snow-fill::before { content: "\f1d4"; }.qi-heavy-snow-to-snowstorm-fill::before { content: "\f1d5"; }.qi-shower-snow-night-fill::before { content: "\f1d6"; }.qi-snow-flurry-night-fill::before { content: "\f1d7"; }.qi-snow-fill::before { content: "\f1d8"; }.qi-mist-fill::before { content: "\f1d9"; }.qi-foggy-fill::before { content: "\f1da"; }.qi-haze-fill::before { content: "\f1db"; }.qi-sand-fill::before { content: "\f1dc"; }.qi-dust-fill::before { content: "\f1dd"; }.qi-duststorm-fill::before { content: "\f1de"; }.qi-sandstorm-fill::before { content: "\f1df"; }.qi-dense-fog-fill::before { content: "\f1e0"; }.qi-strong-fog-fill::before { content: "\f1e1"; }.qi-moderate-haze-fill::before { content: "\f1e2"; }.qi-heavy-haze-fill::before { content: "\f1e3"; }.qi-severe-haze-fill::before { content: "\f1e4"; }.qi-heavy-fog-fill::before { content: "\f1e5"; }.qi-extra-heavy-fog-fill::before { content: "\f1e6"; }.qi-hot-fill::before { content: "\f1e7"; }.qi-cold-fill::before { content: "\f1e8"; }.qi-unknown-fill::before { content: "\f1e9"; }]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/blog/css/runtime.min.css"/>
      <url>/blog/css/runtime.min.css</url>
      
        <content type="html"><![CDATA[div#runtime{width:180px;margin:auto;color:#fff;padding-inline:5px;border-radius:10px;background-color:rgba(0,0,0,.7)}#workboard{font-size:12px}[data-theme=dark] div#runtime{color:#28b4c8;box-shadow:0 0 5px rgba(28,69,218,.71);animation:flashlight 1s linear infinite alternate}#ghbdages .github-badge img{height:20px}@-moz-keyframes flashlight{from{box-shadow:0 0 5px #1478d2}to{box-shadow:0 0 2px #1478d2}}@-webkit-keyframes flashlight{from{box-shadow:0 0 5px #1478d2}to{box-shadow:0 0 2px #1478d2}}@-o-keyframes flashlight{from{box-shadow:0 0 5px #1478d2}to{box-shadow:0 0 2px #1478d2}}@keyframes flashlight{from{box-shadow:0 0 5px #1478d2}to{box-shadow:0 0 2px #1478d2}}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>朋友圈</title>
      <link href="/blog/fcircle/index.html"/>
      <url>/blog/fcircle/index.html</url>
      
        <content type="html"><![CDATA[<!-- 失效  主题配置文件 fcircle 配置 --><!-- 挂载友链朋友圈的容器 --><div class="post-content"><div id="cf-container">与主机通讯中……</div></div><!-- 加样式和功能代码 --><!-- 将apiurl改成你后端生成的api地址 --><script type="text/javascript">  var fdataUser = {    apiurl: 'https://hexo-circle-of-friends.cpen.top/'  }</script><link rel="stylesheet" href="/blog/css//fcircle-beta.css"><script type="text/javascript" src="/blog/js/fcircle-beta.js"></script>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>相册</title>
      <link href="/blog/gallery/index.html"/>
      <url>/blog/gallery/index.html</url>
      
        <content type="html"><![CDATA[<div class="gallery-group-main">  <figure class="gallery-group">  <img class="gallery-group-img no-lightbox" src='https://image.cpen.top/image/wallpaper/1.jpg' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">壁纸</div>  <p>收藏的一些壁纸</p>  <a href='/blog/gallery/wallpaper'></a>  </figcaption>  </figure>    <figure class="gallery-group">  <img class="gallery-group-img no-lightbox" src='https://image.cpen.top/image/emo/-36a527510994fffb.gif' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">表情包</div>  <p>收藏的一些表情包</p>  <a href='/blog/gallery/emo'></a>  </figcaption>  </figure>    <figure class="gallery-group">  <img class="gallery-group-img no-lightbox" src='https://image.cpen.top/image/nd/bye.jpg' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">nd</div>  <p>时间像流沙</p>  <a href='/blog/gallery/nd'></a>  </figcaption>  </figure>    <figure class="gallery-group">  <img class="gallery-group-img no-lightbox" src='https://image.cpen.top/image/bj/IMG_20210626_154440.jpg' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">bj</div>  <p>遗憾</p>  <a href='/blog/gallery/bj'></a>  </figcaption>  </figure>  </div>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>友链</title>
      <link href="/blog/link/index.html"/>
      <url>/blog/link/index.html</url>
      
        <content type="html"><![CDATA[<div class="flink"><div class="flink-name">友情链接</div> <div class="flink-list">          <div class="flink-list-item">            <a href="https://hexo.io/zh-cn/" title="Hexo" target="_blank">              <div class="flink-item-icon">                <img class="no-lightbox" src="https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg" onerror='this.onerror=null;this.src="/blog/img/friend_404.gif"' alt="Hexo" />              </div>              <div class="flink-item-name">Hexo</div>               <div class="flink-item-desc" title="快速、简洁且高效的博客框架">快速、简洁且高效的博客框架</div>            </a>          </div>          <div class="flink-list-item">            <a href="https://crazywong.com/" title="CrazyWong" target="_blank">              <div class="flink-item-icon">                <img class="no-lightbox" src="https://crazywong.com/img/avatar.png" onerror='this.onerror=null;this.src="/blog/img/friend_404.gif"' alt="CrazyWong" />              </div>              <div class="flink-item-name">CrazyWong</div>               <div class="flink-item-desc" title="Butterfly 主题作者">Butterfly 主题作者</div>            </a>          </div>          <div class="flink-list-item">            <a href="https://blog.cofess.com/" title="Cofess" target="_blank">              <div class="flink-item-icon">                <img class="no-lightbox" src="https://blog.cofess.com/images/avatar.jpg" onerror='this.onerror=null;this.src="/blog/img/friend_404.gif"' alt="Cofess" />              </div>              <div class="flink-item-name">Cofess</div>               <div class="flink-item-desc" title="Pure 主题作者">Pure 主题作者</div>            </a>          </div>          <div class="flink-list-item">            <a href="https://cpen.top/" title="Mycpen" target="_blank">              <div class="flink-item-icon">                <img class="no-lightbox" src="https://image.cpen.top/image/avatar.jpg" onerror='this.onerror=null;this.src="/blog/img/friend_404.gif"' alt="Mycpen" />              </div>              <div class="flink-item-name">Mycpen</div>               <div class="flink-item-desc" title="这是一个有趣的博客">这是一个有趣的博客</div>            </a>          </div>          <div class="flink-list-item">            <a href="https://anzhiy.cn/" title="安知鱼`Blog" target="_blank">              <div class="flink-item-icon">                <img class="no-lightbox" src="https://image.anzhiy.cn/adminuploads/1/2022/09/11/631d80e87b859.jpg" onerror='this.onerror=null;this.src="/blog/img/friend_404.gif"' alt="安知鱼`Blog" />              </div>              <div class="flink-item-name">安知鱼`Blog</div>               <div class="flink-item-desc" title="生活明朗，万物可爱">生活明朗，万物可爱</div>            </a>          </div>          <div class="flink-list-item">            <a href="https://tzy1997.com/" title="Ethan.Tzy" target="_blank">              <div class="flink-item-icon">                <img class="no-lightbox" src="https://bu.dusays.com/2022/05/02/626f92e193879.jpg" onerror='this.onerror=null;this.src="/blog/img/friend_404.gif"' alt="Ethan.Tzy" />              </div>              <div class="flink-item-name">Ethan.Tzy</div>               <div class="flink-item-desc" title="古今之成大事者，不惟有超世之才，亦必有坚忍不拔之志">古今之成大事者，不惟有超世之才，亦必有坚忍不拔之志</div>            </a>          </div>          <div class="flink-list-item">            <a href="https://akilar.top/" title="Akilarの糖果屋" target="_blank">              <div class="flink-item-icon">                <img class="no-lightbox" src="https://npm.elemecdn.com/akilar-candyassets/image/siteicon/favicon.png" onerror='this.onerror=null;this.src="/blog/img/friend_404.gif"' alt="Akilarの糖果屋" />              </div>              <div class="flink-item-name">Akilarの糖果屋</div>               <div class="flink-item-desc" title="期待您的光临！">期待您的光临！</div>            </a>          </div>          <div class="flink-list-item">            <a href="https://blog.zhheo.com/" title="张洪Heo" target="_blank">              <div class="flink-item-icon">                <img class="no-lightbox" src="https://img.zhheo.com/i/2022/08/19/62ff32fa28da1.png" onerror='this.onerror=null;this.src="/blog/img/friend_404.gif"' alt="张洪Heo" />              </div>              <div class="flink-item-name">张洪Heo</div>               <div class="flink-item-desc" title="分享设计与科技生活">分享设计与科技生活</div>            </a>          </div>          <div class="flink-list-item">            <a href="https://blog.justlovesmile.top" title="MJ's Blog" target="_blank">              <div class="flink-item-icon">                <img class="no-lightbox" src="https://npm.elemecdn.com/justlovesmile-img/logo.jpg" onerror='this.onerror=null;this.src="/blog/img/friend_404.gif"' alt="MJ's Blog" />              </div>              <div class="flink-item-name">MJ's Blog</div>               <div class="flink-item-desc" title="醒亦念卿，梦亦念卿">醒亦念卿，梦亦念卿</div>            </a>          </div>          <div class="flink-list-item">            <a href="https://blog.eurkon.com" title="Eurkon" target="_blank">              <div class="flink-item-icon">                <img class="no-lightbox" src="https://blog.eurkon.com/images/user/avatar.jpg" onerror='this.onerror=null;this.src="/blog/img/friend_404.gif"' alt="Eurkon" />              </div>              <div class="flink-item-name">Eurkon</div>               <div class="flink-item-desc" title="不只是代码的搬运工">不只是代码的搬运工</div>            </a>          </div>          <div class="flink-list-item">            <a href="https://hwame.top" title="鴻塵" target="_blank">              <div class="flink-item-icon">                <img class="no-lightbox" src="https://cdn.jsdelivr.net/gh/hwame/pics@main/avatar.jpg" onerror='this.onerror=null;this.src="/blog/img/friend_404.gif"' alt="鴻塵" />              </div>              <div class="flink-item-name">鴻塵</div>               <div class="flink-item-desc" title="处女座不适合做码农">处女座不适合做码农</div>            </a>          </div></div></div><!-- - class_name: 网站  class_desc: 值得推荐的网站  link_list:    - name: 百度      link: https://www.baidu.com/      avatar: https://files.codelife.cc/website/baidu.svg      descr: 众里寻他千百度    - name: 必应      link: https://www.bing.com/      avatar: https://files.codelife.cc/website/www.bing.com.svg      descr: Microsoft Bing    - name: 谷歌      link: https://www.google.com/      avatar: https://files.codelife.cc/website/google.svg      descr: ERR_CONNECTION_TIMED_OUT --><br><details class="folding-tag" ><summary> 😋 相关注意事项 </summary>              <div class='content'>              <ul>    <li>本站不参与商业性网站、下载站、视频站等</li>    <li><a>申请友链</a> 在评论区留言即可，<a>但需先添加本站友链</a>（申请格式如下文所述）</li>    <li>😀请一定要积极向上，且符合社会主义核心价值观</li>    <li>如果你想联系我，在 <a href="/blog/about" target="_self">About</a> 页面中有我的相关联系方式</li></ul>              </div>            </details><details class="folding-tag" ><summary> 📋 友链页免责声明 </summary>              <div class='content'>              <p>本博客遵守中华人民共和国相关法律。本页内容仅作为方便学习而产生的快速链接的链接方式，对与友情链接中存在的链接、好文推荐链接等均为其他网站。我本人能力有限无法逐个甄别每篇文章的每个字，并无法获知是否在收录后原作者是否对链接增加了违反法律甚至其他破坏用户计算机等行为。因为部分友链网站甚至没有做备案、域名并未做实名认证等，所以友链网站均可能存在风险，请您须知。</p><p>所以在我力所能及的情况下，我会包括但不限于：</p><ul><li>针对收录的博客中的绝大多数内容通过标题来鉴别是否存在有风险的内容</li><li>在收录的友链好文推荐中检查是否存在风险内容</li></ul><p>但是您在访问的时候，仍然无法避免，包括但不限于：</p><ul><li>作者更换了超链接的指向，替换成了其他内容</li><li>作者的服务器被恶意攻击、劫持、被注入恶意内容</li><li>作者的域名到期，被不法分子用作他用</li><li>作者修改了文章内容，增加钓鱼网站、广告等无效信息</li><li>不完善的隐私保护对用户的隐私造成了侵害、泄漏</li></ul><p>最新文章部分为机器抓取，本站作者未经过任何审核和筛选，本着友链信任原则添加的。如果您发现其中包含违反中华人民共和国法律的内容，请即使联系和举报。该友链会被拉黑。</p><p>如果因为从本页跳转给您造成了损失，深表歉意，并且建议用户如果发现存在问题在本页面进行回复。通常会很快处理。如果长时间无法得到处理，建议联系 <a href="mailto:mycpen@qq.com">mycpen@qq.com</a>。</p>              </div>            </details><details class="folding-tag" ><summary> 💖 申请友链格式 </summary>              <div class='content'>              <p><code>在下方评论处留言</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">your</span> <span class="string">Blog&#x27;s</span> <span class="string">name</span></span><br><span class="line">  <span class="attr">link:</span> <span class="string">your</span> <span class="string">Blog&#x27;s</span> <span class="string">address</span></span><br><span class="line">  <span class="attr">avatar:</span> <span class="string">your</span> <span class="string">Blog&#x27;s</span> <span class="string">avatar</span></span><br><span class="line">  <span class="attr">descr:</span> <span class="string">your</span> <span class="string">Blog&#x27;s</span> <span class="string">description</span></span><br></pre></td></tr></table></figure>              </div>            </details><details class="folding-tag" ><summary> 👻 我的友链 </summary>              <div class='content'>              <div class="tabs" id="link"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#link-1">Butterfly</button></li><li class="tab"><button type="button" data-href="#link-2">Pure</button></li><li class="tab"><button type="button" data-href="#link-3">General</button></li><li class="tab"><button type="button" data-href="#link-4">Candy</button></li><li class="tab"><button type="button" data-href="#link-5">Fuild</button></li><li class="tab"><button type="button" data-href="#link-6">Volantis</button></li><li class="tab"><button type="button" data-href="#link-7">Html</button></li><li class="tab"><button type="button" data-href="#link-8">Jade</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="link-1"><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Mycpen</span></span><br><span class="line">  <span class="attr">link:</span> <span class="string">https://cpen.top/</span></span><br><span class="line">  <span class="attr">avatar:</span> <span class="string">https://image.cpen.top/image/avatar.jpg</span></span><br><span class="line">  <span class="attr">descr:</span> <span class="string">这是一个有趣的博客</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="link-2"><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">Mycpen:</span></span><br><span class="line">  <span class="attr">link:</span> <span class="string">https://cpen.top/</span></span><br><span class="line">  <span class="attr">avatar:</span> <span class="string">https://image.cpen.top/image/avatar.jpg</span></span><br><span class="line">  <span class="attr">desc:</span> <span class="string">这是一个有趣的博客</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="link-3"><table><thead><tr><th style="text-align:left">名称</th><th style="text-align:left">数值</th></tr></thead><tbody><tr><td style="text-align:left">博客名称</td><td style="text-align:left">Mycpen’s Blog</td></tr><tr><td style="text-align:left">博客截图</td><td style="text-align:left"><a href="https://image.cpen.top/image/cpen.top.jpg">https://image.cpen.top/image/cpen.top.jpg</a></td></tr><tr><td style="text-align:left">博客链接</td><td style="text-align:left"><a href="https://cpen.top/">https://cpen.top/</a></td></tr><tr><td style="text-align:left">博主头像</td><td style="text-align:left"><a href="https://image.cpen.top/image/avatar.jpg">https://image.cpen.top/image/avatar.jpg</a></td></tr><tr><td style="text-align:left">博主描述</td><td style="text-align:left">这是一个有趣的博客</td></tr><tr><td style="text-align:left">博客关键词</td><td style="text-align:left">Mycpen</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="link-4"><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Mycpen</span></span><br><span class="line">  <span class="attr">link:</span> <span class="string">https://cpen.top/</span></span><br><span class="line">  <span class="attr">avatar:</span> <span class="string">https://image.cpen.top/image/avatar.jpg</span></span><br><span class="line">  <span class="attr">descr:</span> <span class="string">这是一个有趣的博客</span></span><br><span class="line">  <span class="attr">siteshot:</span> <span class="string">https://image.cpen.top/image/cpen.top.jpg</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="link-5"><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> &#123;</span><br><span class="line">  <span class="attr">title:</span> <span class="string">&#x27;Mycpen&#x27;</span>,</span><br><span class="line">  <span class="attr">intro:</span> <span class="string">&#x27;这是一个有趣的博客&#x27;</span>,</span><br><span class="line">  <span class="attr">link:</span> <span class="string">&#x27;https://cpen.top/&#x27;</span>,</span><br><span class="line">  <span class="attr">image:</span> <span class="string">&#x27;https://image.cpen.top/image/avatar.jpg&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="link-6"><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Mycpen&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;avatar&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://image.cpen.top/image/avatar.jpg&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;screenshot&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://image.cpen.top/image/cpen.top.jpg&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://cpen.top/&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;这是一个有趣的博客&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;keywords&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Mycpen&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="link-7"><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://cpen.top/&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;external nofollow&quot;</span>&gt;</span>Mycpen<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="link-8"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a(href=&#x27;https://cpen.top/&#x27; rel=&quot;external nofollow&quot;) Mycpen</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/blog/js/ali_font.js"/>
      <url>/blog/js/ali_font.js</url>
      
        <content type="html"><![CDATA[!function(c){var l,h,a,t,i,v='<svg><symbol id="icon-dragon_chen" viewBox="0 0 1024 1024"><path d="M512 512m-296.421053 0a296.421053 296.421053 0 1 0 592.842106 0 296.421053 296.421053 0 1 0-592.842106 0Z" fill="#D6B196" ></path><path d="M970.105263 512c0 224.983579-163.166316 412.186947-377.263158 450.533053v-54.460632C777.135158 870.507789 916.210526 707.206737 916.210526 512c0-222.881684-181.328842-404.210526-404.210526-404.210526S107.789474 289.118316 107.789474 512s181.328842 404.210526 404.210526 404.210526c9.081263 0 18.000842-0.754526 26.947368-1.374315v53.894736c-8.973474 0.538947-17.866105 1.374316-26.947368 1.374316-252.604632 0-458.105263-205.500632-458.105263-458.105263S259.395368 53.894737 512 53.894737s458.105263 205.500632 458.105263 458.105263z m-498.122105 265.620211L431.157895 754.526316V485.052632h-66.074948c-14.470737 110.645895-44.355368 197.066105-102.696421 260.742736l-39.747368-36.432842C306.526316 617.876211 323.368421 462.901895 323.368421 242.526316V215.578947h377.263158v53.894737H377.182316c-0.404211 58.260211-2.209684 112.128-6.359579 161.684211H700.631579v53.894737h-122.152421a481.172211 481.172211 0 0 0 76.826947 119.70021l66.479158-39.855158 27.728842 46.214737-54.460631 32.687158c29.507368 24.953263 63.757474 45.675789 102.80421 58.098526l-16.303158 51.361684c-134.224842-42.711579-222.773895-167.073684-261.551158-268.207157H485.052632v221.857684l68.985263-41.391158 27.728842 46.214737-109.783579 65.886316zM646.736842 377.263158h-215.578947v-53.894737h215.578947v53.894737z" fill="#231F20" ></path></symbol><symbol id="icon-dog_xu" viewBox="0 0 1024 1024"><path d="M512 512m-296.421053 0a296.421053 296.421053 0 1 0 592.842106 0 296.421053 296.421053 0 1 0-592.842106 0Z" fill="#D6B196" ></path><path d="M970.105263 512c0 224.983579-163.166316 412.186947-377.263158 450.533053v-54.460632C777.135158 870.507789 916.210526 707.206737 916.210526 512c0-222.881684-181.328842-404.210526-404.210526-404.210526S107.789474 289.118316 107.789474 512s181.328842 404.210526 404.210526 404.210526c9.081263 0 18.000842-0.754526 26.947368-1.374315v53.894736c-8.973474 0.538947-17.866105 1.374316-26.947368 1.374316-252.604632 0-458.105263-205.500632-458.105263-458.105263S259.395368 53.894737 512 53.894737s458.105263 205.500632 458.105263 458.105263z m-375.592421 150.393263c33.684211 44.544 75.210105 74.698105 124.739369 90.812632l11.425684 3.718737 10.401684-6.009264C781.204211 727.740632 808.421053 622.565053 808.421053 592.842105h-53.894737c0 22.069895-19.132632 80.869053-33.711158 103.504842-34.816-14.605474-64.538947-39.262316-89.249684-74.13221 48.316632-55.269053 92.079158-117.328842 120.535579-179.900632l-49.044211-22.285473c-23.767579 52.250947-59.742316 104.717474-100.055579 152.656842-24.010105-50.930526-41.148632-115.927579-51.658105-195.395369H700.631579v-53.894737h-155.189895A1848.050526 1848.050526 0 0 1 538.947368 161.684211h-53.894736c0 58.206316 2.155789 112.074105 6.494315 161.68421H323.368421v26.947368c0 216.549053-13.177263 263.545263-100.702316 359.046737l39.747369 36.432842c63.326316-69.093053 92.806737-118.272 105.714526-206.848H485.052632v-53.894736h-111.319579a1742.147368 1742.147368 0 0 0 3.449263-107.789474h120.158316c12.611368 98.250105 35.031579 177.475368 67.395368 238.187789-61.978947 65.536-128.053895 117.975579-173.298526 142.282106l25.519158 47.481263c47.589053-25.573053 114.095158-77.446737 177.55621-142.821053z m125.170526-411.971368l-80.842105-80.842106-38.103579 38.103579 80.842105 80.842106 38.103579-38.103579z" fill="#231F20" ></path></symbol><symbol id="icon-dog" viewBox="0 0 1024 1024"><path d="M894.814316 904.434526l83.240421-183.134315-13.824-13.204211c-0.485053-0.458105-45.648842-47.589053-47.939369-185.263158-0.134737-7.922526-0.134737-33.953684-0.134736-55.996631-30.693053 15.306105-70.090105 19.887158-106.09179 19.887157-92.752842 0-163.624421-23.983158-210.647579-71.275789a192.512 192.512 0 0 1-27.944421-36.513684H377.263158v377.263158c342.662737 0 403.105684 51.092211 494.592 128.377263 7.922526 6.682947 15.521684 13.312 22.959158 19.86021z" fill="#85C3DE" ></path><path d="M326.063158 282.947368c0 34.250105-13.231158 44.463158-29.642105 44.463158s-29.642105-10.213053-29.642106-44.463158c0-34.223158 13.231158-44.463158 29.642106-44.463157s29.642105 10.24 29.642105 44.463157zM269.473684 430.295579v311.646316L190.275368 916.210526h59.203369L323.368421 753.637053V377.263158h-26.947368c-119.403789 0-172.732632-53.382737-185.505685-107.789474h35.624421c51.092211 0 68.581053-15.764211 120.535579-62.544842 12.773053-11.506526 28.079158-25.276632 47.023158-41.741474l18.351158-15.952842-69.658947-99.139368-44.085895 30.989474 41.768421 59.472842c-11.183158 9.862737-20.884211 18.593684-29.480421 26.327579C180.736 212.156632 176.235789 215.578947 146.539789 215.578947H53.894737v26.947369c0 88.710737 66.910316 178.149053 215.578947 187.769263z m216.710737-161.414737c2.290526 71.733895 28.698947 136.326737 75.048421 182.918737C618.711579 509.628632 702.437053 538.947368 810.091789 538.947368c18.593684 0 36.190316-1.158737 52.628211-3.449263 3.745684 111.265684 33.630316 170.334316 51.496421 196.015158l-38.507789 84.722526C782.174316 742.049684 688.774737 700.631579 377.263158 700.631579v53.894737c34.277053 0 65.697684 0.512 94.639158 1.509052L374.595368 970.105263h59.203369l96.013474-211.240421c66.182737 4.338526 117.005474 11.829895 157.911578 22.016L626.229895 916.210526h59.176421l54.16421-119.134315c47.616 18.405053 79.737263 42.091789 113.125053 69.739789L805.753263 970.105263h59.203369l113.071157-248.778105-13.824-13.204211c-0.485053-0.458105-45.648842-47.589053-47.939368-185.263158C985.168842 498.553263 1024 447.811368 1024 377.263158c0-95.205053-66.506105-161.684211-161.684211-161.684211v53.894737c65.482105 0 107.789474 42.307368 107.789474 107.789474 0 89.088-87.013053 107.789474-160.013474 107.789474-92.752842 0-163.624421-23.983158-210.647578-71.27579-30.315789-30.504421-45.891368-65.832421-53.35579-98.735158 11.210105 6.952421 22.932211 13.338947 35.274105 19.186527l23.04-48.720843c-92.106105-43.654737-148.992-128.646737-219.243789-243.981473l-46.026105 28.05221c49.448421 81.246316 92.968421 148.506947 147.051789 199.302737z" fill="#231F20" ></path></symbol><symbol id="icon-goat" viewBox="0 0 1024 1024"><path d="M548.378947 646.736842a952.32 952.32 0 0 1 140.90779-161.68421H107.789474c0 107.600842 0 107.600842-63.649685 169.283368l-13.069473 12.665263L66.721684 754.526316h417.172211c20.345263-41.472 43.654737-77.446737 64.485052-107.789474z" fill="#F7C768" ></path><path d="M608.256 144.734316C555.762526 115.577263 506.098526 107.789474 485.052632 107.789474V53.894737c32.579368 0 91.270737 11.452632 149.369263 43.735579 75.290947 41.822316 130.694737 94.531368 171.385263 150.878316C755.873684 288.013474 697.101474 323.368421 646.736842 323.368421h-107.789474v-53.894737h107.789474c20.506947 0 48.424421-11.210105 80.437895-31.285895a471.04 471.04 0 0 0-118.918737-93.453473zM832.673684 342.231579c-16.384 0-29.642105 10.24-29.642105 44.463158 0 34.250105 13.231158 44.463158 29.642105 44.463158s29.642105-10.213053 29.642105-44.463158c0-34.223158-13.231158-44.463158-29.642105-44.463158zM1024 619.789474C1024 347.109053 901.066105 122.448842 686.753684 3.395368l-26.165895 47.104C914.324211 191.461053 964.688842 440.400842 969.647158 592.842105h-84.506947c-17.92-35.624421-45.352421-69.12-87.013053-101.995789l-16.788211-13.285053-16.734315 13.392842c-66.128842 52.897684-134.629053 127.083789-187.311158 209.677474H102.965895l-8.272842-20.318316C159.043368 617.013895 161.684211 603.109053 161.684211 485.052632v-53.894737h485.052631v-53.894737H161.684211c0-80.384 14.309053-110.026105 66.586947-137.916632l-25.384421-47.535158C123.365053 234.226526 107.789474 291.920842 107.789474 377.263158v107.789474c0 107.600842 0 107.600842-63.649685 169.283368l-13.069473 12.665263L110.618947 862.315789h58.206316l-43.897263-107.789473h103.477895l43.897263 107.789473h58.206316l-43.897263-107.789473h259.47621C508.981895 824.939789 485.052632 899.152842 485.052632 970.105263h53.894736c0-68.688842 27.270737-144.060632 68.958316-215.578947H687.157895c7.410526 0 13.473684 6.063158 13.473684 13.473684V862.315789h53.894737v-94.315789c0-37.160421-30.208-67.368421-67.368421-67.368421h-44.65179c40.771368-58.017684 89.438316-111.427368 138.913684-153.626947C841.512421 600.037053 862.315789 655.225263 862.315789 754.526316h53.894737c0-38.912-2.748632-74.482526-11.102315-107.789474H1024v-26.947368z" fill="#231F20" ></path></symbol><symbol id="icon-goat_wei" viewBox="0 0 1024 1024"><path d="M512 512m-296.421053 0a296.421053 296.421053 0 1 0 592.842106 0 296.421053 296.421053 0 1 0-592.842106 0Z" fill="#D6B196" ></path><path d="M970.105263 512c0 224.983579-163.166316 412.186947-377.263158 450.533053v-54.460632C777.135158 870.507789 916.210526 707.206737 916.210526 512c0-222.881684-181.328842-404.210526-404.210526-404.210526S107.789474 289.118316 107.789474 512s181.328842 404.210526 404.210526 404.210526c9.081263 0 18.000842-0.754526 26.947368-1.374315v53.894736c-8.973474 0.538947-17.866105 1.374316-26.947368 1.374316-252.604632 0-458.105263-205.500632-458.105263-458.105263S259.395368 53.894737 512 53.894737s458.105263 205.500632 458.105263 458.105263z m-431.157895 50.202947c52.304842 70.925474 136.973474 152.144842 232.528843 190.383158l19.994947-50.041263c-109.271579-43.708632-202.805895-152.629895-238.780632-217.49221H808.421053v-53.894737H538.947368v-53.894737h215.578948v-53.894737h-215.578948V161.684211h-53.894736v161.68421h-215.578948v53.894737h215.578948v53.894737H215.578947v53.894737h255.757474c-35.974737 64.862316-129.536 173.783579-238.807579 217.49221l20.021895 50.041263c95.528421-38.238316 180.197053-119.484632 232.501895-190.383158V808.421053h53.894736v-246.218106z" fill="#231F20" ></path></symbol><symbol id="icon-dragon" viewBox="0 0 1024 1024"><path d="M366.376421 344.441263l152.980211-152.98021c43.142737-43.142737 141.204211-9.216 270.201263 115.738947-15.225263 9.835789-25.114947 15.818105-44.13979 32.256s-38.076632 35.489684-59.418947 56.832c-4.203789 4.203789-51.173053 53.221053-78.740211 82.027789-10.805895-12.126316-22.743579-24.171789-34.654315-36.082526L493.136842 362.792421l-54.218105 54.218105-72.542316-72.569263zM862.315789 512c0 46.834526-45.352421 80.842105-107.789473 80.842105-108.948211 0-189.359158-28.806737-267.129263-56.697263C414.100211 509.871158 344.872421 485.052632 258.182737 485.052632 80.788211 485.052632 0 588.126316 0 683.897263h53.894737C73.216 659.779368 135.302737 646.736842 177.340632 646.736842c77.338947 0 223.124211 23.282526 291.893894 47.912421C547.462737 722.701474 615.989895 754.526316 734.315789 754.526316 862.315789 754.526316 916.210526 670.315789 916.210526 512h-53.894737z" fill="#FF8787" ></path><path d="M552.421053 1024c-69.766737 0-113.825684-13.958737-156.402527-27.459368-54.487579-17.273263-110.807579-35.004632-232.421052-26.516211l-3.826527-53.733053c131.718737-9.458526 195.934316 10.967579 252.52379 28.887579 42.226526 13.365895 78.686316 24.926316 140.126316 24.926316 92.752842 0 148.210526-57.936842 148.210526-113.960421 0-16.949895-5.524211-101.618526-114.634105-101.618526-64.970105 0-112.747789 23.336421-163.328 48.02021C365.325474 830.571789 300.301474 862.315789 204.288 862.315789 85.908211 862.315789 0 787.294316 0 683.897263 0 588.126316 80.788211 485.052632 258.182737 485.052632c86.689684 0 155.917474 24.818526 229.214316 51.09221 45.810526 16.410947 92.564211 33.172211 145.488842 44.166737 9.000421-7.033263 13.850947-16.276211 13.850947-26.758737 0-37.187368-37.672421-74.859789-74.13221-111.265684l-3.287579-3.287579 38.103579-38.103579 3.260631 3.287579C652.853895 446.275368 700.631579 494.026105 700.631579 553.552842c0 12.719158-2.802526 24.926316-7.976421 36.109474A594.997895 594.997895 0 0 0 754.526316 592.842105c62.437053 0 107.789474-34.007579 107.789473-80.842105 0-58.853053-52.870737-110.268632-108.840421-164.702316l-8.057263-7.841684c-19.024842 16.437895-38.076632 35.489684-59.418947 56.832l-38.103579-38.103579c74.805895-74.832842 134.898526-134.898526 268.314947-141.931789V55.619368c-63.407158 7.787789-120.993684 39.424-121.667368 39.801264l-15.818105 8.811789-14.120421-11.344842C731.701895 66.452211 709.712842 53.894737 673.684211 53.894737c-41.418105 0-74.347789 25.869474-109.190737 53.301895-26.624 20.911158-54.137263 42.549895-86.851369 53.194105L469.342316 161.684211h-69.093053l-105.525895 105.525894-38.103579-38.130526L324.015158 161.684211H161.684211V107.789474h303.104c22.231579-8.272842 43.708632-25.168842 66.398315-42.981053C569.829053 34.438737 613.618526 0 673.684211 0c48.909474 0 81.408 17.946947 110.888421 40.097684C813.702737 26.300632 877.729684 0 943.157895 0h26.947368v323.368421h-53.894737v-53.167158c-54.164211 3.098947-92.914526 15.845053-127.002947 36.675369l1.832421 1.778526C852.587789 368.505263 916.210526 430.376421 916.210526 512c0 60.928-43.708632 109.945263-107.789473 127.622737V700.631579h53.894736v-53.894737h53.894737v53.894737h53.894737v53.894737h-53.894737v53.894737h-53.894737v-53.894737h-53.894736c-29.722947 0-53.894737-24.171789-53.894737-53.894737v-53.894737c-118.325895 0-207.063579-31.797895-285.318737-59.877053C400.437895 562.229895 335.494737 538.947368 258.182737 538.947368 117.059368 538.947368 53.894737 611.732211 53.894737 683.897263 53.894737 757.221053 115.738947 808.421053 204.288 808.421053c11.910737 0 23.228632-0.538947 34.034526-1.536C248.454737 796.321684 269.473684 770.640842 269.473684 739.166316c0-33.118316-43.088842-70.979368-58.152421-81.596632l30.935579-44.139789c8.299789 5.793684 81.111579 58.664421 81.111579 125.736421 0 19.429053-4.527158 37.052632-10.994526 52.304842 30.773895-10.051368 58.314105-23.498105 86.662737-37.349053C452.877474 727.848421 508.577684 700.631579 585.997474 700.631579 702.410105 700.631579 754.526316 778.725053 754.526316 856.144842 754.526316 938.657684 678.912 1024 552.421053 1024z m-21.180632-623.104L493.136842 362.792421l137.889684-137.889684 38.103579 38.103579-137.889684 137.889684z m-126.760421-18.351158l-38.103579-38.103579 152.980211-152.98021 38.103579 38.103579-152.980211 152.98021z m282.004211-218.624c15.494737-9.754947 43.331368-31.447579 43.331368-31.447579-25.734737-27.809684-49.556211-33.333895-67.368421-29.07621-19.240421 4.608-37.753263 24.602947-37.753263 24.602947s42.253474 22.447158 61.790316 35.920842z" fill="#231F20" ></path></symbol><symbol id="icon-horse" viewBox="0 0 1024 1024"><path d="M776.003368 646.736842c16.599579-99.947789 43.439158-181.086316 83.213474-256.538947l6.817684-12.934737H269.473684c-36.756211 0-53.894737 54.945684-53.894737 92.05221 0 46.753684 6.656 77.527579 70.278737 176.074106l84.533895 128.269473L498.876632 646.736842h277.126736z" fill="#FFAF6E" ></path><path d="M1024 0v404.210526c0 33.333895 0 134.736842-92.079158 134.736842h-13.824l-78.362947-109.056c-22.743579 49.906526-40.340211 103.046737-53.490527 162.950737h115.092211C937.310316 592.842105 970.105263 625.637053 970.105263 661.638737c0 60.631579-69.389474 154.300632-77.312 164.75621l-43.008-32.471579C875.466105 759.861895 916.210526 693.813895 916.210526 661.638737c0-5.982316-8.919579-14.901895-14.901894-14.901895h-125.332211C761.128421 736.121263 754.526316 840.569263 754.526316 970.105263h-53.894737c0-283.971368 31.097263-453.605053 110.888421-605.049263l20.318316-38.534737 112.801684 156.995369c14.443789-4.419368 25.465263-20.938105 25.465263-79.306106V0h53.894737z m-161.684211 161.684211h53.894737V0h-53.894737v80.842105c-17.381053-14.955789-38.184421-26.947368-80.842105-26.947368h-134.736842v53.894737h134.736842c37.672421 0 80.842105 40.906105 80.842105 53.894737z m-107.789473 0h-215.578948v53.894736h161.684211l53.894737-53.894736zM300.894316 766.544842L400.680421 916.210526h64.754526l-95.043368-142.551579L498.876632 646.736842h167.855157a1212.631579 1212.631579 0 0 1 9.431579-53.894737h-199.383579l-175.885473 173.702737z m109.97221-184.400842l-37.861052-38.319158-132.419369 130.802526C173.729684 571.095579 161.684211 529.812211 161.684211 469.315368 161.684211 398.578526 199.464421 323.368421 269.473684 323.368421h323.368421l53.894737-53.894737H269.473684c-6.709895 0-13.258105 0.565895-19.698526 1.482105C234.927158 249.451789 204.638316 215.578947 160.633263 215.578947 65.967158 215.578947 0 349.291789 0 469.315368c0 70.170947 16.141474 136.650105 49.232842 202.671158L6.197895 723.833263l41.472 34.41179 66.128842-79.737264-8.704-16.033684C83.105684 622.133895 53.894737 558.214737 53.894737 469.315368 53.894737 368.451368 106.765474 269.473684 160.633263 269.473684c13.231158 0 25.815579 9.889684 35.43579 20.533895C142.874947 321.967158 107.789474 388.500211 107.789474 469.315368c0 78.201263 19.698526 130.937263 93.642105 243.981474l-55.296 54.622316L280.899368 970.105263h64.754527l-130.048-195.072 195.260631-192.889263z" fill="#231F20" ></path></symbol><symbol id="icon-monkey_shen" viewBox="0 0 1024 1024"><path d="M512 512m-296.421053 0a296.421053 296.421053 0 1 0 592.842106 0 296.421053 296.421053 0 1 0-592.842106 0Z" fill="#BBC4C9" ></path><path d="M970.105263 512c0 224.983579-163.166316 412.186947-377.263158 450.533053v-54.460632C777.135158 870.507789 916.210526 707.206737 916.210526 512c0-222.881684-181.328842-404.210526-404.210526-404.210526S107.789474 289.118316 107.789474 512s181.328842 404.210526 404.210526 404.210526c9.081263 0 18.000842-0.754526 26.947368-1.374315v53.894736c-8.973474 0.538947-17.866105 1.374316-26.947368 1.374316-252.604632 0-458.105263-205.500632-458.105263-458.105263S259.395368 53.894737 512 53.894737s458.105263 205.500632 458.105263 458.105263z m-431.157895 134.736842h161.684211v53.894737h53.894737V269.473684h-215.578948V161.684211h-53.894736v107.789473h-215.578948v431.157895h53.894737v-53.894737h161.684211v215.578947h53.894736v-215.578947z m0-161.68421h161.684211v107.789473h-161.684211v-107.789473z m-215.578947 0h161.684211v107.789473h-161.684211v-107.789473z m215.578947-161.684211h161.684211v107.789474h-161.684211v-107.789474z m-215.578947 0h161.684211v107.789474h-161.684211v-107.789474z" fill="#231F20" ></path></symbol><symbol id="icon-ox_chou" viewBox="0 0 1024 1024"><path d="M512 512m-296.421053 0a296.421053 296.421053 0 1 0 592.842106 0 296.421053 296.421053 0 1 0-592.842106 0Z" fill="#D6B196" ></path><path d="M970.105263 512c0 224.983579-163.166316 412.186947-377.263158 450.533053v-54.460632C777.135158 870.507789 916.210526 707.206737 916.210526 512c0-222.881684-181.328842-404.210526-404.210526-404.210526S107.789474 289.118316 107.789474 512s181.328842 404.210526 404.210526 404.210526c9.081263 0 18.000842-0.754526 26.947368-1.374315v53.894736c-8.973474 0.538947-17.866105 1.374316-26.947368 1.374316-252.604632 0-458.105263-205.500632-458.105263-458.105263S259.395368 53.894737 512 53.894737s458.105263 205.500632 458.105263 458.105263z m-161.68421 188.631579h-159.555369c13.985684-172.813474 43.115789-357.429895 70.817684-385.158737L700.631579 269.473684H323.368421v53.894737h107.169684c-1.940211 45.756632-8.192 103.962947-15.76421 161.684211H323.368421v53.894736h83.968c-9.862737 68.446316-20.264421 130.128842-25.734737 161.684211H215.578947v53.894737h592.842106v-53.894737z m-346.543158-161.684211h149.800421a3313.717895 3313.717895 0 0 0-16.842105 161.684211h-158.477474c6.036211-35.247158 16.114526-95.636211 25.519158-161.684211z m22.608842-215.578947h171.735579c-15.198316 41.121684-27.405474 100.594526-36.890948 161.684211h-150.123789c7.383579-57.505684 13.419789-115.361684 15.279158-161.684211z" fill="#231F20" ></path></symbol><symbol id="icon-monkey" viewBox="0 0 1024 1024"><path d="M757.733053 485.052632H565.894737a80.842105 80.842105 0 0 0-80.842105 80.842105v215.578947c0 40.96 43.546947 99.678316 77.446736 139.210105C596.426105 960.215579 603.055158 970.105263 603.055158 970.105263H754.526316s15.144421-18.674526 45.891368-58.071579S862.315789 809.984 862.315789 717.608421c0-89.573053-47.993263-166.346105-104.582736-232.555789z" fill="#C3D686" ></path><path d="M538.947368 1024h-53.894736c0-32.794947 25.869474-87.417263 77.446736-103.316211C528.599579 881.152 485.052632 822.433684 485.052632 781.473684c0-44.570947 36.271158-80.842105 80.842105-80.842105h80.842105v53.894737h-80.842105a26.947368 26.947368 0 0 0-26.947369 26.947368c0 19.725474 36.675368 77.473684 92.133053 134.736842h88.602947c20.210526-14.147368 88.737684-71.464421 88.737685-198.602105 0-108.382316-93.237895-202.967579-168.151579-278.986105-49.502316-50.202947-88.576-89.842526-98.735158-128.61979-11.749053-44.732632-21.584842-112.586105-26.327579-148.318315H377.263158c-45.136842 0-89.519158 8.434526-121.802105 53.894736H431.157895v53.894737c-97.28 0-107.789474 113.071158-107.789474 161.684211v53.894737h53.894737v161.68421h-53.894737v-107.789474h-26.947368c-170.253474 0-188.631579-94.234947-188.631579-134.736842 0-31.043368 35.220211-72.326737 55.727158-93.722947 2.694737-14.686316 5.847579-28.348632 9.431579-41.013895H161.684211V215.578947h31.528421C239.642947 120.993684 317.224421 107.789474 377.263158 107.789474h185.640421l2.802526 23.794526c0.134737 1.050947 12.719158 106.657684 27.944421 164.756211 6.494316 24.872421 44.624842 63.514947 84.965053 104.448C760.481684 483.813053 862.315789 587.129263 862.315789 717.608421c0 92.375579-31.124211 155.028211-61.898105 194.425263C904.919579 892.146526 970.105263 803.004632 970.105263 673.684211c0-91.405474-42.819368-154.381474-84.237474-215.255579C847.791158 402.458947 808.421053 344.576 808.421053 269.473684c0-119.349895 87.093895-161.684211 161.68421-161.68421v53.894737c-32.417684 0-107.789474 10.509474-107.789474 107.789473 0 58.502737 31.555368 104.933053 68.096 158.639158C974.282105 492.597895 1024 565.679158 1024 673.684211c0 177.286737-108.301474 296.421053-269.473684 296.421052h-161.684211c-37.672421 0-53.894737 40.906105-53.894737 53.894737zM229.214316 269.473684a384.808421 384.808421 0 0 0-14.012632 58.341053l-1.401263 8.488421-6.090105 6.117053c-22.878316 22.932211-44.813474 52.601263-46.026105 62.275368 0 56.805053 53.76 75.264 107.789473 79.386947V431.157895c0-58.691368 13.473684-119.619368 46.511158-161.684211h-86.770526zM323.368421 1024h-53.894737c0-32.794947 25.869474-87.417263 77.446737-103.316211C313.020632 881.152 269.473684 822.433684 269.473684 781.473684c0-44.570947 36.271158-80.842105 80.842105-80.842105h45.16379A188.847158 188.847158 0 0 1 565.894737 592.842105h134.736842v53.894737h-134.736842c-74.293895 0-134.736842 60.442947-134.736842 134.736842v26.516211l-53.894737 0.377263V781.473684c0-9.162105 0.646737-18.135579 1.913263-26.947368H350.315789c-14.848 0-26.947368 12.072421-26.947368 26.947368 0 19.725474 36.675368 77.473684 92.133053 134.736842H431.157895v53.894737h-53.894737c-37.672421 0-53.894737 40.906105-53.894737 53.894737z" fill="#231F20" ></path></symbol><symbol id="icon-horse_wu" viewBox="0 0 1024 1024"><path d="M512 512m-296.421053 0a296.421053 296.421053 0 1 0 592.842106 0 296.421053 296.421053 0 1 0-592.842106 0Z" fill="#FF8787" ></path><path d="M970.105263 512c0 224.983579-163.166316 412.186947-377.263158 450.533053v-54.460632C777.135158 870.507789 916.210526 707.206737 916.210526 512c0-222.881684-181.328842-404.210526-404.210526-404.210526S107.789474 289.118316 107.789474 512s181.328842 404.210526 404.210526 404.210526c9.081263 0 18.000842-0.754526 26.947368-1.374315v53.894736c-8.973474 0.538947-17.866105 1.374316-26.947368 1.374316-252.604632 0-458.105263-205.500632-458.105263-458.105263S259.395368 53.894737 512 53.894737s458.105263 205.500632 458.105263 458.105263z m-431.157895 26.947368h269.473685v-53.894736H538.947368v-161.684211h161.684211v-53.894737H411.001263c12.045474-33.28 20.156632-69.793684 20.156632-107.789473h-53.894737c0 121.963789-105.364211 233.391158-106.415158 234.496l38.858105 37.349052c2.883368-3.018105 43.816421-46.133895 77.392842-110.160842H485.052632v161.684211H215.578947v53.894736h269.473685v323.368421h53.894736V538.947368z" fill="#231F20" ></path></symbol><symbol id="icon-ox" viewBox="0 0 1025 1024"><path d="M540.294737 754.526316h215.578947c20.210526 0 35.112421 1.374316 53.894737 4.581052 91.863579 15.656421 145.354105 67.691789 161.684211 86.069895V916.210526h53.894736V635.580632l-7.895579-7.895579c-9.269895-9.269895-36.513684-49.232842-44.032-196.527158H540.294737a161.684211 161.684211 0 0 0-161.684211 161.68421v131.098948c43.304421 20.210526 97.28 30.585263 161.684211 30.585263z" fill="#FFAF6E" ></path><path d="M1025.347368 635.580632V916.210526h-53.894736v-71.033263c-16.330105-18.405053-69.820632-70.413474-161.684211-86.069895V916.210526h-53.894737v-161.68421h-107.789473v215.578947h-53.894737V700.631579h161.68421c100.998737 0 172.570947 38.669474 215.578948 71.868632v-115.738948c-33.684211-43.627789-51.712-137.458526-53.706106-279.498105H701.978947c-76.934737 0-127.218526-26.219789-175.804631-51.550316a1556.048842 1556.048842 0 0 0-26.839579-13.743158c-26.839579 26.004211-66.209684 44.921263-115.738948 55.511579 24.441263 22.986105 60.874105 52.116211 106.469053 72.838737l-22.312421 49.044211c-76.584421-34.816-129.589895-88.926316-150.824421-113.125053-10.644211 0.619789-21.477053 1.024-32.687158 1.024a473.734737 473.734737 0 0 1-123.365053-15.952842l-93.022315 186.314105 68.581052 53.86779C167.882105 579.557053 237.891368 538.947368 324.715789 538.947368v53.894737c-95.986526 0-170.361263 62.490947-171.088842 63.137684l-16.78821 14.282106-136.838737-107.358316 109.729684-219.809684C46.430316 314.448842 1.347368 267.371789 1.347368 199.868632 1.347368 89.815579 121.586526 53.894737 163.031579 53.894737v53.894737c-14.120421 0-107.789474 17.165474-107.789474 92.079158C55.242105 290.465684 192.188632 323.368421 284.240842 323.368421c67.907368 0 122.421895-12.988632 157.696-35.624421-42.711579-14.336-95.097263-23.120842-169.337263-18.324211l-3.503158-53.786947c95.878737-6.117053 160.148211 8.515368 211.429053 28.833684C484.244211 235.439158 486.4 225.818947 486.4 215.578947c0-48.855579-57.829053-76.288-58.394947-76.557473l22.393263-49.017263C454.063158 91.648 540.294737 131.826526 540.294737 215.578947c0 18.566737-3.422316 35.84-9.997474 51.631158 7.060211 3.584 13.985684 7.168 20.776421 10.698106C597.854316 302.322526 638.248421 323.368421 701.978947 323.368421h269.473685v26.947368c0 214.689684 35.220211 266.590316 45.999157 277.369264l7.895579 7.895579z m-729.384421 25.141894l-98.789052 118.541474 86.797473 137.835789 45.594948-28.725894-65.913263-104.690527 37.052631-44.43621C358.642526 785.192421 439.080421 808.421053 540.294737 808.421053v-53.894737c-99.893895 0-175.077053-24.549053-223.474526-72.946527l-20.857264-20.857263z" fill="#231F20" ></path></symbol><symbol id="icon-rabbit_mao" viewBox="0 0 1024 1024"><path d="M512 512m-296.421053 0a296.421053 296.421053 0 1 0 592.842106 0 296.421053 296.421053 0 1 0-592.842106 0Z" fill="#7DD47F" ></path><path d="M970.105263 512c0 224.983579-163.166316 412.186947-377.263158 450.533053v-54.460632C777.135158 870.507789 916.210526 707.206737 916.210526 512c0-222.881684-181.328842-404.210526-404.210526-404.210526S107.789474 289.118316 107.789474 512s181.328842 404.210526 404.210526 404.210526c9.081263 0 18.000842-0.754526 26.947368-1.374315v53.894736c-8.973474 0.538947-17.866105 1.374316-26.947368 1.374316-252.604632 0-458.105263-205.500632-458.105263-458.105263S259.395368 53.894737 512 53.894737s458.105263 205.500632 458.105263 458.105263z m-377.263158-188.631579h107.789474v323.368421c-20.48 0-39.936-11.264-40.016842-11.317895l-27.728842 46.214737c3.206737 1.940211 32.660211 18.997895 67.745684 18.997895 30.746947 0 53.894737-23.147789 53.894737-53.894737V269.473684h-215.578948v538.947369h53.894737V323.368421z m-107.789473 242.526316v-242.526316h-53.894737v196.904421l-107.789474 40.421053v-243.927579l169.094737-48.316632-14.821053-51.819789L269.473684 276.102737v304.801684l-36.405895 13.662316 18.917053 50.472421 178.741895-67.018105c-5.039158 69.928421-55.269053 106.981053-165.133474 122.933894l7.733895 53.328842C325.712842 746.657684 485.052632 723.536842 485.052632 565.894737z" fill="#231F20" ></path></symbol><symbol id="icon-rabbit" viewBox="0 0 1024 1024"><path d="M680.96 488.744421a1666.667789 1666.667789 0 0 0-54.433684-23.95621c-16.006737 12.234105-33.899789 20.264421-60.631579 20.264421h-80.842105c-36.810105 0-83.644632 30.396632-104.394106 67.772631-42.819368 77.123368-53.409684 117.813895-11.021473 201.701053C397.096421 808.879158 431.157895 876.409263 431.157895 970.105263h338.539789l68.338527-138.859789c20.129684-40.96 24.252632-73.701053 24.252631-110.349474 0.026947-57.397895-25.061053-159.717053-181.328842-232.151579z" fill="#FFBDD8" ></path><path d="M862.315789 720.896c0 36.621474-4.122947 69.389474-24.252631 110.349474L769.697684 970.105263H485.052632v-53.894737h48.370526C507.877053 880.074105 485.052632 833.509053 485.052632 781.473684c0-59.418947 24.171789-113.313684 63.218526-152.360421l38.103579 38.103579A161.091368 161.091368 0 0 0 538.947368 781.473684c0 54.784 35.381895 104.043789 63.514948 134.736842h133.712842l53.490526-108.759579c15.710316-31.851789 18.755368-55.834947 18.755369-86.554947 0-80.976842-63.434105-150.096842-178.607158-195.503158-17.542737 8.138105-38.292211 13.554526-63.919158 13.554526h-80.842105c-13.958737 0-43.924211 15.979789-57.290106 40.016843l-47.104-26.165895C401.408 515.449263 448.242526 485.052632 485.052632 485.052632h80.842105c37.268211 0 57.478737-15.440842 79.090526-36.45979C625.367579 336.195368 549.753263 269.473684 485.052632 269.473684h-107.789474a21.288421 21.288421 0 0 0-5.955369 2.021053A683.762526 683.762526 0 0 0 302.187789 194.021053c-35.84-34.223158-61.763368-58.933895-94.908631-79.440842A42.442105 42.442105 0 0 0 185.478737 107.789474a22.824421 22.824421 0 0 0-17.381053 7.194947c-10.913684 11.425684-6.063158 28.240842 1.428211 39.181474 21.989053 32.121263 47.912421 56.858947 83.752421 91.109052 20.614737 19.671579 49.259789 43.169684 77.392842 63.08379C281.007158 367.400421 215.578947 484.432842 215.578947 592.842105c0 74.482526 24.791579 124.065684 51.065264 176.586106C294.534737 825.209263 323.368421 882.903579 323.368421 970.105263h-53.894737c0-74.482526-24.791579-124.065684-51.065263-176.586105C190.517895 737.738105 161.684211 680.043789 161.684211 592.842105c0-90.866526 42.226526-197.685895 93.453473-274.485894a803.759158 803.759158 0 0 1-39.046737-34.115369C177.852632 247.754105 150.231579 221.399579 125.035789 184.616421c-24.441263-35.759158-22.797474-78.686316 4.069053-106.819368 26.300632-27.567158 70.898526-31.043368 106.522947-9.000421 37.941895 23.444211 65.562947 49.798737 103.774316 86.258526 9.970526 9.512421 33.037474 32.309895 56.93979 60.550737h68.634947c-27.621053-37.780211-60.416-72.730947-88.522105-99.543579-28.833684-27.540211-54.730105-52.116211-84.533895-74.024421L326.305684 0.296421c31.232 23.228632 57.802105 48.532211 87.309474 76.719158 53.840842 51.388632 94.450526 100.594526 121.74821 146.83621 82.836211 26.650947 150.042947 116.870737 165.025685 230.750316l1.724631 13.177263-9.404631 9.404632c-3.772632 3.772632-7.706947 7.653053-11.802948 11.587368C837.227789 561.178947 862.315789 663.498105 862.315789 720.896zM309.463579 754.526316c3.934316 8.057263 7.895579 16.087579 11.991579 24.144842C348.887579 832.970105 377.263158 889.128421 377.263158 970.105263h53.894737c0-93.696-34.061474-161.226105-61.520842-215.578947h-60.173474z m597.90821 53.894737c-3.422316 9.404632-7.814737 19.806316-13.770105 31.959579L829.790316 970.105263h60.065684l52.143158-105.957052c10.778947-21.935158 17.515789-40.016842 21.90821-55.727158h-56.535579zM514.694737 390.736842c0-34.223158-13.231158-44.463158-29.642105-44.463158s-29.642105 10.24-29.642106 44.463158c0 34.250105 13.231158 44.463158 29.642106 44.463158s29.642105-10.213053 29.642105-44.463158z" fill="#231F20" ></path></symbol><symbol id="icon-rat_zi" viewBox="0 0 1024 1024"><path d="M512 512m-296.421053 0a296.421053 296.421053 0 1 0 592.842106 0 296.421053 296.421053 0 1 0-592.842106 0Z" fill="#85C3DE" ></path><path d="M970.105263 512c0 224.983579-163.166316 412.186947-377.263158 450.533053v-54.460632C777.135158 870.507789 916.210526 707.206737 916.210526 512c0-222.881684-181.328842-404.210526-404.210526-404.210526S107.789474 289.118316 107.789474 512s181.328842 404.210526 404.210526 404.210526c9.081263 0 18.000842-0.754526 26.947368-1.374315v53.894736c-8.973474 0.538947-17.866105 1.374316-26.947368 1.374316-252.604632 0-458.105263-205.500632-458.105263-458.105263S259.395368 53.894737 512 53.894737s458.105263 205.500632 458.105263 458.105263z m-431.157895 188.631579v-215.578947h269.473685v-53.894737H538.947368v-39.585684c26.543158-18.081684 94.585263-65.050947 177.852632-127.488L700.631579 215.578947H323.368421v53.894737h295.316211a4221.008842 4221.008842 0 0 1-121.640421 85.369263l-11.991579 8.003369V431.157895H242.526316v53.894737h242.526316v215.578947c0 48.343579-13.850947 53.894737-134.736843 53.894737v53.894737c105.391158 0 188.631579 0 188.631579-107.789474z" fill="#231F20" ></path></symbol><symbol id="icon-rat" viewBox="0 0 1024 1024"><path d="M727.659789 431.157895c-132.581053 0-220.348632 47.454316-285.803789 154.354526-19.779368 32.309895-15.845053 76.503579-9.404632 96.579368 3.260632 10.159158 7.760842 18.647579 12.422737 25.546106C464.761263 737.010526 499.927579 754.526316 538.947368 754.526316h66.829474c1.158737 17.893053-1.967158 34.762105-15.144421 53.975579-12.692211 18.539789-37.807158 40.151579-56.32 54.810947 25.249684-0.673684 52.709053-0.997053 83.240421-0.997053C877.487158 862.315789 970.105263 711.922526 970.105263 571.176421 936.421053 512 882.364632 431.157895 727.659789 431.157895z" fill="#85C3DE" ></path><path d="M210.432 1012.897684l-43.573895-31.690105c106.954105-147.051789 185.317053-171.196632 423.828211-172.705684 21.396211-31.258947 16.249263-56.266105 9.377684-89.70779-3.557053-17.138526-7.221895-34.842947-7.221895-54.433684 0-68.958316 25.330526-104.636632 63.407158-136.973474l34.896842 41.040842c-29.453474 25.061053-44.409263 46.780632-44.409263 95.932632 0 14.093474 2.937263 28.402526 6.063158 43.546947 5.901474 28.510316 12.8 62.032842-1.131789 99.462737 166.373053-10.24 264.542316-96.902737 264.542315-236.193684C916.210526 418.330947 827.580632 323.368421 684.921263 323.368421c-83.644632 0-153.303579 29.696-174.187789 39.612632a224.875789 224.875789 0 0 1-20.533895 31.339789l-41.741474-34.115368 20.884211 17.057684-20.911158-16.976842C448.781474 359.828211 485.052632 314.287158 485.052632 262.736842c0-34.816-8.946526-60.766316-26.570106-77.069474-17.515789-16.249263-44.786526-24.602947-81.219368-24.953263V323.368421h-53.894737V109.783579l24.872421-1.913263c64.700632-4.931368 114.095158 7.895579 146.863158 38.238316C524.207158 173.056 538.947368 212.291368 538.947368 262.736842c0 11.102316-1.131789 21.908211-3.072 32.202105 37.268211-12.584421 89.842526-25.465263 149.045895-25.465263C858.165895 269.473684 970.105263 387.907368 970.105263 571.176421 970.105263 711.922526 877.487158 862.315789 617.552842 862.315789c-258.667789 0-311.942737 19.698526-407.120842 150.581895z m19.105684-256.835368c-12.045474 0-24.387368-0.565895-37.025684-1.64379l-22.096842-1.859368-2.425263-22.016C167.747368 728.144842 161.684211 672.444632 161.684211 631.026526c0-103.585684 21.450105-178.903579 53.894736-259.045052V107.789474h53.894737v274.782315l-2.021052 4.904422C235.439158 465.758316 215.578947 533.800421 215.578947 631.026526c0 22.878316 2.101895 51.442526 3.826527 70.979369 99.678316 2.802526 172.813474-35.408842 222.450526-116.493474l48.020211 24.090947c-11.237053 28.133053-11.371789 51.577263-0.377264 67.853474 9.701053 14.282105 28.645053 23.174737 49.448421 23.174737v53.894737c-39.019789 0-74.186105-17.515789-94.073263-46.888421a100.244211 100.244211 0 0 1-12.422737-25.546106c-53.221053 49.178947-121.128421 73.943579-202.913684 73.970527zM379.957895 525.473684c0-34.223158-13.231158-44.463158-29.642106-44.463158s-29.642105 10.24-29.642105 44.463158c0 34.250105 13.231158 44.463158 29.642105 44.463158s29.642105-10.213053 29.642106-44.463158z" fill="#231F20" ></path></symbol><symbol id="icon-rooster_you" viewBox="0 0 1024 1024"><path d="M512 512m-296.421053 0a296.421053 296.421053 0 1 0 592.842106 0 296.421053 296.421053 0 1 0-592.842106 0Z" fill="#BBC4C9" ></path><path d="M970.105263 512c0 224.983579-163.166316 412.186947-377.263158 450.533053v-54.460632C777.135158 870.507789 916.210526 707.206737 916.210526 512c0-222.881684-181.328842-404.210526-404.210526-404.210526S107.789474 289.118316 107.789474 512s181.328842 404.210526 404.210526 404.210526c9.081263 0 18.000842-0.754526 26.947368-1.374315v53.894736c-8.973474 0.538947-17.866105 1.374316-26.947368 1.374316-252.604632 0-458.105263-205.500632-458.105263-458.105263S259.395368 53.894737 512 53.894737s458.105263 205.500632 458.105263 458.105263z m-215.578947-188.631579h-161.684211v-26.947368h161.684211V242.526316H269.473684v53.894737h161.684211v26.947368h-161.684211v485.052632h53.894737v-53.894737h377.263158v53.894737h53.894737V323.368421zM323.368421 646.736842h377.263158v53.894737H323.368421v-53.894737z m0-269.473684h107.789474c0 103.316211-72.784842 107.654737-81.084632 107.789474L350.315789 538.947368c46.592 0 134.736842-33.792 134.736843-161.68421h53.894736v107.789474c0 29.722947 24.171789 53.894737 53.894737 53.894736h107.789474v53.894737H323.368421v-215.578947z m377.263158 0v107.789474h-107.789474v-107.789474h107.789474z m-215.578947-80.842105h53.894736v26.947368h-53.894736v-26.947368z" fill="#231F20" ></path></symbol><symbol id="icon-rooster" viewBox="0 0 1024 1024"><path d="M891.688421 506.421895C877.244632 455.033263 862.315789 401.893053 862.315789 323.368421V116.224l-323.368421 195.745684V323.368421c0 78.524632 14.928842 131.664842 29.372632 183.053474 12.611368 44.894316 24.522105 87.282526 24.522105 140.314947 0 101.618526-77.931789 176.693895-168.286316 203.991579l5.416422 11.587368h215.578947c24.333474 0 43.385263-0.242526 58.556631-2.128842C811.52 846.821053 916.210526 764.550737 916.210526 646.736842c0-53.032421-11.910737-95.420632-24.522105-140.314947z" fill="#FF8787" ></path><path d="M673.684211 354.357895c-16.384 0-29.642105-10.213053-29.642106-44.463158 0-34.223158 13.231158-44.463158 29.642106-44.463158s29.642105 10.24 29.642105 44.463158c0 34.250105-13.258105 44.463158-29.642105 44.463158zM540.106105 970.105263l-50.58021-107.789474h156.05221l50.607158 107.789474h59.553684l-51.60421-109.918316C811.52 846.821053 916.210526 764.550737 916.210526 646.736842c0-53.032421-11.910737-95.420632-24.522105-140.314947C877.244632 455.033263 862.315789 401.893053 862.315789 323.368421V107.789474c0-59.445895-48.343579-107.789474-107.789473-107.789474a107.924211 107.924211 0 0 0-107.789474 106.172632 100.890947 100.890947 0 0 0-24.117895-3.314527 88.710737 88.710737 0 0 0-88.602947 88.602948c0 20.668632 5.227789 39.720421 10.671158 53.921684l-99.489684 59.688421 93.749894 14.470737V377.263158c0 14.416842-5.901474 21.692632-33.360842 49.152l-11.129263 11.129263C398.228211 326.521263 324.985263 269.473684 215.740632 269.473684 96.768 269.473684 0 366.241684 0 485.214316V646.736842h53.894737v-161.522526A162.007579 162.007579 0 0 1 215.740632 323.368421c82.081684 0 140.422737 36.244211 240.64 152.252632l-38.615579 38.615579C367.804632 461.285053 323.098947 431.157895 259.584 431.157895A151.983158 151.983158 0 0 0 107.789474 582.952421V754.526316h53.894737v-171.573895A98.007579 98.007579 0 0 1 259.584 485.052632c46.322526 0 79.629474 20.911158 137.027368 86.016l18.970948 21.530947 128.080842-128.080842C572.200421 435.981474 592.842105 415.366737 592.842105 377.263158v-97.926737l23.309474-14.120421-13.662316-23.04c-0.161684-0.242526-14.578526-24.899368-14.578526-50.688 0-19.132632 15.575579-34.708211 34.70821-34.708211 5.093053 0 26.785684 3.179789 39.558737 18.647579l26.327579 46.026106 39.774316-24.090948-20.372211-49.367579C704.754526 140.449684 700.631579 117.517474 700.631579 107.789474c0-29.722947 24.171789-53.894737 53.894737-53.894737s53.894737 24.171789 53.894737 53.894737v215.578947c0 85.935158 16.680421 145.300211 31.366736 197.632C851.887158 564.008421 862.315789 601.141895 862.315789 646.736842c0 95.285895-99.408842 161.684211-188.631578 161.684211h-209.461895l-68.419369-145.704421C375.242105 618.954105 338.108632 592.842105 296.448 592.842105A80.976842 80.976842 0 0 0 215.578947 673.711158V862.315789h53.894737v-188.604631c0-14.874947 12.099368-26.974316 26.974316-26.974316 20.533895 0 38.965895 14.147368 50.553263 38.858105L480.579368 970.105263h59.526737z" fill="#231F20" ></path></symbol><symbol id="icon-snake_si" viewBox="0 0 1024 1024"><path d="M512 512m-296.421053 0a296.421053 296.421053 0 1 0 592.842106 0 296.421053 296.421053 0 1 0-592.842106 0Z" fill="#FF8787" ></path><path d="M970.105263 512c0 224.983579-163.166316 412.186947-377.263158 450.533053v-54.460632C777.135158 870.507789 916.210526 707.206737 916.210526 512c0-222.881684-181.328842-404.210526-404.210526-404.210526S107.789474 289.118316 107.789474 512s181.328842 404.210526 404.210526 404.210526c9.081263 0 18.000842-0.754526 26.947368-1.374315v53.894736c-8.973474 0.538947-17.866105 1.374316-26.947368 1.374316-252.604632 0-458.105263-205.500632-458.105263-458.105263S259.395368 53.894737 512 53.894737s458.105263 205.500632 458.105263 458.105263z m-242.041263 180.762947l-52.116211-13.797052C657.219368 749.864421 651.425684 754.526316 619.789474 754.526316h-242.526316V485.052632h269.473684v53.894736h53.894737V215.578947H323.368421v538.947369c0 29.722947 24.171789 53.894737 53.894737 53.894737h242.526316c77.689263 0 91.189895-51.065263 108.274526-115.658106zM377.263158 269.473684h269.473684v161.684211H377.263158v-161.684211z" fill="#231F20" ></path></symbol><symbol id="icon-tiger_yin" viewBox="0 0 1024 1024"><path d="M512 512m-296.421053 0a296.421053 296.421053 0 1 0 592.842106 0 296.421053 296.421053 0 1 0-592.842106 0Z" fill="#7DD47F" ></path><path d="M970.105263 512c0 224.983579-163.166316 412.186947-377.263158 450.533053v-54.460632C777.135158 870.507789 916.210526 707.206737 916.210526 512c0-222.881684-181.328842-404.210526-404.210526-404.210526S107.789474 289.118316 107.789474 512s181.328842 404.210526 404.210526 404.210526c9.081263 0 18.000842-0.754526 26.947368-1.374315v53.894736c-8.973474 0.538947-17.866105 1.374316-26.947368 1.374316-252.604632 0-458.105263-205.500632-458.105263-458.105263S259.395368 53.894737 512 53.894737s458.105263 205.500632 458.105263 458.105263z m-257.42821 299.250526l-107.789474-53.894737-24.117895 48.208843 107.789474 53.894736 24.117895-48.208842z m-269.473685-5.658947l-24.117894-48.208842-107.789474 53.894737 24.117895 48.208842 107.789473-53.894737zM700.631579 431.157895h-161.684211v-53.894737h107.789474v-53.894737H377.263158v53.894737h107.789474v53.894737h-161.684211v323.368421h53.894737v-53.894737h269.473684v53.894737h53.894737V431.157895z m-161.684211 161.68421h107.789474v53.894737h-107.789474v-53.894737z m-161.68421 0h107.789474v53.894737h-107.789474v-53.894737z m161.68421-107.789473h107.789474v53.894736h-107.789474v-53.894736z m-161.68421 0h107.789474v53.894736h-107.789474v-53.894736zM754.526316 215.578947h-223.097263l-20.803369-62.410105-51.119158 17.057684L474.624 215.578947H269.473684v107.789474h53.894737v-53.894737h377.263158v53.894737h53.894737V215.578947z" fill="#231F20" ></path></symbol><symbol id="icon-snake" viewBox="0 0 1024 1024"><path d="M107.789474 790.474105c0-72.434526 67.880421-91.513263 121.451789-91.513263 74.401684 0 153.815579 34.438737 237.891369 70.925474 50.580211 21.935158 104.609684 45.325474 162.250105 63.083789-52.412632 44.786526-118.784 74.347789-195.152842 83.078737-143.171368 16.357053-326.440421 7.006316-326.440421-125.574737zM377.263158 215.578947c-15.575579 0-30.288842 3.449263-43.654737 9.377685A250.691368 250.691368 0 0 0 323.368421 296.421053c0 115.550316 76.422737 169.391158 137.83579 212.614736 8.138105 5.712842 16.141474 11.371789 23.848421 17.057685V323.368421a107.789474 107.789474 0 0 0-107.789474-107.789474z" fill="#C3D686" ></path><path d="M671.528421 788.857263c44.328421 11.964632 89.626947 19.563789 136.892632 19.56379 89.168842 0 161.684211-60.442947 161.68421-134.736842s-72.515368-134.736842-161.68421-134.736843c-19.078737 0-37.025684 1.509053-54.218106 4.015158-0.754526-101.402947-38.211368-172.355368-79.413894-219.648L673.684211 323.368421a1749.962105 1749.962105 0 0 1-79.036632-1.751579c45.702737 35.866947 108.705684 107.870316 105.984 232.367158 0 0.431158-0.080842 0.808421-0.10779 1.239579-34.923789 10.994526-66.155789 26.731789-95.097263 45.190737a163.085474 163.085474 0 0 0-15.845052-42.388211c-21.557895-39.639579-60.065684-66.775579-97.360842-93.022316C433.098105 423.343158 377.263158 384 377.263158 296.421053c0-130.290526 108.274526-188.631579 215.578947-188.631579 64.134737 0 132.715789 12.045474 214.366316 37.807158C802.330947 180.250947 780.099368 209.381053 700.631579 214.635789V161.684211h-53.894737v53.679157c-63.272421-1.024-104.528842-5.200842-104.986947-5.254736l-5.578106 53.598315C538.408421 263.949474 592.357053 269.473684 673.684211 269.473684c125.170526 0 188.631579-48.128 188.631578-143.063579V106.981053l-18.432-6.144C747.789474 68.823579 668.025263 53.894737 592.842105 53.894737c-158.666105 0-269.473684 99.732211-269.473684 242.526316 0 115.550316 76.422737 169.391158 137.83579 212.614736 33.684211 23.713684 65.509053 46.106947 81.003789 74.698106 9.539368 17.542737 13.285053 33.414737 12.341895 47.750737 21.153684 9.108211 42.118737 17.839158 62.949052 25.977263C671.151158 620.193684 729.977263 592.842105 808.421053 592.842105c59.445895 0 107.789474 36.271158 107.789473 80.842106s-48.343579 80.842105-107.789473 80.842105c-105.472 0-203.237053-42.388211-297.768421-83.429053-94.800842-41.094737-184.346947-79.952842-281.411369-79.952842C122.718316 591.171368 53.894737 644.715789 53.894737 727.578947c0 79.063579 67.098947 136.434526 159.555368 136.434527 142.174316 0 230.426947-66.883368 306.79579-129.886316 31.420632 13.419789 62.787368 26.058105 94.450526 37.133474-47.077053 49.637053-110.969263 82.566737-186.610526 91.270736l5.066105 53.625264c93.453474-7.006316 143.144421 9.350737 195.718737 26.543157 46.457263 15.225263 94.127158 30.854737 169.822316 30.854737 19.994947 0 41.957053-1.077895 66.344421-3.557052l-5.416421-53.625263c-105.283368 10.778947-158.100211-6.548211-213.935158-24.872422-22.150737-7.275789-44.624842-14.632421-70.305684-20.345263a334.848 334.848 0 0 0 96.14821-82.297263z m-458.078316 21.261474C162.573474 810.118737 107.789474 784.276211 107.789474 727.578947c0-60.847158 62.733474-82.539789 121.451789-82.539789 77.850947 0 154.731789 30.288842 235.250526 64.943158-66.263579 52.924632-139.722105 100.136421-251.041684 100.136421z" fill="#231F20" ></path></symbol><symbol id="icon-tiger" viewBox="0 0 1024 1024"><path d="M431.157895 162.250105V134.736842c0-41.552842-39.289263-80.842105-80.842106-80.842105-28.833684 0-57.128421 4.661895-58.314105 4.850526L269.473684 62.490947v83.887158C144.788211 223.824842 89.222737 346.839579 66.991158 431.157895h266.051368c240.747789 0 415.851789 107.789474 415.85179 269.473684-14.848-25.114947-43.924211-53.894737-88.68379-53.894737-67.988211 0-121.263158 71.033263-121.263158 161.684211 0 66.802526 30.477474 119.888842 60.712421 156.16 12.638316 15.171368 36.055579 37.726316 59.014737 58.88 5.066105 0.107789 9.781895 0.538947 15.009685 0.538947 219.297684 0 350.315789-191.811368 350.315789-377.263158C1024 327.545263 679.855158 172.813474 431.157895 162.250105z" fill="#F7C768" ></path><path d="M673.684211 1024c-114.768842 0-188.820211-33.333895-254.167579-62.787368-53.625263-24.144842-99.974737-45.002105-161.28-45.002106-40.448 0-83.590737 23.255579-103.639579 45.16379l-39.747369-36.432842C142.497684 894.787368 199.168 862.315789 258.236632 862.315789c68.392421 0 119.861895 21.288421 172.921263 45.056V673.684211c0-35.166316-17.542737-64.107789-30.639158-80.815158-15.198316 9.835789-32.067368 18.890105-50.741895 26.947368l-21.342316-49.475368C469.800421 509.413053 485.052632 377.317053 485.052632 323.368421V221.642105A597.827368 597.827368 0 0 0 404.210526 215.578947h-26.947368V134.736842c0-12.099368-14.848-26.947368-26.947369-26.947368-9.377684 0-18.836211 0.592842-26.947368 1.347368V269.473684h-53.894737V211.671579c-136.030316 102.912-158.450526 266.886737-161.306947 295.882105 9.135158 9.108211 38.992842 25.061053 71.976421 38.669474l38.103579-59.365053 12.449684-1.589894C321.212632 473.653895 377.263158 392.192 377.263158 323.368421h53.894737c0 88.333474-68.796632 192.242526-180.870737 213.342316l-48.397474 75.398737-20.291368-7.437474C53.894737 557.756632 53.894737 523.317895 53.894737 512c0-50.041263 37.025684-254.733474 215.578947-365.621895V62.490947l22.528-3.745684C293.187368 58.556632 321.482105 53.894737 350.315789 53.894737c41.552842 0 80.842105 39.289263 80.842106 80.842105v27.513263c248.697263 10.563368 592.842105 165.295158 592.842105 484.486737 0 185.451789-131.018105 377.263158-350.315789 377.263158z m-13.473685-323.368421c-36.513684 0-67.368421 49.367579-67.368421 107.789474 0 85.746526 68.096 145.084632 89.465263 161.549473 91.540211-2.533053 164.378947-45.487158 213.827369-107.654737H700.631579v-53.894736h230.238316c8.919579-17.273263 16.357053-35.354947 22.285473-53.894737h-239.885473l-6.467369-17.650527C706.290526 735.582316 692.439579 700.631579 660.210526 700.631579zM485.052632 931.112421c33.926737 14.066526 70.521263 26.597053 114.607157 33.468632C569.424842 928.309895 538.947368 875.223579 538.947368 808.421053c0-90.650947 53.274947-161.684211 121.263158-161.684211 44.759579 0 73.835789 28.779789 88.68379 53.894737h217.007158c2.775579-17.866105 4.203789-35.920842 4.203789-53.894737 0-38.938947-5.658947-74.752-15.925895-107.627789l-126.706526 126.679579-38.103579-38.103579L932.001684 485.052632a367.939368 367.939368 0 0 0-57.775158-81.596632l-154.543158 154.543158-38.103579-38.103579 153.573053-153.573053a537.869474 537.869474 0 0 0-82.593684-56.751158l-140.665263 140.638316-38.103579-38.103579 128.134737-128.134737A794.731789 794.731789 0 0 0 538.947368 231.046737V323.368421c0 50.149053-11.102316 156.698947-95.932631 236.328421 18.378105 23.417263 42.037895 63.407158 42.037895 113.987369v257.42821zM215.578947 431.157895v-53.894737c39.774316 0 53.894737-29.022316 53.894737-53.894737h53.894737c0 53.571368-37.025684 107.789474-107.789474 107.789474z" fill="#231F20" ></path></symbol><symbol id="icon-boar" viewBox="0 0 1024 1024"><path d="M732.079158 377.263158c-107.789474 0-186.421895 31.393684-281.869474 126.841263L180.331789 773.982316C257.724632 807.909053 348.725895 808.421053 485.052632 808.421053h96.013473c55.834947-34.411789 133.551158-53.894737 227.354948-53.894737h121.344L970.105263 680.555789V572.631579c0-94.315789-130.236632-195.368421-238.026105-195.368421z" fill="#FFBDD8" ></path><path d="M808.421053 700.631579v53.894737c-196.446316 0-323.368421 84.641684-323.368421 215.578947h-53.894737c0-163.705263 148.075789-269.473684 377.263158-269.473684z m-323.368421 107.789474v-53.894737c-158.342737 0-245.598316 0-319.649685-49.367579L158.612211 700.631579H80.842105c-21.692632 0-26.624-14.821053-26.947368-26.947368v-82.620632c84.156632-11.183158 161.684211-74.913684 161.68421-186.853053V215.578947H161.684211v161.684211H134.736842c-66.964211 0-134.736842 37.025684-134.736842 107.789474h53.894737c0-42.630737 52.870737-53.894737 80.842105-53.894737h24.629895C147.132632 504.912842 85.153684 538.947368 26.947368 538.947368H0v134.736843c0 32.498526 21.530947 80.842105 80.842105 80.842105h61.682527c32.687158 20.506947 67.125895 33.145263 105.957052 41.013895A232.879158 232.879158 0 0 0 215.578947 916.210526h53.894737c0-41.930105 14.012632-80.303158 39.424-112.505263C358.885053 808.151579 415.959579 808.421053 485.052632 808.421053z m-72.946527-342.420211L323.368421 554.738526V431.157895h-53.894737v253.682526l180.736-180.736-38.103579-38.103579zM323.368421 161.684211h-53.894737v190.032842a769.536 769.536 0 0 1 53.894737-49.098106V161.684211z m323.368421-53.894737c-72.623158 0-146.809263 23.336421-215.578947 58.637473V107.789474h-53.894737v154.138947C458.832842 205.392842 555.331368 161.684211 646.736842 161.684211c148.587789 0 269.473684 120.885895 269.473684 269.473684v235.654737L809.579789 862.315789h61.359158L970.105263 680.555789V431.157895c0-178.310737-145.057684-323.368421-323.368421-323.368421z" fill="#231F20" ></path></symbol><symbol id="icon-boar_hai" viewBox="0 0 1024 1024"><path d="M512 512m-296.421053 0a296.421053 296.421053 0 1 0 592.842106 0 296.421053 296.421053 0 1 0-592.842106 0Z" fill="#85C3DE" ></path><path d="M309.975579 804.756211l-27.136-46.592c103.073684-60.011789 183.026526-132.473263 241.475368-219.24379H350.315789l-13.473684-50.283789c58.88-33.980632 99.435789-117.571368 118.703158-165.295158H242.526316v-53.894737h538.947368v53.894737h-268.18021c-12.395789 34.088421-42.469053 106.603789-90.435369 161.68421h134.009263a680.555789 680.555789 0 0 0 46.349474-107.708631l51.092211 17.057684c-58.421895 175.265684-171.034947 309.490526-344.333474 410.381474z m192.350316-2.937264L467.806316 760.454737c88.414316-73.728 154.516211-158.773895 202.105263-259.907369l48.801684 22.959158a797.372632 797.372632 0 0 1-82.351158 137.781895c32.741053 15.009684 83.456 44.867368 137.647158 101.591579l-38.938947 37.268211c-57.236211-59.877053-109.325474-85.557895-133.766737-95.178106a850.997895 850.997895 0 0 1-98.977684 96.848842z m48.613052-536.872421l-80.842105-53.894737 29.884632-44.840421 80.842105 53.894737-29.884632 44.840421zM512 53.894737C259.395368 53.894737 53.894737 259.395368 53.894737 512s205.500632 458.105263 458.105263 458.105263c9.081263 0 17.973895-0.835368 26.947368-1.374316v-53.894736c-8.946526 0.619789-17.866105 1.374316-26.947368 1.374315-222.881684 0-404.210526-181.328842-404.210526-404.210526S289.118316 107.789474 512 107.789474s404.210526 181.328842 404.210526 404.210526c0 195.206737-139.075368 358.507789-323.368421 396.045474v54.460631c214.096842-38.346105 377.263158-225.549474 377.263158-450.533052C970.105263 259.395368 764.604632 53.894737 512 53.894737z" fill="#231F20" ></path></symbol><symbol id="icon-bilibili1" viewBox="0 0 1129 1024"><path d="M234.909 9.656a80.468 80.468 0 0 1 68.398 0 167.374 167.374 0 0 1 41.843 30.578l160.937 140.82h115.07l160.936-140.82a168.983 168.983 0 0 1 41.843-30.578A80.468 80.468 0 0 1 930.96 76.445a80.468 80.468 0 0 1-17.703 53.914 449.818 449.818 0 0 1-35.406 32.187 232.553 232.553 0 0 1-22.531 18.508h100.585a170.593 170.593 0 0 1 118.289 53.109 171.397 171.397 0 0 1 53.914 118.288v462.693a325.897 325.897 0 0 1-4.024 70.007 178.64 178.64 0 0 1-80.468 112.656 173.007 173.007 0 0 1-92.539 25.75H212.377a341.186 341.186 0 0 1-72.421-4.024A177.835 177.835 0 0 1 28.91 939.065a172.202 172.202 0 0 1-27.36-92.539V388.662a360.498 360.498 0 0 1 0-66.789A177.03 177.03 0 0 1 162.487 178.64h105.414c-16.899-12.07-31.383-26.555-46.672-39.43a80.468 80.468 0 0 1-25.75-65.984 80.468 80.468 0 0 1 39.43-63.57M216.4 321.873a80.468 80.468 0 0 0-63.57 57.937 108.632 108.632 0 0 0 0 30.578v380.615a80.468 80.468 0 0 0 55.523 80.469 106.218 106.218 0 0 0 34.601 5.632h654.208a80.468 80.468 0 0 0 76.444-47.476 112.656 112.656 0 0 0 8.047-53.109v-354.06a135.187 135.187 0 0 0 0-38.625 80.468 80.468 0 0 0-52.304-54.719 129.554 129.554 0 0 0-49.89-7.242H254.22a268.764 268.764 0 0 0-37.82 0z m0 0" fill="#20B0E3" ></path><path d="M348.369 447.404a80.468 80.468 0 0 1 55.523 18.507 80.468 80.468 0 0 1 28.164 59.547v80.468a80.468 80.468 0 0 1-16.094 51.5 80.468 80.468 0 0 1-131.968-9.656 104.609 104.609 0 0 1-10.46-54.719v-80.468a80.468 80.468 0 0 1 70.007-67.593z m416.02 0a80.468 80.468 0 0 1 86.102 75.64v80.468a94.148 94.148 0 0 1-12.07 53.11 80.468 80.468 0 0 1-132.773 0 95.757 95.757 0 0 1-12.875-57.133V519.02a80.468 80.468 0 0 1 70.007-70.812z m0 0" fill="#20B0E3" ></path></symbol><symbol id="icon-yinle" viewBox="0 0 1024 1024"><path d="M512.2976 0a531.2 531.2 0 0 0-512 548.48V960h128V548.48a398.72 398.72 0 0 1 384-411.52 398.72 398.72 0 0 1 384 411.52V960h128V548.48A531.2 531.2 0 0 0 512.2976 0z" fill="#5c8add" ></path><path d="M64.2976 576l256 0 0 448-256 0 0-448Z" fill="#5c8add" ></path><path d="M704.2976 576l256 0 0 448-256 0 0-448Z" fill="#5c8add" ></path></symbol><symbol id="icon-icon-test-copy" viewBox="0 0 1024 1024"><path d="M512 512m-229.517241 0a229.517241 229.517241 0 1 0 459.034482 0 229.517241 229.517241 0 1 0-459.034482 0Z" fill="#5c8add" ></path><path d="M512 1024A512 512 0 1 1 1024 512 512 512 0 0 1 512 1024z m0-141.241379A370.758621 370.758621 0 1 0 141.241379 512 370.758621 370.758621 0 0 0 512 882.758621z" fill="#5c8add" ></path></symbol><symbol id="icon-V" viewBox="0 0 1024 1024"><path d="M1012.47774251 492.58192592L544.94137566 87.22962963a49.96686561 49.96686561 0 0 0-65.88275132 0L11.63784127 492.6975097c-21.03624691 18.26223633-23.3479224 49.93219048-5.08568606 70.96843739 18.03106878 21.03624691 49.93219048 23.3479224 70.96843738 5.08568607L512 191.83294532l434.71057495 376.91868784c9.47786949 8.20644797 21.26741446 12.25188008 32.82579189 12.13629629 14.10122046 0 27.97127337-5.77918871 38.02706173-17.33756613 18.14665256-20.92066314 15.95056084-52.70620106-5.08568606-70.9684374z" fill="#5c8add" ></path><path d="M109.30613051 567.59579541V896.89396825c0 42.53482892 34.90629982 77.44112875 77.44112875 77.44112875h220.76500882V666.30433862c0-25.54401411 20.92066314-46.46467725 46.46467724-46.46467724h116.16169313c25.54401411 0 46.46467725 20.92066314 46.46467725 46.46467724V974.335097h220.76500882c42.53482892 0 77.44112875-34.90629982 77.44112874-77.44112875l0.11558377-329.29817284L512 218.18604586 109.30613051 567.59579541zM848.00203175 197.49655027h-63.91782716c-12.82979894 0-23.23233862 10.40253968-23.23233863 23.23233862v24.27259259l110.49808818 95.70336508V220.72888889h-0.11558377c0-12.82979894-10.40253968-23.23233862-23.23233862-23.23233862zM905.44716754 83.18419754s-34.90629982 56.86721693-89.11508994 100.32671603c152.68616579 13.98563668 127.83565432-133.26809171 127.83565432-133.2680917-134.07717813-10.28695591-132.92134039 102.29164021-131.072 127.83565432 20.92066314-20.92066314 49.70102293-62.64640564 92.35143562-94.89427865zM798.53217637 174.61096297c-19.64924162-16.52847972-40.56990476-43.45949912-51.203612-53.97762258 0 0 32.94137566 20.57391182 56.40488184 49.3542716 2.42725926-18.37782011 6.47269135-93.3916896-93.16052205-85.3008254 0 0-13.98563668 104.71889947 87.95925221 89.92417638z" fill="#5c8add" ></path></symbol><symbol id="icon-zhifeiji" viewBox="0 0 1167 1024"><path d="M41.201759 463.52493L1110.665064 30.117647c10.32605-4.159104 21.942857 0.860504 26.101961 11.043137 1.434174 3.728852 1.864426 7.744538 1.003921 11.616807L949.033691 978.823529c-2.151261 10.89972-12.764146 17.927171-23.663865 15.632493-2.72493-0.573669-5.306443-1.721008-7.601121-3.298599L634.80624 789.79944l-163.065546 133.951821c-16.492997 13.62465-40.87395 11.186555-54.498599-5.306443-3.011765-3.728852-5.306443-7.887955-6.884034-12.477311l-102.973669-313.080112-265.178712-91.787115c-10.469468-3.585434-16.062745-15.058824-12.333893-25.528291 1.864426-5.44986 6.023529-9.895798 11.329972-12.047059z" fill="#FCFDFC" ></path><path d="M929.385512 1023.569748c-3.155182 0-6.453782-0.286835-9.752381-1.003922-6.740616-1.434174-12.907563-4.015686-18.50084-8.031372L635.953579 825.940616l-146.142297 120.040336c-13.911485 11.473389-31.408403 16.779832-49.335574 15.058824-17.927171-1.721008-34.133333-10.32605-45.463305-24.237535-5.306443-6.453782-9.322129-13.768067-11.903642-21.79944l-98.527731-299.598879-251.697479-87.19776c-12.333894-4.302521-22.229692-13.05098-27.966386-24.811204s-6.453782-24.954622-2.151261-37.288515c4.589356-13.337815 14.771989-23.9507 27.82297-29.257143L1099.908761 3.585434c24.954622-10.039216 53.351261 2.007843 63.533894 26.819048 3.585434 8.891877 4.445938 18.644258 2.581513 28.109804L977.143495 984.560224c-4.732773 23.090196-25.098039 39.009524-47.757983 39.009524z m-294.579272-233.770308l282.962465 201.357983c2.294678 1.577591 4.87619 2.72493 7.601121 3.298599 10.89972 2.151261 21.512605-4.87619 23.663865-15.632493L1137.914364 52.777591c0.860504-3.872269 0.430252-7.887955-1.003922-11.616807-4.159104-10.32605-15.919328-15.202241-26.101961-11.043137L41.201759 463.52493c-5.306443 2.151261-9.465546 6.597199-11.47339 12.047059-1.721008 5.019608-1.434174 10.469468 0.860505 15.345658 2.294678 4.87619 6.453782 8.461625 11.473389 10.182633l265.178711 91.787115L410.214644 905.967507c1.434174 4.589356 3.872269 8.748459 6.884033 12.477311 6.597199 8.031373 15.919328 12.907563 26.101961 13.911485 10.32605 1.003922 20.365266-2.007843 28.396639-8.605042l163.208963-133.951821z" fill="#4A4A4A" ></path><path d="M307.097557 592.743978l105.698599 316.091876c6.310364 18.787675 26.532213 28.970308 45.319888 22.659944 4.159104-1.434174 7.887955-3.442017 11.186555-6.166946l164.786555-133.951821-165.360224-118.892997c297.017367-287.982073 447.462185-433.980952 451.191036-437.853222 0.573669-0.573669 2.581513-3.442017 0.430252-7.027451-1.290756-1.577591-3.298599-3.298599-7.027451-2.15126-202.218487 120.327171-404.293557 242.805602-606.22521 367.291877z" fill="#CAE0EE" ></path><path d="M446.786072 934.794398c-5.736695 0-11.329972-1.290756-16.636414-3.872269-8.891877-4.445938-15.632493-12.047059-18.787675-21.512605L305.376549 592.313725l1.003921-0.573669C507.308201 467.684034 711.391114 344.058263 912.60568 224.161345l0.286835-0.143418c3.585434-1.147339 6.310364-0.286835 8.605042 2.581513l0.143417 0.143417c2.438095 4.015686 0.573669 7.457703-0.573669 8.74846-3.872269 4.015686-155.177591 150.87507-450.043698 436.705882l165.503642 119.036414-166.220728 135.09916c-3.442017 2.868347-7.457703 5.019608-11.760225 6.453782-3.728852 1.290756-7.744538 2.007843-11.760224 2.007843z m-137.967507-341.333334l105.268348 314.944538c2.868347 8.748459 9.035294 15.77591 17.210084 19.935014 8.17479 4.159104 17.496919 4.732773 26.245378 1.864426 3.872269-1.290756 7.60112-3.298599 10.756302-5.880112l163.352381-132.804482L466.434252 672.627451l1.290756-1.147339C763.308201 384.932213 915.043775 237.642577 918.772627 233.626891c0 0 2.007843-2.294678 0.286835-5.306443-1.003922-1.290756-2.438095-2.438095-5.306443-1.577591-200.784314 119.610084-404.293557 242.94902-604.934454 366.718207z" fill="#CAE0EE" ></path><path d="M460.840974 924.898599l7.457703-253.561904 165.933894 119.896918-168.658824 135.959664c-1.290756 1.003922-3.011765 0.860504-4.015686-0.430252-0.430252-0.430252-0.717087-1.147339-0.717087-1.864426z" fill="#94C3E2" ></path><path d="M463.709322 929.344538c-1.290756 0-2.438095-0.573669-3.2986-1.577591-0.573669-0.860504-1.003922-1.864426-1.003921-2.868348l7.60112-256.286834 169.519328 122.621848-1.434174 1.147339-168.658823 135.959664c-0.860504 0.717087-1.721008 1.003922-2.72493 1.003922z m6.023529-255.282913l-7.457703 250.836974c0 0.286835 0.143417 0.717087 0.286835 1.003922 0.430252 0.573669 1.434174 0.717087 2.007843 0.286835l167.22465-134.812325-162.061625-117.315406z" fill="#94C3E2" ></path></symbol><symbol id="icon-lianjie" viewBox="0 0 1079 1024"><path d="M695.355535 432.666896c-0.553495-1.10699-0.885592-2.186305-1.383737-3.265619-0.193723-0.193723-0.193723-0.359772-0.359771-0.719543-12.508983-26.318678-39.436506-43.366319-69.325226-41.013966-39.076734 3.265619-68.439634 39.021384-65.312388 79.841627 0.857917 10.516401 3.653066 20.147211 7.998 28.83708 19.78744 46.659613 11.097571 103.448181-25.377737 141.750022l-191.094085 199.950001a118.088119 118.088119 0 0 1-171.998513 0c-47.434506-49.537786-47.434506-130.098956 0-179.636742l71.234782-74.389703-0.52582-0.553494a75.911814 75.911814 0 0 0 24.326097-61.880721c-3.127246-40.820243-37.3609-71.51153-76.437634-68.24591a69.463599 69.463599 0 0 0-46.908685 23.966325l-0.166049-0.193723-72.618519 75.856464c-103.226783 107.793115-103.226783 282.36538 0 390.158495 103.171433 107.793115 270.299193 107.793115 373.498301 0l191.619904-200.1714c80.256748-83.992838 97.636485-208.307773 52.83108-310.289193z" fill="#5c8add" ></path><path d="M1002.047012 80.865592c-103.226783-107.82079-270.382217-107.82079-373.581325 0l-191.619905 200.199075c-80.284423 83.854464-97.66416 208.197074-52.997128 310.233843 0.52582 1.079315 0.857917 2.15863 1.383737 3.26562 0.166048 0.166048 0.166048 0.359772 0.332097 0.719543 12.536658 26.291004 39.46418 43.366319 69.3529 41.013966 39.076734-3.265619 68.439634-39.021384 65.312388-79.869302a78.679288 78.679288 0 0 0-7.998-28.864755c-19.78744-46.631938-11.097571-103.448181 25.377737-141.750022l191.287808-199.839302a118.088119 118.088119 0 0 1 172.026188 0c47.434506 49.537786 47.434506 130.126631 0 179.692091l-71.234782 74.417378 0.52582 0.553495a75.939489 75.939489 0 0 0-24.353772 61.88072c3.15492 40.847917 37.3609 71.51153 76.465309 68.245911a69.463599 69.463599 0 0 0 46.908685-23.938651l0.166049 0.166048 72.646194-75.856464c103.03306-107.82079 103.03306-282.642127 0-390.269194z" fill="#5c8add" ></path></symbol><symbol id="icon-liaotian" viewBox="0 0 1171 1024"><path d="M1068.71699 0.243751H102.193768C46.228437 0.243751 0.500666 45.045267 0.500666 99.74309v696.251622c0 54.697824 45.727771 99.450589 101.693102 99.450589h329.113198l120.851966 114.465677a48.652788 48.652788 0 0 0 66.641644 0l120.851966-114.465677h329.064448c55.965331 0 101.741852-44.752765 101.741852-99.450589V99.74309C1170.458842 45.045267 1124.682321 0.243751 1068.71699 0.243751z m-439.776354 596.849784h-370.989696c-27.933915 0-50.846551-22.425133-50.846551-49.774045 0-27.348912 22.912636-49.725294 50.846551-49.725294h370.989696c27.933915 0 50.846551 22.376382 50.846551 49.725294 0 27.348912-22.912636 49.774045-50.846551 49.774045z m287.18795-211.381252H254.782171a50.456549 50.456549 0 0 1-50.846551-49.725294c0-27.397662 22.912636-49.774045 50.846551-49.774045h661.346415c27.933915 0 50.846551 22.376382 50.846551 49.774045 0 27.348912-22.912636 49.725294-50.846551 49.725294z" fill="#5C8ADD" ></path></symbol><symbol id="icon-xinfeng" viewBox="0 0 1400 1024"><path d="M1301.63733163 214.78520234a207.81921797 207.81921797 0 0 1 7.02423018 52.42036465v489.73590176a205.10753818 205.10753818 0 0 1-205.05853125 205.05853125H283.05853124A205.15654424 205.15654424 0 0 1 77.99999999 756.79444971V267.20556699a201.36672685 201.36672685 0 0 1 7.02423106-52.42036465L586.24393329 562.1905874c69.44187217 51.96297217 146.36536612 49.13694404 214.1736961 0zM1103.60303056 62.0000167H283.05853124A204.50312753 204.50312753 0 0 0 106.37462518 163.41030547l489.71956641 335.75823018c62.43397646 50.77048623 127.85733457 50.31309463 194.62019765 0L1280.28693749 163.41030547A204.68281729 204.68281729 0 0 0 1103.60303056 62.0000167z m0 0" fill="#5c8add" ></path></symbol><symbol id="icon-QQ1" viewBox="0 0 1024 1024"><path d="M0 512a512 512 0 1 0 1024 0A512 512 0 1 0 0 512z" fill="#18ACFC" ></path><path d="M500.113 228.39c118.396-1.518 178.924 61.004 201 156 3.497 15.048 0.15 34.807 0 50 27.143 5.682 33.087 60.106 10 75v1h1c8.26 14.33 19.04 28.125 26 44 7.332 16.723 9.306 35.16 14 55 4.024 17.01-2.287 51.505-10 57-0.771 0.683-2.231 1.312-3 2-14.601-3.016-30.377-16.865-38-27-3.065-4.074-5.275-9.672-10-12-0.395 21.568-12.503 41.15-22 55-3.514 5.123-14.073 13.217-14 18 3.691 2.836 8.305 2.956 13 5 10.513 4.577 25.449 13.168 32 22 2.334 3.146 5.548 7.555 7 11 16.193 38.414-36.527 48.314-63 54-27.185 5.839-77.818-10.224-92-19-8.749-5.414-16.863-18.573-29-19-3.666 2.389-14.438 1.132-20 1-16.829 32.804-101.913 47.868-148 31-14.061-5.146-43.398-17.695-38-40 4.437-18.327 19.947-29.224 35-37 5.759-2.975 18.915-4.419 22-10-13.141-8.988-24.521-28.659-31-44-3.412-8.077-4.193-25.775-9-32-7.789 12.245-32.097 36.91-52 33-3.071-4.553-7.213-9.097-9-15-4.792-15.835-1.81-40.379 2-54 8.117-29.02 16.965-50.623 32-72 4.672-6.643 11.425-12.135 16-19-8.945-9.733-6.951-37.536-1-49 4.002-7.709 9.701-7.413 10-20-1.92-3.022-0.071-8.604-1-13-4.383-20.75 3.273-47.552 9-63 19.8-53.421 53.712-90.466 105-112 11.986-5.033 25.833-7.783 39-11 5.322-1.3 11.969 0.518 16-2z" fill="#FFFFFF" ></path></symbol><symbol id="icon-rss" viewBox="0 0 1024 1024"><path d="M749.61196492 908.06119793C749.61196492 560.41848146 463.58151854 274.36328126 115.93880207 274.36328126V115.93880207c434.50388795 0 792.12239584 357.61850789 792.12239586 792.12239586zM224.55858562 690.72261555a108.91682943 108.91682943 0 0 1 108.69404499 108.74355267C333.25263061 859.29616292 284.24005737 908.06119793 224.31104736 908.06119793 164.48105265 908.06119793 115.96355592 859.41993206 115.96355592 799.46616822s48.69077351-108.71879883 108.61978351-108.74355267zM641.01693522 908.06119793h-153.96879069c0-203.60020956-167.50913289-371.13409627-371.10934246-371.13409629v-153.96879068c288.03550619 0 525.07813313 237.11688843 525.07813315 525.10288697z" fill="#FFA500" ></path></symbol><symbol id="icon-youxiang" viewBox="0 0 1024 1024"><path d="M583.60666667 972h-68.08c-8.43333333 0-15.33333333-6.9-15.33333334-15.33333333V609.52c0-8.43333333 6.9-15.33333333 15.33333334-15.33333333h68.08c8.43333333 0 15.33333333 6.9 15.33333333 15.33333333V956.66666667c0 8.43333333-6.9 15.33333333-15.33333333 15.33333333z" fill="#629FF9" ></path><path d="M294.42 167c-113.62 0-205.77333333 92-205.77333333 205.31333333v336.72h411.39333333V372.31333333c0.15333333-113.31333333-92-205.31333333-205.62-205.31333333z" fill="#2166CC" ></path><path d="M519.97333333 627H216.98666667c-25.45333333 0-46-20.54666667-46-46V393.78c0-25.45333333 20.54666667-46 46-46h302.98666666c25.45333333 0 46 20.54666667 46 46V581c0 25.45333333-20.54666667 46-46 46z" fill="#D2E4FF" ></path><path d="M565.97333333 397a49.22 49.22 0 0 0-49.37333333-49.22H220.36c-27.29333333 0-49.37333333 22.08-49.37333333 49.22v10.27333333l179.4 94.60666667c11.34666667 5.98 24.84 5.98 36.18666666 0l179.4-94.60666667v-10.27333333z" fill="#FFFFFF" ></path><path d="M730.5 167h-427.8v0.46c109.78666667 4.29333333 197.49333333 94.3 197.49333333 205.00666667v336.72h411.39333334c27.29333333 0 49.37333333-22.08 49.37333333-49.22V397c0-126.96-103.19333333-230-230.46-230z" fill="#4E8DF6" ></path><path d="M845.80666667 52H681.12666667c-9.04666667 0-16.40666667 7.36-16.40666667 16.40666667v336.72a24.67133333 24.67133333 0 1 0 49.37333333 0V134.18666667h131.71333334c9.04666667 0 16.40666667-7.36 16.40666666-16.40666667V68.40666667c0-9.04666667-7.36-16.40666667-16.40666666-16.40666667z" fill="#2166CC" ></path><path d="M896.25333333 659.81333333h-35.11333333c-8.43333333 0-15.33333333-6.9-15.33333333-15.33333333v-35.11333333c0-8.43333333 6.9-15.33333333 15.33333333-15.33333334h35.11333333c8.43333333 0 15.33333333 6.9 15.33333334 15.33333334v35.11333333c0 8.58666667-6.9 15.33333333-15.33333334 15.33333333z" fill="#FFFFFF" ></path><path d="M88.8 709.18666667l-24.22666667 131.40666666c-9.66 54.43333333 26.83333333 98.59333333 81.26666667 98.59333334h213.9c54.58666667 0 106.56666667-44.16 116.22666667-98.59333334l23.15333333-131.40666666H88.8z" fill="#2974CE" ></path></symbol><symbol id="icon-gitHub" viewBox="0 0 1049 1024"><path d="M523.6581816 52C262.83923907 52 52 262.8401375 52 523.6581816c0 208.49703047 135.09433812 384.97758117 322.50789391 447.44906532 23.42658172 4.68531653 32.01647887-10.15136894 32.01647796-22.64584583 0-10.93210574-0.78163433-48.41463703-0.78163433-87.45953855-131.18885996 28.11189824-158.5200223-56.22379738-158.52002231-56.22379739-21.08437312-54.66232469-52.3201152-68.71827336-52.3201152-68.71827335-42.94858371-28.89353348 3.12384382-28.89353348 3.12384384-28.89353348 47.63479867 3.12384382 72.62285398 48.41643391 72.62285398 48.4164339 42.16784782 71.84121875 110.10538527 51.53758242 137.43654672 39.04400399 3.90457972-30.45500618 16.3990566-51.5393793 29.67427028-63.25222094-104.64023039-10.93300418-214.74561566-51.53848086-214.74561657-232.70524742 0-51.53848086 18.74126609-93.70632867 48.4164339-126.50444187-4.68621496-11.71284164-21.08527156-60.12837711 4.6844181-124.94207075 0 0 39.82563922-12.49447688 129.62738726 48.41463704 37.48253129-10.15136894 78.08980484-15.61742227 117.91454562-15.61742137s80.43201433 5.46605242 117.91454473 15.61742137c89.80264648-60.90911391 129.62828571-48.41463703 129.62828571-48.41463704 25.76879122 64.81369363 9.37063305 113.22922911 4.68531651 124.94207075 30.45410773 32.79721477 48.41463703 74.96506258 48.41463703 126.50444187 0 181.16676656-110.10538527 220.99150644-215.52545401 232.70524742 17.1797934 14.83668547 32.01647887 42.94858371 32.01647886 87.45953946 0 63.25222094-0.78163433 114.009965-0.78163523 129.62738636 0 12.49447688 8.59079468 27.33116234 32.01737731 22.64584583 187.41265734-62.4705866 322.50699547-238.95203574 322.50699546-447.44996375C995.31636231 262.8401375 783.69369203 52 523.6581816 52z" fill="#663399" ></path><path d="M230.82365863 729.03136735c-0.7807359 2.34310703-4.68531653 3.12384382-7.80916035 1.56237113s-5.46605242-4.68531653-3.90368129-7.02842356c0.7807359-2.34220859 4.68531653-3.12384382 7.80826192-1.56147269s4.68531653 4.68531653 3.90457972 7.02752512z m18.7412661 21.08437312c-2.34220859 2.34220859-7.02752512 0.78163433-9.37063305-2.34310703-3.12294539-3.12294539-3.90457972-7.80826192-1.5614727-10.15136894 2.34220859-2.34220859 6.24678922-0.7807359 9.37063305 2.34310702 3.12384382 3.90457972 3.90457972 8.58899782 1.5614727 10.15136895zM268.30618992 777.44690281c-3.12294539 2.34220859-7.80826192 0-10.15136895-3.90457972-3.12384382-3.90457972-3.12384382-9.37063305 0-10.93210574 3.12384382-2.34310703 7.80916035 0 10.15226739 3.90457972 3.12294539 3.90368129 3.12294539 8.58899782 0 10.93210574z m25.76968965 26.55042555c-2.34220859 3.12294539-7.80916035 2.34220859-12.49447688-1.56237113-3.90457972-3.90368129-5.46605242-9.37063305-2.34220859-11.71284164 2.34220859-3.12384382 7.80826192-2.34310703 12.49447687 1.56147269 3.90368129 3.12384382 4.68531653 8.58989625 2.3422086 11.71374008z m35.1403227 14.83668637c-0.78163433 3.90457972-6.24768766 5.46605242-11.71374008 3.90457972-5.46605242-1.5614727-8.58899782-6.24768766-7.80916036-9.37063305 0.78163433-3.90457972 6.24768766-5.46605242 11.71374009-3.90457972 5.46605242 1.5614727 8.58899782 5.46605242 7.80916035 9.37063305z m38.26416562 3.12384382c0 3.90457972-4.68621496 7.02752512-10.15226738 7.02752512-5.46605242 0-10.15226738-3.12294539-10.15226739-7.02752512s4.68621496-7.02842356 10.15226739-7.02842445c5.46605242 0 10.15226738 3.12384382 10.15226738 7.02842445z m35.92016106-6.24768766c0.78163433 3.90457972-3.12384382 7.80916035-8.58899872 8.58989625-5.46695086 0.78163433-10.15226738-1.5614727-10.93390172-5.46605241-0.77983747-3.90457972 3.12384382-7.80916035 8.5907947-8.58899872 5.46605242-0.78163433 10.15136894 1.56057426 10.93210574 5.46515488z m0 0" fill="#663399" ></path></symbol><symbol id="icon-bilibili" viewBox="0 0 1024 1024"><path d="M832.61667555 181.33447111h-164.32545185l74.45617778-74.45617778c12.84020148-12.84020148 12.84020148-30.8140563 0-43.65425778-12.84020148-12.84020148-30.8140563-12.84020148-43.65425778 0L573.2882963 189.04101925H450.04420741L324.2272237 63.23617185c-10.26730667-12.84020148-25.68040297-15.40096-41.08136295-7.70654815-2.57289482 0-2.57289482 2.57289482-5.13365334 5.13365333-12.84020148 12.84020148-12.84020148 30.8140563 0 43.65425779l77.02907259 77.02907259h-164.32545185c-89.86927408 0-164.32545185 74.45617778-164.32545185 164.32545184v408.24073483c0 87.29637925 74.45617778 161.75255703 164.32545185 161.75255703h25.68040296c0 30.8140563 25.68040297 53.92156445 53.92156444 53.92156444s53.92156445-25.68040297 53.92156445-53.92156444H704.23893333c2.57289482 30.8140563 28.24116148 53.92156445 59.05521778 51.34866964 28.24116148-2.57289482 48.78791111-23.10750815 51.34866964-51.34866964h20.53461333c89.86927408 0 164.32545185-74.45617778 164.32545184-164.32545186V343.09916445c-2.56075852-89.86927408-77.02907259-161.76469333-166.88621037-161.76469334z m-5.13365333 634.19429926H200.99527111c-33.37481482 0-59.05521778-28.24116148-61.61597629-61.61597629l-2.57289482-415.94728297c0-33.37481482 28.24116148-61.6159763 61.6159763-61.61597629h626.48775111c33.37481482 0 59.05521778 28.24116148 61.61597629 61.61597629l2.57289482 415.94728297c-2.57289482 35.93557333-28.24116148 61.6159763-61.6159763 61.61597629z" fill="#ff7299" ></path><path d="M403.82919111 417.55534222l15.40096 77.0290726-205.40681481 38.50846815-15.40096-77.0290726 205.40681481-38.50846815z m197.70026667 77.0290726l15.40096-77.0290726 205.40681481 38.50846815-15.40096 77.0290726-205.40681481-38.50846815z m41.08136297 161.75255703c0 2.57289482 0 7.70654815-2.57289483 10.26730667-12.84020148 28.24116148-41.08136297 46.2150163-74.45617777 48.78791111-20.53461333 0-41.08136297-10.26730667-53.92156445-25.68040296-15.40096 15.40096-33.37481482 25.68040297-53.92156445 25.68040296-30.8140563-2.57289482-59.05521778-20.53461333-74.45617777-48.78791111 0-2.57289482-2.57289482-5.13365333-2.57289481-10.26730667 0-10.26730667 7.70654815-17.97385482 17.97385481-20.53461333h2.57289482c7.70654815 0 12.84020148 2.57289482 15.40096 10.26730666 0 0 20.53461333 28.24116148 38.50846815 28.24116149 35.94770963 0 35.94770963-30.8140563 56.48232296-53.92156445 23.10750815 25.68040297 23.10750815 53.92156445 56.48232296 53.92156445 23.10750815 0 38.50846815-28.24116148 38.50846815-28.24116149 2.57289482-5.13365333 10.26730667-10.26730667 15.40096-10.26730666 10.26730667-2.57289482 17.97385482 5.13365333 20.53461333 15.40096v5.13365333h0.0364089z" fill="#ff7299" ></path></symbol></svg>',o=(o=document.getElementsByTagName("script"))[o.length-1].getAttribute("data-injectcss"),p=function(c,l){l.parentNode.insertBefore(c,l)};if(o&&!c.__iconfont__svg__cssinject__){c.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(c){console&&console.log(c)}}function d(){i||(i=!0,a())}function m(){try{t.documentElement.doScroll("left")}catch(c){return void setTimeout(m,50)}d()}l=function(){var c,l=document.createElement("div");l.innerHTML=v,v=null,(l=l.getElementsByTagName("svg")[0])&&(l.setAttribute("aria-hidden","true"),l.style.position="absolute",l.style.width=0,l.style.height=0,l.style.overflow="hidden",l=l,(c=document.body).firstChild?p(l,c.firstChild):c.appendChild(l))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(l,0):(h=function(){document.removeEventListener("DOMContentLoaded",h,!1),l()},document.addEventListener("DOMContentLoaded",h,!1)):document.attachEvent&&(a=l,t=c.document,i=!1,m(),t.onreadystatechange=function(){"complete"==t.readyState&&(t.onreadystatechange=null,d())})}(window);]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/blog/js/card_weibo.js"/>
      <url>/blog/js/card_weibo.js</url>
      
        <content type="html"><![CDATA[fetch('https://weibo-top-api.vercel.app/api').then(data => data.json()).then(data => {  let html = '<style>.weibo-new{background:#ff3852}.weibo-hot{background:#ff9406}.weibo-jyzy{background:#ffc000}.weibo-recommend{background:#00b7ee}.weibo-adrecommend{background:#febd22}.weibo-friend{background:#8fc21e}.weibo-boom{background:#bd0000}.weibo-topic{background:#ff6f49}.weibo-topic-ad{background:#4dadff}.weibo-boil{background:#f86400}#weibo-container{overflow-y:auto;-ms-overflow-style:none;scrollbar-width:none}#weibo-container::-webkit-scrollbar{display:none}.weibo-list-item{display:flex;flex-direction:row;justify-content:space-between;flex-wrap:nowrap}.weibo-title{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-right:auto}.weibo-num{float:right}.weibo-hotness{display:inline-block;padding:0 6px;transform:scale(.8) translateX(-3px);color:#fff;border-radius:8px}</style>'  html += '<div class="weibo-list">'  let hotness = {    '爆': 'weibo-boom',    '热': 'weibo-hot',    '沸': 'weibo-boil',    '新': 'weibo-new',    '荐': 'weibo-recommend',    '音': 'weibo-jyzy',    '影': 'weibo-jyzy',    '剧': 'weibo-jyzy',    '综': 'weibo-jyzy'  }  for (let item of data) {    html += '<div class="weibo-list-item"><div class="weibo-hotness ' + hotness[(item.hot || '荐')] + '">' + (item.hot || '荐') + '</div>'      + '<span class="weibo-title"><a title="' + item.title + '"href="' + item.url + '" target="_blank" rel="external nofollow noreferrer">' + item.title + '</a></span>'      + '<div class="weibo-num"><span>' + item.num + '</span></div></div>'  }  html += '</div>'  document.getElementById('weibo-container').innerHTML = html}).catch(function (error) {  console.log(error);});]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/blog/js/chocolate.js"/>
      <url>/blog/js/chocolate.js</url>
      
        <content type="html"><![CDATA[// /*//  * @Author: tzy1997//  * @Date: 2020-12-15 20:55:25//  * @LastEditors: tzy1997//  * @LastEditTime: 2021-01-12 19:02:25//  */// $(function() {//     // 气泡//     function bubble() {//         $('#page-header').circleMagic({//             radius: 10,//             density: .2,//             color: 'rgba(255,255,255,.4)',//             clearOffset: 0.99//         });//     }! function(p) {//         p.fn.circleMagic = function(t) {//             var o, a, n, r, e = !0,//                 i = [],//                 d = p.extend({ color: "rgba(255,0,0,.5)", radius: 10, density: .3, clearOffset: .2 }, t),//                 l = this[0];//             function c() { e = !(document.body.scrollTop > a) }//             function s() { o = l.clientWidth, a = l.clientHeight, l.height = a "px", n.width = o, n.height = a }//             function h() {//                 if (e)//                     for (var t in r.clearRect(0, 0, o, a), i) i[t].draw();//                 requestAnimationFrame(h)//             }//             function f() {//                 var t = this;//                 function e() { t.pos.x = Math.random() * o, t.pos.y = a 100 * Math.random(), t.alpha = .1 Math.random() * d.clearOffset, t.scale = .1 .3 * Math.random(), t.speed = Math.random(), "random" === d.color ? t.color = "rgba(" Math.floor(255 * Math.random()) ", " Math.floor(0 * Math.random()) ", " Math.floor(0 * Math.random()) ", " Math.random().toPrecision(2) ")" : t.color = d.color }//                 t.pos = {}, e(), this.draw = function() { t.alpha <= 0 && e(), t.pos.y -= t.speed, t.alpha -= 5e-4, r.beginPath(), r.arc(t.pos.x, t.pos.y, t.scale * d.radius, 0, 2 * Math.PI, !1), r.fillStyle = t.color, r.fill(), r.closePath() }//             }! function() {//                 o = l.offsetWidth, a = l.offsetHeight,//                     function() {//                         var t = document.createElement("canvas");//                         t.id = "canvas", t.style.top = 0, t.style.zIndex = 0, t.style.position = "absolute", l.appendChild(t), t.parentElement.style.overflow = "hidden"//                     }(), (n = document.getElementById("canvas")).width = o, n.height = a, r = n.getContext("2d");//                 for (var t = 0; t < o * d.density; t++) {//                     var e = new f;//                     i.push(e)//                 }//                 h()//             }(), window.addEventListener("scroll", c, !1), window.addEventListener("resize", s, !1)//         }//     }(jQuery);//     // 调用气泡方法//     bubble();// })]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/blog/js/census.js"/>
      <url>/blog/js/census.js</url>
      
        <content type="html"><![CDATA[var start_date = '20220801' // 开始日期var date = new Date();var end_date = '' + date.getFullYear() + (date.getMonth() > 8 ? (date.getMonth() + 1) : ("0" + (date.getMonth() + 1))) + (date.getDate() > 9 ? date.getDate() : ("0" + date.getDate())); // 结束日期var access_token = '121.a9a7a4764625e15619421b271a5006a3.YD8NI9PabRQ2k5X2WPfB2mly2YzFFENEd7KQOgp.X7VerQ' // accessTokenvar site_id = '18367057' // 网址 idvar dataUrl = 'https://bd-tongji.cpen.top/api?access_token=' + access_token + '&site_id=' + site_idvar metrics = 'pv_count' // 统计访问次数 PV 填写 'pv_count'，统计访客数 UV 填写 'visitor_count'，二选一var metricsName = (metrics === 'pv_count' ? '访问次数' : (metrics === 'visitor_count' ? '访客数' : ''))// 这里为了统一颜色选取的是“明暗模式”下的两种字体颜色，也可以自己定义var color = document.documentElement.getAttribute('data-theme') === 'light' ? '#4c4948' : 'rgba(255,255,255,0.7)'// 访问地图function mapChart () {  let script = document.createElement("script")  // let paramUrl = '&start_date=' + start_date + '&end_date=' + end_date + '&metrics=' + metrics + '&method=visit/district/a'; // 更换请求地址  let paramUrl = '&start_date=' + start_date + '&end_date=' + end_date + '&metrics=' + metrics + '&method=overview/getDistrictRpt';  fetch(dataUrl + paramUrl).then(data => data.json()).then(data => {    let mapName = data.result.items[0]    let mapValue = data.result.items[1]    let mapArr = []    let max = mapValue[0][0]    for (let i = 0; i < mapName.length; i++) {      // mapArr.push({ name: mapName[i][0].name, value: mapValue[i][0] })      mapArr.push({ name: mapName[i][0], value: mapValue[i][0] })    }    let mapArrJson = JSON.stringify(mapArr)    script.innerHTML = `      var mapChart = echarts.init(document.getElementById('map-chart'), 'light');      var mapOption = {        title: {          text: '博客访问来源地图',          x: 'center',          textStyle: {            color: '${color}'          }        },        tooltip: {          trigger: 'item'        },        visualMap: {          min: 0,          max: ${max},          left: 'left',          top: 'bottom',          text: ['高','低'],          color: ['#37a2da', '#92d0f9'],          textStyle: {            color: '${color}'          },          calculable: true        },        series: [{          name: '${metricsName}',          type: 'map',          mapType: 'china',          showLegendSymbol: false,          label: {            normal: {              show: false            },            emphasis: {              show: true,              color: '#617282'            }          },          itemStyle: {            normal: {              areaColor: 'rgb(230, 232, 234)',              borderColor: 'rgb(255, 255, 255)',              borderWidth: 1            },            emphasis: {              areaColor: 'gold'            }          },          data: ${mapArrJson}        }]      };      mapChart.setOption(mapOption);      window.addEventListener("resize", () => {         mapChart.resize();      });`    document.getElementById('map-chart').after(script);  }).catch(function (error) {    console.log(error);  });}// 访问趋势function trendsChart () {  let script = document.createElement("script")  let paramUrl = '&start_date=' + start_date + '&end_date=' + end_date + '&metrics=' + metrics + '&method=trend/time/a&gran=month'  fetch(dataUrl + paramUrl).then(data => data.json()).then(data => {    let monthArr = []    let monthValueArr = []    let monthName = data.result.items[0]    let monthValue = data.result.items[1]    for (let i = monthName.length - 1; i >= 0; i--) {      monthArr.push(monthName[i][0].substring(0, 7).replace('/', '-'))      monthValueArr.push(monthValue[i][0] !== '--' ? monthValue[i][0] : 0)    }    let monthArrJson = JSON.stringify(monthArr)    let monthValueArrJson = JSON.stringify(monthValueArr)    script.innerHTML = `      var trendsChart = echarts.init(document.getElementById('trends-chart'), 'light');      var trendsOption = {        title: {          text: '博客访问统计图',          x: 'center',          textStyle: {            color: '${color}'          }        },        tooltip: {          trigger: 'axis'        },        xAxis: {          name: '日期',          type: 'category',          boundaryGap: false,          nameTextStyle: {            color: '${color}'          },          axisTick: {            show: false          },          axisLabel: {            show: true,            color: '${color}'          },          axisLine: {            show: true,            lineStyle: {              color: '${color}'            }          },          data: ${monthArrJson}        },        yAxis: {          name: '${metricsName}',          type: 'value',          nameTextStyle: {            color: '${color}'          },          splitLine: {            show: false          },          axisTick: {            show: false          },          axisLabel: {            show: true,            color: '${color}'          },          axisLine: {            show: true,            lineStyle: {              color: '${color}'            }          }        },        series: [{          name: '${metricsName}',          type: 'line',          smooth: true,          lineStyle: {              width: 0          },          showSymbol: false,          itemStyle: {            opacity: 1,            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{              offset: 0,              color: 'rgba(128, 255, 165)'            },            {              offset: 1,              color: 'rgba(1, 191, 236)'            }])          },          areaStyle: {            opacity: 1,            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{              offset: 0,              color: 'rgba(128, 255, 165)'            }, {              offset: 1,              color: 'rgba(1, 191, 236)'            }])          },          data: ${monthValueArrJson},          markLine: {            data: [{              name: '平均值',              type: 'average',              label: {                color: '${color}'              }            }]          }        }]      };      trendsChart.setOption(trendsOption);      window.addEventListener("resize", () => {         trendsChart.resize();      });`    document.getElementById('trends-chart').after(script);  }).catch(function (error) {    console.log(error);  });}// 访问来源function sourcesChart () {  let script = document.createElement("script")  let paramUrl = '&start_date=' + start_date + '&end_date=' + end_date + '&metrics=' + metrics + '&method=source/all/a';  fetch(dataUrl + paramUrl).then(data => data.json()).then(data => {    let sourcesName = data.result.items[0]    let sourcesValue = data.result.items[1]    let sourcesArr = []    for (let i = 0; i < sourcesName.length; i++) {      sourcesArr.push({ name: sourcesName[i][0].name, value: sourcesValue[i][0] })    }    let sourcesArrJson = JSON.stringify(sourcesArr)    script.innerHTML = `      var sourcesChart = echarts.init(document.getElementById('sources-chart'), 'light');      var sourcesOption = {        title: {          text: '博客访问来源统计图',          x: 'center',          textStyle: {            color: '${color}'          }        },        legend: {          top: 'bottom',          textStyle: {            color: '${color}'          }        },        tooltip: {          trigger: 'item'        },        series: [{          name: '${metricsName}',          type: 'pie',          radius: [30, 80],          center: ['50%', '50%'],          roseType: 'area',          label: {            color: '${color}',            formatter: "{b} : {c} ({d}%)"          },          data: ${sourcesArrJson},          itemStyle: {            emphasis: {              shadowBlur: 10,              shadowOffsetX: 0,              shadowColor: 'rgba(255, 255, 255, 0.5)'            }          }        }]      };      sourcesChart.setOption(sourcesOption);      window.addEventListener("resize", () => {         sourcesChart.resize();      });`    document.getElementById('sources-chart').after(script);  }).catch(function (error) {    console.log(error);  });}function switchVisitChart () {  // 这里为了统一颜色选取的是“明暗模式”下的两种字体颜色，也可以自己定义  let color = document.documentElement.getAttribute('data-theme') === 'light' ? '#4c4948' : 'rgba(255,255,255,0.7)'  if (document.getElementById('map-chart') && mapOption) {    try {      let mapOptionNew = mapOption      mapOptionNew.title.textStyle.color = color      mapOptionNew.visualMap.textStyle.color = color      mapChart.setOption(mapOptionNew)    } catch (error) {      console.log(error)    }  }  if (document.getElementById('trends-chart') && trendsOption) {    try {      let trendsOptionNew = trendsOption      trendsOptionNew.title.textStyle.color = color      trendsOptionNew.xAxis.nameTextStyle.color = color      trendsOptionNew.yAxis.nameTextStyle.color = color      trendsOptionNew.xAxis.axisLabel.color = color      trendsOptionNew.yAxis.axisLabel.color = color      trendsOptionNew.xAxis.axisLine.lineStyle.color = color      trendsOptionNew.yAxis.axisLine.lineStyle.color = color      trendsOptionNew.series[0].markLine.data[0].label.color = color      trendsChart.setOption(trendsOptionNew)    } catch (error) {      console.log(error)    }  }  if (document.getElementById('sources-chart') && sourcesOption) {    try {      let sourcesOptionNew = sourcesOption      sourcesOptionNew.title.textStyle.color = color      sourcesOptionNew.legend.textStyle.color = color      sourcesOptionNew.series[0].label.color = color      sourcesChart.setOption(sourcesOptionNew)    } catch (error) {      console.log(error)    }  }}if (document.getElementById('map-chart')) mapChart()if (document.getElementById('trends-chart')) trendsChart()if (document.getElementById('sources-chart')) sourcesChart()document.getElementById("darkmode").addEventListener("click", function () { setTimeout(switchVisitChart, 100) })]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/blog/js/clock.min.js"/>
      <url>/blog/js/clock.min.js</url>
      
        <content type="html"><![CDATA[function clockUpdateTime(e,c){let a="#000";switch(e.now.icon){case"100":a="#fdcc45";break;case"101":a="#fe6976";break;case"102":case"103":a="#fe7f5b";break;case"104":case"150":case"151":case"152":case"153":case"154":case"800":case"801":case"802":case"803":case"804":case"805":case"806":case"807":a="#2152d1";break;case"300":case"301":case"305":case"306":case"307":case"308":case"309":case"310":case"311":case"312":case"313":case"314":case"315":case"316":case"317":case"318":case"350":case"351":case"399":a="#49b1f5";break;case"302":case"303":case"304":a="#fdcc46";break;case"400":case"401":case"402":case"403":case"404":case"405":case"406":case"407":case"408":case"409":case"410":case"456":case"457":case"499":a="#a3c2dc";break;case"500":case"501":case"502":case"503":case"504":case"507":case"508":case"509":case"510":case"511":case"512":case"513":case"514":case"515":a="#97acba";break;case"900":case"999":a="red";break;case"901":a="#179fff;"}var t=document.getElementById("hexo_electric_clock");clock_box_html=`\n  <div class="clock-row">\n    <span id="card-clock-clockdate" class="card-clock-clockdate"></span>\n    <span class="card-clock-weather"><i class="qi-${e.now.icon}-fill" style="color: ${a}"></i> ${e.now.text} <span>${e.now.temp}</span> ℃</span>\n    <span class="card-clock-humidity">💧 ${e.now.humidity}%</span>\n  </div>\n  <div class="clock-row">\n    <span id="card-clock-time" class="card-clock-time"></span>\n  </div>\n  <div class="clock-row">\n    <span class="card-clock-windDir"> <i class="qi-gale"></i> ${e.now.windDir}</span>\n    <span class="card-clock-location">${c}</span>\n    <span id="card-clock-dackorlight" class="card-clock-dackorlight"></span>\n  </div>\n  `;var s=["SUN","MON","TUE","WED","THU","FRI","SAT"],n=document.getElementById("card-clock-loading");function r(){var e,c=new Date,a=o(c.getHours(),2)+":"+o(c.getMinutes(),2)+":"+o(c.getSeconds(),2),t=o(c.getFullYear(),4)+"-"+o(c.getMonth()+1,2)+"-"+o(c.getDate(),2)+" "+s[c.getDay()],n=c.getHours();if(n>12?(n-=12,e=" P M"):e=" A M",document.getElementById("card-clock-time")){var r=document.getElementById("card-clock-time"),l=document.getElementById("card-clock-clockdate"),i=document.getElementById("card-clock-dackorlight");r.innerHTML=a,l.innerHTML=t,i.innerHTML=e}}function o(e,c){for(var a="",t=0;t<c;t++)a+="0";return(a+e).slice(-c)}n&&(n.innerHTML=""),t.innerHTML=clock_box_html;setInterval(r,1e3);r()}function getIpInfo(){let e={city:"长沙市",qweather_url:""};"true"===clock_default_rectangle_enable&&e?fetch(`https://restapi.amap.com/v3/geocode/regeo?key=${gaud_map_key}&location=${clock_rectangle}`).then((e=>e.json())).then((e=>{if("1"===e.status){const c=e.regeocode.addressComponent;return Array.isArray(c.city)?c.province:c.city}})).then((c=>{fetch(`https://devapi.qweather.com/v7/weather/now?location=${clock_rectangle}&key=${qweather_key}`).then((e=>e.json())).then((a=>{if(document.getElementById("hexo_electric_clock")){clockUpdateTime(a,Array.isArray(c)?e.city:c)}}))})):fetch(`https://restapi.amap.com/v3/ip?key=${gaud_map_key}`).then((e=>e.json())).then((c=>{let a=Array.isArray(c.rectangle)?clock_rectangle:c.rectangle.split(";")[0];e.qweather_url=`https://devapi.qweather.com/v7/weather/now?location=${a}&key=${qweather_key}`,Array.isArray(c.rectangle)?fetch(`https://restapi.amap.com/v3/geocode/regeo?key=${gaud_map_key}&location=${clock_rectangle}`).then((e=>e.json())).then((a=>{if("1"===a.status){const c=a.regeocode.addressComponent;e.city=Array.isArray(c.city)?c.province:c.city}return c})).then((c=>{fetch(e.qweather_url).then((e=>e.json())).then((a=>{if(document.getElementById("hexo_electric_clock")){clockUpdateTime(a,Array.isArray(c.city)?e.city:c.city)}}))})):fetch(e.qweather_url).then((e=>e.json())).then((a=>{if(document.getElementById("hexo_electric_clock")){clockUpdateTime(a,Array.isArray(c.city)?e.city:c.city)}}))}))}getIpInfo();]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/blog/js/fcircle-beta.js"/>
      <url>/blog/js/fcircle-beta.js</url>
      
        <content type="html"><![CDATA[/*Last Modified time : 20220326 15:38 by https://immmmm.com已适配 FriendCircle 公共库和主库*///默认数据var fdata = {  jsonurl: '',  apiurl: '',  apipublieurl: 'https://fcircle-pub.rct.cool/', //默认公共库  initnumber: 20,  //首次加载文章数  stepnumber: 10,  //更多加载文章数  article_sort: 'created', //文章排序 updated or created  error_img: 'https://sdn.geekzu.org/avatar/57d8260dfb55501c37dde588e7c3852c'}//可通过 var fdataUser 替换默认值if(typeof(fdataUser) !=="undefined"){  for(var key in fdataUser) {    if(fdataUser[key]){      fdata[key] = fdataUser[key];    }  }}var article_num = '',sortNow='',UrlNow='',friends_num=''var container = document.getElementById('cf-container') ||  document.getElementById('fcircleContainer') ;// 获取本地 排序值、加载apiUrl，实现记忆效果var localSortNow = localStorage.getItem("sortNow")var localUrlNow = localStorage.getItem("urlNow")if(localSortNow && localUrlNow){  sortNow = localSortNow  UrlNow = localUrlNow}else{  sortNow = fdata.article_sort  if(fdata.jsonurl){    UrlNow = fdata.apipublieurl+'postjson?jsonlink='+ fdata.jsonurl+"&"  }else if(fdata.apiurl){    UrlNow = fdata.apiurl+'all?'  }else{    UrlNow = fdata.apipublieurl+'all?'  }  console.log("当前模式："+UrlNow)  localStorage.setItem("urlNow",UrlNow)  localStorage.setItem("sortNow",sortNow)}// 打印基本信息function loadStatistical(sdata){  article_num = sdata.article_num  friends_num = sdata.friends_num  var messageBoard =`  <div id="cf-state" class="cf-new-add">    <div class="cf-state-data">      <div class="cf-data-friends" onclick="openToShow()">        <span class="cf-label">订阅</span>        <span class="cf-message">${sdata.friends_num}</span>      </div>      <div class="cf-data-active" onclick="changeEgg()">        <span class="cf-label">活跃</span>        <span class="cf-message">${sdata.active_num}</span>      </div>      <div class="cf-data-article" onclick="clearLocal()">        <span class="cf-label">日志</span>        <span class="cf-message">${sdata.article_num}</span>      </div>    </div>    <div id="cf-change">        <span id="cf-change-created" data-sort="created" onclick="changeSort(event)" class="${sortNow == 'created' ? 'cf-change-now':''}">Created</span> | <span id="cf-change-updated" data-sort="updated" onclick="changeSort(event)" class="${sortNow == 'updated' ? 'cf-change-now':''}" >Updated</span>    </div>  </div>  `;  var loadMoreBtn = `    <div id="cf-more" class="cf-new-add" onclick="loadNextArticle()"><i class="fas fa-angle-double-down"></i></div>    <div id="cf-footer" class="cf-new-add">     <span id="cf-version-up" onclick="checkVersion()"></span>     <span class="cf-data-lastupdated">更新于：${sdata.last_updated_time}</span>      Powered by <a target="_blank" href="https://github.com/Rock-Candy-Tea/hexo-circle-of-friends" target="_blank">FriendCircle</a>    </div>    <div id="cf-overlay" class="cf-new-add" onclick="closeShow()"></div>    <div id="cf-overshow" class="cf-new-add"></div>  `;  if(container){    container.insertAdjacentHTML('beforebegin', messageBoard);    container.insertAdjacentHTML('afterend', loadMoreBtn);  }}// 打印文章内容 cf-articlefunction loadArticleItem(datalist,start,end){  var articleItem = '';  var articleNum = article_num;  var endFor = end  if(end > articleNum){endFor = articleNum}  if(start < articleNum){    for (var i = start;i<endFor;i++){      var item = datalist[i];      articleItem +=`      <div class="cf-article">        <a class="cf-article-title" href="${item.link}" target="_blank" rel="noopener nofollow" data-title="${item.title}">${item.title}</a>        <span class="cf-article-floor">${item.floor}</span>        <div class="cf-article-avatar no-lightbox flink-item-icon">          <img class="cf-img-avatar avatar" src="${item.avatar}" alt="avatar" onerror="this.src='${fdata.error_img}'; this.onerror = null;">          <a onclick="openMeShow(event)" data-link="${item.link}" class="" target="_blank" rel="noopener nofollow" href="javascript:;"><span class="cf-article-author">${item.author}</span></a>          <span class="cf-article-time">            <span class="cf-time-created" style="${sortNow == 'created' ? '':'display:none'}"><i class="far fa-calendar-alt">发表于</i>${item.created}</span>            <span class="cf-time-updated" style="${sortNow == 'updated' ? '':'display:none'}"><i class="fas fa-history">更新于</i>${item.updated}</span>          </span>        </div>      </div>      `;    }    container.insertAdjacentHTML('beforeend', articleItem);    // 预载下一页文章    fetchNextArticle()  }else{    // 文章加载到底    document.getElementById('cf-more').outerHTML = `<div id="cf-more" class="cf-new-add" onclick="loadNoArticle()"><small>一切皆有尽头！</small></div>`  }}// 打印个人卡片 cf-overshowfunction loadFcircleShow(userinfo,articledata){  var showHtml = `      <div class="cf-overshow">        <div class="cf-overshow-head">          <img class="cf-img-avatar avatar" src="${userinfo.avatar}" alt="avatar" onerror="this.src='${fdata.error_img}'; this.onerror = null;">          <a class="" target="_blank" rel="noopener nofollow" href="${userinfo.link}">${userinfo.author}</a>        </div>        <div class="cf-overshow-content">  `  for (var i = 0;i<userinfo.article_num;i++){    var item = articledata[i];    showHtml += `      <p><a class="cf-article-title"  href="${item.link}" target="_blank" rel="noopener nofollow" data-title="${item.title}">${item.title}</a><span>${item.created}</span></p>    `  }  showHtml += '</div></div>'  document.getElementById('cf-overshow').insertAdjacentHTML('beforeend', showHtml);  document.getElementById('cf-overshow').className = 'cf-show-now';}// 预载下一页文章，存为本地数据 nextArticlefunction fetchNextArticle(){  var start = document.getElementsByClassName('cf-article').length  var end = start + fdata.stepnumber  var articleNum = article_num;  if(end > articleNum){    end = articleNum  }  if(start <  articleNum){    UrlNow = localStorage.getItem("urlNow")    var fetchUrl = UrlNow+"rule="+sortNow+"&start="+start+"&end="+end    //console.log(fetchUrl)    fetch(fetchUrl)      .then(res => res.json())      .then(json =>{        var nextArticle = eval(json.article_data);        console.log("已预载"+"?rule="+sortNow+"&start="+start+"&end="+end)        localStorage.setItem("nextArticle",JSON.stringify(nextArticle))    })  }else if(start = articleNum){      document.getElementById('cf-more').outerHTML = `<div id="cf-more" class="cf-new-add" onclick="loadNoArticle()"><small>一切皆有尽头！</small></div>`  }}// 显示下一页文章，从本地缓存 nextArticle 中获取function loadNextArticle(){  var nextArticle = JSON.parse(localStorage.getItem("nextArticle"));  var articleItem = ""    for (var i = 0;i<nextArticle.length;i++){      var item = nextArticle[i];      articleItem +=`      <div class="cf-article">        <a class="cf-article-title" href="${item.link}" target="_blank" rel="noopener nofollow" data-title="${item.title}">${item.title}</a>        <span class="cf-article-floor">${item.floor}</span>        <div class="cf-article-avatar no-lightbox flink-item-icon">          <img class="cf-img-avatar avatar" src="${item.avatar}" alt="avatar" onerror="this.src='${fdata.error_img}'; this.onerror = null;">          <a onclick="openMeShow(event)" data-link="${item.link}" class="" target="_blank" rel="noopener nofollow" href="javascript:;"><span class="cf-article-author">${item.author}</span></a>          <span class="cf-article-time">            <span class="cf-time-created" style="${sortNow == 'created' ? '':'display:none'}"><i class="far fa-calendar-alt">发表于</i>${item.created}</span>            <span class="cf-time-updated" style="${sortNow == 'updated' ? '':'display:none'}"><i class="fas fa-history">更新于</i>${item.updated}</span>          </span>        </div>      </div>      `;    }    container.insertAdjacentHTML('beforeend', articleItem);    // 同时预载下一页文章    fetchNextArticle()}// 没有更多文章function loadNoArticle(){  var articleSortData = sortNow+"ArticleData"  localStorage.removeItem(articleSortData)  localStorage.removeItem("statisticalData")  //localStorage.removeItem("sortNow")  document.getElementById('cf-more').remove()  window.scrollTo(0,document.getElementsByClassName('cf-state').offsetTop)}// 清空本地数据function clearLocal(){  localStorage.removeItem("updatedArticleData")  localStorage.removeItem("createdArticleData")  localStorage.removeItem("nextArticle")  localStorage.removeItem("statisticalData")  localStorage.removeItem("sortNow")  localStorage.removeItem("urlNow")  location.reload();}//function checkVersion(){  var url = fdata.apiurl+"version"  fetch(url)    .then(res => res.json())    .then(json =>{      console.log(json)      var nowStatus = json.status,nowVersion = json.current_version,newVersion = json.latest_version      var versionID = document.getElementById('cf-version-up')      if(nowStatus == 0){        versionID.innerHTML = "当前版本：v"+ nowVersion      }else if(nowStatus == 1){        versionID.innerHTML = "发现新版本：v"+ nowVersion + " ↦ " + newVersion      }else{        versionID.innerHTML = "网络错误，检测失败！"      }  })}// 切换为公共全库function changeEgg(){  //有自定义json或api执行切换  if(fdata.jsonurl || fdata.apiurl ){    document.querySelectorAll('.cf-new-add').forEach(el => el.remove());    localStorage.removeItem("updatedArticleData")    localStorage.removeItem("createdArticleData")    localStorage.removeItem("nextArticle")    localStorage.removeItem("statisticalData")    container.innerHTML = ""    UrlNow = localStorage.getItem("urlNow")    //console.log("新"+UrlNow)    var UrlNowPublic = fdata.apipublieurl+'all?'    if(UrlNow !== UrlNowPublic){ //非完整默认公开库      changeUrl = fdata.apipublieurl+'all?'    }else{      if(fdata.jsonurl){        changeUrl = fdata.apipublieurl+'postjson?jsonlink='+ fdata.jsonurl+"&"      }else if(fdata.apiurl){        changeUrl = fdata.apiurl+'all?'      }    }    localStorage.setItem("urlNow",changeUrl)    FetchFriendCircle(sortNow,changeUrl)  }else{    clearLocal()  }}// 首次加载文章function FetchFriendCircle(sortNow,changeUrl){  var end = fdata.initnumber  var fetchUrl = UrlNow + "rule="+sortNow+"&start=0&end="+end  if(changeUrl){    fetchUrl = changeUrl + "rule="+sortNow+"&start=0&end="+end  }  //console.log(fetchUrl)  fetch(fetchUrl)    .then(res => res.json())    .then(json =>{      var statisticalData = json.statistical_data;      var articleData = eval(json.article_data);      var articleSortData = sortNow+"ArticleData";      loadStatistical(statisticalData);      loadArticleItem(articleData ,0,end)      localStorage.setItem("statisticalData",JSON.stringify(statisticalData))      localStorage.setItem(articleSortData,JSON.stringify(articleData))    })}// 点击切换排序function changeSort(event){  sortNow = event.currentTarget.dataset.sort  localStorage.setItem("sortNow",sortNow)  document.querySelectorAll('.cf-new-add').forEach(el => el.remove());  container.innerHTML = "";  changeUrl = localStorage.getItem("urlNow")  //console.log(changeUrl)  initFriendCircle(sortNow,changeUrl)  if(fdata.apiurl){    checkVersion()  }}//查询个人文章列表function openMeShow(event){  event.preventDefault()  var parse_url = /^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/;  var meLink = event.currentTarget.dataset.link.replace(parse_url, '$1:$2$3')  console.log(meLink)  var fetchUrl = ''  if(fdata.apiurl){    fetchUrl = fdata.apiurl + "post?num=5&link="+meLink  }else{    fetchUrl = fdata.apipublieurl + "post?num=5&link="+meLink  }  //console.log(fetchUrl)  if(noClick == 'ok'){    noClick = 'no'    fetchShow(fetchUrl)  }}// 关闭 showfunction closeShow(){  document.getElementById('cf-overlay').className -= 'cf-show-now';  document.getElementById('cf-overshow').className -= 'cf-show-now';  document.getElementById('cf-overshow').innerHTML = ''}// 点击开往var noClick = 'ok';function openToShow(){  var fetchUrl = ''  if(fdata.apiurl){    fetchUrl = fdata.apiurl + "post"  }else{    fetchUrl = fdata.apipublieurl + "post"  }  //console.log(fetchUrl)  if(noClick == 'ok'){    noClick = 'no'    fetchShow(fetchUrl)  }}// 展示个人文章列表function fetchShow(url){  var closeHtml = `    <div class="cf-overshow-close" onclick="closeShow()"></div>  `  document.getElementById('cf-overlay').className = 'cf-show-now';  document.getElementById('cf-overshow').insertAdjacentHTML('afterbegin', closeHtml);  console.log("开往"+url)  fetch(url)    .then(res => res.json())    .then(json =>{      //console.log(json)      noClick = 'ok'      var statisticalData = json.statistical_data;      var articleData = eval(json.article_data);      loadFcircleShow(statisticalData,articleData)    })}// 初始化方法，如有本地数据首先调用function initFriendCircle(sortNow,changeUrl){  var articleSortData = sortNow+"ArticleData";  var localStatisticalData = JSON.parse(localStorage.getItem("statisticalData"));  var localArticleData = JSON.parse(localStorage.getItem(articleSortData));  container.innerHTML = "";  if(localStatisticalData && localArticleData){    loadStatistical(localStatisticalData);    loadArticleItem(localArticleData ,0,fdata.initnumber)    console.log("本地数据加载成功")    var fetchUrl = UrlNow + "rule="+sortNow+"&start=0&end="+fdata.initnumber    fetch(fetchUrl)    .then(res => res.json())    .then(json =>{      var statisticalData = json.statistical_data;      var articleData = eval(json.article_data);      //获取文章总数与第一篇文章标题      var localSnum = localStatisticalData.article_num      var newSnum = statisticalData.article_num      var localAtile = localArticleData[0].title      var newAtile = articleData[0].title      //判断文章总数或文章标题是否一致，否则热更新      if(localSnum !== newSnum || localAtile !== newAtile){        document.getElementById('cf-state').remove()        document.getElementById('cf-more').remove()        document.getElementById('cf-footer').remove()        container.innerHTML = "";        var articleSortData = sortNow+"ArticleData";        loadStatistical(statisticalData);        loadArticleItem(articleData ,0,fdata.initnumber)        localStorage.setItem("statisticalData",JSON.stringify(statisticalData))        localStorage.setItem(articleSortData,JSON.stringify(articleData))        console.log("热更新完成")      }else{        console.log("API数据未更新")      }    })  }else{    FetchFriendCircle(sortNow,changeUrl)    console.log("第一次加载完成")  }}// 执行初始化initFriendCircle(sortNow)]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/blog/js/fcircle.js"/>
      <url>/blog/js/fcircle.js</url>
      
        <content type="html"><![CDATA[// ======================================================// 打印友链基本信息function loadStatistical(sdata){// 友链页面的挂载容器var container = document.getElementById('fcircleContainer');// 基本信息的html结构var messageBoard =`<div id="fMessageBoard">  <div class="fUpdatedTime">    <span class="fLabel">最近更新时间：</span><span class="fMessage">${sdata.last_updated_time}</span>  </div>  <div class="fMessageItem">    <div class="fActiveFriend fItem">      <span class="fLabel">活跃友链数</span>      <span class="fMeasureBar"><span class="fMeasure" style="width:${(sdata.active_num/sdata.friends_num * 100).toFixed(2)}%; background: rgba(89, 230, 54,0.6);">${(sdata.active_num/sdata.friends_num * 100).toFixed(2)}%</span></span>      <span class="fMessage">${sdata.active_num}/${sdata.friends_num}</span>    </div>    <div class="fErrorSite fItem">      <span class="fLabel">失联友链数</span>      <span class="fMeasureBar"><span class="fMeasure" style="width:${(sdata.error_num/sdata.friends_num * 100).toFixed(2)}%; background: rgba(227, 23, 72, 0.6);">${(sdata.error_num/sdata.friends_num * 100).toFixed(2)}%</span></span>      <span class="fMessage">${sdata.error_num}/${sdata.friends_num}</span>    </div>    <div class="fArticleNum fItem">      <span class="fLabel">当前库存</span>      <span class="fMeasureBar"><span class="fMeasure" style="width:${(sdata.article_num/Math.ceil(sdata.article_num / 100)).toFixed(2)}%; background: rgba(29, 217, 211, 0.6);">${(sdata.article_num/Math.ceil(sdata.article_num / 100)).toFixed(2)}%</span></span>      <span class="fMessage">${sdata.article_num}/${Math.ceil(Number( sdata.article_num) / 100) * 100}</span>    </div>  </div>  <div id="switchRankBtn">    <span id="rankByCreated">created</span>    <span>    <input type="checkbox" id="switchRankMode" checked="true" onchange="checkRankMode()"/><label for="switchRankMode" id="switchRank">Toggle</label>    </span>    <span id="rankByUpdated">updated</span>  </div></div>`;// 加载更多按钮var loadMoreBtn = `<div id="fcircleMoreBtn" onclick="loadMoreArticle()">  <i class="fas fa-angle-double-down"></i></div>`// 原则上信息面板应该在最前面，所以用beforebegin表示从开始符前面插入if(container){  container.insertAdjacentHTML('beforebegin', messageBoard);  // 为了不影响文章加载，选择afterend表示从结束符后面插入  container.insertAdjacentHTML('afterend', loadMoreBtn);  }}// ======================================================// 打印友链内容function loadArticleItem(datalist,start,end){var fdatalist = JSON.parse(localStorage.getItem("fdatalist"));// 声明友链页面的挂载容器var container = document.getElementById('fcircleContainer');// 循环读取输出友链信息for (var i = start;i<end;i++){var item = datalist[i];var articleItem=`  <div class="fArticleItem">    <div class="fArticleAvatar">      <a class="fArticlelink fAvatar" target="_blank" rel="noopener nofollow" href="${item.link}">        <img src="${item.avatar}" alt="avatar"  onerror="this.src='${fdatalist.error_img}'; this.onerror = null;">      </a>      <div class="fArticleAuthor">        ${item.author}      </div>    </div>    <div class="fArticleMessage">      <a class="fArticleTitle"  href="${item.link}" target="_blank" rel="noopener nofollow" data-title="${item.title}">        ${item.title}      </a>      <div class="fArticleTime">        <span class="fArticleCreated"><i class="far fa-calendar-alt">发表于</i>${item.created}</span>        <span class="fArticleUpdated"><i class="fas fa-history">更新于</i>${item.updated}</span>      </div>    </div>  </div>`;if(container){// 为了便于和后续拼接，选择从容器尾部插入container.insertAdjacentHTML('beforeend', articleItem);    }  }}// 初始化方法function initFriendCircle(){  // 获取友链挂载容器  var fcircleContainer = document.getElementById('fcircleContainer')  // 获取本地存储的友链基本信息  var statistical_data = JSON.parse(localStorage.getItem("statisticalList"));  // 从本地内存读取配置信息  var fdatalist = JSON.parse(localStorage.getItem("fdatalist"));  // 只有当容器、基本信息均存在时才执行初始化  if (fcircleContainer && statistical_data && fdatalist){    // 加载基本信息面板    loadStatistical(statistical_data);    // 获取切换排序按钮    var switchRankMode = document.getElementById("switchRankMode");    //根据当前选择的排序方案加载对应的排序内容    if(switchRankMode.checked){      // console.log("按更新时间排序");      var article_sortupdated = JSON.parse(localStorage.getItem("updatedList"));      loadArticleItem(article_sortupdated ,0,fdatalist.initnumber)    }else{      // console.log("按创建时间排序");      var article_sortcreated = JSON.parse(localStorage.getItem("createdList"));      loadArticleItem(article_sortcreated ,0,fdatalist.initnumber)    }  }}// 加载更多文章function loadMoreArticle(){  // 获取当前已加载的文章数  var currentArticle = document.getElementsByClassName('fArticleItem').length;  // 获取当前选择的排序方式  var switchRankMode = document.getElementById("switchRankMode");  // 从本地内存读取配置信息  var fdatalist = JSON.parse(localStorage.getItem("fdatalist"));  // 只有当两者均存在时才继续执行  if (switchRankMode && fdatalist){    if(switchRankMode.checked){      // console.log("按更新时间排序");      var article_sortupdated = JSON.parse(localStorage.getItem("updatedList"));      // 从当前文章的下一篇开始，加载下一阶程篇数      loadArticleItem(article_sortupdated,currentArticle,currentArticle + fdatalist.stepnumber)    }else{      // console.log("按创建时间排序");      var article_sortcreated = JSON.parse(localStorage.getItem("createdList"));      // 从当前文章的下一篇开始，加载下一阶程篇数      loadArticleItem(article_sortcreated,currentArticle,currentArticle + fdatalist.stepnumber)    }  }  // 向上滚动一篇文章的距离  window.scrollBy(0,180)}//切换按钮function checkRankMode(){  // 首先清空现有的文章内容  document.getElementById('fcircleContainer').innerHTML=''  // 获取当前选择的排序方式  var switchRankMode = document.getElementById("switchRankMode");  // 从本地内存读取配置信息  var fdatalist = JSON.parse(localStorage.getItem("fdatalist"));  // 只有当两者均存在时才继续执行  if (switchRankMode && fdatalist){    //按更新时间排序    if(switchRankMode.checked){      // console.log("按更新时间排序");      var article_sortupdated = JSON.parse(localStorage.getItem("updatedList"));      //加载配置项中指定的初始化篇数      loadArticleItem(article_sortupdated ,0,fdatalist.initnumber)    }else{      // console.log("按创建时间排序");      var article_sortcreated = JSON.parse(localStorage.getItem("createdList"));      //加载配置项中指定的初始化篇数      loadArticleItem(article_sortcreated ,0,fdatalist.initnumber)    }  }}//执行初始化方法initFriendCircle()]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/blog/js/fcircle.min.js"/>
      <url>/blog/js/fcircle.min.js</url>
      
        <content type="html"><![CDATA[function loadStatistical(e){var a=document.getElementById("fcircleContainer"),t=`\n  <h2>统计信息</h2>\n  <div class="fUpdatedTime">\n    <span class="fLabel">最近更新时间：</span><span class="fMessage">${e.last_updated_time}</span>\n  </div>\n  <div id="fMessageBoard">\n    <div class="fMessageItem">\n      <div class="fActiveFriend fItem">\n        <span class="fLabel">当前友链个数：</span>\n        <span class="fMessage">${e.friends_num} 个</span>\n      </div>\n      <div class="fActiveFriend fItem">\n        <span class="fLabel">活跃友链数：</span>\n        <span class="fMessage">${e.active_num} 个</span>\n      </div>\n      <div class="fErrorSite fItem">\n        <span class="fLabel">失联友链数：</span>\n        <span class="fMessage">${e.error_num} 个</span>\n      </div>\n      <div class="fArticleNum fItem">\n        <span class="fLabel">当前库存文章：</span>\n        <span class="fMessage">${e.article_num} 个</span>\n      </div>\n    </div>\n    <div id="switchRankBtn">\n      <span id="rankByCreated">按发表时间排序</span>\n      <span>\n      <input type="checkbox" id="switchRankMode" checked="true" onchange="checkRankMode()"/><label for="switchRankMode" id="switchRank">Toggle</label>\n      </span>\n      <span id="rankByUpdated">按更新时间排序</span>\n    </div>\n  </div>\n  `;a&&(a.insertAdjacentHTML("beforebegin",t),a.insertAdjacentHTML("afterend",'\n  <div id="fcircleMoreBtn" onclick="loadMoreArticle()">\n    <i class="fas fa-angle-double-down"></i>\n  </div>\n  '))}function loadArticleItem(e,a,t){var n=JSON.parse(localStorage.getItem("fdatalist")),i=document.getElementById("fcircleContainer");let s=t;e[t-1]||(s=e.length);for(var l=a;l<s;l++){var r=e[l],c=`\n      <div class="fArticleItem">\n        <div class="fArticleAvatar">\n          <a class="fArticlelink fAvatar" target="_blank" rel="noopener nofollow" href="${r.link}">\n            <img src="${r.avatar}" alt="avatar"  onerror="this.src='${n.error_img}'; this.onerror = null;">\n          </a>\n          <div class="fArticleAuthor">\n            ${r.author}\n          </div>\n        </div>\n        <div class="fArticleMessage">\n          <a class="fArticleTitle"  href="${r.link}" target="_blank" rel="noopener nofollow" data-title="${r.title}">\n            ${r.title}\n          </a>\n          <div class="fArticleTime">\n            <span class="fArticleCreated"><i class="far fa-calendar-alt">发表于</i>${r.created}</span>\n            <span class="fArticleUpdated"><i class="fas fa-history"><span style="font-weight: 500;">更新于<span/></i>${r.updated}</span>\n          </div>\n        </div>\n      </div>\n    `;i&&i.insertAdjacentHTML("beforeend",c)}}function initFriendCircle(){var e=document.getElementById("fcircleContainer"),a=JSON.parse(localStorage.getItem("statisticalList")),t=JSON.parse(localStorage.getItem("fdatalist"));e&&a&&t&&(loadStatistical(a),document.getElementById("switchRankMode").checked?loadArticleItem(JSON.parse(localStorage.getItem("updatedList")),0,t.initnumber):loadArticleItem(JSON.parse(localStorage.getItem("createdList")),0,t.initnumber))}function loadMoreArticle(){var e=document.getElementsByClassName("fArticleItem").length,a=document.getElementById("switchRankMode"),t=JSON.parse(localStorage.getItem("fdatalist"));if(a&&t){var n=JSON.parse(localStorage.getItem("updatedList")),i=JSON.parse(localStorage.getItem("createdList"));if(e===i.length||e===n.length){if(GLOBAL_CONFIG.Snackbar){var s="light"===document.documentElement.getAttribute("data-theme")?GLOBAL_CONFIG.Snackbar.bgLight:GLOBAL_CONFIG.Snackbar.bgDark,l=GLOBAL_CONFIG.Snackbar.position;Snackbar.show({text:"✨ 到底啦，没有文章了喔~",backgroundColor:s,duration:5e3,pos:l,actionText:"🍗点击催更🍔",actionTextColor:"#fff",onActionClick:function(e){location.href="https://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=2268025923@qq.com"}})}}else a.checked?loadArticleItem(n,e,e+t.stepnumber):loadArticleItem(i,e,e+t.stepnumber),window.scrollBy(0,180)}}function checkRankMode(){document.getElementById("fcircleContainer").innerHTML="";var e=document.getElementById("switchRankMode"),a=JSON.parse(localStorage.getItem("fdatalist"));e&&a&&(e.checked?loadArticleItem(JSON.parse(localStorage.getItem("updatedList")),0,a.initnumber):loadArticleItem(JSON.parse(localStorage.getItem("createdList")),0,a.initnumber))}initFriendCircle();]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/blog/js/fetch.js"/>
      <url>/blog/js/fetch.js</url>
      
        <content type="html"><![CDATA[//===========================================================// 排序算法function quickSort(arr, keyword){  // keyword传入值'time'（按发布时间排序）或'updated'（按更新时间排序）  if(arr.length == 0){return [];}  var left = [];  var right = [];  var selectItem = arr[0];  for(var i = 1; i < arr.length; i++){    if(arr[i][keyword] > selectItem[keyword]){      left.push(arr[i]);    }    else{      right.push(arr[i]);    }  }  return quickSort(left, keyword).concat(selectItem, quickSort(right, keyword));}// ======================================================// 从本地内存读取配置信息var fdatalist = JSON.parse(localStorage.getItem("fdatalist"));// 抓取友链api信息并进行分割处理。存入本地存储if (fdatalist){  fetch(fdatalist.apiurl)    .then(res => res.json())    .then(json =>{      // 获取友链朋友圈基本信息      var statistical_data = json.statistical_data;      //存入本地存储      localStorage.setItem("statisticalList",JSON.stringify(statistical_data))      // console.log(statistical_data);      // 获取友链朋友圈文章列表      var article_data = eval(json.article_data);      // console.log(article_data);      // 按创建时间排序      var article_sortcreated = quickSort(article_data,'time');      //存入本地存储      localStorage.setItem("createdList",JSON.stringify(article_sortcreated))      // 按更新时间排序      var article_sortupdated = quickSort(article_data,'updated');      //存入本地存储      localStorage.setItem("updatedList",JSON.stringify(article_sortupdated))      // console.log(article_sortcreated);      // console.log(article_sortupdated);    }  )}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/blog/js/he-simple-common.js"/>
      <url>/blog/js/he-simple-common.js</url>
      
        <content type="html"><![CDATA[(function (d) {  var c = d.createElement('link')  c.rel = 'stylesheet'  c.href = 'https://widget.qweather.net/simple/static/css/he-simple.css?v=1.4.0'  var s = d.createElement('script')  s.src = 'https://widget.qweather.net/simple/static/js/he-simple.js?v=1.4.0'  var sn = d.getElementsByTagName('script')[0]  sn.parentNode.insertBefore(c, sn)  sn.parentNode.insertBefore(s, sn)})(document)]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/blog/js/runtime.min.js"/>
      <url>/blog/js/runtime.min.js</url>
      
        <content type="html"><![CDATA[// var now=new Date;function createtime(){var t=new Date("08/29/2022 00:00:00");now.setTime(now.getTime()+250);var e=(now-t)/1e3/60/60/24,a=Math.floor(e),n=(now-t)/1e3/60/60-24*a,r=Math.floor(n);1==String(r).length&&(r="0"+r);var s=(now-t)/1e3/60-1440*a-60*r,i=Math.floor(s);1==String(i).length&&(i="0"+i);var o=(now-t)/1e3-86400*a-3600*r-60*i,l=Math.round(o);1==String(l).length&&(l="0"+l);let g="";g=r<18&&r>=9?`<img class='boardsign' src='/blog/img/logo/mycpen-上班摸鱼中.svg' title='距离月入25k也就还差一个大佬带我~'><span class='textTip'> <br> 本站居然运行了 ${a} 天</span><span id='runtime'> ${r} 小时 ${i} 分 ${l} 秒 </span> <i class='fas fa-heartbeat' style='color:red'></i>`:`<img class='boardsign' src='/blog/img/logo/mycpen-下班啦.svg' title='下班了就该开开心心的玩耍，嘿嘿~'><span class='textTip'> <br> 本站居然运行了 ${a} 天</span><span id='runtime'> ${r} 小时 ${i} 分 ${l} 秒 </span> <i class='fas fa-heartbeat' style='color:red'></i>`,document.getElementById("workboard")&&(document.getElementById("workboard").innerHTML=g)}setInterval((()=>{createtime()}),250);]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/blog/js/winbox.bundle.min.js"/>
      <url>/blog/js/winbox.bundle.min.js</url>
      
        <content type="html"><![CDATA[/** * WinBox.js v0.2.6 (Bundle) * Copyright 2022 Nextapps GmbH * Author: Thomas Wilkerling * Licence: Apache-2.0 * https://github.com/nextapps-de/winbox */(function(){'use strict';var f,ba=document.createElement("style");ba.innerHTML="@keyframes wb-fade-in{0%{opacity:0}to{opacity:.85}}.winbox{position:fixed;left:0;top:0;background:#0050ff;box-shadow:0 14px 28px rgba(0,0,0,.25),0 10px 10px rgba(0,0,0,.22);transition:width .3s,height .3s,left .3s,top .3s;transition-timing-function:cubic-bezier(.3,1,.3,1);contain:layout size;text-align:left;touch-action:none}.wb-body,.wb-header{position:absolute;left:0}.wb-header{top:0;width:100%;height:35px;line-height:35px;color:#fff;overflow:hidden;z-index:1}.wb-body{top:35px;right:0;bottom:0;overflow:auto;-webkit-overflow-scrolling:touch;overflow-scrolling:touch;will-change:contents;background:#fff;margin-top:0!important;contain:strict;z-index:0}.wb-control *,.wb-icon{background-repeat:no-repeat}body>.wb-body{position:relative;display:inline-block;visibility:hidden;contain:none}.wb-drag{height:100%;padding-left:10px;cursor:move}.wb-title{font-family:Arial,sans-serif;font-size:14px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.wb-icon{display:none;width:20px;height:100%;margin:-1px 8px 0-3px;float:left;background-size:100%;background-position:center}.wb-e,.wb-w{width:10px;top:0}.wb-n,.wb-s{left:0;height:10px;position:absolute}.wb-n{top:-5px;right:0;cursor:n-resize;z-index:2}.wb-e{position:absolute;right:-5px;bottom:0;cursor:w-resize;z-index:2}.wb-s{bottom:-5px;right:0;cursor:n-resize;z-index:2}.wb-nw,.wb-sw,.wb-w{left:-5px}.wb-w{position:absolute;bottom:0;cursor:w-resize;z-index:2}.wb-ne,.wb-nw,.wb-sw{width:15px;height:15px;z-index:2;position:absolute}.wb-nw{top:-5px;cursor:nw-resize}.wb-ne,.wb-sw{cursor:ne-resize}.wb-ne{top:-5px;right:-5px}.wb-se,.wb-sw{bottom:-5px}.wb-se{position:absolute;right:-5px;width:15px;height:15px;cursor:nw-resize;z-index:2}.wb-control{float:right;height:100%;max-width:100%;text-align:center}.wb-control *{display:inline-block;width:30px;height:100%;max-width:100%;background-position:center;cursor:pointer}.no-close .wb-close,.no-full .wb-full,.no-header .wb-header,.no-max .wb-max,.no-min .wb-min,.no-resize .wb-body~div,.wb-body .wb-hide,.wb-show,.winbox.hide,.winbox.min .wb-body>*,.winbox.min .wb-full,.winbox.min .wb-min,.winbox.modal .wb-full,.winbox.modal .wb-max,.winbox.modal .wb-min{display:none}.winbox.max .wb-drag,.winbox.min .wb-drag{cursor:default}.wb-min{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAyIj48cGF0aCBmaWxsPSIjZmZmIiBkPSJNOCAwaDdhMSAxIDAgMCAxIDAgMkgxYTEgMSAwIDAgMSAwLTJoN3oiLz48L3N2Zz4=);background-size:14px auto;background-position:center calc(50% + 6px)}.wb-max{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9IiNmZmYiIHZpZXdCb3g9IjAgMCA5NiA5NiI+PHBhdGggZD0iTTIwIDcxLjMxMUMxNS4zNCA2OS42NyAxMiA2NS4yMyAxMiA2MFYyMGMwLTYuNjMgNS4zNy0xMiAxMi0xMmg0MGM1LjIzIDAgOS42NyAzLjM0IDExLjMxMSA4SDI0Yy0yLjIxIDAtNCAxLjc5LTQgNHY1MS4zMTF6Ii8+PHBhdGggZD0iTTkyIDc2VjM2YzAtNi42My01LjM3LTEyLTEyLTEySDQwYy02LjYzIDAtMTIgNS4zNy0xMiAxMnY0MGMwIDYuNjMgNS4zNyAxMiAxMiAxMmg0MGM2LjYzIDAgMTItNS4zNyAxMi0xMnptLTUyIDRjLTIuMjEgMC00LTEuNzktNC00VjM2YzAtMi4yMSAxLjc5LTQgNC00aDQwYzIuMjEgMCA0IDEuNzkgNCA0djQwYzAgMi4yMS0xLjc5IDQtNCA0SDQweiIvPjwvc3ZnPg==);background-size:17px auto}.wb-close{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xIC0xIDE4IDE4Ij48cGF0aCBmaWxsPSIjZmZmIiBkPSJtMS42MTMuMjEuMDk0LjA4M0w4IDYuNTg1IDE0LjI5My4yOTNsLjA5NC0uMDgzYTEgMSAwIDAgMSAxLjQwMyAxLjQwM2wtLjA4My4wOTRMOS40MTUgOGw2LjI5MiA2LjI5M2ExIDEgMCAwIDEtMS4zMiAxLjQ5N2wtLjA5NC0uMDgzTDggOS40MTVsLTYuMjkzIDYuMjkyLS4wOTQuMDgzQTEgMSAwIDAgMSAuMjEgMTQuMzg3bC4wODMtLjA5NEw2LjU4NSA4IC4yOTMgMS43MDdBMSAxIDAgMCAxIDEuNjEzLjIxeiIvPjwvc3ZnPg==);background-size:15px auto;background-position:5px center}.wb-full{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2Utd2lkdGg9IjIuNSIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNOCAzSDVhMiAyIDAgMCAwLTIgMnYzbTE4IDBWNWEyIDIgMCAwIDAtMi0yaC0zbTAgMThoM2EyIDIgMCAwIDAgMi0ydi0zTTMgMTZ2M2EyIDIgMCAwIDAgMiAyaDMiLz48L3N2Zz4=);background-size:16px auto}.winbox.max .wb-body~div,.winbox.min .wb-body~div,.winbox.modal .wb-body~div,.winbox.modal .wb-drag,body.wb-lock iframe{pointer-events:none}.winbox.max{box-shadow:none}.winbox.max .wb-body{margin:0!important}.winbox iframe{position:absolute;width:100%;height:100%;border:0}body.wb-lock .winbox{will-change:left,top,width,height;transition:none}.winbox.modal:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:inherit;border-radius:inherit}.winbox.modal:after{content:'';position:absolute;top:-50vh;left:-50vw;right:-50vw;bottom:-50vh;background:#0d1117;animation:wb-fade-in .2s ease-out forwards;z-index:-1}.no-animation{transition:none}.no-shadow{box-shadow:none}.no-header .wb-body{top:0}.no-move:not(.min) .wb-title{pointer-events:none}.wb-body .wb-show{display:revert}";var k=document.getElementsByTagName("head")[0];k.firstChild?k.insertBefore(ba,k.firstChild):k.appendChild(ba);var ca=document.createElement("div");ca.innerHTML="<div class=wb-header><div class=wb-control><span class=wb-min></span><span class=wb-max></span><span class=wb-full></span><span class=wb-close></span></div><div class=wb-drag><div class=wb-icon></div><div class=wb-title></div></div></div><div class=wb-body></div><div class=wb-n></div><div class=wb-s></div><div class=wb-w></div><div class=wb-e></div><div class=wb-nw></div><div class=wb-ne></div><div class=wb-se></div><div class=wb-sw></div>";function m(a,b,c,e){a&&a.addEventListener(b,c,e||!1)}function p(a,b,c){var e=window;e&&e.removeEventListener(a,b,c||!1)}function r(a){a.stopPropagation();a.cancelable&&a.preventDefault()}function w(a,b,c){c=""+c;a["_s_"+b]!==c&&(a.style.setProperty(b,c),a["_s_"+b]=c)};var x=[],y={capture:!0,passive:!0},z,da=0,A=10,J,K,L,fa,P,Q;function V(a,b){if(!(this instanceof V))return new V(a);z||ha();var c;if(a){if(b){var e=a;a=b}if("string"===typeof a)e=a;else{var d=a.id;var g=a.index;var l=a.root;var F=a.template;e=e||a.title;var t=a.icon;var R=a.mount;var h=a.html;var B=a.url;var n=a.width;var q=a.height;var C=a.minwidth;var D=a.minheight;var u=a.maxwidth;var v=a.maxheight;var E=a.autosize;var G=a.min;var H=a.max;var I=a.hidden;var ea=a.modal;var Y=a.x||(ea?"center":0);var Z=a.y||(ea?"center":0);var M=a.top;var N=a.left;var S=a.bottom;var T=a.right;var ja=a.background;var O=a.border;var U=a.header;var aa=a["class"];var na=a.onclose;var oa=a.onfocus;var pa=a.onblur;var qa=a.onmove;var ra=a.onresize;var sa=a.onfullscreen;var ta=a.onmaximize;var ua=a.onminimize;var va=a.onrestore;var wa=a.onhide;var xa=a.onshow;var ya=a.onload}}this.g=(F||ca).cloneNode(!0);this.g.id=this.id=d||"winbox-"+ ++da;this.g.className="winbox"+(aa?" "+("string"===typeof aa?aa:aa.join(" ")):"")+(ea?" modal":"");this.g.winbox=this;this.window=this.g;this.body=this.g.getElementsByClassName("wb-body")[0];this.h=U||35;ja&&this.setBackground(ja);O?w(this.body,"margin",O+(isNaN(O)?"":"px")):O=0;U&&(b=this.g.getElementsByClassName("wb-header")[0],w(b,"height",U+"px"),w(b,"line-height",U+"px"),w(this.body,"top",U+"px"));e&&this.setTitle(e);t&&this.setIcon(t);R?this.mount(R):h?this.body.innerHTML=h:B&&this.setUrl(B,ya);M=M?W(M,Q):0;S=S?W(S,Q):0;N=N?W(N,P):0;T=T?W(T,P):0;e=P-N-T;t=Q-M-S;u=u?W(u,e):e;v=v?W(v,t):t;C=C?W(C,u):150;D=D?W(D,v):this.h;E?((l||z).appendChild(this.body),n=Math.max(Math.min(this.body.clientWidth+2*O+1,u),C),q=Math.max(Math.min(this.body.clientHeight+this.h+O+1,v),D),this.g.appendChild(this.body)):(n=n?W(n,u):Math.max(u/2,C)|0,q=q?W(q,v):Math.max(v/2,D)|0);Y=Y?W(Y,e,n):N;Z=Z?W(Z,t,q):M;this.x=Y;this.y=Z;this.width=n;this.height=q;this.o=C;this.m=D;this.l=u;this.j=v;this.top=M;this.right=T;this.bottom=S;this.left=N;this.index=g;this.focused=this.hidden=this.full=this.max=this.min=!1;this.onclose=na;this.onfocus=oa;this.onblur=pa;this.onmove=qa;this.onresize=ra;this.onfullscreen=sa;this.onmaximize=ta;this.onminimize=ua;this.onrestore=va;this.onhide=wa;this.onshow=xa;H?this.maximize():G?this.minimize():this.resize().move();if(I)this.hide();else if(this.focus(),g||0===g)this.index=g,w(this.g,"z-index",g),g>A&&(A=g);ia(this);(l||z).appendChild(this.g);(c=a.oncreate)&&c.call(this,a)}V["new"]=function(a){return new V(a)};function W(a,b,c){"string"===typeof a&&("center"===a?a=(b-c)/2|0:"right"===a||"bottom"===a?a=b-c:(c=parseFloat(a),a="%"===(""+c!==a&&a.substring((""+c).length))?b/100*c|0:c));return a}function ha(){z=document.body;z[L="requestFullscreen"]||z[L="msRequestFullscreen"]||z[L="webkitRequestFullscreen"]||z[L="mozRequestFullscreen"]||(L="");fa=L&&L.replace("request","exit").replace("mozRequest","mozCancel").replace("Request","Exit");m(window,"resize",function(){ka();la()});ka()}function ia(a){X(a,"drag");X(a,"n");X(a,"s");X(a,"w");X(a,"e");X(a,"nw");X(a,"ne");X(a,"se");X(a,"sw");m(a.g.getElementsByClassName("wb-min")[0],"click",function(b){r(b);a.min?a.focus().restore():a.blur().minimize()});m(a.g.getElementsByClassName("wb-max")[0],"click",function(){a.max?a.restore():a.maximize()});L?m(a.g.getElementsByClassName("wb-full")[0],"click",function(){a.fullscreen()}):a.addClass("no-full");m(a.g.getElementsByClassName("wb-close")[0],"click",function(b){r(b);a.close()||(a=null)});m(a.g,"click",function(){a.focus()})}function ma(a){x.splice(x.indexOf(a),1);la();a.removeClass("min");a.min=!1;a.g.title=""}function la(){for(var a=x.length,b={},c={},e=0,d;e<a;e++)d=x[e],d=(d.left||d.right)+":"+(d.top||d.bottom),c[d]?c[d]++:(b[d]=0,c[d]=1);e=0;for(var g,l;e<a;e++)d=x[e],g=(d.left||d.right)+":"+(d.top||d.bottom),l=Math.min((P-d.left-d.right)/c[g],250),d.resize(l+1|0,d.h,!0).move(d.left+b[g]*l|0,Q-d.bottom-d.h,!0),b[g]++}function X(a,b){function c(h){r(h);a.focus();if("drag"===b){if(a.min){a.restore();return}var B=Date.now(),n=B-R;R=B;if(300>n){a.max?a.restore():a.maximize();return}}a.max||a.min||(z.classList.add("wb-lock"),(l=h.touches)&&(l=l[0])?(h=l,m(window,"touchmove",e,y),m(window,"touchend",d,y)):(m(window,"mousemove",e),m(window,"mouseup",d)),F=h.pageX,t=h.pageY)}function e(h){r(h);l&&(h=h.touches[0]);var B=h.pageX;h=h.pageY;var n=B-F,q=h-t,C=a.width,D=a.height,u=a.x,v=a.y,E;if("drag"===b){a.x+=n;a.y+=q;var G=E=1}else{if("e"===b||"se"===b||"ne"===b){a.width+=n;var H=1}else if("w"===b||"sw"===b||"nw"===b)a.x+=n,a.width-=n,G=H=1;if("s"===b||"se"===b||"sw"===b){a.height+=q;var I=1}else if("n"===b||"ne"===b||"nw"===b)a.y+=q,a.height-=q,E=I=1}H&&(a.width=Math.max(Math.min(a.width,a.l,P-a.x-a.right),a.o),H=a.width!==C);I&&(a.height=Math.max(Math.min(a.height,a.j,Q-a.y-a.bottom),a.m),I=a.height!==D);(H||I)&&a.resize();G&&(a.x=Math.max(Math.min(a.x,P-a.width-a.right),a.left),G=a.x!==u);E&&(a.y=Math.max(Math.min(a.y,Q-a.height-a.bottom),a.top),E=a.y!==v);(G||E)&&a.move();if(H||G)F=B;if(I||E)t=h}function d(h){r(h);z.classList.remove("wb-lock");l?(p("touchmove",e,y),p("touchend",d,y)):(p("mousemove",e),p("mouseup",d))}var g=a.g.getElementsByClassName("wb-"+b)[0];if(g){var l,F,t,R=0;m(g,"mousedown",c);m(g,"touchstart",c,y)}}function ka(){var a=document.documentElement;P=a.clientWidth;Q=a.clientHeight}f=V.prototype;f.mount=function(a){this.unmount();a.i||(a.i=a.parentNode);this.body.textContent="";this.body.appendChild(a);return this};f.unmount=function(a){var b=this.body.firstChild;if(b){var c=a||b.i;c&&c.appendChild(b);b.i=a}return this};f.setTitle=function(a){var b=this.g.getElementsByClassName("wb-title")[0];a=this.title=a;var c=b.firstChild;c?c.nodeValue=a:b.textContent=a;return this};f.setIcon=function(a){var b=this.g.getElementsByClassName("wb-icon")[0];w(b,"background-image","url("+a+")");w(b,"display","inline-block");return this};f.setBackground=function(a){w(this.g,"background",a);return this};f.setUrl=function(a,b){var c=this.body.firstChild;c&&"iframe"===c.tagName.toLowerCase()?c.src=a:(this.body.innerHTML='<iframe src="'+a+'"></iframe>',b&&(this.body.firstChild.onload=b));return this};f.focus=function(a){if(!1===a)return this.blur();K!==this&&this.g&&(K&&K.blur(),w(this.g,"z-index",++A),this.index=A,this.addClass("focus"),K=this,this.focused=!0,this.onfocus&&this.onfocus());return this};f.blur=function(a){if(!1===a)return this.focus();K===this&&(this.removeClass("focus"),this.focused=!1,this.onblur&&this.onblur(),K=null);return this};f.hide=function(a){if(!1===a)return this.show();if(!this.hidden)return this.onhide&&this.onhide(),this.hidden=!0,this.addClass("hide")};f.show=function(a){if(!1===a)return this.hide();if(this.hidden)return this.onshow&&this.onshow(),this.hidden=!1,this.removeClass("hide")};f.minimize=function(a){if(!1===a)return this.restore();J&&za();this.max&&(this.removeClass("max"),this.max=!1);this.min||(x.push(this),la(),this.g.title=this.title,this.addClass("min"),this.min=!0,this.onminimize&&this.onminimize());return this};f.restore=function(){J&&za();this.min&&(ma(this),this.resize().move(),this.onrestore&&this.onrestore());this.max&&(this.max=!1,this.removeClass("max").resize().move(),this.onrestore&&this.onrestore());return this};f.maximize=function(a){if(!1===a)return this.restore();J&&za();this.min&&ma(this);this.max||(this.addClass("max").resize(P-this.left-this.right,Q-this.top-this.bottom,!0).move(this.left,this.top,!0),this.max=!0,this.onmaximize&&this.onmaximize());return this};f.fullscreen=function(a){this.min&&(ma(this),this.resize().move());if(!J||!za())this.body[L](),J=this,this.full=!0,this.onfullscreen&&this.onfullscreen();else if(!1===a)return this.restore();return this};function za(){J.full=!1;if(document.fullscreen||document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement)return document[fa](),!0}f.close=function(a){if(this.onclose&&this.onclose(a))return!0;this.min&&ma(this);this.unmount();this.g.remove();this.g.textContent="";this.g=this.body=this.g.winbox=null;K===this&&(K=null)};f.move=function(a,b,c){a||0===a?c||(this.x=a?a=W(a,P-this.left-this.right,this.width):0,this.y=b?b=W(b,Q-this.top-this.bottom,this.height):0):(a=this.x,b=this.y);w(this.g,"left",a+"px");w(this.g,"top",b+"px");this.onmove&&this.onmove(a,b);return this};f.resize=function(a,b,c){a||0===a?c||(this.width=a?a=W(a,this.l):0,this.height=b?b=W(b,this.j):0,a=Math.max(a,this.o),b=Math.max(b,this.m)):(a=this.width,b=this.height);w(this.g,"width",a+"px");w(this.g,"height",b+"px");this.onresize&&this.onresize(a,b);return this};f.addControl=function(a){var b=a["class"],c=a.image,e=a.click;a=a.index;var d=document.createElement("span"),g=this.g.getElementsByClassName("wb-control")[0],l=this;b&&(d.className=b);c&&w(d,"background-image","url("+c+")");e&&(d.onclick=function(F){e.call(this,F,l)});g.insertBefore(d,g.childNodes[a||0]);return this};f.removeControl=function(a){(a=this.g.getElementsByClassName(a)[0])&&a.remove();return this};f.addClass=function(a){this.g.classList.add(a);return this};f.removeClass=function(a){this.g.classList.remove(a);return this};f.toggleClass=function(a){return this.g.classList.contains(a)?this.removeClass(a):this.addClass(a)};window.WinBox=V;}).call(this);]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/blog/js/script.js"/>
      <url>/blog/js/script.js</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/blog/js/visit_calendar.js"/>
      <url>/blog/js/visit_calendar.js</url>
      
        <content type="html"><![CDATA[var visit_calendar = (site_id, access_token, metrics, visit_color) => {    var date = new Date();    var end_date = '' + date.getFullYear() + (date.getMonth() > 8 ? (date.getMonth() + 1) : ("0" + (date.getMonth() + 1))) + (date.getDate() > 9 ? date.getDate() : ("0" + date.getDate()));    date.setFullYear(date.getFullYear() - 1);    date.setTime(date.getTime() - 24 * 3600 * 1000 * date.getDay());    var start_date = '' + date.getFullYear() + (date.getMonth() > 8 ? (date.getMonth() + 1) : ("0" + (date.getMonth() + 1))) + (date.getDate() > 9 ? date.getDate() : ("0" + date.getDate()));    var metrics_name = (metrics === 'pv_count' ? '次' : (metrics === 'visitor_count' ? '人' : ''));    var visit_apiurl = 'https://bd-tongji.cpen.top/api?site_id=' + site_id + '&access_token=' + access_token + '&method=overview/getTimeTrendRpt' + '&metrics=' + metrics + '&start_date=' + start_date + '&end_date=' + end_date;    var visit_fixed = 'fixed';    var visit_px = 'px';    var visit_month = ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月'];    var visit_monthchange = [];    var visit_oneyearbeforeday = '';    var visit_thisday = '';    var visit_amonthago = '';    var visit_aweekago = '';    var visit_weekdatacore = 0;    var visit_datacore = 0;    var visit_total = 0;    var visit_datadate = '';    var visit_visit_data = [];    var visit_positionplusdata = [];    var visit_firstweek = [];    var visit_lastweek = [];    var visit_beforeweek = [];    var visit_thisweekdatacore = 0;    var visit_mounthbeforeday = 0;    var visit_mounthfirstindex = 0;    var visit_crispedges = 'crispedges';    var visit_thisdayindex = 0;    var visit_amonthagoindex = 0;    var visit_amonthagoweek = [];    var visit_firstdate = [];    var visit_first2date = [];    var visit_montharrbefore = [];    var visit_monthindex = 0;    var retinaCanvas = (canvas, context, ratio) => {      if (ratio > 1) {        var canvasWidth = canvas.width;        var canvasHeight = canvas.height;        canvas.width = canvasWidth * ratio;        canvas.height = canvasHeight * ratio;        canvas.style.width = '100%';        canvas.style.height = canvasHeight + 'px';        context.scale(ratio, ratio);      }    };      function responsiveChart () {      var ratio = window.devicePixelRatio || 1      var visit_tooltip_container = document.getElementById('visit_tooltip_container');      var visit_x = '';      var visit_y = '';      var visit_span1 = '';      var visit_span2 = '';      if (document.getElementById("visitcanvas")) {        var c = document.getElementById("visitcanvas");        c.style.width = '100%';        c.style.height = '';        var cmessage = document.getElementById("visitmessage");        var ctx = c.getContext("2d");        width = c.width = document.getElementById("visitcalendarcanvasbox").offsetWidth;        height = c.height = 9 * 0.96 * c.width / visit_data.length;        retinaCanvas(c, ctx, ratio)        var linemaxwitdh = height / 9;        var lineminwitdh = 0.8 * linemaxwitdh;        var setposition = { x: 0.02 * width, y: 0.025 * width };        for (var week in visit_data) {          weekdata = visit_data[week];          for (var day in weekdata) {            var dataitem = { date: "", count: "", x: 0, y: 0 };            visit_positionplusdata.push(dataitem);            ctx.fillStyle = visit_thiscolor(visit_color, weekdata[day].count);            setposition.y = Math.round(setposition.y * 100) / 100;            dataitem.date = weekdata[day].date;            dataitem.count = weekdata[day].count;            dataitem.x = setposition.x;            dataitem.y = setposition.y;            ctx.fillRect(setposition.x, setposition.y, lineminwitdh, lineminwitdh);            setposition.y = setposition.y + linemaxwitdh          }          setposition.y = 0.025 * width;          setposition.x = setposition.x + linemaxwitdh        }          if (document.body.clientWidth > 700) {          ctx.font = "600  Arial";          ctx.fillStyle = '#aaa';          ctx.fillText("日", 0, 1.9 * linemaxwitdh);          ctx.fillText("二", 0, 3.9 * linemaxwitdh);          ctx.fillText("四", 0, 5.9 * linemaxwitdh);          ctx.fillText("六", 0, 7.9 * linemaxwitdh);          var monthindexlist = width / 24;          for (var index in visit_monthchange) {            ctx.fillText(visit_monthchange[index], monthindexlist, 0.7 * linemaxwitdh);            monthindexlist = monthindexlist + width / 12          }        }          c.onmousemove = function (event) {          if (document.querySelector('.visitmessage')) {            visit_tooltip_container.innerHTML = ""          }          getMousePos(c, event)        };        visit_tooltip_container.onmousemove = function (event) {          if (document.querySelector('.visitmessage')) {            visit_tooltip_container.innerHTML = ""          }        };          function getMousePos (canvas, event) {          var rect = canvas.getBoundingClientRect();          var x = event.clientX - rect.left * (canvas.width / rect.width);          var y = event.clientY - rect.top * (canvas.height / rect.height);          for (var item of visit_positionplusdata) {            var lenthx = x - item.x;            var lenthy = y - item.y;            if (0 < lenthx && lenthx < lineminwitdh) {              if (0 < lenthy && lenthy < lineminwitdh) {                visit_span1 = item.date;                visit_span2 = item.count;                visit_x = event.clientX - 100;                visit_y = event.clientY - 60;                html = tooltip_html(visit_x, visit_y, visit_span1, visit_span2);                append_div_visitcalendar(visit_tooltip_container, html)              }            }          }        }      }    }      function addlastmonth () {      if (visit_thisdayindex === 0) {        thisweekcore(52);        thisweekcore(51);        thisweekcore(50);        thisweekcore(49);        thisweekcore(48);        visit_thisweekdatacore += visit_firstdate[6].count;        visit_amonthago = visit_firstdate[6].date      } else {        thisweekcore(52);        thisweekcore(51);        thisweekcore(50);        thisweekcore(49);        thisweek2core();        visit_amonthago = visit_first2date[visit_thisdayindex - 1].date      }    }      function thisweek2core () {      for (var i = visit_thisdayindex - 1; i < visit_first2date.length; i++) {        visit_thisweekdatacore += visit_first2date[i].count      }    }      function thisweekcore (index) {      for (var item of visit_data[index]) {        visit_thisweekdatacore += item.count      }    }      function addlastweek () {      for (var item of visit_lastweek) {        visit_weekdatacore += item.count      }    }      function addbeforeweek () {      for (var i = visit_thisdayindex; i < visit_beforeweek.length; i++) {        visit_weekdatacore += visit_beforeweek[i].count      }    }      function addweek (data) {      if (visit_thisdayindex === 6) {        visit_aweekago = visit_lastweek[0].date;        addlastweek()      } else {        lastweek = data.contributions[51];        visit_aweekago = lastweek[visit_thisdayindex + 1].date;        addlastweek();        addbeforeweek()      }    }      function spArr (arr, num) {      let newArr = []      for (let i = 0; i < arr.length;) {        newArr.push(arr.slice(i, i += num));      }      return newArr    }      fetch(visit_apiurl).then(data => data.json()).then(res => {      var date_arr = res.result.items[0];      var value_arr = res.result.items[1];      var total = 0;      var contributions = [];      for (let i = 0; i < date_arr.length; i++) {        if (value_arr[i][0] !== '--') {          contributions.push({ date: date_arr[i][0].replace(/\//g, '-'), count: value_arr[i][0] });          total += value_arr[i][0];        } else {          contributions.push({ date: date_arr[i][0].replace(/\//g, '-'), count: 0 });        }      }      var data = {        total: total,        contributions: spArr(contributions, 7)      };        visit_data = data.contributions;      visit_total = data.total;      visit_first2date = visit_data[48];      visit_firstdate = visit_data[47];      visit_firstweek = data.contributions[0];      visit_lastweek = data.contributions[52];      visit_beforeweek = data.contributions[51];      visit_thisdayindex = visit_lastweek.length - 1;      visit_thisday = visit_lastweek[visit_thisdayindex].date;      visit_oneyearbeforeday = visit_firstweek[0].date;      visit_monthindex = visit_thisday.substring(5, 7) * 1;      visit_montharrbefore = visit_month.splice(visit_monthindex, 12 - visit_monthindex);      visit_monthchange = visit_montharrbefore.concat(visit_month);      addweek(data);      addlastmonth();        var html = visit_main_box(visit_monthchange, visit_data, visit_color, visit_total, visit_thisweekdatacore, visit_weekdatacore, visit_oneyearbeforeday, visit_thisday, visit_aweekago, visit_amonthago);      append_div_visitcalendar(document.getElementById('visit_container'), html);      if (document.getElementById('visit_loading')) {        document.getElementById('visit_loading').remove()      };      responsiveChart()    }).catch(function (error) {      console.log(error)    });    window.onresize = function () {      responsiveChart()    };    window.onscroll = function () {      if (document.querySelector('.visitmessage')) {        visit_tooltip_container.innerHTML = ""      }    };    var visit_thiscolor = (color, x) => {      if (metrics === 'pv_count') {        if (x === 0) {          var i = parseInt(x / 20);          return color[0]        } else if (x < 20) {          return color[1]        } else if (x < 200) {          var i = parseInt(x / 20);          return color[i]        } else {          return color[9]        }      } else {        if (x === 0) {          var i = parseInt(x / 2);          return color[0]        } else if (x < 2) {          return color[1]        } else if (x < 20) {          var i = parseInt(x / 2);          return color[i]        } else {          return color[9]        }      }    };    var tooltip_html = (x, y, span1, span2) => {      var html = '';      html += '<div class="visitmessage" style="top:' + y + 'px;left:' + x + 'px;position: fixed;z-index:9999"><div class="angle-wrapper" style="display:block;"><span>' + span1 + '&nbsp;</span><span>' + span2 + ' ' + metrics_name + '访问</span></div></div>';      return html    };    var visit_canvas_box = () => {      var html = '<div id="visitcalendarcanvasbox"> <canvas id="visitcanvas" style="animation: none;"></canvas></div>';      return html    };    var visit_info_box = (color) => {      var html = '';      html += '<div id="visit_tooltip_container"></div><div class="contrib-footer clearfix mt-1 mx-3 px-3 pb-1"><div class="float-left text-gray">数据来源 <a href="https://tongji.baidu.com/" target="blank">百度统计</a></div><div class="contrib-legend text-gray">Less <ul class="legend"><li style="background-color:' + color[0] + '"></li><li style="background-color:' + color[2] + '"></li><li style="background-color:' + color[4] + '"></li><li style="background-color:' + color[6] + '"></li><li style="background-color:' + color[8] + '"></li></ul>More </div></div>';      return html    };    var visit_main_box = (monthchange, visit_data, color, total, thisweekdatacore, weekdatacore, oneyearbeforeday, thisday, aweekago, amonthago) => {      var html = '';      var canvasbox = visit_canvas_box();      var infobox = visit_info_box(color);      var style = visit_main_style();      html += '<div class="position-relative"><div><span class="visit_title">博客访问日历</span></div><div class="border py-2 graph-before-activity-overview"><div class="js-visitcalendar-graph mx-md-2 mx-3 d-flex flex-column flex-items-end flex-xl-items-center overflow-hidden pt-1 is-graph-loading graph-canvas visitcalendar-graph height-full text-center">' + canvasbox + '</div>' + infobox + '</div></div>';      html += '<div style="display:flex;width:100%"><div class="contrib-column contrib-column-first table-column"><span class="text-muted">过去一年访问</span><span class="contrib-number">' + total + '</span><span class="text-muted">' + oneyearbeforeday + '&nbsp;-&nbsp;' + thisday + '</span></div><div class="contrib-column table-column"><span class="text-muted">最近一月访问</span><span class="contrib-number">' + thisweekdatacore + '</span><span class="text-muted">' + amonthago + '&nbsp;-&nbsp;' + thisday + '</span></div><div class="contrib-column table-column"><span class="text-muted">最近一周访问</span><span class="contrib-number">' + weekdatacore + '</span><span class="text-muted">' + aweekago + '&nbsp;-&nbsp;' + thisday + '</span></div></div>' + style;      return html    };    var visit_main_style = () => {      style = '<style>#visit_container{text-align:center;margin:0 auto;width:100%;padding:10px;display:flex;display:-webkit-flex;justify-content:center;align-items:center;flex-wrap:wrap;}.visit_title{font-size:1rem;font-weight:550;}.visitcalendar-graph text.wday,.visitcalendar-graph text.month{font-size:10px;fill:#aaa;}.contrib-legend{text-align:right;padding:0 14px 10px 0;display:inline-block;float:right;}.contrib-legend .legend{display:inline-block;list-style:none;margin:0 5px;position:relative;bottom:-7px;padding:0;}.contrib-legend .legend li{display:inline-block;width:10px;height:10px;}.text-small{font-size:12px;color:#767676;}.visitcalendar-graph{padding:15px 0 0;text-align:center;}.contrib-column{text-align:center;border-left:1px solid #ddd;border-top:1px solid #ddd;}.contrib-column-first{border-left:0;}.table-column{padding:10px;display:table-cell;flex:1;vertical-align:top;}.contrib-number{font-weight:400;line-height:1.3em;font-size:24px;display:block;}.visitcalendar img.spinner{width:70px;margin-top:50px;min-height:70px;}.monospace{text-align:center;color:#000;font-family:monospace;}.monospace a{color:#1D75AB;text-decoration:none;}.contrib-footer{font-size:11px;padding:0 10px 12px;text-align:left;width:100%;box-sizing:border-box;height:26px;}.left.text-muted{float:left;margin-left:9px;color:#767676;}.left.text-muted a{color:#4078c0;text-decoration:none;}.left.text-muted a:hover,.monospace a:hover{text-decoration:underline;}h2.f4.text-normal.mb-3{display:none;}.float-left.text-gray{float:left;}#user-activity-overview{display:none;}.day-tooltip{white-space:nowrap;position:absolute;z-index:99999;padding:10px;font-size:12px;color:#959da5;text-align:center;background:rgba(0,0,0,.85);border-radius:3px;display:none;pointer-events:none;}.day-tooltip strong{color:#dfe2e5;}.day-tooltip.is-visible{display:block;}.day-tooltip:after{position:absolute;bottom:-10px;left:50%;width:5px;height:5px;box-sizing:border-box;margin:0 0 0 -5px;content:" ";border:5px solid transparent;border-top-color:rgba(0,0,0,.85)}.position-relative{width:100%;}@media screen and (max-width:650px){.contrib-column{display:none}}.angle-wrapper{z-index:9999;display:inline;width:200px;height:40px;position:relative;padding:5px 0;background:rgba(0,0,0,0.8);border-radius:8px;text-align:center;color:white;}.angle-box{position:fixed;padding:10px}.angle-wrapper span{padding-bottom:1em;}.angle-wrapper:before{content:"";width:0;height:0;border:10px solid transparent;border-top-color:rgba(0,0,0,0.8);position:absolute;left:47.5%;top:100%;}</style>';      return style    }  };  var append_div_visitcalendar = (parent, text) => {    if (parent !== null) {      if (typeof text === 'string') {        var temp = document.createElement('div');        temp.innerHTML = text;        var frag = document.createDocumentFragment();        while (temp.firstChild) {          frag.appendChild(temp.firstChild)        }        parent.appendChild(frag)      } else {        parent.appendChild(text)      }    }  };  var loading_visit = (color) => {    loading = '<div id="visit_loading" style="width:10%;height:100%;margin:0 auto;display: block"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="' + color + '" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animateTransform></path></svg></div>';    return loading  };    (function init () {    var visit_container = document.getElementById('visit_container');    var visit_loading = document.getElementById('visit_loading');    var visit_purple = ['#d7dbe2', '#fdcdec', '#fc9bd9', '#fa6ac5', '#f838b2', '#f5089f', '#c4067e', '#92055e', '#540336', '#48022f', '#30021f'];    var visit_yellow = ['#d7dbe2', '#f9f4dc', '#f7e8aa', '#f7e8aa', '#f8df72', '#fcd217', '#fcc515', '#f28e16', '#fb8b05', '#d85916', '#f43e06'];    var visit_green = ['#d7dbe2', '#f0fff4', '#dcffe4', '#bef5cb', '#85e89d', '#34d058', '#28a745', '#22863a', '#176f2c', '#165c26', '#144620'];    var visit_blue = ['#d7dbe2', '#f1f8ff', '#dbedff', '#c8e1ff', '#79b8ff', '#2188ff', '#0366d6', '#005cc5', '#044289', '#032f62', '#05264c'];    var visit_color = visit_purple;    append_div_visitcalendar(visit_container, loading_visit(visit_color[4]));    // 统计访问次数 PV 填写 'pv_count'，统计访客数 UV 填写 'visitor_count'，二选一    visit_calendar('18367057', '', 'pv_count', visit_color)  })()]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>歌单</title>
      <link href="/blog/music/index.html"/>
      <url>/blog/music/index.html</url>
      
        <content type="html"><![CDATA[<p style="font-size:28px"><b>歌单收藏 ✨</b></p><p style="font-size:18px"><b>🙋 免责声明</b></p><ul>    <li>音频来源于 <a href="https://y.qq.com/">QQ音乐</a>、<a href="https://music.163.com/">网易云音乐</a>，仅供学习和研究使用，版权归作者所有，如果无意之中侵犯了您的版权，请来信告知。本站不参与商业性网站、下载站、视频站等。</li>    <li>遵守相关法律法规，由于本站资源部分来源于网络，开发也是使用开源模板，故无法核实资源侵权的真实性，无论出于何种目的要求本站删除内容，“您”均需要提供相关证明，否则不予处理。</li></ul><!-- https://github.com/MoePlayer/hexo-tag-aplayer --><!-- 211111 211145  2430747850    8623243178  1708664797 --><h1 id="《斗破苍穹》原声集">《斗破苍穹》原声集</h1><p style="font-size:15px"><b>2022-09-15</b><a href="https://y.qq.com/n/ryqq/playlist/7513071510">    《斗破苍穹》原声集</a></p>    <div id="aplayer-AyYPuqtp" class="aplayer aplayer-tag-marker meting-tag-marker"         data-id="7513071510" data-server="tencent" data-type="playlist" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="340px" data-preload="none" data-theme="#ad7a86"    ></div><h1 id="邓紫棋">邓紫棋</h1><p style="font-size:15px"><b>2022-09-14</b><a href="https://music.163.com/#/artist?id=7763">    邓紫棋</a></p>    <div id="aplayer-JZrJZEiP" class="aplayer aplayer-tag-marker meting-tag-marker"         data-id="7763" data-server="netease" data-type="artist" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="340px" data-preload="none" data-theme="#ad7a86"    ></div><h1 id="云村收藏">云村收藏</h1><p style="font-size:15px"><b>2022-09-14</b><a>    云村收藏</a></p>    <div id="aplayer-XpYmALVf" class="aplayer aplayer-tag-marker meting-tag-marker"         data-id="7636852825" data-server="netease" data-type="playlist" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="340px" data-preload="none" data-theme="#ad7a86"    ></div><h1 id="Q音收藏">Q音收藏</h1><p style="font-size:15px"><b>2022-09-14</b><a>    Q音收藏</a></p>    <div id="aplayer-oICAFWSI" class="aplayer aplayer-tag-marker meting-tag-marker"         data-id="2430747850" data-server="tencent" data-type="playlist" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="340px" data-preload="none" data-theme="#ad7a86"    ></div><h1 id="百万收藏-Q音官方">百万收藏(Q音官方)</h1><p style="font-size:15px"><b>2022-09-14</b><a>    百万收藏(Q音官方)</a></p>    <div id="aplayer-aKCsZnKC" class="aplayer aplayer-tag-marker meting-tag-marker"         data-id="8623243178" data-server="tencent" data-type="playlist" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="340px" data-preload="none" data-theme="#ad7a86"    ></div><!-- # 安知鱼`Blog收藏<p style="font-size:15px"><b>2022-09-13</b><a href="https://anzhiy.cn/music/">    安知鱼`Blog</a></p>    <div id="aplayer-SfVEClmX" class="aplayer aplayer-tag-marker meting-tag-marker"         data-id="1708664797" data-server="tencent" data-type="playlist" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="340px" data-preload="none" data-theme="#ad7a86"    ></div> -->]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>随便说说</title>
      <link href="/blog/shuoshuo/index.html"/>
      <url>/blog/shuoshuo/index.html</url>
      
        <content type="html"><![CDATA[<div class="tip success"><p>这里都是我的牢骚 🍉</p></div><!-- 引用 artitalk --><script type="text/javascript" src="https://unpkg.com/artitalk"></script><!-- 存放说说的容器 --><div id="artitalk_main"></div><script>new Artitalk({    serverURL: 'https://artitalk.cpen.top',    appId: 'xq9WWLj240CudNDG1pxmHepA-gzGzoHsz', // Your LeanCloud appId    appKey: 'IMUHid08Bv4OWOIwT8ueGjrq', // Your LeanCloud appKey    pageSize: 15,    shuoPla: '说点啥呢……',    color1: 'rgba(16,152,173,.1)',    color2: 'rgba(16,152,173,.1)',    color3: 'rgb(0,0,0)'})</script>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/blog/css/coin/coin.css"/>
      <url>/blog/css/coin/coin.css</url>
      
        <content type="html"><![CDATA[.tip-button {  border: 0;  border-radius: 0.25rem;  cursor: pointer;  font-size: 20px;  font-weight: 600;  height: 2.6rem;  margin-bottom: -4rem;  outline: 0;  position: relative;  top: 0;  transform-origin: 0% 100%;  transition: transform 50ms ease-in-out;  width: auto;  -webkit-tap-highlight-color: transparent;}.tip-button:active {  transform: rotate(4deg);}.tip-button.clicked {  animation: 150ms ease-in-out 1 shake;  pointer-events: none;}.tip-button.clicked .tip-button__text {  opacity: 0;  transition: opacity 100ms linear 200ms;}.tip-button.clicked::before {  height: 0.5rem;  width: 60%;  background: $button-hover-color;}.tip-button.clicked .coin {  transition: margin-bottom 1s linear 200ms;  margin-bottom: 0;}.tip-button.shrink-landing::before {  transition: width 200ms ease-in;  width: 0;}.tip-button.coin-landed::after {  opacity: 1;  transform: scale(1);  transform-origin: 50% 100%;}.tip-button.coin-landed .coin-wrapper {  background: radial-gradient(circle at 35% 97%, rgba(3, 16, 50, 0.4) 0.04rem, transparent 0.04rem), radial-gradient(      circle at 45% 92%,      rgba(3, 16, 50, 0.4) 0.04rem,      transparent 0.02rem    ), radial-gradient(circle at 55% 98%, rgba(3, 16, 50, 0.4) 0.04rem, transparent 0.04rem), radial-gradient(circle        at 65% 96%, rgba(3, 16, 50, 0.4) 0.06rem, transparent 0.06rem);  background-position: center bottom;  background-size: 100%;  bottom: -1rem;  opacity: 0;  transform: scale(2) translateY(-10px);}.tip-button__text {  color: #fff;  margin-right: 1.8rem;  opacity: 1;  position: relative;  transition: opacity 100ms linear 500ms;  z-index: 3;}.tip-button::before {  border-radius: 0.25rem;  bottom: 0;  content: '';  display: block;  height: 100%;  left: 50%;  position: absolute;  transform: translateX(-50%);  transition: height 250ms ease-in-out 400ms, width 250ms ease-in-out 300ms;  width: 100%;  z-index: 2;}.tip-button::after {  bottom: -1rem;  color: white;  content: 'thanks'; /*点击后显示的内容*/  height: 110%;  left: 0;  opacity: 0;  position: absolute;  pointer-events: none;  text-align: center;  transform: scale(0);  transform-origin: 50% 20%;  transition: transform 200ms cubic-bezier(0, 0, 0.35, 1.43);  width: 100%;  z-index: 1;}.coin-wrapper {  background: none;  bottom: 0;  height: 18rem;  left: 0;  opacity: 1;  overflow: hidden;  pointer-events: none;  position: absolute;  transform: none;  transform-origin: 50% 100%;  transition: opacity 200ms linear 100ms, transform 300ms ease-out;  width: 100%;}.coin {  --front-y-multiplier: 0;  --back-y-multiplier: 0;  --coin-y-multiplier: 0;  --coin-x-multiplier: 0;  --coin-scale-multiplier: 0;  --coin-rotation-multiplier: 0;  --shine-opacity-multiplier: 0.4;  --shine-bg-multiplier: 50%;  bottom: calc(var(--coin-y-multiplier) * 1rem - 3.5rem);  height: 3.5rem;  margin-bottom: 3.05rem;  position: absolute;  right: calc(var(--coin-x-multiplier) * 34% + 16%);  transform: translateX(50%) scale(calc(0.4 + var(--coin-scale-multiplier))) rotate(calc(var(            --coin-rotation-multiplier          ) * -1deg));  transition: opacity 100ms linear 200ms;  width: 3.5rem;  z-index: 3;}.coin__front,.coin__middle,.coin__back,.coin::before,.coin__front::after,.coin__back::after {  border-radius: 50%;  box-sizing: border-box;  height: 100%;  left: 0;  position: absolute;  width: 100%;  z-index: 3;}.coin__front {  background: radial-gradient(circle at 50% 50%, transparent 50%, rgba(115, 124, 153, 0.4) 54%, #c2cadf 54%),    linear-gradient(210deg, #8590b3 32%, transparent 32%), linear-gradient(150deg, #8590b3 32%, transparent 32%),    linear-gradient(to right, #8590b3 22%, transparent 22%, transparent 78%, #8590b3 78%), linear-gradient(      to bottom,      #fcfaf9 44%,      transparent 44%,      transparent 65%,      #fcfaf9 65%,      #fcfaf9 71%,      #8590b3 71%    ), linear-gradient(to right, transparent 28%, #fcfaf9 28%, #fcfaf9 34%, #8590b3 34%, #8590b3 40%, #fcfaf9 40%, #fcfaf9        47%, #8590b3 47%, #8590b3 53%, #fcfaf9 53%, #fcfaf9 60%, #8590b3 60%, #8590b3 66%, #fcfaf9 66%, #fcfaf9 72%, transparent        72%);  background-color: #8590b3;  background-size: 100% 100%;  transform: translateY(calc(var(--front-y-multiplier) * 0.3181818182rem / 2)) scaleY(var(--front-scale-multiplier));}.coin__front::after {  background: rgba(0, 0, 0, 0.2);  content: '';  opacity: var(--front-y-multiplier);}.coin__middle {  background: #737c99;  transform: translateY(calc(var(--middle-y-multiplier) * 0.3181818182rem / 2)) scaleY(      var(--middle-scale-multiplier)    );}.coin__back {  background: radial-gradient(circle at 50% 50%, transparent 50%, rgba(115, 124, 153, 0.4) 54%, #c2cadf 54%),    radial-gradient(circle at 50% 40%, #fcfaf9 23%, transparent 23%), radial-gradient(circle at 50% 100%, #fcfaf9        35%, transparent 35%);  background-color: #8590b3;  background-size: 100% 100%;  transform: translateY(calc(var(--back-y-multiplier) * 0.3181818182rem / 2)) scaleY(var(--back-scale-multiplier));}.coin__back::after {  background: rgba(0, 0, 0, 0.2);  content: '';  opacity: var(--back-y-multiplier);}.coin::before {  background: radial-gradient(circle at 25% 65%, transparent 50%, rgba(255, 255, 255, 0.9) 90%), linear-gradient(55deg, transparent        calc(var(--shine-bg-multiplier) + 0%), #e9f4ff calc(var(--shine-bg-multiplier) + 0%), transparent calc(var(              --shine-bg-multiplier            ) + 50%));  content: '';  opacity: var(--shine-opacity-multiplier);  transform: translateY(calc(var(--middle-y-multiplier) * 0.3181818182rem / -2)) scaleY(      var(--middle-scale-multiplier)    )    rotate(calc(var(--coin-rotation-multiplier) * 1deg));  z-index: 10;}.coin::after {  background: #737c99;  content: '';  height: 0.3181818182rem;  left: 0;  position: absolute;  top: 50%;  transform: translateY(-50%);  width: 100%;  z-index: 2;}@keyframes shake {  0% {    transform: rotate(4deg);  }  66% {    transform: rotate(-4deg);  }  100% {    transform: rotate();  }}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>bj</title>
      <link href="/blog/gallery/bj/index.html"/>
      <url>/blog/gallery/bj/index.html</url>
      
        <content type="html"><![CDATA[<div class="fj-gallery"><p><img src="https://image.cpen.top/image/bj/IMG_20210626_080442.jpg" alt=""><br><img src="https://image.cpen.top/image/bj/IMG_20210626_080450.jpg" alt=""><br><img src="https://image.cpen.top/image/bj/IMG_20210626_081927.jpg" alt=""><br><img src="https://image.cpen.top/image/bj/IMG_20210626_082005.jpg" alt=""><br><img src="https://image.cpen.top/image/bj/IMG_20210626_083343.jpg" alt=""><br><img src="https://image.cpen.top/image/bj/IMG_20210626_083531.jpg" alt=""><br><img src="https://image.cpen.top/image/bj/IMG_20210626_085053.jpg" alt=""><br><img src="https://image.cpen.top/image/bj/IMG_20210626_125643.jpg" alt=""><br><img src="https://image.cpen.top/image/bj/IMG_20210626_133145.jpg" alt=""><br><img src="https://image.cpen.top/image/bj/IMG_20210626_150522.jpg" alt=""><br><img src="https://image.cpen.top/image/bj/IMG_20210626_152054.jpg" alt=""><br><img src="https://image.cpen.top/image/bj/IMG_20210626_154440.jpg" alt=""><br><img src="https://image.cpen.top/image/bj/IMG_20210626_155028.jpg" alt=""><br><img src="https://image.cpen.top/image/bj/img-898.jpg" alt=""><br><img src="https://image.cpen.top/image/bj/lastday.jpg" alt=""></p>          </div><!-- ls ./bj |awk '{print "![](https://image.cpen.top/image/bj/"$1")"}' -->]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>表情包</title>
      <link href="/blog/gallery/emo/index.html"/>
      <url>/blog/gallery/emo/index.html</url>
      
        <content type="html"><![CDATA[<div class="fj-gallery"><p><img src="https://image.cpen.top/image/emo/035341b90f4897695297dd1f2cbbab1c.gif" alt=""><br><img src="https://image.cpen.top/image/emo/10d1c67b4a2404db.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/-1123b19b2ce969d5.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/-1142495056.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/-115bda5c9c73c9bc.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/119a3327b1584057.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/-11c68c1bf04cf286.gif" alt=""><br><img src="https://image.cpen.top/image/emo/-126b47232f283359.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/1338168140.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/-13f9e7475f098c04.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/-1412daaa4e4941ec.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/15ddc4829fe4c6d4.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/1842503db9e51f62ba13d3062badf3bd.gif" alt=""><br><img src="https://image.cpen.top/image/emo/-18543acfe335ff24.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/1874678952,1062587526.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/-18ea0787a6144d02.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/-194280128986ed7f.gif" alt=""><br><img src="https://image.cpen.top/image/emo/19ab5c2375829c05.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/-1a495ceb0ccfbad6.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/-1b9184ec1852e305.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/1ca6875d764f2abd.gif" alt=""><br><img src="https://image.cpen.top/image/emo/-1d597f58c29aee0a.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/-1d83c3bc70e59c0b.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/1f6c6885b86d2a14.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/1fe529d5b36ddc93.png" alt=""><br><img src="https://image.cpen.top/image/emo/2335a97078648bec.png" alt=""><br><img src="https://image.cpen.top/image/emo/253719271d1fbf14.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/26a468d0a2b04b98f95cf0f011de2110.gif" alt=""><br><img src="https://image.cpen.top/image/emo/27092b3258635f69.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/271748a08e213e88.png" alt=""><br><img src="https://image.cpen.top/image/emo/2735ebe0c9534b8d.gif" alt=""><br><img src="https://image.cpen.top/image/emo/-27ae82face1e7ef1.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/29211861a03c9642.png" alt=""><br><img src="https://image.cpen.top/image/emo/-29270bcd4ff53e88.gif" alt=""><br><img src="https://image.cpen.top/image/emo/-2a05d7ddcd750fa5.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/-2cb69d44740f4bbf.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/-2cf164bb053c4a4c.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/3096c9e5407b1fb.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/30a5e8744f2f0e74.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/33a99a92e0468752.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/35dfa0cdbabb0fe8.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/-363f828540faf135.png" alt=""><br><img src="https://image.cpen.top/image/emo/-36a527510994fffb.gif" alt=""><br><img src="https://image.cpen.top/image/emo/-36af9aaa30a8f575.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/38591332aabf2d6f.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/3928c0d5b0986f98.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/-3a59c45292a137c8.gif" alt=""><br><img src="https://image.cpen.top/image/emo/-3c24e7cb4c42a75c.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/3c31373ad60b1ae7.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/3c512862321de7e7.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/-3cd2fc043bb02b7d.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/-3d7f42e626051dd0.gif" alt=""><br><img src="https://image.cpen.top/image/emo/-3d85dcc7ab06b5f3.gif" alt=""><br><img src="https://image.cpen.top/image/emo/-3e53a86c1a3e43bc.gif" alt=""><br><img src="https://image.cpen.top/image/emo/-3fb816c040ae61e1.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/-413aadcd8f7e4cd0.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/-4302868ff265014a.gif" alt=""><br><img src="https://image.cpen.top/image/emo/4379d4ba9aaf7da3.gif" alt=""><br><img src="https://image.cpen.top/image/emo/44d5ae99083fb7e1.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/-4a0a67efbe302c5a.png" alt=""><br><img src="https://image.cpen.top/image/emo/4de4cc767e368de8.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/4ec73f8698678e11.gif" alt=""><br><img src="https://image.cpen.top/image/emo/-4f4fc356d9debe25.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/4f9da52936947e4a.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/507292e23a778a57.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/512x512bb..jpg" alt=""><br><img src="https://image.cpen.top/image/emo/5350a2a57e633c96.gif" alt=""><br><img src="https://image.cpen.top/image/emo/-54adc554f82b2f4f.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/54d97921b519cf1f.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/55ff959d190e2fe7.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/-569ff97d4fb404bf.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/-5722faf08c5269eb.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/-5774989af4f47615.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/58ed2db589455019.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/5aa0e42aedeb2aa5.png" alt=""><br><img src="https://image.cpen.top/image/emo/5ae373d25b53beb7.gif" alt=""><br><img src="https://image.cpen.top/image/emo/-6280ba06c8bcd02c.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/640.webp" alt=""><br><img src="https://image.cpen.top/image/emo/651a15db2acc06f014c9ee832d464435.gif" alt=""><br><img src="https://image.cpen.top/image/emo/-65728c0ffc25bbbf.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/-6662f0f1431e6769.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/-6a2243d7ed46ccb9.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/-6b1d9bd45bdc0c1a.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/-6cb2728c6d01a0f4.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/-6ccec75a117411ed.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/-6d09064fee078894.gif" alt=""><br><img src="https://image.cpen.top/image/emo/6d51b3b00c79fec3.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/6d68f47e5e084e69.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/-6daefd73e07fe8bf.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/6fc10e2a077123c5.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/-6fea1c8ff885e2f8.gif" alt=""><br><img src="https://image.cpen.top/image/emo/-72ff040dcdfb8094.png" alt=""><br><img src="https://image.cpen.top/image/emo/734f249a682a42af.png" alt=""><br><img src="https://image.cpen.top/image/emo/75f9695dd2c47101240f027961d9339e.gif" alt=""><br><img src="https://image.cpen.top/image/emo/76635b308c009761.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/779b55ce0b15f2c8.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/77a314ac9c44fc7a.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/7a8c9a93f18b4d8e.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/7afdd4b47565b619.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/7b54febf8b2ef619.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/7c1af807a76810b8.gif" alt=""><br><img src="https://image.cpen.top/image/emo/-7c824b109250a25a.png" alt=""><br><img src="https://image.cpen.top/image/emo/7d08724db54f8dfb.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/-7f799e4a7ebdcb9c.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/-7ff05aac9b1905e2.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/-818eafcd0ed192f.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/839c161cf17e8768717cf6a2f33719c9.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/8f6b37be924a819.png" alt=""><br><img src="https://image.cpen.top/image/emo/-b14ee91b77e426.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/-c9dcd51196cb166.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/-cff5c934226e03e.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/-d93f66002c4776a.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/efe111bc055046a.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/f9cfef3eedccc32.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/img.zcool.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/img-16457039496136633d9591f7bb70b8f6aa307707746994f7f284cea9dee54e7382171579c04a1.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/img-1645703959349ef73c42feef26fda99e9b684597bc23f33674dfb1c24ffa6f13d9e10b203abe7.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/img-16472517129150071d6Pily1h09e89u1kqg308c051jzo.gif" alt=""><br><img src="https://image.cpen.top/image/emo/img-164725217232516864a951bb4bafc2d2b1c2ab316653bf08e418eebe74dc5d49e13645e2e82cc.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/img-16472521759945fe4ec38ebccfe16d4a61ba07a51c61915e7ea99e4f2acd3c3603bf721dc24d7.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/img-164725217928074133ce7ea679d316ec94df8ba12f5913608880f6c5e8894cbf8ce8e318d3d5a.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/img-1647252183787fdc32999d4849cc5dfbbded3717fa76f4b75ae821458c1ba1953f396d9ee57ff.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/img-16483616527194f6f3171bddb3b958d91e73ce1fbefd44a8a332df20571f5afcc1671e82e743f.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/img-16488166100550fe819caa8b15d00a14bf24e83d8ccec378d7cfaeaa09adca93eacc2da0c967b.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/img-1648894525659c79473b3a586f1f7104e6ea4702c8f6d11b8080811da2b2679032cb3ed014e18.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/img-1649552977453685e9925e55d2f35f746f6480a4bb91fae80b4bd727f4219d1e6e32eaac829c6.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/img-1650242088859e56086c5aa31c3d1b82db2bf36fd403ae114fe26204dfab59742da971ed5b226.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/pic1.zhimg.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/u=1180582607,1205448069&amp;fm=26&amp;gp=0.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/u=1349081782,4032735104&amp;fm=26&amp;gp=0.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/u=3865695994,2205912942&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG.webp" alt=""><br><img src="https://image.cpen.top/image/emo/u=4054502171,1908265343&amp;fm=26&amp;fmt=auto&amp;gp=0.webp" alt=""><br><img src="https://image.cpen.top/image/emo/u=655667651,2586781767&amp;fm=26&amp;fmt=auto&amp;gp=0.webp" alt=""><br><img src="https://image.cpen.top/image/emo/u=95041916,1932512708&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=GIF.webp" alt=""><br><img src="https://image.cpen.top/image/emo/ZSXQ_20220309_222908146.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/mao.jpg" alt=""><br><img src="https://image.cpen.top/image/emo/%E8%B0%81%E4%B8%8D%E6%98%AF%E4%B8%80%E8%BE%B9%E5%A7%94%E5%B1%88%E7%9D%80%EF%BC%8C%E4%B8%80%E8%BE%B9%E5%8A%AA%E5%8A%9B%E5%89%8D%E8%A1%8C%E7%9D%80_109951165629612076.jpg" alt=""></p>          </div><!-- ls ../emo |awk '{print "![](https://image.cpen.top/image/emo/"$1")"}' -->]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>标签</title>
      <link href="/blog/tags/index.html"/>
      <url>/blog/tags/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>nd</title>
      <link href="/blog/gallery/nd/index.html"/>
      <url>/blog/gallery/nd/index.html</url>
      
        <content type="html"><![CDATA[<p>20210613</p><div class="fj-gallery"><p><img src="https://image.cpen.top/image/nd/bye.jpg" alt=""><br><img src="https://image.cpen.top/image/nd/%E4%B8%9C%E6%B9%966%E6%A0%8B.jpg" alt=""><br><img src="https://image.cpen.top/image/nd/%E4%B8%9C%E6%B9%966%E6%A0%8B-%E9%97%A8%E5%8F%A3.jpg" alt=""><br><img src="https://image.cpen.top/image/nd/%E4%B8%9C%E6%B9%96%E9%A3%9F%E5%A0%82-1.jpg" alt=""><br><img src="https://image.cpen.top/image/nd/%E4%B8%9C%E6%B9%96%E9%A3%9F%E5%A0%82-2.jpg" alt=""><br><img src="https://image.cpen.top/image/nd/%E4%B8%9C%E6%B2%99%E5%8F%A4%E4%BA%95-%E5%86%851.jpg" alt=""><br><img src="https://image.cpen.top/image/nd/%E4%B8%9C%E6%B2%99%E5%8F%A4%E4%BA%95-%E5%86%852.jpg" alt=""><br><img src="https://image.cpen.top/image/nd/%E4%B8%9C%E6%B2%99%E5%8F%A4%E4%BA%95-%E5%A4%96.jpg" alt=""><br><img src="https://image.cpen.top/image/nd/%E4%B8%9C%E7%94%B0.jpg" alt=""><br><img src="https://image.cpen.top/image/nd/%E4%B8%B0%E6%B3%BD%E5%85%AC%E5%AF%93-%E9%97%A8%E5%8F%A3.jpg" alt=""><br><img src="https://image.cpen.top/image/nd/%E7%BA%A2%E6%97%97%E5%B8%82%E5%9C%BA-%E5%90%8E%E9%97%A8.jpg" alt=""><br><img src="https://image.cpen.top/image/nd/%E7%BA%A2%E6%97%97%E5%B8%82%E5%9C%BA-%E5%89%8D%E9%97%A8.jpg" alt=""><br><img src="https://image.cpen.top/image/nd/%E6%B9%96%E5%8D%97%E5%86%9C%E5%AD%A6%E9%99%A2.jpg" alt=""><br><img src="https://image.cpen.top/image/nd/%E6%B9%96%E5%8D%97%E5%86%9C%E4%B8%9A%E5%A4%A7%E5%AD%A6-%E5%8D%81%E5%9B%9B%E6%95%99.jpg" alt=""><br><img src="https://image.cpen.top/image/nd/%E6%B9%96%E5%8D%97%E5%86%9C%E4%B8%9A%E5%A4%A7%E5%AD%A6-%E4%BF%AE%E4%B8%9A%E5%B9%BF%E5%9C%BA.jpg" alt=""><br><img src="https://image.cpen.top/image/nd/%E9%BB%84%E8%8A%B1%E6%9C%BA%E5%9C%BA-1.jpg" alt=""><br><img src="https://image.cpen.top/image/nd/%E9%BB%84%E8%8A%B1%E6%9C%BA%E5%9C%BA-2.jpg" alt=""><br><img src="https://image.cpen.top/image/nd/%E9%BB%84%E8%8A%B1%E6%9C%BA%E5%9C%BA-3.jpg" alt=""><br><img src="https://image.cpen.top/image/nd/%E9%BB%84%E8%8A%B1%E6%9C%BA%E5%9C%BA-4.jpg" alt=""><br><img src="https://image.cpen.top/image/nd/%E6%95%99%E5%AD%A6%E6%A5%BC-%E8%B7%AF%E8%BE%B9.jpg" alt=""><br><img src="https://image.cpen.top/image/nd/%E9%87%91%E5%B2%B81%E6%A0%8B.jpg" alt=""><br><img src="https://image.cpen.top/image/nd/%E9%87%91%E5%B2%B81%E6%A0%8B-%E9%97%A8%E5%8F%A3.jpg" alt=""><br><img src="https://image.cpen.top/image/nd/%E9%87%91%E5%B2%B8%E5%85%AC%E5%AF%93-%E9%97%A8%E5%8F%A3.jpg" alt=""><br><img src="https://image.cpen.top/image/nd/%E4%B9%9D%E6%95%99.jpg" alt=""><br><img src="https://image.cpen.top/image/nd/%E5%86%9C%E5%A4%A7%E5%90%8E%E9%97%A8-1.jpg" alt=""><br><img src="https://image.cpen.top/image/nd/%E5%86%9C%E5%A4%A7%E5%90%8E%E9%97%A8-2.jpg" alt=""><br><img src="https://image.cpen.top/image/nd/%E4%B8%83%E6%95%99.jpg" alt=""><br><img src="https://image.cpen.top/image/nd/%E5%8D%81%E6%95%99-%E5%90%8E%E9%97%A8.jpg" alt=""><br><img src="https://image.cpen.top/image/nd/%E5%8D%81%E6%95%99-%E6%AD%A3%E9%97%A8.jpg" alt=""><br><img src="https://image.cpen.top/image/nd/%E5%8D%81%E6%95%99-%E6%AD%A3%E9%97%A8%E5%86%85.jpg" alt=""><br><img src="https://image.cpen.top/image/nd/%E5%8D%81%E4%B8%89%E6%95%99-%E4%BF%A1%E6%81%AF%E9%99%A2.jpg" alt=""><br><img src="https://image.cpen.top/image/nd/%E5%8D%81%E4%BA%94%E6%95%99-%E5%8C%96%E6%9D%90%E9%99%A2.jpg" alt=""><br><img src="https://image.cpen.top/image/nd/%E5%AE%BF%E8%88%8D.jpg" alt=""><br><img src="https://image.cpen.top/image/nd/%E6%96%87%E6%B8%8A%E9%A6%86.jpg" alt=""><br><img src="https://image.cpen.top/image/nd/%E8%A5%BF%E7%94%B0.jpg" alt=""><br><img src="https://image.cpen.top/image/nd/%E6%A0%A1%E5%8C%BB%E9%99%A2.jpg" alt=""><br><img src="https://image.cpen.top/image/nd/%E4%BF%AE%E4%B8%9A%E5%AD%A6%E5%A0%82-%E5%8F%8D%E9%9D%A2.jpg" alt=""><br><img src="https://image.cpen.top/image/nd/%E4%BF%AE%E4%B8%9A%E5%AD%A6%E5%A0%82-%E6%AD%A3%E9%9D%A2.jpg" alt=""><br><img src="https://image.cpen.top/image/nd/%E8%8A%B7%E5%85%B09%E6%A0%8B.jpg" alt=""><br><img src="https://image.cpen.top/image/nd/%E8%8A%B7%E5%85%B09%E6%A0%8B-306.jpg" alt=""><br><img src="https://image.cpen.top/image/nd/%E8%8A%B7%E5%85%B09%E6%A0%8B-3%E6%A5%BC.jpg" alt=""><br><img src="https://image.cpen.top/image/nd/%E8%8A%B7%E5%85%B0%E4%BA%8C%E9%A3%9F%E5%A0%82-%E9%A5%AD%E8%8F%9C.jpg" alt=""><br><img src="https://image.cpen.top/image/nd/%E8%8A%B7%E5%85%B0%E5%85%AC%E5%AF%93-%E9%97%A8%E5%8F%A3.jpg" alt=""></p>          </div><!-- ls ./nd |awk '{print "![](https://image.cpen.top/image/nd/"$1")"}' -->]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>壁纸</title>
      <link href="/blog/gallery/wallpaper/index.html"/>
      <url>/blog/gallery/wallpaper/index.html</url>
      
        <content type="html"><![CDATA[<div class="fj-gallery"><p><img src="https://image.cpen.top/image/wallpaper/1.jpg" alt=""><br><img src="https://image.cpen.top/image/wallpaper/4.jpg" alt=""><br><img src="https://image.cpen.top/image/wallpaper/Astronaut.jpg" alt=""><br><img src="https://image.cpen.top/image/wallpaper/Drowing_in_Space.jpg" alt=""><br><img src="https://image.cpen.top/image/wallpaper/dx.jpg" alt=""><br><img src="https://image.cpen.top/image/wallpaper/Miku.jpg" alt=""><br><img src="https://image.cpen.top/image/wallpaper/Neon.jpg" alt=""><br><img src="https://image.cpen.top/image/wallpaper/rog-abstract-eu.bmp" alt=""><br><img src="https://image.cpen.top/image/wallpaper/SOTTR_Wallpaper_2560x1400.jpg" alt=""><br><img src="https://image.cpen.top/image/wallpaper/%E5%88%9B%E6%84%8F%E5%B7%A5%E5%9D%8A01.jpg" alt=""><br><img src="https://image.cpen.top/image/wallpaper/%E4%B8%9C%E4%BA%AC%E5%96%B0%E7%A7%8D_01%E8%91%A3%E9%A6%99.jpg" alt=""><br><img src="https://image.cpen.top/image/wallpaper/%E6%96%97%E7%A0%B4%E8%8B%8D%E7%A9%B9_01%E7%BE%8E%E6%9D%9C%E8%8E%8E.png" alt=""><br><img src="https://image.cpen.top/image/wallpaper/%E6%96%97%E7%A0%B4%E8%8B%8D%E7%A9%B9_01%E7%BE%8E%E6%9D%9C%E8%8E%8E_%E9%95%BF%E5%9B%BE.jpg" alt=""><br><img src="https://image.cpen.top/image/wallpaper/%E6%96%97%E7%A0%B4%E8%8B%8D%E7%A9%B9_02%E7%BE%8E%E6%9D%9C%E8%8E%8E.png" alt=""><br><img src="https://image.cpen.top/image/wallpaper/%E6%96%97%E7%A0%B4%E8%8B%8D%E7%A9%B9_03%E7%BE%8E%E6%9D%9C%E8%8E%8E.png" alt=""><br><img src="https://image.cpen.top/image/wallpaper/%E9%A3%8E%E6%99%AF_01.png" alt=""><br><img src="https://image.cpen.top/image/wallpaper/%E9%A3%8E%E6%99%AF_02.jpg" alt=""><br><img src="https://image.cpen.top/image/wallpaper/%E9%A3%8E%E6%99%AF_03.jpg" alt=""><br><img src="https://image.cpen.top/image/wallpaper/%E9%A3%8E%E6%99%AF_04.jpg" alt=""><br><img src="https://image.cpen.top/image/wallpaper/%E5%B0%91%E5%A5%B3.jpg" alt=""><br><img src="https://image.cpen.top/image/wallpaper/%E9%94%81%E5%B1%8F%E5%A3%81%E7%BA%B8_01.jpg" alt=""><br><img src="https://image.cpen.top/image/wallpaper/%E5%A4%8F%E5%A4%9C_01.jpg" alt=""><br><img src="https://image.cpen.top/image/wallpaper/%E5%A4%8F%E5%A4%9C_02.png" alt=""><br><img src="https://image.cpen.top/image/wallpaper/%E6%98%9F%E7%A9%BA%E5%B0%91%E5%A5%B3.jpg" alt=""></p>          </div><!-- ls ../emo |awk '{print "![](https://image.cpen.top/image/emo/"$1")"}' -->]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/blog/js/coin/coin.js"/>
      <url>/blog/js/coin/coin.js</url>
      
        <content type="html"><![CDATA[var tipButtons = document.querySelectorAll('.tip-button');function coinAudio() {  var coinAudio = document.getElementById('coinAudio');  if (coinAudio) {    coinAudio.play(); //有音频时播放  }}// Loop through all buttons (allows for multiple buttons on page)tipButtons.forEach(button => {  var coin = button.querySelector('.coin');  // The larger the number, the slower the animation  coin.maxMoveLoopCount = 90;  button.addEventListener('click', () => {    if (/Android|webOS|BlackBerry/i.test(navigator.userAgent)) return true; //媒体选择    if (button.clicked) return;    button.classList.add('clicked');    // Wait to start flipping th coin because of the button tilt animation    setTimeout(() => {      // Randomize the flipping speeds just for fun      coin.sideRotationCount = Math.floor(Math.random() * 5) * 90;      coin.maxFlipAngle = (Math.floor(Math.random() * 4) + 3) * Math.PI;      button.clicked = true;      flipCoin();      coinAudio();    }, 50);  });  var flipCoin = () => {    coin.moveLoopCount = 0;    flipCoinLoop();  };  var resetCoin = () => {    coin.style.setProperty('--coin-x-multiplier', 0);    coin.style.setProperty('--coin-scale-multiplier', 0);    coin.style.setProperty('--coin-rotation-multiplier', 0);    coin.style.setProperty('--shine-opacity-multiplier', 0.4);    coin.style.setProperty('--shine-bg-multiplier', '50%');    coin.style.setProperty('opacity', 1);    // Delay to give the reset animation some time before you can click again    setTimeout(() => {      button.clicked = false;    }, 300);  };  var flipCoinLoop = () => {    coin.moveLoopCount++;    var percentageCompleted = coin.moveLoopCount / coin.maxMoveLoopCount;    coin.angle = -coin.maxFlipAngle * Math.pow(percentageCompleted - 1, 2) + coin.maxFlipAngle;    // Calculate the scale and position of the coin moving through the air    coin.style.setProperty('--coin-y-multiplier', -11 * Math.pow(percentageCompleted * 2 - 1, 4) + 11);    coin.style.setProperty('--coin-x-multiplier', percentageCompleted);    coin.style.setProperty('--coin-scale-multiplier', percentageCompleted * 0.6);    coin.style.setProperty('--coin-rotation-multiplier', percentageCompleted * coin.sideRotationCount);    // Calculate the scale and position values for the different coin faces    // The math uses sin/cos wave functions to similate the circular motion of 3D spin    coin.style.setProperty('--front-scale-multiplier', Math.max(Math.cos(coin.angle), 0));    coin.style.setProperty('--front-y-multiplier', Math.sin(coin.angle));    coin.style.setProperty('--middle-scale-multiplier', Math.abs(Math.cos(coin.angle), 0));    coin.style.setProperty('--middle-y-multiplier', Math.cos((coin.angle + Math.PI / 2) % Math.PI));    coin.style.setProperty('--back-scale-multiplier', Math.max(Math.cos(coin.angle - Math.PI), 0));    coin.style.setProperty('--back-y-multiplier', Math.sin(coin.angle - Math.PI));    coin.style.setProperty('--shine-opacity-multiplier', 4 * Math.sin((coin.angle + Math.PI / 2) % Math.PI) - 3.2);    coin.style.setProperty(      '--shine-bg-multiplier',      -40 * (Math.cos((coin.angle + Math.PI / 2) % Math.PI) - 0.5) + '%'    );    // Repeat animation loop    if (coin.moveLoopCount < coin.maxMoveLoopCount) {      if (coin.moveLoopCount === coin.maxMoveLoopCount - 6) button.classList.add('shrink-landing');      window.requestAnimationFrame(flipCoinLoop);    } else {      button.classList.add('coin-landed');      coin.style.setProperty('opacity', 0);      setTimeout(() => {        button.classList.remove('clicked', 'shrink-landing', 'coin-landed');        setTimeout(() => {          resetCoin();        }, 300);      }, 1500);    }  };});]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>视频收藏 ✨</title>
      <link href="/blog/video/index.html"/>
      <url>/blog/video/index.html</url>
      
        <content type="html"><![CDATA[<p style="font-size:28px"><b>🙋 免责声明</b></p><ul>    <li>视频来源于 <a href="https://www.bilibili.com/">哔哩哔哩</a>，仅供学习和研究使用，版权归作者所有，如果无意之中侵犯了您的版权，请来信告知。本站将在第一时间删除！本站不参与商业性网站、下载站、视频站等。</li>    <li>本站以分享互联网经验、学习知识为目的，所有文章所涉及使用的工具、资源等均来自互联网， 仅供学习和研究使用，版权归作者所有，如果无意之中侵犯了您的版权，请来信告知。本站将在第一时间删除！另外， 本站内的文章多为博主原创，大部分是由CSDN平台搬迁过来，仅供学习交流之用，不参与商业用途。</li>    <li>遵守相关法律法规，由于本站资源部分来源于网络，开发也是使用开源模板，故无法核实资源侵权的真实性，无论出于何种目的要求本站删除内容，“您”均需要提供相关证明，否则不予处理。</li></ul><script src="https://unpkg.com/jquery@latest/dist/jquery.min.js"></script><script>function selectVideo(id){    var src=$("#video-item-"+id).attr("data-src");    $("#video-select").html("<iframe id='video-iframe' src='"+src+"' scrolling='no' border='0' frameborder='no' framespacing='0' allowfullscreen='true'> </iframe>");    var iframe = document.getElementById("video-select")    if(iframe.attachEvent){      iframe.attachEvent("onreadystatechange", function() {        if (iframe.readyState === "complete" || iframe.readyState == "loaded") {          iframe.detachEvent("onreadystatechange", arguments.callee);        if (document.getElementsByClassName('video-mirror').length>0) {          console.log("1true")          $(".video-mirror").attr("style","transform:scaleX(-1);")          }        }      });    }else{      iframe.addEventListener("load", function() {        this.removeEventListener("load", arguments.call, false);      if (document.getElementsByClassName('video-mirror').length>0) {        console.log("2true")        $(".video-mirror").attr("style","transform:scaleX(-1);")      }      }, false);    }}$(document).ready(selectVideo(0));</script>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>更新日志</title>
      <link href="/blog/update/index.html"/>
      <url>/blog/update/index.html</url>
      
        <content type="html"><![CDATA[<div class="timeline blue"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>更新日志</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2022-08-29 ~ 2022-09-17 (20天)</p></div></div><div class='timeline-item-content'><ol><li>搭建博客<ol><li>Pure：<a href="https://blog.cpen.top/">https://blog.cpen.top/</a>, <a href="https://mycpen.github.io/">https://mycpen.github.io/</a>, <a href="https://mycpen.gitee.io/">https://mycpen.gitee.io/</a></li><li>Butterfly：<a href="https://cpen.top/">https://cpen.top/</a>, <a href="https://mycpen.github.io/blog/">https://mycpen.github.io/blog/</a></li></ol></li><li>上传文章 44 篇<ul><li>Django 1~4, Hexo 1~4, Java 1~3, Linux 1~22, PHP 1, Python 1~10</li></ul></li><li>搭建参考<ul><li><a href="https://hexo.io/zh-cn/">Hexo 官方文档</a>, <a href="https://github.com/cofess/hexo-theme-pure">hexo-theme-pure</a>, <a href="https://github.com/jerryc127/hexo-theme-butterfly">hexo-theme-butterfly</a></li><li><a href="https://hwame.top/">鴻塵 Blog</a>, <a href="https://anzhiy.cn/">安知鱼 Blog</a>, <a href="https://tzy1997.com/">唐志远 Blog</a>, <a href="https://akilar.top/">Akilar Blog</a>, <a href="https://blog.zhheo.com/">张洪Heo Blog</a>, <a href="https://blog.justlovesmile.top/">Justlovesmile Blog</a>, <a href="https://blog.eurkon.com/about/">Eurkon Blog</a></li></ul></li></ol></div></div></div>]]></content>
      
    </entry>
    
    
  
</search>
